let t,e,r,n,i,s,o,a,l,u,c,h,d,f,g,p;function m(t){return t&&t.__esModule?t.default:t}function w(t,e){return Object.keys(e).forEach(function(r){"default"===r||"__esModule"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})}),t}function y(t,e,r,n){Object.defineProperty(t,e,{get:r,set:n,enumerable:!0,configurable:!0})}var A,E,b,C,I,_,S,T,v,N,R,O,D,M,x,B,P,L,k,F,U,H,V,z,G,j,Q,W,Y,X,q,K,Z,J,$,tt,te,tr,tn,ti,ts,to,ta,tl,tu,tc,th,td,tf,tg,tp,tm,tw,ty,tA,tE,tb,tC,tI,t_,tS,tT,tv,tN,tR,tO,tD,tM,tx,tB,tP,tL,tk,tF=globalThis,tU={},tH={},tV=tF.parcelRequired9d6;null==tV&&((tV=function(t){if(t in tU)return tU[t].exports;if(t in tH){var e=tH[t];delete tH[t];var r={id:t,exports:{}};return tU[t]=r,e.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){tH[t]=e},tF.parcelRequired9d6=tV);var tz=tV.register;tz("fx8Cc",function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateBasic=e.wNAF=void 0;var r=tV("6rvIJ"),n=tV("k39vF");let i=BigInt(0),s=BigInt(1);e.wNAF=function(t,e){let r=(t,e)=>{let r=e.negate();return t?r:e},n=t=>({windows:Math.ceil(e/t)+1,windowSize:2**(t-1)});return{constTimeNegate:r,unsafeLadder(e,r){let n=t.ZERO,o=e;for(;r>i;)r&s&&(n=n.add(o)),o=o.double(),r>>=s;return n},precomputeWindow(t,e){let{windows:r,windowSize:i}=n(e),s=[],o=t,a=o;for(let t=0;t<r;t++){a=o,s.push(a);for(let t=1;t<i;t++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(e,i,o){let{windows:a,windowSize:l}=n(e),u=t.ZERO,c=t.BASE,h=BigInt(2**e-1),d=2**e,f=BigInt(e);for(let t=0;t<a;t++){let e=t*l,n=Number(o&h);o>>=f,n>l&&(n-=d,o+=s);let a=e+Math.abs(n)-1,g=t%2!=0,p=n<0;0===n?c=c.add(r(g,i[e])):u=u.add(r(p,i[a]))}return{p:u,f:c}},wNAFCached(t,e,r,n){let i=t._WINDOW_SIZE||1,s=e.get(t);return s||(s=this.precomputeWindow(t,i),1!==i&&e.set(t,n(s))),this.wNAF(i,s,r)}}},e.validateBasic=function(t){return(0,r.validateField)(t.Fp),(0,n.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}}),tz("6rvIJ",function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.mapHashToField=t.exports.getMinHashLength=t.exports.getFieldBytesLength=t.exports.hashToPrivateScalar=t.exports.FpSqrtEven=t.exports.FpSqrtOdd=t.exports.Field=t.exports.nLength=t.exports.FpIsSquare=t.exports.FpDiv=t.exports.FpInvertBatch=t.exports.FpPow=t.exports.validateField=t.exports.isNegativeLE=t.exports.FpSqrt=t.exports.tonelliShanks=t.exports.invert=t.exports.pow2=t.exports.pow=t.exports.mod=void 0;var r=tV("k39vF");let n=BigInt(0),i=BigInt(1),s=BigInt(2),o=BigInt(3),a=BigInt(4),l=BigInt(5),u=BigInt(8);function c(t,e){let r=t%e;return r>=n?r:e+r}function h(t,e,r){if(r<=n||e<n)throw Error("Expected power/modulo > 0");if(r===i)return n;let s=i;for(;e>n;)e&i&&(s=s*t%r),t=t*t%r,e>>=i;return s}function d(t,e){if(t===n||e<=n)throw Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=c(t,e),s=e,o=n,a=i,l=i,u=n;for(;r!==n;){let t=s/r,e=s%r,n=o-l*t,i=a-u*t;s=r,r=e,o=l,a=u,l=n,u=i}if(s!==i)throw Error("invert: does not exist");return c(o,e)}function f(t){let e,r,o,l=(t-i)/s;for(e=t-i,r=0;e%s===n;e/=s,r++);for(o=s;o<t&&h(o,l,t)!==t-i;o++);if(1===r){let e=(t+i)/a;return function(t,r){let n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw Error("Cannot find square root");return n}}let u=(e+i)/s;return function(t,n){if(t.pow(n,l)===t.neg(t.ONE))throw Error("Cannot find square root");let s=r,a=t.pow(t.mul(t.ONE,o),e),c=t.pow(n,u),h=t.pow(n,e);for(;!t.eql(h,t.ONE);){if(t.eql(h,t.ZERO))return t.ZERO;let e=1;for(let r=t.sqr(h);e<s&&!t.eql(r,t.ONE);e++)r=t.sqr(r);let r=t.pow(a,i<<BigInt(s-e-1));a=t.sqr(r),c=t.mul(c,r),h=t.mul(h,a),s=e}return c}}function g(t){if(t%a===o){let e=(t+i)/a;return function(t,r){let n=t.pow(r,e);if(!t.eql(t.sqr(n),r))throw Error("Cannot find square root");return n}}if(t%u===l){let e=(t-l)/u;return function(t,r){let n=t.mul(r,s),i=t.pow(n,e),o=t.mul(r,i),a=t.mul(t.mul(o,s),i),l=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(l),r))throw Error("Cannot find square root");return l}}return f(t)}BigInt(9),BigInt(16),t.exports.mod=c,t.exports.pow=h,t.exports.pow2=function(t,e,r){let i=t;for(;e-- >n;)i*=i,i%=r;return i},t.exports.invert=d,t.exports.tonelliShanks=f,t.exports.FpSqrt=g,t.exports.isNegativeLE=(t,e)=>(c(t,e)&i)===i;let p=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m(t,e,r){if(r<n)throw Error("Expected power > 0");if(r===n)return t.ONE;if(r===i)return e;let s=t.ONE,o=e;for(;r>n;)r&i&&(s=t.mul(s,o)),o=t.sqr(o),r>>=i;return s}function w(t,e){let r=Array(e.length),n=e.reduce((e,n,i)=>t.is0(n)?e:(r[i]=e,t.mul(e,n)),t.ONE),i=t.inv(n);return e.reduceRight((e,n,i)=>t.is0(n)?e:(r[i]=t.mul(e,r[i]),t.mul(e,n)),i),r}function y(t,e){let r=void 0!==e?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function A(t){if("bigint"!=typeof t)throw Error("field order must be bigint");return Math.ceil(t.toString(2).length/8)}function E(t){let e=A(t);return e+Math.ceil(e/2)}t.exports.validateField=function(t){let e=p.reduce((t,e)=>(t[e]="function",t),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(t,e)},t.exports.FpPow=m,t.exports.FpInvertBatch=w,t.exports.FpDiv=function(t,e,r){return t.mul(e,"bigint"==typeof r?d(r,t.ORDER):t.inv(r))},t.exports.FpIsSquare=function(t){let e=(t.ORDER-i)/s;return r=>{let n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}},t.exports.nLength=y,t.exports.Field=function(t,e,s=!1,o={}){if(t<=n)throw Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:a,nByteLength:l}=y(t,e);if(l>2048)throw Error("Field lengths over 2048 bytes are not supported");let u=g(t),h=Object.freeze({ORDER:t,BITS:a,BYTES:l,MASK:(0,r.bitMask)(a),ZERO:n,ONE:i,create:e=>c(e,t),isValid:e=>{if("bigint"!=typeof e)throw Error(`Invalid field element: expected bigint, got ${typeof e}`);return n<=e&&e<t},is0:t=>t===n,isOdd:t=>(t&i)===i,neg:e=>c(-e,t),eql:(t,e)=>t===e,sqr:e=>c(e*e,t),add:(e,r)=>c(e+r,t),sub:(e,r)=>c(e-r,t),mul:(e,r)=>c(e*r,t),pow:(t,e)=>m(h,t,e),div:(e,r)=>c(e*d(r,t),t),sqrN:t=>t*t,addN:(t,e)=>t+e,subN:(t,e)=>t-e,mulN:(t,e)=>t*e,inv:e=>d(e,t),sqrt:o.sqrt||(t=>u(h,t)),invertBatch:t=>w(h,t),cmov:(t,e,r)=>r?e:t,toBytes:t=>s?(0,r.numberToBytesLE)(t,l):(0,r.numberToBytesBE)(t,l),fromBytes:t=>{if(t.length!==l)throw Error(`Fp.fromBytes: expected ${l}, got ${t.length}`);return s?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t)}});return Object.freeze(h)},t.exports.FpSqrtOdd=function(t,e){if(!t.isOdd)throw Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)},t.exports.FpSqrtEven=function(t,e){if(!t.isOdd)throw Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r},t.exports.hashToPrivateScalar=function(t,e,n=!1){let s=(t=(0,r.ensureBytes)("privateHash",t)).length,o=y(e).nByteLength+8;if(o<24||s<o||s>1024)throw Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${s}`);return c(n?(0,r.bytesToNumberLE)(t):(0,r.bytesToNumberBE)(t),e-i)+i},t.exports.getFieldBytesLength=A,t.exports.getMinHashLength=E,t.exports.mapHashToField=function(t,e,n=!1){let s=t.length,o=A(e),a=E(e);if(s<16||s<a||s>1024)throw Error(`expected ${a}-1024 bytes of input, got ${s}`);let l=c(n?(0,r.bytesToNumberBE)(t):(0,r.bytesToNumberLE)(t),e-i)+i;return n?(0,r.numberToBytesLE)(l,o):(0,r.numberToBytesBE)(l,o)}}),tz("k39vF",function(t,e){Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.validateObject=t.exports.createHmacDrbg=t.exports.bitMask=t.exports.bitSet=t.exports.bitGet=t.exports.bitLen=t.exports.utf8ToBytes=t.exports.equalBytes=t.exports.concatBytes=t.exports.ensureBytes=t.exports.numberToVarBytesBE=t.exports.numberToBytesLE=t.exports.numberToBytesBE=t.exports.bytesToNumberLE=t.exports.bytesToNumberBE=t.exports.hexToBytes=t.exports.hexToNumber=t.exports.numberToHexUnpadded=t.exports.bytesToHex=void 0;let r=BigInt(0),n=BigInt(1),i=BigInt(2),s=t=>t instanceof Uint8Array,o=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function a(t){if(!s(t))throw Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=o[t[r]];return e}function l(t){let e=t.toString(16);return 1&e.length?`0${e}`:e}function u(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);return BigInt(""===t?"0":`0x${t}`)}function c(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){let n=2*e,i=Number.parseInt(t.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[e]=i}return r}function h(t,e){return c(t.toString(16).padStart(2*e,"0"))}function d(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),r=0;return t.forEach(t=>{if(!s(t))throw Error("Uint8Array expected");e.set(t,r),r+=t.length}),e}t.exports.bytesToHex=a,t.exports.numberToHexUnpadded=l,t.exports.hexToNumber=u,t.exports.hexToBytes=c,t.exports.bytesToNumberBE=function(t){return u(a(t))},t.exports.bytesToNumberLE=function(t){if(!s(t))throw Error("Uint8Array expected");return u(a(Uint8Array.from(t).reverse()))},t.exports.numberToBytesBE=h,t.exports.numberToBytesLE=function(t,e){return h(t,e).reverse()},t.exports.numberToVarBytesBE=function(t){return c(l(t))},t.exports.ensureBytes=function(t,e,r){let n;if("string"==typeof e)try{n=c(e)}catch(r){throw Error(`${t} must be valid hex string, got "${e}". Cause: ${r}`)}else if(s(e))n=Uint8Array.from(e);else throw Error(`${t} must be hex string or Uint8Array`);let i=n.length;if("number"==typeof r&&i!==r)throw Error(`${t} expected ${r} bytes, got ${i}`);return n},t.exports.concatBytes=d,t.exports.equalBytes=function(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},t.exports.utf8ToBytes=function(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))},t.exports.bitLen=function(t){let e;for(e=0;t>r;t>>=n,e+=1);return e},t.exports.bitGet=function(t,e){return t>>BigInt(e)&n},t.exports.bitSet=(t,e,i)=>t|(i?n:r)<<BigInt(e),t.exports.bitMask=t=>(i<<BigInt(t-1))-n;let f=t=>new Uint8Array(t),g=t=>Uint8Array.from(t);t.exports.createHmacDrbg=function(t,e,r){if("number"!=typeof t||t<2)throw Error("hashLen must be a number");if("number"!=typeof e||e<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=f(t),i=f(t),s=0,o=()=>{n.fill(1),i.fill(0),s=0},a=(...t)=>r(i,n,...t),l=(t=f())=>{i=a(g([0]),t),n=a(),0!==t.length&&(i=a(g([1]),t),n=a())},u=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let t=0,r=[];for(;t<e;){let e=(n=a()).slice();r.push(e),t+=n.length}return d(...r)};return(t,e)=>{let r;for(o(),l(t);!(r=e(u()));)l();return o(),r}};let p={bigint:t=>"bigint"==typeof t,function:t=>"function"==typeof t,boolean:t=>"boolean"==typeof t,string:t=>"string"==typeof t,stringOrUint8Array:t=>"string"==typeof t||t instanceof Uint8Array,isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>"function"==typeof t&&Number.isSafeInteger(t.outputLen)};t.exports.validateObject=function(t,e,r={}){let n=(e,r,n)=>{let i=p[r];if("function"!=typeof i)throw Error(`Invalid validator "${r}", expected function`);let s=t[e];if((!n||void 0!==s)&&!i(s,t))throw Error(`Invalid param ${String(e)}=${s} (${typeof s}), expected ${r}`)};for(let[t,r]of Object.entries(e))n(t,r,!1);for(let[t,e]of Object.entries(r))n(t,e,!0);return t}});var tG={};y(tG,"popperGenerator",()=>e8),y(tG,"detectOverflow",()=>eq),y(tG,"createPopperBase",()=>e6),y(tG,"createPopper",()=>e5),y(tG,"createPopperLite",()=>e7);var tj={};y(tj,"top",()=>tQ),y(tj,"bottom",()=>tW),y(tj,"right",()=>tY),y(tj,"left",()=>tX),y(tj,"auto",()=>tq),y(tj,"basePlacements",()=>tK),y(tj,"start",()=>tZ),y(tj,"end",()=>tJ),y(tj,"clippingParents",()=>t$),y(tj,"viewport",()=>t1),y(tj,"popper",()=>t0),y(tj,"reference",()=>t2),y(tj,"variationPlacements",()=>t3),y(tj,"placements",()=>t4),y(tj,"beforeRead",()=>t8),y(tj,"read",()=>t6),y(tj,"afterRead",()=>t5),y(tj,"beforeMain",()=>t7),y(tj,"main",()=>t9),y(tj,"afterMain",()=>et),y(tj,"beforeWrite",()=>ee),y(tj,"write",()=>er),y(tj,"afterWrite",()=>en),y(tj,"modifierPhases",()=>ei);var tQ="top",tW="bottom",tY="right",tX="left",tq="auto",tK=[tQ,tW,tY,tX],tZ="start",tJ="end",t$="clippingParents",t1="viewport",t0="popper",t2="reference",t3=tK.reduce(function(t,e){return t.concat([e+"-"+tZ,e+"-"+tJ])},[]),t4=[].concat(tK,[tq]).reduce(function(t,e){return t.concat([e,e+"-"+tZ,e+"-"+tJ])},[]),t8="beforeRead",t6="read",t5="afterRead",t7="beforeMain",t9="main",et="afterMain",ee="beforeWrite",er="write",en="afterWrite",ei=[t8,t6,t5,t7,t9,et,ee,er,en],es={};function eo(t){return t?(t.nodeName||"").toLowerCase():null}function ea(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function el(t){var e=ea(t).Element;return t instanceof e||t instanceof Element}function eu(t){var e=ea(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function ec(t){if("undefined"==typeof ShadowRoot)return!1;var e=ea(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}y(es,"applyStyles",()=>eh),y(es,"arrow",()=>eD),y(es,"computeStyles",()=>eP),y(es,"eventListeners",()=>ek),y(es,"flip",()=>eK),y(es,"hide",()=>e$),y(es,"offset",()=>e1),y(es,"popperOffsets",()=>e0),y(es,"preventOverflow",()=>e2);var eh={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},n=e.attributes[t]||{},i=e.elements[t];eu(i)&&eo(i)&&(Object.assign(i.style,r),Object.keys(n).forEach(function(t){var e=n[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)}))})},effect:function(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(t){var n=e.elements[t],i=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:r[t]).reduce(function(t,e){return t[e]="",t},{});eu(n)&&eo(n)&&(Object.assign(n.style,s),Object.keys(i).forEach(function(t){n.removeAttribute(t)}))})}},requires:["computeStyles"]};function ed(t){return t.split("-")[0]}var ef=Math.max,eg=Math.min,ep=Math.round;function em(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function ew(){return!/^((?!chrome|android).)*safari/i.test(em())}function ey(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=!1);var n=t.getBoundingClientRect(),i=1,s=1;e&&eu(t)&&(i=t.offsetWidth>0&&ep(n.width)/t.offsetWidth||1,s=t.offsetHeight>0&&ep(n.height)/t.offsetHeight||1);var o=(el(t)?ea(t):window).visualViewport,a=!ew()&&r,l=(n.left+(a&&o?o.offsetLeft:0))/i,u=(n.top+(a&&o?o.offsetTop:0))/s,c=n.width/i,h=n.height/s;return{width:c,height:h,top:u,right:l+c,bottom:u+h,left:l,x:l,y:u}}function eA(t){var e=ey(t),r=t.offsetWidth,n=t.offsetHeight;return 1>=Math.abs(e.width-r)&&(r=e.width),1>=Math.abs(e.height-n)&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function eE(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&ec(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function eb(t){return ea(t).getComputedStyle(t)}function eC(t){return((el(t)?t.ownerDocument:t.document)||window.document).documentElement}function eI(t){return"html"===eo(t)?t:t.assignedSlot||t.parentNode||(ec(t)?t.host:null)||eC(t)}function e_(t){return eu(t)&&"fixed"!==eb(t).position?t.offsetParent:null}function eS(t){for(var e=ea(t),r=e_(t);r&&["table","td","th"].indexOf(eo(r))>=0&&"static"===eb(r).position;)r=e_(r);return r&&("html"===eo(r)||"body"===eo(r)&&"static"===eb(r).position)?e:r||function(t){var e=/firefox/i.test(em());if(/Trident/i.test(em())&&eu(t)&&"fixed"===eb(t).position)return null;var r=eI(t);for(ec(r)&&(r=r.host);eu(r)&&0>["html","body"].indexOf(eo(r));){var n=eb(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||e&&"filter"===n.willChange||e&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(t)||e}function eT(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ev(t,e,r){return ef(t,eg(e,r))}function eN(){return{top:0,right:0,bottom:0,left:0}}function eR(t){return Object.assign({},eN(),t)}function eO(t,e){return e.reduce(function(e,r){return e[r]=t,e},{})}var eD={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,r=t.state,n=t.name,i=t.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=ed(r.placement),l=eT(a),u=[tX,tY].indexOf(a)>=0?"height":"width";if(s&&o){var c,h=(c=i.padding,eR("number"!=typeof(c="function"==typeof c?c(Object.assign({},r.rects,{placement:r.placement})):c)?c:eO(c,tK))),d=eA(s),f="y"===l?tQ:tX,g="y"===l?tW:tY,p=r.rects.reference[u]+r.rects.reference[l]-o[l]-r.rects.popper[u],m=o[l]-r.rects.reference[l],w=eS(s),y=w?"y"===l?w.clientHeight||0:w.clientWidth||0:0,A=h[f],E=y-d[u]-h[g],b=y/2-d[u]/2+(p/2-m/2),C=ev(A,b,E);r.modifiersData[n]=((e={})[l]=C,e.centerOffset=C-b,e)}},effect:function(t){var e=t.state,r=t.options.element,n=void 0===r?"[data-popper-arrow]":r;if(null!=n)("string"!=typeof n||(n=e.elements.popper.querySelector(n)))&&eE(e.elements.popper,n)&&(e.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function eM(t){return t.split("-")[1]}var ex={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eB(t){var e,r,n,i,s,o,a,l=t.popper,u=t.popperRect,c=t.placement,h=t.variation,d=t.offsets,f=t.position,g=t.gpuAcceleration,p=t.adaptive,m=t.roundOffsets,w=t.isFixed,y=d.x,A=void 0===y?0:y,E=d.y,b=void 0===E?0:E,C="function"==typeof m?m({x:A,y:b}):{x:A,y:b};A=C.x,b=C.y;var I=d.hasOwnProperty("x"),_=d.hasOwnProperty("y"),S=tX,T=tQ,v=window;if(p){var N=eS(l),R="clientHeight",O="clientWidth";N===ea(l)&&"static"!==eb(N=eC(l)).position&&"absolute"===f&&(R="scrollHeight",O="scrollWidth"),(c===tQ||(c===tX||c===tY)&&h===tJ)&&(T=tW,b-=(w&&N===v&&v.visualViewport?v.visualViewport.height:N[R])-u.height,b*=g?1:-1),(c===tX||(c===tQ||c===tW)&&h===tJ)&&(S=tY,A-=(w&&N===v&&v.visualViewport?v.visualViewport.width:N[O])-u.width,A*=g?1:-1)}var D=Object.assign({position:f},p&&ex),M=!0===m?(e={x:A,y:b},r=ea(l),n=e.x,i=e.y,{x:ep(n*(s=r.devicePixelRatio||1))/s||0,y:ep(i*s)/s||0}):{x:A,y:b};return(A=M.x,b=M.y,g)?Object.assign({},D,((a={})[T]=_?"0":"",a[S]=I?"0":"",a.transform=1>=(v.devicePixelRatio||1)?"translate("+A+"px, "+b+"px)":"translate3d("+A+"px, "+b+"px, 0)",a)):Object.assign({},D,((o={})[T]=_?b+"px":"",o[S]=I?A+"px":"",o.transform="",o))}var eP={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=r.adaptive,s=r.roundOffsets,o=void 0===s||s,a={placement:ed(e.placement),variation:eM(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:void 0===n||n,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,eB(Object.assign({},a,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:void 0===i||i,roundOffsets:o})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,eB(Object.assign({},a,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:o})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},eL={passive:!0},ek={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,s=void 0===i||i,o=n.resize,a=void 0===o||o,l=ea(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(t){t.addEventListener("scroll",r.update,eL)}),a&&l.addEventListener("resize",r.update,eL),function(){s&&u.forEach(function(t){t.removeEventListener("scroll",r.update,eL)}),a&&l.removeEventListener("resize",r.update,eL)}},data:{}},eF={left:"right",right:"left",bottom:"top",top:"bottom"};function eU(t){return t.replace(/left|right|bottom|top/g,function(t){return eF[t]})}var eH={start:"end",end:"start"};function eV(t){return t.replace(/start|end/g,function(t){return eH[t]})}function ez(t){var e=ea(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function eG(t){return ey(eC(t)).left+ez(t).scrollLeft}function ej(t){var e=eb(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function eQ(t,e){void 0===e&&(e=[]);var r,n=function t(e){return["html","body","#document"].indexOf(eo(e))>=0?e.ownerDocument.body:eu(e)&&ej(e)?e:t(eI(e))}(t),i=n===(null==(r=t.ownerDocument)?void 0:r.body),s=ea(n),o=i?[s].concat(s.visualViewport||[],ej(n)?n:[]):n,a=e.concat(o);return i?a:a.concat(eQ(eI(o)))}function eW(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function eY(t,e,r){var n,i,s,o,a,l,u,c,h,d;return e===t1?eW(function(t,e){var r=ea(t),n=eC(t),i=r.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=ew();(u||!u&&"fixed"===e)&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+eG(t),y:l}}(t,r)):el(e)?((n=ey(e,!1,"fixed"===r)).top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n):eW((i=eC(t),o=eC(i),a=ez(i),l=null==(s=i.ownerDocument)?void 0:s.body,u=ef(o.scrollWidth,o.clientWidth,l?l.scrollWidth:0,l?l.clientWidth:0),c=ef(o.scrollHeight,o.clientHeight,l?l.scrollHeight:0,l?l.clientHeight:0),h=-a.scrollLeft+eG(i),d=-a.scrollTop,"rtl"===eb(l||o).direction&&(h+=ef(o.clientWidth,l?l.clientWidth:0)-u),{width:u,height:c,x:h,y:d}))}function eX(t){var e,r=t.reference,n=t.element,i=t.placement,s=i?ed(i):null,o=i?eM(i):null,a=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(s){case tQ:e={x:a,y:r.y-n.height};break;case tW:e={x:a,y:r.y+r.height};break;case tY:e={x:r.x+r.width,y:l};break;case tX:e={x:r.x-n.width,y:l};break;default:e={x:r.x,y:r.y}}var u=s?eT(s):null;if(null!=u){var c="y"===u?"height":"width";switch(o){case tZ:e[u]=e[u]-(r[c]/2-n[c]/2);break;case tJ:e[u]=e[u]+(r[c]/2-n[c]/2)}}return e}function eq(t,e){void 0===e&&(e={});var r,n,i,s,o,a,l,u,c=e,h=c.placement,d=void 0===h?t.placement:h,f=c.strategy,g=void 0===f?t.strategy:f,p=c.boundary,m=c.rootBoundary,w=c.elementContext,y=void 0===w?t0:w,A=c.altBoundary,E=c.padding,b=void 0===E?0:E,C=eR("number"!=typeof b?b:eO(b,tK)),I=t.rects.popper,_=t.elements[void 0!==A&&A?y===t0?t2:t0:y],S=(r=el(_)?_:_.contextElement||eC(t.elements.popper),n=void 0===p?t$:p,i=void 0===m?t1:m,l=(a=[].concat("clippingParents"===n?(s=eQ(eI(r)),!el(o=["absolute","fixed"].indexOf(eb(r).position)>=0&&eu(r)?eS(r):r)?[]:s.filter(function(t){return el(t)&&eE(t,o)&&"body"!==eo(t)})):[].concat(n),[i]))[0],(u=a.reduce(function(t,e){var n=eY(r,e,g);return t.top=ef(n.top,t.top),t.right=eg(n.right,t.right),t.bottom=eg(n.bottom,t.bottom),t.left=ef(n.left,t.left),t},eY(r,l,g))).width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u),T=ey(t.elements.reference),v=eX({reference:T,element:I,strategy:"absolute",placement:d}),N=eW(Object.assign({},I,v)),R=y===t0?N:T,O={top:S.top-R.top+C.top,bottom:R.bottom-S.bottom+C.bottom,left:S.left-R.left+C.left,right:R.right-S.right+C.right},D=t.modifiersData.offset;if(y===t0&&D){var M=D[d];Object.keys(O).forEach(function(t){var e=[tY,tW].indexOf(t)>=0?1:-1,r=[tQ,tW].indexOf(t)>=0?"y":"x";O[t]+=M[r]*e})}return O}var eK={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,s=void 0===i||i,o=r.altAxis,a=void 0===o||o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,h=r.rootBoundary,d=r.altBoundary,f=r.flipVariations,g=void 0===f||f,p=r.allowedAutoPlacements,m=e.options.placement,w=ed(m)===m,y=l||(w||!g?[eU(m)]:function(t){if(ed(t)===tq)return[];var e=eU(t);return[eV(t),e,eV(e)]}(m)),A=[m].concat(y).reduce(function(t,r){var n,i,s,o,a,l,d,f,m,w,y,A;return t.concat(ed(r)===tq?(i=(n={placement:r,boundary:c,rootBoundary:h,padding:u,flipVariations:g,allowedAutoPlacements:p}).placement,s=n.boundary,o=n.rootBoundary,a=n.padding,l=n.flipVariations,f=void 0===(d=n.allowedAutoPlacements)?t4:d,0===(y=(w=(m=eM(i))?l?t3:t3.filter(function(t){return eM(t)===m}):tK).filter(function(t){return f.indexOf(t)>=0})).length&&(y=w),Object.keys(A=y.reduce(function(t,r){return t[r]=eq(e,{placement:r,boundary:s,rootBoundary:o,padding:a})[ed(r)],t},{})).sort(function(t,e){return A[t]-A[e]})):r)},[]),E=e.rects.reference,b=e.rects.popper,C=new Map,I=!0,_=A[0],S=0;S<A.length;S++){var T=A[S],v=ed(T),N=eM(T)===tZ,R=[tQ,tW].indexOf(v)>=0,O=R?"width":"height",D=eq(e,{placement:T,boundary:c,rootBoundary:h,altBoundary:d,padding:u}),M=R?N?tY:tX:N?tW:tQ;E[O]>b[O]&&(M=eU(M));var x=eU(M),B=[];if(s&&B.push(D[v]<=0),a&&B.push(D[M]<=0,D[x]<=0),B.every(function(t){return t})){_=T,I=!1;break}C.set(T,B)}if(I)for(var P=g?3:1,L=function(t){var e=A.find(function(e){var r=C.get(e);if(r)return r.slice(0,t).every(function(t){return t})});if(e)return _=e,"break"},k=P;k>0&&"break"!==L(k);k--);e.placement!==_&&(e.modifiersData[n]._skip=!0,e.placement=_,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function eZ(t,e,r){return void 0===r&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function eJ(t){return[tQ,tY,tW,tX].some(function(e){return t[e]>=0})}var e$={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=eq(e,{elementContext:"reference"}),a=eq(e,{altBoundary:!0}),l=eZ(o,n),u=eZ(a,i,s),c=eJ(l),h=eJ(u);e.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":h})}},e1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,r=t.options,n=t.name,i=r.offset,s=void 0===i?[0,0]:i,o=t4.reduce(function(t,r){var n,i,o,a,l,u;return t[r]=(n=e.rects,o=[tX,tQ].indexOf(i=ed(r))>=0?-1:1,l=(a="function"==typeof s?s(Object.assign({},n,{placement:r})):s)[0],u=a[1],l=l||0,u=(u||0)*o,[tX,tY].indexOf(i)>=0?{x:u,y:l}:{x:l,y:u}),t},{}),a=o[e.placement],l=a.x,u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}},e0={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,r=t.name;e.modifiersData[r]=eX({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},e2={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,s=r.altAxis,o=r.boundary,a=r.rootBoundary,l=r.altBoundary,u=r.padding,c=r.tether,h=void 0===c||c,d=r.tetherOffset,f=void 0===d?0:d,g=eq(e,{boundary:o,rootBoundary:a,padding:u,altBoundary:l}),p=ed(e.placement),m=eM(e.placement),w=!m,y=eT(p),A="x"===y?"y":"x",E=e.modifiersData.popperOffsets,b=e.rects.reference,C=e.rects.popper,I="function"==typeof f?f(Object.assign({},e.rects,{placement:e.placement})):f,_="number"==typeof I?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),S=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,T={x:0,y:0};if(E){if(void 0===i||i){var v,N="y"===y?tQ:tX,R="y"===y?tW:tY,O="y"===y?"height":"width",D=E[y],M=D+g[N],x=D-g[R],B=h?-C[O]/2:0,P=m===tZ?b[O]:C[O],L=m===tZ?-C[O]:-b[O],k=e.elements.arrow,F=h&&k?eA(k):{width:0,height:0},U=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:eN(),H=U[N],V=U[R],z=ev(0,b[O],F[O]),G=w?b[O]/2-B-z-H-_.mainAxis:P-z-H-_.mainAxis,j=w?-b[O]/2+B+z+V+_.mainAxis:L+z+V+_.mainAxis,Q=e.elements.arrow&&eS(e.elements.arrow),W=Q?"y"===y?Q.clientTop||0:Q.clientLeft||0:0,Y=null!=(v=null==S?void 0:S[y])?v:0,X=ev(h?eg(M,D+G-Y-W):M,D,h?ef(x,D+j-Y):x);E[y]=X,T[y]=X-D}if(void 0!==s&&s){var q,K,Z="x"===y?tQ:tX,J="x"===y?tW:tY,$=E[A],tt="y"===A?"height":"width",te=$+g[Z],tr=$-g[J],tn=-1!==[tQ,tX].indexOf(p),ti=null!=(K=null==S?void 0:S[A])?K:0,ts=tn?te:$-b[tt]-C[tt]-ti+_.altAxis,to=tn?$+b[tt]+C[tt]-ti-_.altAxis:tr,ta=h&&tn?(q=ev(ts,$,to))>to?to:q:ev(h?ts:te,$,h?to:tr);E[A]=ta,T[A]=ta-$}e.modifiersData[n]=T}},requiresIfExists:["offset"]},e3={placement:"bottom",modifiers:[],strategy:"absolute"};function e4(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(t){return!(t&&"function"==typeof t.getBoundingClientRect)})}function e8(t){void 0===t&&(t={});var e=t,r=e.defaultModifiers,n=void 0===r?[]:r,i=e.defaultOptions,s=void 0===i?e3:i;return function(t,e,r){void 0===r&&(r=s);var i,o,a={placement:"bottom",orderedModifiers:[],options:Object.assign({},e3,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],u=!1,c={state:a,setOptions:function(r){var i,o,u,d,f,g,p="function"==typeof r?r(a.options):r;h(),a.options=Object.assign({},s,a.options,p),a.scrollParents={reference:el(t)?eQ(t):t.contextElement?eQ(t.contextElement):[],popper:eQ(e)};var m=(o=Object.keys(i=[].concat(n,a.options.modifiers).reduce(function(t,e){var r=t[e.name];return t[e.name]=r?Object.assign({},r,e,{options:Object.assign({},r.options,e.options),data:Object.assign({},r.data,e.data)}):e,t},{})).map(function(t){return i[t]}),u=new Map,d=new Set,f=[],o.forEach(function(t){u.set(t.name,t)}),o.forEach(function(t){d.has(t.name)||function t(e){d.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!d.has(e)){var r=u.get(e);r&&t(r)}}),f.push(e)}(t)}),g=f,ei.reduce(function(t,e){return t.concat(g.filter(function(t){return t.phase===e}))},[]));return a.orderedModifiers=m.filter(function(t){return t.enabled}),a.orderedModifiers.forEach(function(t){var e=t.name,r=t.options,n=t.effect;if("function"==typeof n){var i=n({state:a,name:e,instance:c,options:void 0===r?{}:r});l.push(i||function(){})}}),c.update()},forceUpdate:function(){if(!u){var t=a.elements,e=t.reference,r=t.popper;if(e4(e,r)){a.rects={reference:(n=eS(r),i="fixed"===a.options.strategy,s=eu(n),d=eu(n)&&(l=ep((o=n.getBoundingClientRect()).width)/n.offsetWidth||1,h=ep(o.height)/n.offsetHeight||1,1!==l||1!==h),f=eC(n),g=ey(e,d,i),p={scrollLeft:0,scrollTop:0},m={x:0,y:0},(s||!s&&!i)&&(("body"!==eo(n)||ej(f))&&(p=function(t){return t!==ea(t)&&eu(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:ez(t)}(n)),eu(n)?(m=ey(n,!0),m.x+=n.clientLeft,m.y+=n.clientTop):f&&(m.x=eG(f))),{x:g.left+p.scrollLeft-m.x,y:g.top+p.scrollTop-m.y,width:g.width,height:g.height}),popper:eA(r)},a.reset=!1,a.placement=a.options.placement,a.orderedModifiers.forEach(function(t){return a.modifiersData[t.name]=Object.assign({},t.data)});for(var n,i,s,o,l,h,d,f,g,p,m,w=0;w<a.orderedModifiers.length;w++){if(!0===a.reset){a.reset=!1,w=-1;continue}var y=a.orderedModifiers[w],A=y.fn,E=y.options,b=void 0===E?{}:E,C=y.name;"function"==typeof A&&(a=A({state:a,options:b,name:C,instance:c})||a)}}}},update:(i=function(){return new Promise(function(t){c.forceUpdate(),t(a)})},function(){return o||(o=new Promise(function(t){Promise.resolve().then(function(){o=void 0,t(i())})})),o}),destroy:function(){h(),u=!0}};if(!e4(t,e))return c;function h(){l.forEach(function(t){return t()}),l=[]}return c.setOptions(r).then(function(t){!u&&r.onFirstUpdate&&r.onFirstUpdate(t)}),c}}var e6=e8(),e5=e8({defaultModifiers:[ek,e0,eP,eh,e1,eK,e2,eD,e$]}),e7=e8({defaultModifiers:[ek,e0,eP,eh]});w(tG,tj),w(tG,es);const e9=new Map,rt={set(t,e,r){e9.has(t)||e9.set(t,new Map);let n=e9.get(t);if(!n.has(e)&&0!==n.size)return void console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`);n.set(e,r)},get:(t,e)=>e9.has(t)&&e9.get(t).get(e)||null,remove(t,e){if(!e9.has(t))return;let r=e9.get(t);r.delete(e),0===r.size&&e9.delete(t)}},re="transitionend",rr=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),t),rn=t=>null==t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),ri=t=>{do t+=Math.floor(1e6*Math.random());while(document.getElementById(t))return t},rs=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(t),n=Number.parseFloat(e),i=Number.parseFloat(r);return n||i?(e=e.split(",")[0],r=r.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(r))*1e3):0},ro=t=>{t.dispatchEvent(new Event(re))},ra=t=>!!t&&"object"==typeof t&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),rl=t=>ra(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(rr(t)):null,ru=t=>{if(!ra(t)||0===t.getClientRects().length)return!1;let e="visible"===getComputedStyle(t).getPropertyValue("visibility"),r=t.closest("details:not([open])");if(!r)return e;if(r!==t){let e=t.closest("summary");if(e&&e.parentNode!==r||null===e)return!1}return e},rc=t=>!!(!t||t.nodeType!==Node.ELEMENT_NODE||t.classList.contains("disabled"))||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),rh=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){let e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?rh(t.parentNode):null},rd=()=>{},rf=t=>{t.offsetHeight},rg=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,rp=[],rm=t=>{"loading"===document.readyState?(rp.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of rp)t()}),rp.push(t)):t()},rw=()=>"rtl"===document.documentElement.dir,ry=t=>{rm(()=>{let e=rg();if(e){let r=t.NAME,n=e.fn[r];e.fn[r]=t.jQueryInterface,e.fn[r].Constructor=t,e.fn[r].noConflict=()=>(e.fn[r]=n,t.jQueryInterface)}})},rA=(t,e=[],r=t)=>"function"==typeof t?t.call(...e):r,rE=(t,e,r=!0)=>{if(!r)return void rA(t);let n=rs(e)+5,i=!1,s=({target:r})=>{r===e&&(i=!0,e.removeEventListener(re,s),rA(t))};e.addEventListener(re,s),setTimeout(()=>{i||ro(e)},n)},rb=(t,e,r,n)=>{let i=t.length,s=t.indexOf(e);return -1===s?!r&&n?t[i-1]:t[0]:(s+=r?1:-1,n&&(s=(s+i)%i),t[Math.max(0,Math.min(s,i-1))])},rC=/[^.]*(?=\..*)\.|.*/,rI=/\..*/,r_=/::\d+$/,rS={};let rT=1;const rv={mouseenter:"mouseover",mouseleave:"mouseout"},rN=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function rR(t,e){return e&&`${e}::${rT++}`||t.uidEvent||rT++}function rO(t){let e=rR(t);return t.uidEvent=e,rS[e]=rS[e]||{},rS[e]}function rD(t,e,r=null){return Object.values(t).find(t=>t.callable===e&&t.delegationSelector===r)}function rM(t,e,r){let n="string"==typeof e,i=rP(t);return rN.has(i)||(i=t),[n,n?r:e||r,i]}function rx(t,e,r,n,i){var s,o;if("string"!=typeof e||!t)return;let[a,l,u]=rM(e,r,n);if(e in rv){let t;t=l,l=function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)}}let c=rO(t),h=c[u]||(c[u]={}),d=rD(h,l,a?r:null);if(d){d.oneOff=d.oneOff&&i;return}let f=rR(l,e.replace(rC,"")),g=a?(s=l,function e(n){let i=t.querySelectorAll(r);for(let{target:o}=n;o&&o!==this;o=o.parentNode)for(let a of i)if(a===o)return rk(n,{delegateTarget:o}),e.oneOff&&rL.off(t,n.type,r,s),s.apply(o,[n])}):(o=l,function e(r){return rk(r,{delegateTarget:t}),e.oneOff&&rL.off(t,r.type,o),o.apply(t,[r])});g.delegationSelector=a?r:null,g.callable=l,g.oneOff=i,g.uidEvent=f,h[f]=g,t.addEventListener(u,g,a)}function rB(t,e,r,n,i){let s=rD(e[r],n,i);s&&(t.removeEventListener(r,s,!!i),delete e[r][s.uidEvent])}function rP(t){return rv[t=t.replace(rI,"")]||t}const rL={on(t,e,r,n){rx(t,e,r,n,!1)},one(t,e,r,n){rx(t,e,r,n,!0)},off(t,e,r,n){if("string"!=typeof e||!t)return;let[i,s,o]=rM(e,r,n),a=o!==e,l=rO(t),u=l[o]||{},c=e.startsWith(".");if(void 0!==s){if(!Object.keys(u).length)return;rB(t,l,o,s,i?r:null);return}if(c)for(let r of Object.keys(l)){var h=e.slice(1);for(let[e,n]of Object.entries(l[r]||{}))e.includes(h)&&rB(t,l,r,n.callable,n.delegationSelector)}for(let[r,n]of Object.entries(u)){let i=r.replace(r_,"");(!a||e.includes(i))&&rB(t,l,o,n.callable,n.delegationSelector)}},trigger(t,e,r){if("string"!=typeof e||!t)return null;let n=rg(),i=rP(e),s=null,o=!0,a=!0,l=!1;e!==i&&n&&(s=n.Event(e,r),n(t).trigger(s),o=!s.isPropagationStopped(),a=!s.isImmediatePropagationStopped(),l=s.isDefaultPrevented());let u=rk(new Event(e,{bubbles:o,cancelable:!0}),r);return l&&u.preventDefault(),a&&t.dispatchEvent(u),u.defaultPrevented&&s&&s.preventDefault(),u}};function rk(t,e={}){for(let[r,n]of Object.entries(e))try{t[r]=n}catch(e){Object.defineProperty(t,r,{configurable:!0,get:()=>n})}return t}function rF(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function rU(t){return t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}const rH={setDataAttribute(t,e,r){t.setAttribute(`data-bs-${rU(e)}`,r)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${rU(e)}`)},getDataAttributes(t){if(!t)return{};let e={};for(let r of Object.keys(t.dataset).filter(t=>t.startsWith("bs")&&!t.startsWith("bsConfig"))){let n=r.replace(/^bs/,"");e[n=n.charAt(0).toLowerCase()+n.slice(1)]=rF(t.dataset[r])}return e},getDataAttribute:(t,e)=>rF(t.getAttribute(`data-bs-${rU(e)}`))};class rV{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){let r=ra(e)?rH.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof r?r:{},...ra(e)?rH.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(let[r,n]of Object.entries(e)){let e=t[r],i=ra(e)?"element":rn(e);if(!new RegExp(n).test(i))throw TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${r}" provided type "${i}" but expected type "${n}".`)}}}class rz extends rV{constructor(t,e){if(super(),!(t=rl(t)))return;this._element=t,this._config=this._getConfig(e),rt.set(this._element,this.constructor.DATA_KEY,this)}dispose(){for(let t of(rt.remove(this._element,this.constructor.DATA_KEY),rL.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this)))this[t]=null}_queueCallback(t,e,r=!0){rE(t,e,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return rt.get(rl(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const rG=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let r=t.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&"#"!==r?r.trim():null}return e?e.split(",").map(t=>rr(t)).join(","):null},rj={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter(t=>t.matches(e)),parents(t,e){let r=[],n=t.parentNode.closest(e);for(;n;)r.push(n),n=n.parentNode.closest(e);return r},prev(t,e){let r=t.previousElementSibling;for(;r;){if(r.matches(e))return[r];r=r.previousElementSibling}return[]},next(t,e){let r=t.nextElementSibling;for(;r;){if(r.matches(e))return[r];r=r.nextElementSibling}return[]},focusableChildren(t){let e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(t=>`${t}:not([tabindex^="-"])`).join(",");return this.find(e,t).filter(t=>!rc(t)&&ru(t))},getSelectorFromElement(t){let e=rG(t);return e&&rj.findOne(e)?e:null},getElementFromSelector(t){let e=rG(t);return e?rj.findOne(e):null},getMultipleElementsFromSelector(t){let e=rG(t);return e?rj.find(e):[]}},rQ=(t,e="hide")=>{let r=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;rL.on(document,r,`[data-bs-dismiss="${n}"]`,function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),rc(this))return;let i=rj.getElementFromSelector(this)||this.closest(`.${n}`);t.getOrCreateInstance(i)[e]()})},rW=".bs.alert",rY=`close${rW}`,rX=`closed${rW}`;class rq extends rz{static get NAME(){return"alert"}close(){if(rL.trigger(this._element,rY).defaultPrevented)return;this._element.classList.remove("show");let t=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,t)}_destroyElement(){this._element.remove(),rL.trigger(this._element,rX),this.dispose()}static jQueryInterface(t){return this.each(function(){let e=rq.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError(`No method named "${t}"`);e[t](this)}})}}rQ(rq,"close"),ry(rq);const rK='[data-bs-toggle="button"]',rZ="click.bs.button.data-api";class rJ extends rz{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each(function(){let e=rJ.getOrCreateInstance(this);"toggle"===t&&e[t]()})}}rL.on(document,rZ,rK,t=>{t.preventDefault();let e=t.target.closest(rK);rJ.getOrCreateInstance(e).toggle()}),ry(rJ);const r$=".bs.swipe",r1=`touchstart${r$}`,r0=`touchmove${r$}`,r2=`touchend${r$}`,r3=`pointerdown${r$}`,r4=`pointerup${r$}`,r8={endCallback:null,leftCallback:null,rightCallback:null},r6={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class r5 extends rV{constructor(t,e){if(super(),this._element=t,!t||!r5.isSupported())return;this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents()}static get Default(){return r8}static get DefaultType(){return r6}static get NAME(){return"swipe"}dispose(){rL.off(this._element,r$)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),rA(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=40)return;let e=t/this._deltaX;this._deltaX=0,e&&rA(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(rL.on(this._element,r3,t=>this._start(t)),rL.on(this._element,r4,t=>this._end(t)),this._element.classList.add("pointer-event")):(rL.on(this._element,r1,t=>this._start(t)),rL.on(this._element,r0,t=>this._move(t)),rL.on(this._element,r2,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const r7=".bs.carousel",r9=".data-api",nt="next",ne="prev",nr="left",nn="right",ni=`slide${r7}`,ns=`slid${r7}`,no=`keydown${r7}`,na=`mouseenter${r7}`,nl=`mouseleave${r7}`,nu=`dragstart${r7}`,nc=`load${r7}${r9}`,nh=`click${r7}${r9}`,nd="carousel",nf="active",ng=".active",np=".carousel-item",nm=ng+np,nw={ArrowLeft:nn,ArrowRight:nr},ny={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},nA={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class nE extends rz{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=rj.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===nd&&this.cycle()}static get Default(){return ny}static get DefaultType(){return nA}static get NAME(){return"carousel"}next(){this._slide(nt)}nextWhenVisible(){!document.hidden&&ru(this._element)&&this.next()}prev(){this._slide(ne)}pause(){this._isSliding&&ro(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding)return void rL.one(this._element,ns,()=>this.cycle());this.cycle()}}to(t){let e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void rL.one(this._element,ns,()=>this.to(t));let r=this._getItemIndex(this._getActive());r!==t&&this._slide(t>r?nt:ne,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&rL.on(this._element,no,t=>this._keydown(t)),"hover"===this._config.pause&&(rL.on(this._element,na,()=>this.pause()),rL.on(this._element,nl,()=>this._maybeEnableCycle())),this._config.touch&&r5.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let t of rj.find(".carousel-item img",this._element))rL.on(t,nu,t=>t.preventDefault());this._swipeHelper=new r5(this._element,{leftCallback:()=>this._slide(this._directionToOrder(nr)),rightCallback:()=>this._slide(this._directionToOrder(nn)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}})}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let e=nw[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let e=rj.findOne(ng,this._indicatorsElement);e.classList.remove(nf),e.removeAttribute("aria-current");let r=rj.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);r&&(r.classList.add(nf),r.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;let r=this._getActive(),n=t===nt,i=e||rb(this._getItems(),r,n,this._config.wrap);if(i===r)return;let s=this._getItemIndex(i),o=e=>rL.trigger(this._element,e,{relatedTarget:i,direction:this._orderToDirection(t),from:this._getItemIndex(r),to:s});if(o(ni).defaultPrevented||!r||!i)return;let a=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=i;let l=n?"carousel-item-start":"carousel-item-end",u=n?"carousel-item-next":"carousel-item-prev";i.classList.add(u),rf(i),r.classList.add(l),i.classList.add(l),this._queueCallback(()=>{i.classList.remove(l,u),i.classList.add(nf),r.classList.remove(nf,u,l),this._isSliding=!1,o(ns)},r,this._isAnimated()),a&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return rj.findOne(nm,this._element)}_getItems(){return rj.find(np,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return rw()?t===nr?ne:nt:t===nr?nt:ne}_orderToDirection(t){return rw()?t===ne?nr:nn:t===ne?nn:nr}static jQueryInterface(t){return this.each(function(){let e=nE.getOrCreateInstance(this,t);if("number"==typeof t)return void e.to(t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError(`No method named "${t}"`);e[t]()}})}}rL.on(document,nh,"[data-bs-slide], [data-bs-slide-to]",function(t){let e=rj.getElementFromSelector(this);if(!e||!e.classList.contains(nd))return;t.preventDefault();let r=nE.getOrCreateInstance(e),n=this.getAttribute("data-bs-slide-to");if(n){r.to(n),r._maybeEnableCycle();return}if("next"===rH.getDataAttribute(this,"slide")){r.next(),r._maybeEnableCycle();return}r.prev(),r._maybeEnableCycle()}),rL.on(window,nc,()=>{for(let t of rj.find('[data-bs-ride="carousel"]'))nE.getOrCreateInstance(t)}),ry(nE);const nb=".bs.collapse",nC=`show${nb}`,nI=`shown${nb}`,n_=`hide${nb}`,nS=`hidden${nb}`,nT=`click${nb}.data-api`,nv="show",nN="collapse",nR="collapsing",nO=`:scope .${nN} .${nN}`,nD='[data-bs-toggle="collapse"]',nM={parent:null,toggle:!0},nx={parent:"(null|element)",toggle:"boolean"};class nB extends rz{constructor(t,e){for(let r of(super(t,e),this._isTransitioning=!1,this._triggerArray=[],rj.find(nD))){let t=rj.getSelectorFromElement(r),e=rj.find(t).filter(t=>t===this._element);null!==t&&e.length&&this._triggerArray.push(r)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return nM}static get DefaultType(){return nx}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(t=>t!==this._element).map(t=>nB.getOrCreateInstance(t,{toggle:!1}))),t.length&&t[0]._isTransitioning||rL.trigger(this._element,nC).defaultPrevented)return;for(let e of t)e.hide();let e=this._getDimension();this._element.classList.remove(nN),this._element.classList.add(nR),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let r=e[0].toUpperCase()+e.slice(1),n=`scroll${r}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(nR),this._element.classList.add(nN,nv),this._element.style[e]="",rL.trigger(this._element,nI)},this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown()||rL.trigger(this._element,n_).defaultPrevented)return;let t=this._getDimension();for(let e of(this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,rf(this._element),this._element.classList.add(nR),this._element.classList.remove(nN,nv),this._triggerArray)){let t=rj.getElementFromSelector(e);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(nR),this._element.classList.add(nN),rL.trigger(this._element,nS)},this._element,!0)}_isShown(t=this._element){return t.classList.contains(nv)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=rl(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(this._config.parent)for(let t of this._getFirstLevelChildren(nD)){let e=rj.getElementFromSelector(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}}_getFirstLevelChildren(t){let e=rj.find(nO,this._config.parent);return rj.find(t,this._config.parent).filter(t=>!e.includes(t))}_addAriaAndCollapsedClass(t,e){if(t.length)for(let r of t)r.classList.toggle("collapsed",!e),r.setAttribute("aria-expanded",e)}static jQueryInterface(t){let e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){let r=nB.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===r[t])throw TypeError(`No method named "${t}"`);r[t]()}})}}rL.on(document,nT,nD,function(t){for(let e of(("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault(),rj.getMultipleElementsFromSelector(this)))nB.getOrCreateInstance(e,{toggle:!1}).toggle()}),ry(nB);const nP="dropdown",nL=".bs.dropdown",nk=".data-api",nF="ArrowDown",nU=`hide${nL}`,nH=`hidden${nL}`,nV=`show${nL}`,nz=`shown${nL}`,nG=`click${nL}${nk}`,nj=`keydown${nL}${nk}`,nQ=`keyup${nL}${nk}`,nW="show",nY='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',nX=`${nY}.${nW}`,nq=".dropdown-menu",nK=rw()?"top-end":"top-start",nZ=rw()?"top-start":"top-end",nJ=rw()?"bottom-end":"bottom-start",n$=rw()?"bottom-start":"bottom-end",n1=rw()?"left-start":"right-start",n0=rw()?"right-start":"left-start",n2={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},n3={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class n4 extends rz{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=rj.next(this._element,nq)[0]||rj.prev(this._element,nq)[0]||rj.findOne(nq,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return n2}static get DefaultType(){return n3}static get NAME(){return nP}toggle(){return this._isShown()?this.hide():this.show()}show(){if(rc(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!rL.trigger(this._element,nV,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(let t of[].concat(...document.body.children))rL.on(t,"mouseover",rd);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(nW),this._element.classList.add(nW),rL.trigger(this._element,nz,t)}}hide(){if(rc(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!rL.trigger(this._element,nU,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let t of[].concat(...document.body.children))rL.off(t,"mouseover",rd);this._popper&&this._popper.destroy(),this._menu.classList.remove(nW),this._element.classList.remove(nW),this._element.setAttribute("aria-expanded","false"),rH.removeDataAttribute(this._menu,"popper"),rL.trigger(this._element,nH,t),this._element.focus()}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!ra(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw TypeError(`${nP.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===tG)throw TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let t=this._element;"parent"===this._config.reference?t=this._parent:ra(this._config.reference)?t=rl(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);let e=this._getPopperConfig();this._popper=tG.createPopper(t,this._menu,e)}_isShown(){return this._menu.classList.contains(nW)}_getPlacement(){let t=this._parent;if(t.classList.contains("dropend"))return n1;if(t.classList.contains("dropstart"))return n0;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";let e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?nZ:nK:e?n$:nJ}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){let{offset:t}=this._config;return"string"==typeof t?t.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(rH.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...rA(this._config.popperConfig,[void 0,t])}}_selectMenuItem({key:t,target:e}){let r=rj.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(t=>ru(t));r.length&&rb(r,e,t===nF,!r.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){let e=n4.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(2!==t.button&&("keyup"!==t.type||"Tab"===t.key))for(let e of rj.find(nX)){let r=n4.getInstance(e);if(!r||!1===r._config.autoClose)continue;let n=t.composedPath(),i=n.includes(r._menu);if(n.includes(r._element)||"inside"===r._config.autoClose&&!i||"outside"===r._config.autoClose&&i||r._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let s={relatedTarget:r._element};"click"===t.type&&(s.clickEvent=t),r._completeHide(s)}}static dataApiKeydownHandler(t){let e=/input|textarea/i.test(t.target.tagName),r="Escape"===t.key,n=["ArrowUp",nF].includes(t.key);if(!n&&!r||e&&!r)return;t.preventDefault();let i=this.matches(nY)?this:rj.prev(this,nY)[0]||rj.next(this,nY)[0]||rj.findOne(nY,t.delegateTarget.parentNode),s=n4.getOrCreateInstance(i);if(n){t.stopPropagation(),s.show(),s._selectMenuItem(t);return}s._isShown()&&(t.stopPropagation(),s.hide(),i.focus())}}rL.on(document,nj,nY,n4.dataApiKeydownHandler),rL.on(document,nj,nq,n4.dataApiKeydownHandler),rL.on(document,nG,n4.clearMenus),rL.on(document,nQ,n4.clearMenus),rL.on(document,nG,nY,function(t){t.preventDefault(),n4.getOrCreateInstance(this).toggle()}),ry(n4);const n8="backdrop",n6="show",n5=`mousedown.bs.${n8}`,n7={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},n9={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class it extends rV{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return n7}static get DefaultType(){return n9}static get NAME(){return n8}show(t){if(!this._config.isVisible)return void rA(t);this._append();let e=this._getElement();this._config.isAnimated&&rf(e),e.classList.add(n6),this._emulateAnimation(()=>{rA(t)})}hide(t){if(!this._config.isVisible)return void rA(t);this._getElement().classList.remove(n6),this._emulateAnimation(()=>{this.dispose(),rA(t)})}dispose(){this._isAppended&&(rL.off(this._element,n5),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=rl(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),rL.on(t,n5,()=>{rA(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){rE(t,this._getElement(),this._config.isAnimated)}}const ie=".bs.focustrap",ir=`focusin${ie}`,ii=`keydown.tab${ie}`,is="backward",io={autofocus:!0,trapElement:null},ia={autofocus:"boolean",trapElement:"element"};class il extends rV{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return io}static get DefaultType(){return ia}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),rL.off(document,ie),rL.on(document,ir,t=>this._handleFocusin(t)),rL.on(document,ii,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,rL.off(document,ie))}_handleFocusin(t){let{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;let r=rj.focusableChildren(e);0===r.length?e.focus():this._lastTabNavDirection===is?r[r.length-1].focus():r[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?is:"forward")}}const iu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ic=".sticky-top",ih="padding-right",id="margin-right";class ig{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ih,e=>e+t),this._setElementAttributes(iu,ih,e=>e+t),this._setElementAttributes(ic,id,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ih),this._resetElementAttributes(iu,ih),this._resetElementAttributes(ic,id)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,r){let n=this.getWidth();this._applyManipulationCallback(t,t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+n)return;this._saveInitialAttribute(t,e);let i=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${r(Number.parseFloat(i))}px`)})}_saveInitialAttribute(t,e){let r=t.style.getPropertyValue(e);r&&rH.setDataAttribute(t,e,r)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,t=>{let r=rH.getDataAttribute(t,e);if(null===r)return void t.style.removeProperty(e);rH.removeDataAttribute(t,e),t.style.setProperty(e,r)})}_applyManipulationCallback(t,e){if(ra(t))return void e(t);for(let r of rj.find(t,this._element))e(r)}}const ip=".bs.modal",im=`hide${ip}`,iw=`hidePrevented${ip}`,iy=`hidden${ip}`,iA=`show${ip}`,iE=`shown${ip}`,ib=`resize${ip}`,iC=`click.dismiss${ip}`,iI=`mousedown.dismiss${ip}`,i_=`keydown.dismiss${ip}`,iS=`click${ip}.data-api`,iT="modal-open",iv="show",iN="modal-static",iR={backdrop:!0,focus:!0,keyboard:!0},iO={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class iD extends rz{constructor(t,e){super(t,e),this._dialog=rj.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ig,this._addEventListeners()}static get Default(){return iR}static get DefaultType(){return iO}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||rL.trigger(this._element,iA,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(iT),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){this._isShown&&!this._isTransitioning&&(rL.trigger(this._element,im).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(iv),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){rL.off(window,ip),rL.off(this._dialog,ip),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new it({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new il({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let e=rj.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),rf(this._element),this._element.classList.add(iv),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,rL.trigger(this._element,iE,{relatedTarget:t})},this._dialog,this._isAnimated())}_addEventListeners(){rL.on(this._element,i_,t=>{if("Escape"===t.key){if(this._config.keyboard)return void this.hide();this._triggerBackdropTransition()}}),rL.on(window,ib,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),rL.on(this._element,iI,t=>{rL.one(this._element,iC,e=>{if(this._element===t.target&&this._element===e.target){if("static"===this._config.backdrop)return void this._triggerBackdropTransition();this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(iT),this._resetAdjustments(),this._scrollBar.reset(),rL.trigger(this._element,iy)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(rL.trigger(this._element,iw).defaultPrevented)return;let t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(iN)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(iN),this._queueCallback(()=>{this._element.classList.remove(iN),this._queueCallback(()=>{this._element.style.overflowY=e},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),r=e>0;if(r&&!t){let t=rw()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!r&&t){let t=rw()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){let r=iD.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===r[t])throw TypeError(`No method named "${t}"`);r[t](e)}})}}rL.on(document,iS,'[data-bs-toggle="modal"]',function(t){let e=rj.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),rL.one(e,iA,t=>{t.defaultPrevented||rL.one(e,iy,()=>{ru(this)&&this.focus()})});let r=rj.findOne(".modal.show");r&&iD.getInstance(r).hide(),iD.getOrCreateInstance(e).toggle(this)}),rQ(iD),ry(iD);const iM=".bs.offcanvas",ix=".data-api",iB=`load${iM}${ix}`,iP="show",iL="showing",ik="hiding",iF=".offcanvas.show",iU=`show${iM}`,iH=`shown${iM}`,iV=`hide${iM}`,iz=`hidePrevented${iM}`,iG=`hidden${iM}`,ij=`resize${iM}`,iQ=`click${iM}${ix}`,iW=`keydown.dismiss${iM}`,iY={backdrop:!0,keyboard:!0,scroll:!1},iX={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class iq extends rz{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return iY}static get DefaultType(){return iX}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||rL.trigger(this._element,iU,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ig().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(iL),this._queueCallback(()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(iP),this._element.classList.remove(iL),rL.trigger(this._element,iH,{relatedTarget:t})},this._element,!0))}hide(){this._isShown&&!rL.trigger(this._element,iV).defaultPrevented&&(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ik),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(iP,ik),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ig().reset(),rL.trigger(this._element,iG)},this._element,!0))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=!!this._config.backdrop;return new it({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{if("static"===this._config.backdrop)return void rL.trigger(this._element,iz);this.hide()}:null})}_initializeFocusTrap(){return new il({trapElement:this._element})}_addEventListeners(){rL.on(this._element,iW,t=>{if("Escape"===t.key){if(this._config.keyboard)return void this.hide();rL.trigger(this._element,iz)}})}static jQueryInterface(t){return this.each(function(){let e=iq.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError(`No method named "${t}"`);e[t](this)}})}}rL.on(document,iQ,'[data-bs-toggle="offcanvas"]',function(t){let e=rj.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),rc(this))return;rL.one(e,iG,()=>{ru(this)&&this.focus()});let r=rj.findOne(iF);r&&r!==e&&iq.getInstance(r).hide(),iq.getOrCreateInstance(e).toggle(this)}),rL.on(window,iB,()=>{for(let t of rj.find(iF))iq.getOrCreateInstance(t).show()}),rL.on(window,ij,()=>{for(let t of rj.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&iq.getOrCreateInstance(t).hide()}),rQ(iq),ry(iq);const iK={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},iZ=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),iJ=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,i$=(t,e)=>{let r=t.nodeName.toLowerCase();return e.includes(r)?!iZ.has(r)||!!iJ.test(t.nodeValue):e.filter(t=>t instanceof RegExp).some(t=>t.test(r))},i1={allowList:iK,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},i0={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},i2={entry:"(string|element|function|null)",selector:"(string|element)"};class i3 extends rV{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return i1}static get DefaultType(){return i0}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){let t=document.createElement("div");for(let[e,r]of(t.innerHTML=this._maybeSanitize(this._config.template),Object.entries(this._config.content)))this._setContent(t,r,e);let e=t.children[0],r=this._resolvePossibleFunction(this._config.extraClass);return r&&e.classList.add(...r.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[e,r]of Object.entries(t))super._typeCheckConfig({selector:e,entry:r},i2)}_setContent(t,e,r){let n=rj.findOne(r,t);if(n){if(!(e=this._resolvePossibleFunction(e)))return void n.remove();if(ra(e))return void this._putElementInTemplate(rl(e),n);if(this._config.html){n.innerHTML=this._maybeSanitize(e);return}n.textContent=e}}_maybeSanitize(t){return this._config.sanitize?function(t,e,r){if(!t.length)return t;if(r&&"function"==typeof r)return r(t);let n=new window.DOMParser().parseFromString(t,"text/html");for(let t of[].concat(...n.body.querySelectorAll("*"))){let r=t.nodeName.toLowerCase();if(!Object.keys(e).includes(r)){t.remove();continue}let n=[].concat(...t.attributes),i=[].concat(e["*"]||[],e[r]||[]);for(let e of n)i$(e,i)||t.removeAttribute(e.nodeName)}return n.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return rA(t,[void 0,this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}}const i4=new Set(["sanitize","allowList","sanitizeFn"]),i8="fade",i6="show",i5=".modal",i7="hide.bs.modal",i9="hover",st="focus",se={AUTO:"auto",TOP:"top",RIGHT:rw()?"left":"right",BOTTOM:"bottom",LEFT:rw()?"right":"left"},sr={allowList:iK,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},sn={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class si extends rz{constructor(t,e){if(void 0===tG)throw TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return sr}static get DefaultType(){return sn}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._isShown())return void this._leave();this._enter()}}dispose(){clearTimeout(this._timeout),rL.off(this._element.closest(i5),i7,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=rL.trigger(this._element,this.constructor.eventName("show")),e=(rh(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();let r=this._getTipElement();this._element.setAttribute("aria-describedby",r.getAttribute("id"));let{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(r),rL.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(r),r.classList.add(i6),"ontouchstart"in document.documentElement)for(let t of[].concat(...document.body.children))rL.on(t,"mouseover",rd);this._queueCallback(()=>{rL.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!rL.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(i6),"ontouchstart"in document.documentElement)for(let t of[].concat(...document.body.children))rL.off(t,"mouseover",rd);this._activeTrigger.click=!1,this._activeTrigger[st]=!1,this._activeTrigger[i9]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),rL.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(i8,i6),e.classList.add(`bs-${this.constructor.NAME}-auto`);let r=ri(this.constructor.NAME).toString();return e.setAttribute("id",r),this._isAnimated()&&e.classList.add(i8),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new i3({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(i8)}_isShown(){return this.tip&&this.tip.classList.contains(i6)}_createPopper(t){let e=se[rA(this._config.placement,[this,t,this._element]).toUpperCase()];return tG.createPopper(this._element,t,this._getPopperConfig(e))}_getOffset(){let{offset:t}=this._config;return"string"==typeof t?t.split(",").map(t=>Number.parseInt(t,10)):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return rA(t,[this._element,this._element])}_getPopperConfig(t){let e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...rA(this._config.popperConfig,[void 0,e])}}_setListeners(){for(let t of this._config.trigger.split(" "))if("click"===t)rL.on(this._element,this.constructor.eventName("click"),this._config.selector,t=>{this._initializeOnDelegatedTarget(t).toggle()});else if("manual"!==t){let e=t===i9?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),r=t===i9?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");rL.on(this._element,e,this._config.selector,t=>{let e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?st:i9]=!0,e._enter()}),rL.on(this._element,r,this._config.selector,t=>{let e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?st:i9]=e._element.contains(t.relatedTarget),e._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},rL.on(this._element.closest(i5),i7,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let e=rH.getDataAttributes(this._element);for(let t of Object.keys(e))i4.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:rl(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[e,r]of Object.entries(this._config))this.constructor.Default[e]!==r&&(t[e]=r);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let e=si.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError(`No method named "${t}"`);e[t]()}})}}ry(si);const ss={...si.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},so={...si.DefaultType,content:"(null|string|element|function)"};class sa extends si{static get Default(){return ss}static get DefaultType(){return so}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let e=sa.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError(`No method named "${t}"`);e[t]()}})}}ry(sa);const sl=".bs.scrollspy",su=`activate${sl}`,sc=`click${sl}`,sh=`load${sl}.data-api`,sd="active",sf="[href]",sg=".nav-link",sp=`${sg}, .nav-item > ${sg}, .list-group-item`,sm={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},sw={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class sy extends rz{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return sm}static get DefaultType(){return sw}static get NAME(){return"scrollspy"}refresh(){for(let t of(this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver(),this._observableSections.values()))this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=rl(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map(t=>Number.parseFloat(t))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(rL.off(this._config.target,sc),rL.on(this._config.target,sc,sf,t=>{let e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();let r=this._rootElement||window,n=e.offsetTop-this._element.offsetTop;if(r.scrollTo)return void r.scrollTo({top:n,behavior:"smooth"});r.scrollTop=n}}))}_getNewObserver(){return new IntersectionObserver(t=>this._observerCallback(t),{root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin})}_observerCallback(t){let e=t=>this._targetLinks.get(`#${t.target.id}`),r=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},n=(this._rootElement||document.documentElement).scrollTop,i=n>=this._previousScrollData.parentScrollTop;for(let s of(this._previousScrollData.parentScrollTop=n,t)){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}let t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(i&&t){if(r(s),!n)return;continue}i||t||r(s)}}_initializeTargetsAndObservables(){for(let t of(this._targetLinks=new Map,this._observableSections=new Map,rj.find(sf,this._config.target))){if(!t.hash||rc(t))continue;let e=rj.findOne(decodeURI(t.hash),this._element);ru(e)&&(this._targetLinks.set(decodeURI(t.hash),t),this._observableSections.set(t.hash,e))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(sd),this._activateParents(t),rL.trigger(this._element,su,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))return void rj.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(sd);for(let e of rj.parents(t,".nav, .list-group"))for(let t of rj.prev(e,sp))t.classList.add(sd)}_clearActiveClass(t){for(let e of(t.classList.remove(sd),rj.find(`${sf}.${sd}`,t)))e.classList.remove(sd)}static jQueryInterface(t){return this.each(function(){let e=sy.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError(`No method named "${t}"`);e[t]()}})}}rL.on(window,sh,()=>{for(let t of rj.find('[data-bs-spy="scroll"]'))sy.getOrCreateInstance(t)}),ry(sy);const sA=".bs.tab",sE=`hide${sA}`,sb=`hidden${sA}`,sC=`show${sA}`,sI=`shown${sA}`,s_=`click${sA}`,sS=`keydown${sA}`,sT=`load${sA}`,sv="ArrowRight",sN="ArrowDown",sR="Home",sO="active",sD="fade",sM="show",sx=".dropdown-toggle",sB=`:not(${sx})`,sP=`.nav-link${sB}, .list-group-item${sB}, [role="tab"]${sB}`,sL='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',sk=`${sP}, ${sL}`,sF=`.${sO}[data-bs-toggle="tab"], .${sO}[data-bs-toggle="pill"], .${sO}[data-bs-toggle="list"]`;class sU extends rz{constructor(t){if(super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),!this._parent)return;this._setInitialAttributes(this._parent,this._getChildren()),rL.on(this._element,sS,t=>this._keydown(t))}static get NAME(){return"tab"}show(){let t=this._element;if(this._elemIsActive(t))return;let e=this._getActiveElem(),r=e?rL.trigger(e,sE,{relatedTarget:t}):null;rL.trigger(t,sC,{relatedTarget:e}).defaultPrevented||r&&r.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(sO),this._activate(rj.getElementFromSelector(t)),this._queueCallback(()=>{if("tab"!==t.getAttribute("role"))return void t.classList.add(sM);t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),rL.trigger(t,sI,{relatedTarget:e})},t,t.classList.contains(sD)))}_deactivate(t,e){t&&(t.classList.remove(sO),t.blur(),this._deactivate(rj.getElementFromSelector(t)),this._queueCallback(()=>{if("tab"!==t.getAttribute("role"))return void t.classList.remove(sM);t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),rL.trigger(t,sb,{relatedTarget:e})},t,t.classList.contains(sD)))}_keydown(t){let e;if(!["ArrowLeft",sv,"ArrowUp",sN,sR,"End"].includes(t.key))return;t.stopPropagation(),t.preventDefault();let r=this._getChildren().filter(t=>!rc(t));if([sR,"End"].includes(t.key))e=r[t.key===sR?0:r.length-1];else{let n=[sv,sN].includes(t.key);e=rb(r,t.target,n,!0)}e&&(e.focus({preventScroll:!0}),sU.getOrCreateInstance(e).show())}_getChildren(){return rj.find(sk,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){for(let r of(this._setAttributeIfNotExists(t,"role","tablist"),e))this._setInitialAttributesOnChild(r)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let e=this._elemIsActive(t),r=this._getOuterElement(t);t.setAttribute("aria-selected",e),r!==t&&this._setAttributeIfNotExists(r,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let e=rj.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){let r=this._getOuterElement(t);if(!r.classList.contains("dropdown"))return;let n=(t,n)=>{let i=rj.findOne(t,r);i&&i.classList.toggle(n,e)};n(sx,sO),n(".dropdown-menu",sM),r.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,r){t.hasAttribute(e)||t.setAttribute(e,r)}_elemIsActive(t){return t.classList.contains(sO)}_getInnerElement(t){return t.matches(sk)?t:rj.findOne(sk,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each(function(){let e=sU.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw TypeError(`No method named "${t}"`);e[t]()}})}}rL.on(document,s_,sL,function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),rc(this)||sU.getOrCreateInstance(this).show()}),rL.on(window,sT,()=>{for(let t of rj.find(sF))sU.getOrCreateInstance(t)}),ry(sU);const sH=".bs.toast",sV=`mouseover${sH}`,sz=`mouseout${sH}`,sG=`focusin${sH}`,sj=`focusout${sH}`,sQ=`hide${sH}`,sW=`hidden${sH}`,sY=`show${sH}`,sX=`shown${sH}`,sq="hide",sK="show",sZ="showing",sJ={animation:"boolean",autohide:"boolean",delay:"number"},s$={animation:!0,autohide:!0,delay:5e3};class s1 extends rz{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return s$}static get DefaultType(){return sJ}static get NAME(){return"toast"}show(){rL.trigger(this._element,sY).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(sq),rf(this._element),this._element.classList.add(sK,sZ),this._queueCallback(()=>{this._element.classList.remove(sZ),rL.trigger(this._element,sX),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&!rL.trigger(this._element,sQ).defaultPrevented&&(this._element.classList.add(sZ),this._queueCallback(()=>{this._element.classList.add(sq),this._element.classList.remove(sZ,sK),rL.trigger(this._element,sW)},this._element,this._config.animation))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(sK),super.dispose()}isShown(){return this._element.classList.contains(sK)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();let r=t.relatedTarget;this._element===r||this._element.contains(r)||this._maybeScheduleHide()}_setListeners(){rL.on(this._element,sV,t=>this._onInteraction(t,!0)),rL.on(this._element,sz,t=>this._onInteraction(t,!1)),rL.on(this._element,sG,t=>this._onInteraction(t,!0)),rL.on(this._element,sj,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let e=s1.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw TypeError(`No method named "${t}"`);e[t](this)}})}}rQ(s1),ry(s1);var s0={};s0=function({mustBeMetaMask:t=!1,silent:e=!1,timeout:r=3e3}={}){if("boolean"!=typeof t)throw Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!=typeof e)throw Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if("number"!=typeof r)throw Error("@metamask/detect-provider: Expected option 'timeout' to be a number.");let n=!1;return new Promise(i=>{window.ethereum?s():(window.addEventListener("ethereum#initialized",s,{once:!0}),setTimeout(()=>{s()},r));function s(){if(n)return;n=!0,window.removeEventListener("ethereum#initialized",s);let{ethereum:r}=window;if(r&&(!t||r.isMetaMask))i(r);else{let n=t&&r?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";e||console.error("@metamask/detect-provider:",n),i(null)}}})},(A=v||(v={}))[A.QR_CODE=0]="QR_CODE",A[A.AZTEC=1]="AZTEC",A[A.CODABAR=2]="CODABAR",A[A.CODE_39=3]="CODE_39",A[A.CODE_93=4]="CODE_93",A[A.CODE_128=5]="CODE_128",A[A.DATA_MATRIX=6]="DATA_MATRIX",A[A.MAXICODE=7]="MAXICODE",A[A.ITF=8]="ITF",A[A.EAN_13=9]="EAN_13",A[A.EAN_8=10]="EAN_8",A[A.PDF_417=11]="PDF_417",A[A.RSS_14=12]="RSS_14",A[A.RSS_EXPANDED=13]="RSS_EXPANDED",A[A.UPC_A=14]="UPC_A",A[A.UPC_E=15]="UPC_E",A[A.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var s2=new Map([[v.QR_CODE,"QR_CODE"],[v.AZTEC,"AZTEC"],[v.CODABAR,"CODABAR"],[v.CODE_39,"CODE_39"],[v.CODE_93,"CODE_93"],[v.CODE_128,"CODE_128"],[v.DATA_MATRIX,"DATA_MATRIX"],[v.MAXICODE,"MAXICODE"],[v.ITF,"ITF"],[v.EAN_13,"EAN_13"],[v.EAN_8,"EAN_8"],[v.PDF_417,"PDF_417"],[v.RSS_14,"RSS_14"],[v.RSS_EXPANDED,"RSS_EXPANDED"],[v.UPC_A,"UPC_A"],[v.UPC_E,"UPC_E"],[v.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);(E=N||(N={}))[E.UNKNOWN=0]="UNKNOWN",E[E.URL=1]="URL",(b=R||(R={}))[b.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",b[b.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE";var s3=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[R.SCAN_TYPE_CAMERA,R.SCAN_TYPE_FILE],t}(),s4=function(){function t(t,e){this.format=t,this.formatName=e}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!s2.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,s2.get(e))},t}(),s8=function(){function t(){}return t.createFromText=function(t){return{decodedText:t,result:{text:t}}},t.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},t}();(C=O||(O={}))[C.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",C[C.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",C[C.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR";var s6=function(){function t(){}return t.createFrom=function(t){return{errorMessage:t,type:O.UNKWOWN_ERROR}},t}(),s5=function(){function t(t){this.verbose=t}return t.prototype.log=function(t){this.verbose&&console.log(t)},t.prototype.warn=function(t){this.verbose&&console.warn(t)},t.prototype.logError=function(t,e){(this.verbose||!0===e)&&console.error(t)},t.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},t}();function s7(t){return null==t}var s9=function(){function t(){}return t.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},t.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),ot=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(t){return"Last Match: ".concat(t)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),oe=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),or=function(){function t(){}return t.isMediaStreamConstraintsValid=function(t,e){if("object"!=typeof t){var r=typeof t;return e.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=Object.keys(t),s=0;s<i.length;s++){var o=i[s];if(n.has(o))return e.logError("".concat(o," is not supported videoConstaints."),!0),!1}return!0},t}(),on={};(function(t){let e;var r,n,i,s,o,a,l,u,c,h,d,f,g,p,m,w,y,A,E,b,C,I,_=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},S=function(t){function e(){this.constructor=r}function r(e){var r,n,i,s,o=this.constructor,a=t.call(this,e)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1}),r=o.prototype,(n=Object.setPrototypeOf)?n(a,r):a.__proto__=r,void 0===i&&(i=a.constructor),(s=Error.captureStackTrace)&&s(a,i),a}return _(r,t),r.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e),r}(Error);class T extends S{constructor(t){super(t),this.message=t}getKind(){return this.constructor.kind}}T.kind="Exception";class v extends T{}v.kind="ArgumentException";class N extends T{}N.kind="IllegalArgumentException";class R{constructor(t){if(this.binarizer=t,null===t)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,e){return this.binarizer.getBlackRow(t,e)}getBlackMatrix(){return(null===this.matrix||void 0===this.matrix)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,e,r,n){let i=this.binarizer.getLuminanceSource().crop(t,e,r,n);return new R(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new R(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){let t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new R(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch(t){return""}}}class O extends T{static getChecksumInstance(){return new O}}O.kind="ChecksumException";class D{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(t,e,r,n,i){for(;i--;)r[n++]=t[e++]}static currentTimeMillis(){return Date.now()}}class x extends T{}x.kind="IndexOutOfBoundsException";class B extends x{constructor(t,e){super(e),this.index=t,this.message=e}}B.kind="ArrayIndexOutOfBoundsException";class P{static fill(t,e){for(let r=0,n=t.length;r<n;r++)t[r]=e}static fillWithin(t,e,r,n){P.rangeCheck(t.length,e,r);for(let i=e;i<r;i++)t[i]=n}static rangeCheck(t,e,r){if(e>r)throw new N("fromIndex("+e+") > toIndex("+r+")");if(e<0)throw new B(e);if(r>t)throw new B(r)}static asList(...t){return t}static create(t,e,r){return Array.from({length:t}).map(t=>Array.from({length:e}).fill(r))}static createInt32Array(t,e,r){return Array.from({length:t}).map(t=>Int32Array.from({length:e}).fill(r))}static equals(t,e){if(!t||!e||!t.length||!e.length||t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;r++)if(t[r]!==e[r])return!1;return!0}static hashCode(t){if(null===t)return 0;let e=1;for(let r of t)e=31*e+r;return e}static fillUint8Array(t,e){for(let r=0;r!==t.length;r++)t[r]=e}static copyOf(t,e){return t.slice(0,e)}static copyOfUint8Array(t,e){if(t.length<=e){let r=new Uint8Array(e);return r.set(t),r}return t.slice(0,e)}static copyOfRange(t,e,r){let n=r-e,i=new Int32Array(n);return M.arraycopy(t,e,i,0,n),i}static binarySearch(t,e,r){void 0===r&&(r=P.numberComparator);let n=0,i=t.length-1;for(;n<=i;){let s=i+n>>1,o=r(e,t[s]);if(o>0)n=s+1;else{if(!(o<0))return s;i=s-1}}return-n-1}static numberComparator(t,e){return t-e}}class L{static numberOfTrailingZeros(t){let e;if(0===t)return 32;let r=31;return 0!=(e=t<<16)&&(r-=16,t=e),0!=(e=t<<8)&&(r-=8,t=e),0!=(e=t<<4)&&(r-=4,t=e),0!=(e=t<<2)&&(r-=2,t=e),r-(t<<1>>>31)}static numberOfLeadingZeros(t){if(0===t)return 32;let e=1;return t>>>16==0&&(e+=16,t<<=16),t>>>24==0&&(e+=8,t<<=8),t>>>28==0&&(e+=4,t<<=4),t>>>30==0&&(e+=2,t<<=2),e-=t>>>31}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t-=t>>>1&0x55555555,t=(t=(0x33333333&t)+(t>>>2&0x33333333))+(t>>>4)&0xf0f0f0f,t+=t>>>8,63&(t+=t>>>16)}static truncDivision(t,e){return Math.trunc(t/e)}static parseInt(t,e){return parseInt(t,e)}}L.MIN_VALUE_32_BITS=-0x80000000,L.MAX_VALUE=Number.MAX_SAFE_INTEGER;class k{constructor(t,e){void 0===t?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,null==e?this.bits=k.makeArray(t):this.bits=e)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>32*this.bits.length){let e=k.makeArray(t);M.arraycopy(this.bits,0,e,0,this.bits.length),this.bits=e}}get(t){return(this.bits[Math.floor(t/32)]&1<<(31&t))!=0}set(t){this.bits[Math.floor(t/32)]|=1<<(31&t)}flip(t){this.bits[Math.floor(t/32)]^=1<<(31&t)}getNextSet(t){let e=this.size;if(t>=e)return e;let r=this.bits,n=Math.floor(t/32),i=r[n];i&=~((1<<(31&t))-1);let s=r.length;for(;0===i;){if(++n===s)return e;i=r[n]}let o=32*n+L.numberOfTrailingZeros(i);return o>e?e:o}getNextUnset(t){let e=this.size;if(t>=e)return e;let r=this.bits,n=Math.floor(t/32),i=~r[n];i&=~((1<<(31&t))-1);let s=r.length;for(;0===i;){if(++n===s)return e;i=~r[n]}let o=32*n+L.numberOfTrailingZeros(i);return o>e?e:o}setBulk(t,e){this.bits[Math.floor(t/32)]=e}setRange(t,e){if(e<t||t<0||e>this.size)throw new N;if(e===t)return;let r=Math.floor(t/32),n=Math.floor(--e/32),i=this.bits;for(let s=r;s<=n;s++){let o=s>r?0:31&t,a=(2<<(s<n?31:31&e))-(1<<o);i[s]|=a}}clear(){let t=this.bits.length,e=this.bits;for(let r=0;r<t;r++)e[r]=0}isRange(t,e,r){if(e<t||t<0||e>this.size)throw new N;if(e===t)return!0;let n=Math.floor(t/32),i=Math.floor(--e/32),s=this.bits;for(let o=n;o<=i;o++){let a=o>n?0:31&t,l=(2<<(o<i?31:31&e))-(1<<a)|0;if((s[o]&l)!==(r?l:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(t,e){if(e<0||e>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+e);for(let r=e;r>0;r--)this.appendBit((t>>r-1&1)==1)}appendBitArray(t){let e=t.size;this.ensureCapacity(this.size+e);for(let r=0;r<e;r++)this.appendBit(t.get(r))}xor(t){if(this.size!==t.size)throw new N("Sizes don't match");let e=this.bits;for(let r=0,n=e.length;r<n;r++)e[r]^=t.bits[r]}toBytes(t,e,r,n){for(let i=0;i<n;i++){let n=0;for(let e=0;e<8;e++)this.get(t)&&(n|=1<<7-e),t++;e[r+i]=n}}getBitArray(){return this.bits}reverse(){let t=new Int32Array(this.bits.length),e=Math.floor((this.size-1)/32),r=e+1,n=this.bits;for(let i=0;i<r;i++){let r=n[i];r=(r=(r=(r=(r=r>>1&0x55555555|(0x55555555&r)<<1)>>2&0x33333333|(0x33333333&r)<<2)>>4&0xf0f0f0f|(0xf0f0f0f&r)<<4)>>8&0xff00ff|(0xff00ff&r)<<8)>>16&65535|(65535&r)<<16,t[e-i]=r}if(this.size!==32*r){let e=32*r-this.size,n=t[0]>>>e;for(let i=1;i<r;i++){let r=t[i];n|=r<<32-e,t[i-1]=n,n=r>>>e}t[r-1]=n}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){return t instanceof k&&this.size===t.size&&P.equals(this.bits,t.bits)}hashCode(){return 31*this.size+P.hashCode(this.bits)}toString(){let t="";for(let e=0,r=this.size;e<r;e++)(7&e)==0&&(t+=" "),t+=this.get(e)?"X":".";return t}clone(){return new k(this.size,this.bits.slice())}}(r=f||(f={}))[r.OTHER=0]="OTHER",r[r.PURE_BARCODE=1]="PURE_BARCODE",r[r.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",r[r.TRY_HARDER=3]="TRY_HARDER",r[r.CHARACTER_SET=4]="CHARACTER_SET",r[r.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",r[r.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",r[r.ASSUME_GS1=7]="ASSUME_GS1",r[r.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",r[r.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",r[r.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS";var F=f;class U extends T{static getFormatInstance(){return new U}}U.kind="FormatException",(n=g||(g={}))[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR";class H{constructor(t,e,r,...n){this.valueIdentifier=t,this.name=r,"number"==typeof e?this.values=Int32Array.from([e]):this.values=e,this.otherEncodingNames=n,H.VALUE_IDENTIFIER_TO_ECI.set(t,this),H.NAME_TO_ECI.set(r,this);let i=this.values;for(let t=0,e=i.length;t!==e;t++){let e=i[t];H.VALUES_TO_ECI.set(e,this)}for(let t of n)H.NAME_TO_ECI.set(t,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new U("incorect value");let e=H.VALUES_TO_ECI.get(t);if(void 0===e)throw new U("incorect value");return e}static getCharacterSetECIByName(t){let e=H.NAME_TO_ECI.get(t);if(void 0===e)throw new U("incorect value");return e}equals(t){return t instanceof H&&this.getName()===t.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(g.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(g.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(g.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(g.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(g.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(g.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(g.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(g.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(g.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(g.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(g.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(g.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(g.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(g.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(g.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(g.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(g.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(g.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(g.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(g.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(g.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(g.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(g.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(g.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(g.Big5,28,"Big5"),H.GB18030=new H(g.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(g.EUC_KR,30,"EUC_KR","EUC-KR");class V extends T{}V.kind="UnsupportedOperationException";class z{static decode(t,e){let r=this.encodingName(e);return this.customDecoder?this.customDecoder(t,r):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(t,r):new TextDecoder(r).decode(t)}static shouldDecodeOnFallback(t){return!z.isBrowser()&&"ISO-8859-1"===t}static encode(t,e){let r=this.encodingName(e);return this.customEncoder?this.customEncoder(t,r):"undefined"==typeof TextEncoder?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"===({}).toString.call(window)}static encodingName(t){return"string"==typeof t?t:t.getName()}static encodingCharacterSet(t){return t instanceof H?t:H.getCharacterSetECIByName(t)}static decodeFallback(t,e){let r=this.encodingCharacterSet(e);if(z.isDecodeFallbackSupported(r)){let e="";for(let r=0,n=t.length;r<n;r++){let n=t[r].toString(16);n.length<2&&(n="0"+n),e+="%"+n}return decodeURIComponent(e)}if(r.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new V(`Encoding ${this.encodingName(e)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(H.UTF8)||t.equals(H.ISO8859_1)||t.equals(H.ASCII)}static encodeFallback(t){let e=btoa(unescape(encodeURIComponent(t))).split(""),r=[];for(let t=0;t<e.length;t++)r.push(e[t].charCodeAt(0));return new Uint8Array(r)}}class G{static castAsNonUtf8Char(t,e=null){let r=e?e.getName():this.ISO88591;return z.decode(new Uint8Array([t]),r)}static guessEncoding(t,e){if(null!=e&&void 0!==e.get(F.CHARACTER_SET))return e.get(F.CHARACTER_SET).toString();let r=t.length,n=!0,i=!0,s=!0,o=0,a=0,l=0,u=0,c=0,h=0,d=0,f=0,g=0,p=0,m=0,w=t.length>3&&239===t[0]&&187===t[1]&&191===t[2];for(let e=0;e<r&&(n||i||s);e++){let r=255&t[e];s&&(o>0?(128&r)==0?s=!1:o--:(128&r)!=0&&((64&r)==0?s=!1:(o++,(32&r)==0?a++:(o++,(16&r)==0?l++:(o++,(8&r)==0?u++:s=!1))))),n&&(r>127&&r<160?n=!1:r>159&&(r<192||215===r||247===r)&&m++),i&&(c>0?r<64||127===r||r>252?i=!1:c--:128===r||160===r||r>239?i=!1:r>160&&r<224?(h++,f=0,++d>g&&(g=d)):r>127?(c++,d=0,++f>p&&(p=f)):(d=0,f=0))}return(s&&o>0&&(s=!1),i&&c>0&&(i=!1),s&&(w||a+l+u>0))?G.UTF8:i&&(G.ASSUME_SHIFT_JIS||g>=3||p>=3)?G.SHIFT_JIS:n&&i?2===g&&2===h||10*m>=r?G.SHIFT_JIS:G.ISO88591:n?G.ISO88591:i?G.SHIFT_JIS:s?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(t,...e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,i,s,o,a){let l;if("%%"===t)return"%";if(void 0===e[++r])return;t=s?parseInt(s.substr(1)):void 0;let u=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=e[r];break;case"c":l=e[r][0];break;case"f":l=parseFloat(e[r]).toFixed(t);break;case"p":l=parseFloat(e[r]).toPrecision(t);break;case"e":l=parseFloat(e[r]).toExponential(t);break;case"x":l=parseInt(e[r]).toString(u||16);break;case"d":l=parseFloat(parseInt(e[r],u||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(i),h=i&&i[0]+""=="0"?"0":" ";for(;l.length<c;)l=void 0!==n?l+h:h+l;return l})}static getBytes(t,e){return z.encode(t,e)}static getCharCode(t,e=0){return t.charCodeAt(e)}static getCharAt(t){return String.fromCharCode(t)}}G.SHIFT_JIS=H.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=H.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=H.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class j{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return"string"==typeof t?this.value+=t.toString():this.encoding?this.value+=G.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,e,r){for(let n=e;e<e+r;n++)this.append(t[n]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+1)}substring(t,e){return this.value.substring(t,e)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,e){this.value=this.value.substr(0,t)+e+this.value.substr(t+e.length)}}class Q{constructor(t,e,r,n){if(this.width=t,this.height=e,this.rowSize=r,this.bits=n,null==e&&(e=t),this.height=e,t<1||e<1)throw new N("Both dimensions must be greater than 0");null==r&&(r=Math.floor((t+31)/32)),this.rowSize=r,null==n&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){let e=t.length,r=t[0].length,n=new Q(r,e);for(let i=0;i<e;i++){let e=t[i];for(let t=0;t<r;t++)e[t]&&n.set(t,i)}return n}static parseFromString(t,e,r){if(null===t)throw new N("stringRepresentation cannot be null");let n=Array(t.length),i=0,s=0,o=-1,a=0,l=0;for(;l<t.length;)if("\n"===t.charAt(l)||"\r"===t.charAt(l)){if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new N("row lengths do not match");s=i,a++}l++}else if(t.substring(l,l+e.length)===e)l+=e.length,n[i]=!0,i++;else if(t.substring(l,l+r.length)===r)l+=r.length,n[i]=!1,i++;else throw new N("illegal character encountered: "+t.substring(l));if(i>s){if(-1===o)o=i-s;else if(i-s!==o)throw new N("row lengths do not match");a++}let u=new Q(o,a);for(let t=0;t<i;t++)n[t]&&u.set(Math.floor(t%o),Math.floor(t/o));return u}get(t,e){let r=e*this.rowSize+Math.floor(t/32);return(this.bits[r]>>>(31&t)&1)!=0}set(t,e){let r=e*this.rowSize+Math.floor(t/32);this.bits[r]|=1<<(31&t)}unset(t,e){let r=e*this.rowSize+Math.floor(t/32);this.bits[r]&=~(1<<(31&t))}flip(t,e){let r=e*this.rowSize+Math.floor(t/32);this.bits[r]^=1<<(31&t)}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new N("input matrix dimensions do not match");let e=new k(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,s=this.height;i<s;i++){let s=i*r,o=t.getRow(i,e).getBitArray();for(let t=0;t<r;t++)n[s+t]^=o[t]}}clear(){let t=this.bits,e=t.length;for(let r=0;r<e;r++)t[r]=0}setRegion(t,e,r,n){if(e<0||t<0)throw new N("Left and top must be nonnegative");if(n<1||r<1)throw new N("Height and width must be at least 1");let i=t+r,s=e+n;if(s>this.height||i>this.width)throw new N("The region must fit inside the matrix");let o=this.rowSize,a=this.bits;for(let r=e;r<s;r++){let e=r*o;for(let r=t;r<i;r++)a[e+Math.floor(r/32)]|=1<<(31&r)}}getRow(t,e){null==e||e.getSize()<this.width?e=new k(this.width):e.clear();let r=this.rowSize,n=this.bits,i=t*r;for(let t=0;t<r;t++)e.setBulk(32*t,n[i+t]);return e}setRow(t,e){M.arraycopy(e.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){let t=this.getWidth(),e=this.getHeight(),r=new k(t),n=new k(t);for(let t=0,i=Math.floor((e+1)/2);t<i;t++)r=this.getRow(t,r),n=this.getRow(e-1-t,n),r.reverse(),n.reverse(),this.setRow(t,n),this.setRow(e-1-t,r)}getEnclosingRectangle(){let t=this.width,e=this.height,r=this.rowSize,n=this.bits,i=t,s=e,o=-1,a=-1;for(let t=0;t<e;t++)for(let e=0;e<r;e++){let l=n[t*r+e];if(0!==l){if(t<s&&(s=t),t>a&&(a=t),32*e<i){let t=0;for(;l<<31-t==0;)t++;32*e+t<i&&(i=32*e+t)}if(32*e+31>o){let t=31;for(;l>>>t==0;)t--;32*e+t>o&&(o=32*e+t)}}}return o<i||a<s?null:Int32Array.from([i,s,o-i+1,a-s+1])}getTopLeftOnBit(){let t=this.rowSize,e=this.bits,r=0;for(;r<e.length&&0===e[r];)r++;if(r===e.length)return null;let n=r/t,i=r%t*32,s=e[r],o=0;for(;s<<31-o==0;)o++;return i+=o,Int32Array.from([i,n])}getBottomRightOnBit(){let t=this.rowSize,e=this.bits,r=e.length-1;for(;r>=0&&0===e[r];)r--;if(r<0)return null;let n=Math.floor(r/t),i=32*Math.floor(r%t),s=e[r],o=31;for(;s>>>o==0;)o--;return i+=o,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){return t instanceof Q&&this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&P.equals(this.bits,t.bits)}hashCode(){let t=this.width;return 31*(t=31*(t=31*(t=31*t+this.width)+this.height)+this.rowSize)+P.hashCode(this.bits)}toString(t="X ",e="  ",r="\n"){return this.buildToString(t,e,r)}buildToString(t,e,r){let n=new j;for(let i=0,s=this.height;i<s;i++){for(let r=0,s=this.width;r<s;r++)n.append(this.get(r,i)?t:e);n.append(r)}return n.toString()}clone(){return new Q(this.width,this.height,this.rowSize,this.bits.slice())}}class W extends T{static getNotFoundInstance(){return new W}}W.kind="NotFoundException";class Y extends D{constructor(t){super(t),this.luminances=Y.EMPTY,this.buckets=new Int32Array(Y.LUMINANCE_BUCKETS)}getBlackRow(t,e){let r=this.getLuminanceSource(),n=r.getWidth();null==e||e.getSize()<n?e=new k(n):e.clear(),this.initArrays(n);let i=r.getRow(t,this.luminances),s=this.buckets;for(let t=0;t<n;t++)s[(255&i[t])>>Y.LUMINANCE_SHIFT]++;let o=Y.estimateBlackPoint(s);if(n<3)for(let t=0;t<n;t++)(255&i[t])<o&&e.set(t);else{let t=255&i[0],r=255&i[1];for(let s=1;s<n-1;s++){let n=255&i[s+1];(4*r-t-n)/2<o&&e.set(s),t=r,r=n}}return e}getBlackMatrix(){let t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight(),n=new Q(e,r);this.initArrays(e);let i=this.buckets;for(let n=1;n<5;n++){let s=Math.floor(r*n/5),o=t.getRow(s,this.luminances),a=Math.floor(4*e/5);for(let t=Math.floor(e/5);t<a;t++){let e=255&o[t];i[e>>Y.LUMINANCE_SHIFT]++}}let s=Y.estimateBlackPoint(i),o=t.getMatrix();for(let t=0;t<r;t++){let r=t*e;for(let i=0;i<e;i++)(255&o[r+i])<s&&n.set(i,t)}return n}createBinarizer(t){return new Y(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));let e=this.buckets;for(let t=0;t<Y.LUMINANCE_BUCKETS;t++)e[t]=0}static estimateBlackPoint(t){let e=t.length,r=0,n=0,i=0;for(let s=0;s<e;s++)t[s]>i&&(n=s,i=t[s]),t[s]>r&&(r=t[s]);let s=0,o=0;for(let r=0;r<e;r++){let e=r-n,i=t[r]*e*e;i>o&&(s=r,o=i)}if(n>s){let t=n;n=s,s=t}if(s-n<=e/16)throw new W;let a=s-1,l=-1;for(let e=s-1;e>n;e--){let i=e-n,o=i*i*(s-e)*(r-t[e]);o>l&&(a=e,l=o)}return a<<Y.LUMINANCE_SHIFT}}Y.LUMINANCE_BITS=5,Y.LUMINANCE_SHIFT=8-Y.LUMINANCE_BITS,Y.LUMINANCE_BUCKETS=1<<Y.LUMINANCE_BITS,Y.EMPTY=Uint8ClampedArray.from([0]);class X extends Y{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;let t=this.getLuminanceSource(),e=t.getWidth(),r=t.getHeight();if(e>=X.MINIMUM_DIMENSION&&r>=X.MINIMUM_DIMENSION){let n=t.getMatrix(),i=e>>X.BLOCK_SIZE_POWER;(e&X.BLOCK_SIZE_MASK)!=0&&i++;let s=r>>X.BLOCK_SIZE_POWER;(r&X.BLOCK_SIZE_MASK)!=0&&s++;let o=X.calculateBlackPoints(n,i,s,e,r),a=new Q(e,r);X.calculateThresholdForBlock(n,i,s,e,r,o,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new X(t)}static calculateThresholdForBlock(t,e,r,n,i,s,o){let a=i-X.BLOCK_SIZE,l=n-X.BLOCK_SIZE;for(let i=0;i<r;i++){let u=i<<X.BLOCK_SIZE_POWER;u>a&&(u=a);let c=X.cap(i,2,r-3);for(let r=0;r<e;r++){let i=r<<X.BLOCK_SIZE_POWER;i>l&&(i=l);let a=X.cap(r,2,e-3),h=0;for(let t=-2;t<=2;t++){let e=s[c+t];h+=e[a-2]+e[a-1]+e[a]+e[a+1]+e[a+2]}let d=h/25;X.thresholdBlock(t,i,u,d,n,o)}}}static cap(t,e,r){return t<e?e:t>r?r:t}static thresholdBlock(t,e,r,n,i,s){for(let o=0,a=r*i+e;o<X.BLOCK_SIZE;o++,a+=i)for(let i=0;i<X.BLOCK_SIZE;i++)(255&t[a+i])<=n&&s.set(e+i,r+o)}static calculateBlackPoints(t,e,r,n,i){let s=i-X.BLOCK_SIZE,o=n-X.BLOCK_SIZE,a=Array(r);for(let i=0;i<r;i++){a[i]=new Int32Array(e);let r=i<<X.BLOCK_SIZE_POWER;r>s&&(r=s);for(let s=0;s<e;s++){let e=s<<X.BLOCK_SIZE_POWER;e>o&&(e=o);let l=0,u=255,c=0;for(let i=0,s=r*n+e;i<X.BLOCK_SIZE;i++,s+=n){for(let e=0;e<X.BLOCK_SIZE;e++){let r=255&t[s+e];l+=r,r<u&&(u=r),r>c&&(c=r)}if(c-u>X.MIN_DYNAMIC_RANGE)for(i++,s+=n;i<X.BLOCK_SIZE;i++,s+=n)for(let e=0;e<X.BLOCK_SIZE;e++)l+=255&t[s+e]}let h=l>>2*X.BLOCK_SIZE_POWER;if(c-u<=X.MIN_DYNAMIC_RANGE&&(h=u/2,i>0&&s>0)){let t=(a[i-1][s]+2*a[i][s-1]+a[i-1][s-1])/4;u<t&&(h=t)}a[i][s]=h}}return a}}X.BLOCK_SIZE_POWER=3,X.BLOCK_SIZE=1<<X.BLOCK_SIZE_POWER,X.BLOCK_SIZE_MASK=X.BLOCK_SIZE-1,X.MINIMUM_DIMENSION=5*X.BLOCK_SIZE,X.MIN_DYNAMIC_RANGE=24;class q{constructor(t,e){this.width=t,this.height=e}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,e,r,n){throw new V("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new V("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new V("This luminance source does not support rotation by 45 degrees.")}toString(){let t=new Uint8ClampedArray(this.width),e=new j;for(let r=0;r<this.height;r++){let n=this.getRow(r,t);for(let t=0;t<this.width;t++){let r,i=255&n[t];r=i<64?"#":i<128?"+":i<192?".":" ",e.append(r)}e.append("\n")}return e.toString()}}class K extends q{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,e){let r=this.delegate.getRow(t,e),n=this.getWidth();for(let t=0;t<n;t++)r[t]=255-(255&r[t]);return r}getMatrix(){let t=this.delegate.getMatrix(),e=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(e);for(let n=0;n<e;n++)r[n]=255-(255&t[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(t,e,r,n){return new K(this.delegate.crop(t,e,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new K(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new K(this.delegate.rotateCounterClockwise45())}}class Z extends q{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=Z.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){let e=t.getContext("2d").getImageData(0,0,t.width,t.height);return Z.toGrayscaleBuffer(e.data,t.width,t.height)}static toGrayscaleBuffer(t,e,r){let n=new Uint8ClampedArray(e*r);for(let e=0,r=0,i=t.length;e<i;e+=4,r++){let i;if(0===t[e+3])i=255;else{let r=t[e];i=306*r+601*t[e+1]+117*t[e+2]+512>>10}n[r]=i}return n}getRow(t,e){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);let r=this.getWidth(),n=t*r;return null===e?e=this.buffer.slice(n,n+r):(e.length<r&&(e=new Uint8ClampedArray(r)),e.set(this.buffer.slice(n,n+r))),e}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,e,r,n){return super.crop(t,e,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){let t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){let e=this.getTempCanvasElement(),r=e.getContext("2d"),n=t*Z.DEGREE_TO_RADIANS,i=this.canvas.width,s=this.canvas.height,o=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*s),a=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*s);return e.width=o,e.height=a,r.translate(o/2,a/2),r.rotate(n),r.drawImage(this.canvas,-(i/2),-(s/2)),this.buffer=Z.makeBufferFromCanvasImageData(e),this}invert(){return new K(this)}}Z.DEGREE_TO_RADIANS=Math.PI/180;class J{constructor(t,e,r){this.deviceId=t,this.label=e,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var $=(globalThis||tF||self||window||void 0)&&(globalThis||tF||self||window||void 0).__awaiter||function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})};class tt{constructor(t,e=500,r){this.reader=t,this.timeBetweenScansMillis=e,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return $(this,void 0,void 0,function*(){if(!this.hasNavigator)throw Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw Error("Can't enumerate devices, method not supported.");let t=yield navigator.mediaDevices.enumerateDevices(),e=[];for(let r of t){let t="video"===r.kind?"videoinput":r.kind;if("videoinput"!==t)continue;let n=r.deviceId||r.id,i={deviceId:n,label:r.label||`Video device ${e.length+1}`,kind:t,groupId:r.groupId};e.push(i)}return e})}getVideoInputDevices(){return $(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new J(t.deviceId,t.label))})}findDeviceById(t){return $(this,void 0,void 0,function*(){let e=yield this.listVideoInputDevices();return e?e.find(e=>e.deviceId===t):null})}decodeFromInputVideoDevice(t,e){return $(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,e)})}decodeOnceFromVideoDevice(t,e){return $(this,void 0,void 0,function*(){return this.reset(),yield this.decodeOnceFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e)})}decodeOnceFromConstraints(t,e){return $(this,void 0,void 0,function*(){let r=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(r,e)})}decodeOnceFromStream(t,e){return $(this,void 0,void 0,function*(){this.reset();let r=yield this.attachStreamToVideo(t,e);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(t,e,r){return $(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,e,r)})}decodeFromVideoDevice(t,e,r){return $(this,void 0,void 0,function*(){return yield this.decodeFromConstraints({video:t?{deviceId:{exact:t}}:{facingMode:"environment"}},e,r)})}decodeFromConstraints(t,e,r){return $(this,void 0,void 0,function*(){let n=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(n,e,r)})}decodeFromStream(t,e,r){return $(this,void 0,void 0,function*(){this.reset();let n=yield this.attachStreamToVideo(t,e);return yield this.decodeContinuously(n,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,e){return $(this,void 0,void 0,function*(){let r=this.prepareVideoElement(e);return this.addVideoSource(r,t),this.videoElement=r,this.stream=t,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(t){return new Promise((e,r)=>this.playVideoOnLoad(t,()=>e()))}playVideoOnLoad(t,e){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",e),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return $(this,void 0,void 0,function*(){if(this.isVideoPlaying(t))return void console.warn("Trying to play video that is already playing.");try{yield t.play()}catch(t){console.warn("It was not possible to play the video.")}})}getMediaElement(t,e){let r=document.getElementById(t);if(!r)throw new v(`element with id '${t}' not found`);if(r.nodeName.toLowerCase()!==e.toLowerCase())throw new v(`element with id '${t}' must be an ${e} element`);return r}decodeFromImage(t,e){if(!t&&!e)throw new v("either imageElement with a src set or an url must be provided");return e&&!t?this.decodeFromImageUrl(e):this.decodeFromImageElement(t)}decodeFromVideo(t,e){if(!t&&!e)throw new v("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrl(e):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,e,r){if(void 0===t&&void 0===e)throw new v("Either an element with a src set or an URL must be provided");return e&&!t?this.decodeFromVideoUrlContinuously(e,r):this.decodeFromVideoElementContinuously(t,r)}decodeFromImageElement(t){let e;if(!t)throw new v("An image element must be provided.");this.reset();let r=this.prepareImageElement(t);return this.imageElement=r,this.isImageLoaded(r)?this.decodeOnce(r,!1,!0):this._decodeOnLoadImage(r)}decodeFromVideoElement(t){let e=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(e)}decodeFromVideoElementContinuously(t,e){let r=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(r,e)}_decodeFromVideoElementSetup(t){if(!t)throw new v("A video element must be provided.");this.reset();let e=this.prepareVideoElement(t);return this.videoElement=e,e}decodeFromImageUrl(t){if(!t)throw new v("An URL must be provided.");this.reset();let e=this.prepareImageElement();this.imageElement=e;let r=this._decodeOnLoadImage(e);return e.src=t,r}decodeFromVideoUrl(t){if(!t)throw new v("An URL must be provided.");this.reset();let e=this.prepareVideoElement(),r=this.decodeFromVideoElement(e);return e.src=t,r}decodeFromVideoUrlContinuously(t,e){if(!t)throw new v("An URL must be provided.");this.reset();let r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,e);return r.src=t,n}_decodeOnLoadImage(t){return new Promise((e,r)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(e,r),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return $(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,e){return $(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,e)})}isImageLoaded(t){return!!t.complete&&0!==t.naturalWidth}prepareImageElement(t){let e;return void 0===t&&((e=document.createElement("img")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(e=t),e}prepareVideoElement(t){let e;return t||"undefined"==typeof document||((e=document.createElement("video")).width=200,e.height=200),"string"==typeof t&&(e=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(e=t),e.setAttribute("autoplay","true"),e.setAttribute("muted","true"),e.setAttribute("playsinline","true"),e}decodeOnce(t,e=!0,r=!0){this._stopAsyncDecode=!1;let n=(i,s)=>{if(this._stopAsyncDecode){s(new W("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let e=this.decode(t);i(e)}catch(a){let t=e&&a instanceof W,o=a instanceof O||a instanceof U;if(t||o&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,i,s);s(a)}};return new Promise((t,e)=>n(t,e))}decodeContinuously(t,e){this._stopContinuousDecode=!1;let r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let n=this.decode(t);e(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(i){e(null,i);let t=i instanceof O||i instanceof U,n=i instanceof W;(t||n)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(t){let e=this.createBinaryBitmap(t);return this.decodeBitmap(e)}_isHTMLVideoElement(t){return 0!==t.videoWidth}drawFrameOnCanvas(t,e,r){e||(e={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}drawImageOnCanvas(t,e,r=this.captureCanvasContext){e||(e={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(t,e.sx,e.sy,e.sWidth,e.sHeight,e.dx,e.dy,e.dWidth,e.dHeight)}createBinaryBitmap(t){return this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t),new R(new X(new Z(this.getCaptureCanvas(t))))}getCaptureCanvasContext(t){if(!this.captureCanvasContext){let e=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=e}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){let e=this.createCaptureCanvas(t);this.captureCanvas=e}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){let e,r;if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;let n=document.createElement("canvas");return void 0!==t&&(t instanceof HTMLVideoElement?(e=t.videoWidth,r=t.videoHeight):t instanceof HTMLImageElement&&(e=t.naturalWidth||t.width,r=t.naturalHeight||t.height)),n.style.width=e+"px",n.style.height=r+"px",n.width=e,n.height=r,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,e){try{t.srcObject=e}catch(r){t.src=URL.createObjectURL(e)}}cleanVideoSource(t){try{t.srcObject=null}catch(e){t.src=""}this.videoElement.removeAttribute("src")}}class te{constructor(t,e,r=null==e?0:8*e.length,n,i,s=M.currentTimeMillis()){this.text=t,this.rawBytes=e,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=s,this.text=t,this.rawBytes=e,null==r?this.numBits=null==e?0:8*e.length:this.numBits=r,this.resultPoints=n,this.format=i,this.resultMetadata=null,null==s?this.timestamp=M.currentTimeMillis():this.timestamp=s}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,e){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(t,e)}putAllMetadata(t){null!==t&&(null===this.resultMetadata?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){let e=this.resultPoints;if(null===e)this.resultPoints=t;else if(null!==t&&t.length>0){let r=Array(e.length+t.length);M.arraycopy(e,0,r,0,e.length),M.arraycopy(t,0,r,e.length,t.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}(i=p||(p={}))[i.AZTEC=0]="AZTEC",i[i.CODABAR=1]="CODABAR",i[i.CODE_39=2]="CODE_39",i[i.CODE_93=3]="CODE_93",i[i.CODE_128=4]="CODE_128",i[i.DATA_MATRIX=5]="DATA_MATRIX",i[i.EAN_8=6]="EAN_8",i[i.EAN_13=7]="EAN_13",i[i.ITF=8]="ITF",i[i.MAXICODE=9]="MAXICODE",i[i.PDF_417=10]="PDF_417",i[i.QR_CODE=11]="QR_CODE",i[i.RSS_14=12]="RSS_14",i[i.RSS_EXPANDED=13]="RSS_EXPANDED",i[i.UPC_A=14]="UPC_A",i[i.UPC_E=15]="UPC_E",i[i.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION";var tr=p;(s=m||(m={}))[s.OTHER=0]="OTHER",s[s.ORIENTATION=1]="ORIENTATION",s[s.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",s[s.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",s[s.ISSUE_NUMBER=4]="ISSUE_NUMBER",s[s.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",s[s.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",s[s.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",s[s.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",s[s.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",s[s.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY";var tn=m;class ti{constructor(t,e,r,n,i=-1,s=-1){this.rawBytes=t,this.text=e,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=s,this.numBits=null==t?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class ts{exp(t){return this.expTable[t]}log(t){if(0===t)throw new N;return this.logTable[t]}static addOrSubtract(t,e){return t^e}}class to{constructor(t,e){if(0===e.length)throw new N;this.field=t;let r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-t),M.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){let e;if(0===t)return this.getCoefficient(0);let r=this.coefficients;if(1===t){e=0;for(let t=0,n=r.length;t!==n;t++){let n=r[t];e=ts.addOrSubtract(e,n)}return e}e=r[0];let n=r.length,i=this.field;for(let s=1;s<n;s++)e=ts.addOrSubtract(i.multiply(t,e),r[s]);return e}addOrSubtract(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){let t=e;e=r,r=t}let n=new Int32Array(r.length),i=r.length-e.length;M.arraycopy(r,0,n,0,i);for(let t=i;t<r.length;t++)n[t]=ts.addOrSubtract(e[t-i],r[t]);return new to(this.field,n)}multiply(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();let e=this.coefficients,r=e.length,n=t.coefficients,i=n.length,s=new Int32Array(r+i-1),o=this.field;for(let t=0;t<r;t++){let r=e[t];for(let e=0;e<i;e++)s[t+e]=ts.addOrSubtract(s[t+e],o.multiply(r,n[e]))}return new to(o,s)}multiplyScalar(t){if(0===t)return this.field.getZero();if(1===t)return this;let e=this.coefficients.length,r=this.field,n=new Int32Array(e),i=this.coefficients;for(let s=0;s<e;s++)n[s]=r.multiply(i[s],t);return new to(r,n)}multiplyByMonomial(t,e){if(t<0)throw new N;if(0===e)return this.field.getZero();let r=this.coefficients,n=r.length,i=new Int32Array(n+t),s=this.field;for(let t=0;t<n;t++)i[t]=s.multiply(r[t],e);return new to(s,i)}divide(t){if(!this.field.equals(t.field))throw new N("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new N("Divide by 0");let e=this.field,r=e.getZero(),n=this,i=t.getCoefficient(t.getDegree()),s=e.inverse(i);for(;n.getDegree()>=t.getDegree()&&!n.isZero();){let i=n.getDegree()-t.getDegree(),o=e.multiply(n.getCoefficient(n.getDegree()),s),a=t.multiplyByMonomial(i,o),l=e.buildMonomial(i,o);r=r.addOrSubtract(l),n=n.addOrSubtract(a)}return[r,n]}toString(){let t="";for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);if(0!==r){if(r<0?(t+=" - ",r=-r):t.length>0&&(t+=" + "),0===e||1!==r){let e=this.field.log(r);0===e?t+="1":1===e?t+="a":(t+="a^",t+=e)}0!==e&&(1===e?t+="x":(t+="x^",t+=e))}}return t}}class ta extends T{}ta.kind="ArithmeticException";class tl extends ts{constructor(t,e,r){super(),this.primitive=t,this.size=e,this.generatorBase=r;let n=new Int32Array(e),i=1;for(let r=0;r<e;r++)n[r]=i,(i*=2)>=e&&(i^=t,i&=e-1);this.expTable=n;let s=new Int32Array(e);for(let t=0;t<e-1;t++)s[n[t]]=t;this.logTable=s,this.zero=new to(this,Int32Array.from([0])),this.one=new to(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new N;if(0===e)return this.zero;let r=new Int32Array(t+1);return r[0]=e,new to(this,r)}inverse(t){if(0===t)throw new ta;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+L.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}tl.AZTEC_DATA_12=new tl(4201,4096,1),tl.AZTEC_DATA_10=new tl(1033,1024,1),tl.AZTEC_DATA_6=new tl(67,64,1),tl.AZTEC_PARAM=new tl(19,16,1),tl.QR_CODE_FIELD_256=new tl(285,256,0),tl.DATA_MATRIX_FIELD_256=new tl(301,256,1),tl.AZTEC_DATA_8=tl.DATA_MATRIX_FIELD_256,tl.MAXICODE_FIELD_64=tl.AZTEC_DATA_6;class tu extends T{}tu.kind="ReedSolomonException";class tc extends T{}tc.kind="IllegalStateException";class th{constructor(t){this.field=t}decode(t,e){let r=this.field,n=new to(r,t),i=new Int32Array(e),s=!0;for(let t=0;t<e;t++){let e=n.evaluateAt(r.exp(t+r.getGeneratorBase()));i[i.length-1-t]=e,0!==e&&(s=!1)}if(s)return;let o=new to(r,i),a=this.runEuclideanAlgorithm(r.buildMonomial(e,1),o,e),l=a[0],u=a[1],c=this.findErrorLocations(l),h=this.findErrorMagnitudes(u,c);for(let e=0;e<c.length;e++){let n=t.length-1-r.log(c[e]);if(n<0)throw new tu("Bad error location");t[n]=tl.addOrSubtract(t[n],h[e])}}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){let r=t;t=e,e=r}let n=this.field,i=t,s=e,o=n.getZero(),a=n.getOne();for(;s.getDegree()>=(r/2|0);){let t=i,e=o;if(i=s,o=a,i.isZero())throw new tu("r_{i-1} was zero");s=t;let r=n.getZero(),l=i.getCoefficient(i.getDegree()),u=n.inverse(l);for(;s.getDegree()>=i.getDegree()&&!s.isZero();){let t=s.getDegree()-i.getDegree(),e=n.multiply(s.getCoefficient(s.getDegree()),u);r=r.addOrSubtract(n.buildMonomial(t,e)),s=s.addOrSubtract(i.multiplyByMonomial(t,e))}if(a=r.multiply(o).addOrSubtract(e),s.getDegree()>=i.getDegree())throw new tc("Division algorithm failed to reduce polynomial?")}let l=a.getCoefficient(0);if(0===l)throw new tu("sigmaTilde(0) was zero");let u=n.inverse(l);return[a.multiplyScalar(u),s.multiplyScalar(u)]}findErrorLocations(t){let e=t.getDegree();if(1===e)return Int32Array.from([t.getCoefficient(1)]);let r=new Int32Array(e),n=0,i=this.field;for(let s=1;s<i.getSize()&&n<e;s++)0===t.evaluateAt(s)&&(r[n]=i.inverse(s),n++);if(n!==e)throw new tu("Error locator degree does not match number of roots");return r}findErrorMagnitudes(t,e){let r=e.length,n=new Int32Array(r),i=this.field;for(let s=0;s<r;s++){let o=i.inverse(e[s]),a=1;for(let t=0;t<r;t++)if(s!==t){let r=i.multiply(e[t],o),n=(1&r)==0?1|r:-2&r;a=i.multiply(a,n)}n[s]=i.multiply(t.evaluateAt(o),i.inverse(a)),0!==i.getGeneratorBase()&&(n[s]=i.multiply(n[s],o))}return n}}(o=w||(w={}))[o.UPPER=0]="UPPER",o[o.LOWER=1]="LOWER",o[o.MIXED=2]="MIXED",o[o.DIGIT=3]="DIGIT",o[o.PUNCT=4]="PUNCT",o[o.BINARY=5]="BINARY";class td{decode(t){this.ddata=t;let e=t.getBits(),r=this.extractBits(e),n=this.correctBits(r),i=new ti(td.convertBoolArrayToByteArray(n),td.getEncodedData(n),null,null);return i.setNumBits(n.length),i}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let e=t.length,r=w.UPPER,n=w.UPPER,i="",s=0;for(;s<e;)if(n===w.BINARY){if(e-s<5)break;let o=td.readCode(t,s,5);if(s+=5,0===o){if(e-s<11)break;o=td.readCode(t,s,11)+31,s+=11}for(let r=0;r<o;r++){if(e-s<8){s=e;break}let r=td.readCode(t,s,8);i+=G.castAsNonUtf8Char(r),s+=8}n=r}else{let o=n===w.DIGIT?4:5;if(e-s<o)break;let a=td.readCode(t,s,o);s+=o;let l=td.getCharacter(n,a);l.startsWith("CTRL_")?(r=n,n=td.getTable(l.charAt(5)),"L"===l.charAt(6)&&(r=n)):(i+=l,n=r)}return i}static getTable(t){switch(t){case"L":return w.LOWER;case"P":return w.PUNCT;case"M":return w.MIXED;case"D":return w.DIGIT;case"B":return w.BINARY;default:return w.UPPER}}static getCharacter(t,e){switch(t){case w.UPPER:return td.UPPER_TABLE[e];case w.LOWER:return td.LOWER_TABLE[e];case w.MIXED:return td.MIXED_TABLE[e];case w.PUNCT:return td.PUNCT_TABLE[e];case w.DIGIT:return td.DIGIT_TABLE[e];default:throw new tc("Bad table")}}correctBits(t){let e,r;2>=this.ddata.getNbLayers()?(r=6,e=tl.AZTEC_DATA_6):8>=this.ddata.getNbLayers()?(r=8,e=tl.AZTEC_DATA_8):22>=this.ddata.getNbLayers()?(r=10,e=tl.AZTEC_DATA_10):(r=12,e=tl.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=t.length/r;if(i<n)throw new U;let s=t.length%r,o=new Int32Array(i);for(let e=0;e<i;e++,s+=r)o[e]=td.readCode(t,s,r);try{new th(e).decode(o,i-n)}catch(t){throw new U(t)}let a=(1<<r)-1,l=0;for(let t=0;t<n;t++){let e=o[t];if(0===e||e===a)throw new U;(1===e||e===a-1)&&l++}let u=Array(n*r-l),c=0;for(let t=0;t<n;t++){let e=o[t];if(1===e||e===a-1)u.fill(e>1,c,c+r-1),c+=r-1;else for(let t=r-1;t>=0;--t)u[c++]=(e&1<<t)!=0}return u}extractBits(t){let e=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(e?11:14)+4*r,i=new Int32Array(n),s=Array(this.totalBitsInLayer(r,e));if(e)for(let t=0;t<i.length;t++)i[t]=t;else{let t=n+1+2*L.truncDivision(L.truncDivision(n,2)-1,15),e=n/2,r=L.truncDivision(t,2);for(let t=0;t<e;t++){let n=t+L.truncDivision(t,15);i[e-t-1]=r-n-1,i[e+t]=r+n+1}}for(let o=0,a=0;o<r;o++){let l=(r-o)*4+(e?9:12),u=2*o,c=n-1-u;for(let e=0;e<l;e++){let r=2*e;for(let n=0;n<2;n++)s[a+r+n]=t.get(i[u+n],i[u+e]),s[a+2*l+r+n]=t.get(i[u+e],i[c-n]),s[a+4*l+r+n]=t.get(i[c-n],i[c-e]),s[a+6*l+r+n]=t.get(i[c-e],i[u+n])}a+=8*l}return s}static readCode(t,e,r){let n=0;for(let i=e;i<e+r;i++)n<<=1,t[i]&&(n|=1);return n}static readByte(t,e){let r=t.length-e;return r>=8?td.readCode(t,e,8):td.readCode(t,e,r)<<8-r}static convertBoolArrayToByteArray(t){let e=new Uint8Array((t.length+7)/8);for(let r=0;r<e.length;r++)e[r]=td.readByte(t,8*r);return e}totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}td.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],td.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],td.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],td.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],td.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class tf{constructor(){}static round(t){return t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,e,r,n){let i=t-r,s=e-n;return Math.sqrt(i*i+s*s)}static sum(t){let e=0;for(let r=0,n=t.length;r!==n;r++)e+=t[r];return e}}class tg{static floatToIntBits(t){return t}}tg.MAX_VALUE=Number.MAX_SAFE_INTEGER;class tp{constructor(t,e){this.x=t,this.y=e}getX(){return this.x}getY(){return this.y}equals(t){return t instanceof tp&&this.x===t.x&&this.y===t.y}hashCode(){return 31*tg.floatToIntBits(this.x)+tg.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){let e,r,n,i=this.distance(t[0],t[1]),s=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]);if(s>=i&&s>=o?(r=t[0],e=t[1],n=t[2]):o>=s&&o>=i?(r=t[1],e=t[0],n=t[2]):(r=t[2],e=t[0],n=t[1]),0>this.crossProductZ(e,r,n)){let t=e;e=n,n=t}t[0]=e,t[1]=r,t[2]=n}static distance(t,e){return tf.distance(t.x,t.y,e.x,e.y)}static crossProductZ(t,e,r){let n=e.x,i=e.y;return(r.x-n)*(t.y-i)-(r.y-i)*(t.x-n)}}class tm{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class tw extends tm{constructor(t,e,r,n,i){super(t,e),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ty{constructor(t,e,r,n){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),null==e&&(e=ty.INIT_SIZE),null==r&&(r=t.getWidth()/2|0),null==n&&(n=t.getHeight()/2|0);let i=e/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new W}detect(){let t=this.leftInit,e=this.rightInit,r=this.upInit,n=this.downInit,i=!1,s=!0,o=!1,a=!1,l=!1,u=!1,c=!1,h=this.width,d=this.height;for(;s;){s=!1;let f=!0;for(;(f||!a)&&e<h;)(f=this.containsBlackPoint(r,n,e,!1))?(e++,s=!0,a=!0):!a&&e++;if(e>=h){i=!0;break}let g=!0;for(;(g||!l)&&n<d;)(g=this.containsBlackPoint(t,e,n,!0))?(n++,s=!0,l=!0):!l&&n++;if(n>=d){i=!0;break}let p=!0;for(;(p||!u)&&t>=0;)(p=this.containsBlackPoint(r,n,t,!1))?(t--,s=!0,u=!0):!u&&t--;if(t<0){i=!0;break}let m=!0;for(;(m||!c)&&r>=0;)(m=this.containsBlackPoint(t,e,r,!0))?(r--,s=!0,c=!0):!c&&r--;if(r<0){i=!0;break}s&&(o=!0)}if(!i&&o){let i=e-t,s=null;for(let e=1;null===s&&e<i;e++)s=this.getBlackPointOnSegment(t,n-e,t+e,n);if(null==s)throw new W;let o=null;for(let e=1;null===o&&e<i;e++)o=this.getBlackPointOnSegment(t,r+e,t+e,r);if(null==o)throw new W;let a=null;for(let t=1;null===a&&t<i;t++)a=this.getBlackPointOnSegment(e,r+t,e-t,r);if(null==a)throw new W;let l=null;for(let t=1;null===l&&t<i;t++)l=this.getBlackPointOnSegment(e,n-t,e-t,n);if(null==l)throw new W;return this.centerEdges(l,s,a,o)}throw new W}getBlackPointOnSegment(t,e,r,n){let i=tf.round(tf.distance(t,e,r,n)),s=(r-t)/i,o=(n-e)/i,a=this.image;for(let r=0;r<i;r++){let n=tf.round(t+r*s),i=tf.round(e+r*o);if(a.get(n,i))return new tp(n,i)}return null}centerEdges(t,e,r,n){let i=t.getX(),s=t.getY(),o=e.getX(),a=e.getY(),l=r.getX(),u=r.getY(),c=n.getX(),h=n.getY(),d=ty.CORR;return i<this.width/2?[new tp(c-d,h+d),new tp(o+d,a+d),new tp(l-d,u-d),new tp(i+d,s-d)]:[new tp(c+d,h+d),new tp(o+d,a-d),new tp(l-d,u+d),new tp(i-d,s-d)]}containsBlackPoint(t,e,r,n){let i=this.image;if(n){for(let n=t;n<=e;n++)if(i.get(n,r))return!0}else for(let n=t;n<=e;n++)if(i.get(r,n))return!0;return!1}}ty.INIT_SIZE=10,ty.CORR=1;class tA{static checkAndNudgePoints(t,e){let r=t.getWidth(),n=t.getHeight(),i=!0;for(let t=0;t<e.length&&i;t+=2){let s=Math.floor(e[t]),o=Math.floor(e[t+1]);if(s<-1||s>r||o<-1||o>n)throw new W;i=!1,-1===s?(e[t]=0,i=!0):s===r&&(e[t]=r-1,i=!0),-1===o?(e[t+1]=0,i=!0):o===n&&(e[t+1]=n-1,i=!0)}i=!0;for(let t=e.length-2;t>=0&&i;t-=2){let s=Math.floor(e[t]),o=Math.floor(e[t+1]);if(s<-1||s>r||o<-1||o>n)throw new W;i=!1,-1===s?(e[t]=0,i=!0):s===r&&(e[t]=r-1,i=!0),-1===o?(e[t+1]=0,i=!0):o===n&&(e[t+1]=n-1,i=!0)}}}class tE{constructor(t,e,r,n,i,s,o,a,l){this.a11=t,this.a21=e,this.a31=r,this.a12=n,this.a22=i,this.a32=s,this.a13=o,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(t,e,r,n,i,s,o,a,l,u,c,h,d,f,g,p){let m=tE.quadrilateralToSquare(t,e,r,n,i,s,o,a);return tE.squareToQuadrilateral(l,u,c,h,d,f,g,p).times(m)}transformPoints(t){let e=t.length,r=this.a11,n=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33;for(let h=0;h<e;h+=2){let e=t[h],d=t[h+1],f=i*e+a*d+c;t[h]=(r*e+s*d+l)/f,t[h+1]=(n*e+o*d+u)/f}}transformPointsWithValues(t,e){let r=this.a11,n=this.a12,i=this.a13,s=this.a21,o=this.a22,a=this.a23,l=this.a31,u=this.a32,c=this.a33,h=t.length;for(let d=0;d<h;d++){let h=t[d],f=e[d],g=i*h+a*f+c;t[d]=(r*h+s*f+l)/g,e[d]=(n*h+o*f+u)/g}}static squareToQuadrilateral(t,e,r,n,i,s,o,a){let l=t-r+i-o,u=e-n+s-a;if(0===l&&0===u)return new tE(r-t,i-r,t,n-e,s-n,e,0,0,1);{let c=r-i,h=o-i,d=n-s,f=a-s,g=c*f-h*d,p=(l*f-h*u)/g,m=(c*u-l*d)/g;return new tE(r-t+p*r,o-t+m*o,t,n-e+p*n,a-e+m*a,e,p,m,1)}}static quadrilateralToSquare(t,e,r,n,i,s,o,a){return tE.squareToQuadrilateral(t,e,r,n,i,s,o,a).buildAdjoint()}buildAdjoint(){return new tE(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new tE(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class tb extends tA{sampleGrid(t,e,r,n,i,s,o,a,l,u,c,h,d,f,g,p,m,w,y){let A=tE.quadrilateralToQuadrilateral(n,i,s,o,a,l,u,c,h,d,f,g,p,m,w,y);return this.sampleGridWithTransform(t,e,r,A)}sampleGridWithTransform(t,e,r,n){if(e<=0||r<=0)throw new W;let i=new Q(e,r),s=new Float32Array(2*e);for(let e=0;e<r;e++){let r=s.length,o=e+.5;for(let t=0;t<r;t+=2)s[t]=t/2+.5,s[t+1]=o;n.transformPoints(s),tA.checkAndNudgePoints(t,s);try{for(let n=0;n<r;n+=2)t.get(Math.floor(s[n]),Math.floor(s[n+1]))&&i.set(n/2,e)}catch(t){throw new W}}return i}}class tC{static setGridSampler(t){tC.gridSampler=t}static getInstance(){return tC.gridSampler}}tC.gridSampler=new tb;class tI{constructor(t,e){this.x=t,this.y=e}toResultPoint(){return new tp(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class t_{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let e=this.getMatrixCenter(),r=this.getBullsEyeCorners(e);if(t){let t=r[0];r[0]=r[2],r[2]=t}return this.extractParameters(r),new tw(this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),this.getMatrixCornerPoints(r),this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new W;let e=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(t[0],t[1],e),this.sampleLine(t[1],t[2],e),this.sampleLine(t[2],t[3],e),this.sampleLine(t[3],t[0],e)]);this.shift=this.getRotation(r,e);let n=0;for(let t=0;t<4;t++){let e=r[(this.shift+t)%4];this.compact?(n<<=7,n+=e>>1&127):(n<<=10,n+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(63&i)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(2047&i)+1)}getRotation(t,e){let r=0;t.forEach((t,n,i)=>{r=(r<<3)+((t>>e-2<<1)+(1&t))}),r=((1&r)<<11)+(r>>1);for(let t=0;t<4;t++)if(2>=L.bitCount(r^this.EXPECTED_CORNER_BITS[t]))return t;throw new W}getCorrectedParameterData(t,e){let r,n;e?(r=7,n=2):(r=10,n=4);let i=r-n,s=new Int32Array(r);for(let e=r-1;e>=0;--e)s[e]=15&t,t>>=4;try{new th(tl.AZTEC_PARAM).decode(s,i)}catch(t){throw new W}let o=0;for(let t=0;t<n;t++)o=(o<<4)+s[t];return o}getBullsEyeCorners(t){let e=t,r=t,n=t,i=t,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let t=this.getFirstDifferent(e,s,1,-1),o=this.getFirstDifferent(r,s,1,1),a=this.getFirstDifferent(n,s,-1,1),l=this.getFirstDifferent(i,s,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(l,t)*this.nbCenterLayers/(this.distancePoint(i,e)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(t,o,a,l))break}e=t,r=o,n=a,i=l,s=!s}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new W;this.compact=5===this.nbCenterLayers;let o=new tp(e.getX()+.5,e.getY()-.5),a=new tp(r.getX()+.5,r.getY()+.5),l=new tp(n.getX()-.5,n.getY()+.5),u=new tp(i.getX()-.5,i.getY()-.5);return this.expandSquare([o,a,l,u],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,e,r,n;try{let i=new ty(this.image).detect();t=i[0],e=i[1],r=i[2],n=i[3]}catch(o){let i=this.image.getWidth()/2,s=this.image.getHeight()/2;t=this.getFirstDifferent(new tI(i+7,s-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new tI(i+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new tI(i-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new tI(i-7,s-7),!1,-1,-1).toResultPoint()}let i=tf.round((t.getX()+n.getX()+e.getX()+r.getX())/4),s=tf.round((t.getY()+n.getY()+e.getY()+r.getY())/4);try{let o=new ty(this.image,15,i,s).detect();t=o[0],e=o[1],r=o[2],n=o[3]}catch(o){t=this.getFirstDifferent(new tI(i+7,s-7),!1,1,-1).toResultPoint(),e=this.getFirstDifferent(new tI(i+7,s+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new tI(i-7,s+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new tI(i-7,s-7),!1,-1,-1).toResultPoint()}return new tI(i=tf.round((t.getX()+n.getX()+e.getX()+r.getX())/4),s=tf.round((t.getY()+n.getY()+e.getY()+r.getY())/4))}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,e,r,n,i){let s=tC.getInstance(),o=this.getDimension(),a=o/2-this.nbCenterLayers,l=o/2+this.nbCenterLayers;return s.sampleGrid(t,o,o,a,a,l,a,l,l,a,l,e.getX(),e.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(t,e,r){let n=0,i=this.distanceResultPoint(t,e),s=i/r,o=t.getX(),a=t.getY(),l=s*(e.getX()-t.getX())/i,u=s*(e.getY()-t.getY())/i;for(let t=0;t<r;t++)this.image.get(tf.round(o+t*l),tf.round(a+t*u))&&(n|=1<<r-t-1);return n}isWhiteOrBlackRectangle(t,e,r,n){t=new tI(t.getX()-3,t.getY()+3),e=new tI(e.getX()-3,e.getY()-3),r=new tI(r.getX()+3,r.getY()-3),n=new tI(n.getX()+3,n.getY()+3);let i=this.getColor(n,t);if(0===i)return!1;let s=this.getColor(t,e);return s===i&&(s=this.getColor(e,r))===i&&(s=this.getColor(r,n))===i}getColor(t,e){let r=this.distancePoint(t,e),n=(e.getX()-t.getX())/r,i=(e.getY()-t.getY())/r,s=0,o=t.getX(),a=t.getY(),l=this.image.get(t.getX(),t.getY()),u=Math.ceil(r);for(let t=0;t<u;t++)o+=n,a+=i,this.image.get(tf.round(o),tf.round(a))!==l&&s++;let c=s/r;return c>.1&&c<.9?0:c<=.1===l?1:-1}getFirstDifferent(t,e,r,n){let i=t.getX()+r,s=t.getY()+n;for(;this.isValid(i,s)&&this.image.get(i,s)===e;)i+=r,s+=n;for(i-=r,s-=n;this.isValid(i,s)&&this.image.get(i,s)===e;)i+=r;for(i-=r;this.isValid(i,s)&&this.image.get(i,s)===e;)s+=n;return new tI(i,s-=n)}expandSquare(t,e,r){let n=r/(2*e),i=t[0].getX()-t[2].getX(),s=t[0].getY()-t[2].getY(),o=(t[0].getX()+t[2].getX())/2,a=(t[0].getY()+t[2].getY())/2,l=new tp(o+n*i,a+n*s),u=new tp(o-n*i,a-n*s);return i=t[1].getX()-t[3].getX(),s=t[1].getY()-t[3].getY(),[l,new tp((o=(t[1].getX()+t[3].getX())/2)+n*i,(a=(t[1].getY()+t[3].getY())/2)+n*s),u,new tp(o-n*i,a-n*s)]}isValid(t,e){return t>=0&&t<this.image.getWidth()&&e>0&&e<this.image.getHeight()}isValidPoint(t){let e=tf.round(t.getX()),r=tf.round(t.getY());return this.isValid(e,r)}distancePoint(t,e){return tf.distance(t.getX(),t.getY(),e.getX(),e.getY())}distanceResultPoint(t,e){return tf.distance(t.getX(),t.getY(),e.getX(),e.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(L.truncDivision(this.nbLayers-4,8)+1)+15}}class tS{decode(t,e=null){let r=null,n=new t_(t.getBlackMatrix()),i=null,s=null;try{let t=n.detectMirror(!1);i=t.getPoints(),this.reportFoundResultPoints(e,i),s=new td().decode(t)}catch(t){r=t}if(null==s)try{let t=n.detectMirror(!0);i=t.getPoints(),this.reportFoundResultPoints(e,i),s=new td().decode(t)}catch(t){if(null!=r)throw r;throw t}let o=new te(s.getText(),s.getRawBytes(),s.getNumBits(),i,tr.AZTEC,M.currentTimeMillis()),a=s.getByteSegments();null!=a&&o.putMetadata(tn.BYTE_SEGMENTS,a);let l=s.getECLevel();return null!=l&&o.putMetadata(tn.ERROR_CORRECTION_LEVEL,l),o}reportFoundResultPoints(t,e){if(null!=t){let r=t.get(F.NEED_RESULT_POINT_CALLBACK);null!=r&&e.forEach((t,e,n)=>{r.foundPossibleResultPoint(t)})}}reset(){}}class tT{decode(t,e){try{return this.doDecode(t,e)}catch(r){if(e&&!0===e.get(F.TRY_HARDER)&&t.isRotateSupported()){let r=t.rotateCounterClockwise(),n=this.doDecode(r,e),i=n.getResultMetadata(),s=270;null!==i&&!0===i.get(tn.ORIENTATION)&&(s+=i.get(tn.ORIENTATION)%360),n.putMetadata(tn.ORIENTATION,s);let o=n.getResultPoints();if(null!==o){let t=r.getHeight();for(let e=0;e<o.length;e++)o[e]=new tp(t-o[e].getY()-1,o[e].getX())}return n}throw new W}}reset(){}doDecode(t,e){let r,n=t.getWidth(),i=t.getHeight(),s=new k(n),o=e&&!0===e.get(F.TRY_HARDER),a=Math.max(1,i>>(o?8:5));r=o?i:15;let l=Math.trunc(i/2);for(let o=0;o<r;o++){let r=Math.trunc((o+1)/2),u=l+a*((1&o)==0?r:-r);if(u<0||u>=i)break;try{s=t.getBlackRow(u,s)}catch(t){continue}for(let t=0;t<2;t++){if(1===t&&(s.reverse(),e&&!0===e.get(F.NEED_RESULT_POINT_CALLBACK))){let t=new Map;e.forEach((e,r)=>t.set(r,e)),t.delete(F.NEED_RESULT_POINT_CALLBACK),e=t}try{let r=this.decodeRow(u,s,e);if(1===t){r.putMetadata(tn.ORIENTATION,180);let t=r.getResultPoints();null!==t&&(t[0]=new tp(n-t[0].getX()-1,t[0].getY()),t[1]=new tp(n-t[1].getX()-1,t[1].getY()))}return r}catch(t){}}}throw new W}static recordPattern(t,e,r){let n=r.length;for(let t=0;t<n;t++)r[t]=0;let i=t.getSize();if(e>=i)throw new W;let s=!t.get(e),o=0,a=e;for(;a<i;){if(t.get(a)!==s)r[o]++;else if(++o===n)break;else r[o]=1,s=!s;a++}if(o!==n&&(o!==n-1||a!==i))throw new W}static recordPatternInReverse(t,e,r){let n=r.length,i=t.get(e);for(;e>0&&n>=0;)t.get(--e)!==i&&(n--,i=!i);if(n>=0)throw new W;tT.recordPattern(t,e+1,r)}static patternMatchVariance(t,e,r){let n=t.length,i=0,s=0;for(let r=0;r<n;r++)i+=t[r],s+=e[r];if(i<s)return Number.POSITIVE_INFINITY;let o=i/s;r*=o;let a=0;for(let i=0;i<n;i++){let n=t[i],s=e[i]*o,l=n>s?n-s:s-n;if(l>r)return Number.POSITIVE_INFINITY;a+=l}return a/i}}class tv extends tT{static findStartPattern(t){let e=t.getSize(),r=t.getNextSet(0),n=0,i=Int32Array.from([0,0,0,0,0,0]),s=r,o=!1;for(let a=r;a<e;a++)if(t.get(a)!==o)i[n]++;else{if(5===n){let e=tv.MAX_AVG_VARIANCE,r=-1;for(let t=tv.CODE_START_A;t<=tv.CODE_START_C;t++){let n=tT.patternMatchVariance(i,tv.CODE_PATTERNS[t],tv.MAX_INDIVIDUAL_VARIANCE);n<e&&(e=n,r=t)}if(r>=0&&t.isRange(Math.max(0,s-(a-s)/2),s,!1))return Int32Array.from([s,a,r]);s+=i[0]+i[1],(i=i.slice(2,i.length-1))[n-1]=0,i[n]=0,n--}else n++;i[n]=1,o=!o}throw new W}static decodeCode(t,e,r){tT.recordPattern(t,r,e);let n=tv.MAX_AVG_VARIANCE,i=-1;for(let t=0;t<tv.CODE_PATTERNS.length;t++){let r=tv.CODE_PATTERNS[t],s=this.patternMatchVariance(e,r,tv.MAX_INDIVIDUAL_VARIANCE);s<n&&(n=s,i=t)}if(i>=0)return i;throw new W}decodeRow(t,e,r){let n,i=r&&!0===r.get(F.ASSUME_GS1),s=tv.findStartPattern(e),o=s[2],a=0,l=new Uint8Array(20);switch(l[a++]=o,o){case tv.CODE_START_A:n=tv.CODE_CODE_A;break;case tv.CODE_START_B:n=tv.CODE_CODE_B;break;case tv.CODE_START_C:n=tv.CODE_CODE_C;break;default:throw new U}let u=!1,c=!1,h="",d=s[0],f=s[1],g=Int32Array.from([0,0,0,0,0,0]),p=0,m=0,w=o,y=0,A=!0,E=!1,b=!1;for(;!u;){let t=c;switch(c=!1,p=m,m=tv.decodeCode(e,g,f),l[a++]=m,m!==tv.CODE_STOP&&(A=!0),m!==tv.CODE_STOP&&(w+=++y*m),d=f,f+=g.reduce((t,e)=>t+e,0),m){case tv.CODE_START_A:case tv.CODE_START_B:case tv.CODE_START_C:throw new U}switch(n){case tv.CODE_CODE_A:if(m<64)b===E?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),b=!1;else if(m<96)b===E?h+=String.fromCharCode(m-64):h+=String.fromCharCode(m+64),b=!1;else switch(m!==tv.CODE_STOP&&(A=!1),m){case tv.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+="\x1d");break;case tv.CODE_FNC_2:case tv.CODE_FNC_3:break;case tv.CODE_FNC_4_A:!E&&b?(E=!0,b=!1):E&&b?(E=!1,b=!1):b=!0;break;case tv.CODE_SHIFT:c=!0,n=tv.CODE_CODE_B;break;case tv.CODE_CODE_B:n=tv.CODE_CODE_B;break;case tv.CODE_CODE_C:n=tv.CODE_CODE_C;break;case tv.CODE_STOP:u=!0}break;case tv.CODE_CODE_B:if(m<96)b===E?h+=String.fromCharCode(32+m):h+=String.fromCharCode(32+m+128),b=!1;else switch(m!==tv.CODE_STOP&&(A=!1),m){case tv.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+="\x1d");break;case tv.CODE_FNC_2:case tv.CODE_FNC_3:break;case tv.CODE_FNC_4_B:!E&&b?(E=!0,b=!1):E&&b?(E=!1,b=!1):b=!0;break;case tv.CODE_SHIFT:c=!0,n=tv.CODE_CODE_A;break;case tv.CODE_CODE_A:n=tv.CODE_CODE_A;break;case tv.CODE_CODE_C:n=tv.CODE_CODE_C;break;case tv.CODE_STOP:u=!0}break;case tv.CODE_CODE_C:if(m<100)m<10&&(h+="0"),h+=m;else switch(m!==tv.CODE_STOP&&(A=!1),m){case tv.CODE_FNC_1:i&&(0===h.length?h+="]C1":h+="\x1d");break;case tv.CODE_CODE_A:n=tv.CODE_CODE_A;break;case tv.CODE_CODE_B:n=tv.CODE_CODE_B;break;case tv.CODE_STOP:u=!0}}t&&(n=n===tv.CODE_CODE_A?tv.CODE_CODE_B:tv.CODE_CODE_A)}let C=f-d;if(f=e.getNextUnset(f),!e.isRange(f,Math.min(e.getSize(),f+(f-d)/2),!1))throw new W;if((w-=y*p)%103!==p)throw new O;let I=h.length;if(0===I)throw new W;I>0&&A&&(h=n===tv.CODE_CODE_C?h.substring(0,I-2):h.substring(0,I-1));let _=(s[1]+s[0])/2,S=d+C/2,T=l.length,v=new Uint8Array(T);for(let t=0;t<T;t++)v[t]=l[t];return new te(h,v,0,[new tp(_,t),new tp(S,t)],tr.CODE_128,new Date().getTime())}}tv.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],tv.MAX_AVG_VARIANCE=.25,tv.MAX_INDIVIDUAL_VARIANCE=.7,tv.CODE_SHIFT=98,tv.CODE_CODE_C=99,tv.CODE_CODE_B=100,tv.CODE_CODE_A=101,tv.CODE_FNC_1=102,tv.CODE_FNC_2=97,tv.CODE_FNC_3=96,tv.CODE_FNC_4_A=101,tv.CODE_FNC_4_B=100,tv.CODE_START_A=103,tv.CODE_START_B=104,tv.CODE_START_C=105,tv.CODE_STOP=106;class tN extends tT{constructor(t=!1,e=!1){super(),this.usingCheckDigit=t,this.extendedMode=e,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,e,r){let n,i,s,o=this.counters;o.fill(0),this.decodeRowResult="";let a=tN.findAsteriskPattern(e,o),l=e.getNextSet(a[1]),u=e.getSize();do{tN.recordPattern(e,l,o);let t=tN.toNarrowWidePattern(o);if(t<0)throw new W;for(let e of(n=tN.patternToChar(t),this.decodeRowResult+=n,i=l,o))l+=e;l=e.getNextSet(l)}while("*"!==n)this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c=0;for(let t of o)c+=t;let h=l-i-c;if(l!==u&&2*h<c)throw new W;if(this.usingCheckDigit){let t=this.decodeRowResult.length-1,e=0;for(let r=0;r<t;r++)e+=tN.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(t)!==tN.ALPHABET_STRING.charAt(e%43))throw new O;this.decodeRowResult=this.decodeRowResult.substring(0,t)}if(0===this.decodeRowResult.length)throw new W;s=this.extendedMode?tN.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(a[1]+a[0])/2,f=i+c/2;return new te(s,null,0,[new tp(d,t),new tp(f,t)],tr.CODE_39,new Date().getTime())}static findAsteriskPattern(t,e){let r=t.getSize(),n=t.getNextSet(0),i=0,s=n,o=!1,a=e.length;for(let l=n;l<r;l++)if(t.get(l)!==o)e[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(e)===tN.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((l-s)/2)),s,!1))return[s,l];s+=e[0]+e[1],e.copyWithin(0,2,2+i-1),e[i-1]=0,e[i]=0,i--}else i++;e[i]=1,o=!o}throw new W}static toNarrowWidePattern(t){let e,r=t.length,n=0;do{let i=0x7fffffff;for(let e of t)e<i&&e>n&&(i=e);n=i,e=0;let s=0,o=0;for(let i=0;i<r;i++){let a=t[i];a>n&&(o|=1<<r-1-i,e++,s+=a)}if(3===e){for(let i=0;i<r&&e>0;i++){let r=t[i];if(r>n&&(e--,2*r>=s))return -1}return o}}while(e>3)return -1}static patternToChar(t){for(let e=0;e<tN.CHARACTER_ENCODINGS.length;e++)if(tN.CHARACTER_ENCODINGS[e]===t)return tN.ALPHABET_STRING.charAt(e);if(t===tN.ASTERISK_ENCODING)return"*";throw new W}static decodeExtended(t){let e=t.length,r="";for(let n=0;n<e;n++){let e=t.charAt(n);if("+"===e||"$"===e||"%"===e||"/"===e){let i=t.charAt(n+1),s="\0";switch(e){case"+":if(i>="A"&&i<="Z")s=String.fromCharCode(i.charCodeAt(0)+32);else throw new U;break;case"$":if(i>="A"&&i<="Z")s=String.fromCharCode(i.charCodeAt(0)-64);else throw new U;break;case"%":if(i>="A"&&i<="E")s=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")s=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")s=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)s="\0";else if("V"===i)s="@";else if("W"===i)s="`";else if("X"===i||"Y"===i||"Z"===i)s="";else throw new U;break;case"/":if(i>="A"&&i<="O")s=String.fromCharCode(i.charCodeAt(0)-32);else if("Z"===i)s=":";else throw new U}r+=s,n++}else r+=e}return r}}tN.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",tN.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],tN.ASTERISK_ENCODING=148;class tR extends tT{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,e,r){let n=this.decodeStart(e),i=this.decodeEnd(e),s=new j;tR.decodeMiddle(e,n[1],i[0],s);let o=s.toString(),a=null;null!=r&&(a=r.get(F.ALLOWED_LENGTHS)),null==a&&(a=tR.DEFAULT_ALLOWED_LENGTHS);let l=o.length,u=!1,c=0;for(let t of a){if(l===t){u=!0;break}t>c&&(c=t)}if(!u&&l>c&&(u=!0),!u)throw new U;return new te(o,null,0,[new tp(n[1],t),new tp(i[0],t)],tr.ITF,new Date().getTime())}static decodeMiddle(t,e,r,n){let i=new Int32Array(10),s=new Int32Array(5),o=new Int32Array(5);for(i.fill(0),s.fill(0),o.fill(0);e<r;){tT.recordPattern(t,e,i);for(let t=0;t<5;t++){let e=2*t;s[t]=i[e],o[t]=i[e+1]}let r=tR.decodeDigit(s);n.append(r.toString()),r=this.decodeDigit(o),n.append(r.toString()),i.forEach(function(t){e+=t})}}decodeStart(t){let e=tR.skipWhiteSpace(t),r=tR.findGuardPattern(t,e,tR.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(t,r[0]),r}validateQuietZone(t,e){let r=10*this.narrowLineWidth;r=r<e?r:e;for(let n=e-1;r>0&&n>=0&&!t.get(n);n--)r--;if(0!==r)throw new W}static skipWhiteSpace(t){let e=t.getSize(),r=t.getNextSet(0);if(r===e)throw new W;return r}decodeEnd(t){t.reverse();try{let e,r=tR.skipWhiteSpace(t);try{e=tR.findGuardPattern(t,r,tR.END_PATTERN_REVERSED[0])}catch(n){n instanceof W&&(e=tR.findGuardPattern(t,r,tR.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,e[0]);let n=e[0];return e[0]=t.getSize()-e[1],e[1]=t.getSize()-n,e}finally{t.reverse()}}static findGuardPattern(t,e,r){let n=r.length,i=new Int32Array(n),s=t.getSize(),o=!1,a=0,l=e;i.fill(0);for(let u=e;u<s;u++)if(t.get(u)!==o)i[a]++;else{if(a===n-1){if(tT.patternMatchVariance(i,r,tR.MAX_INDIVIDUAL_VARIANCE)<tR.MAX_AVG_VARIANCE)return[l,u];l+=i[0]+i[1],M.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,o=!o}throw new W}static decodeDigit(t){let e=tR.MAX_AVG_VARIANCE,r=-1,n=tR.PATTERNS.length;for(let i=0;i<n;i++){let n=tR.PATTERNS[i],s=tT.patternMatchVariance(t,n,tR.MAX_INDIVIDUAL_VARIANCE);s<e?(e=s,r=i):s===e&&(r=-1)}if(r>=0)return r%10;throw new W}}tR.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],tR.MAX_AVG_VARIANCE=.38,tR.MAX_INDIVIDUAL_VARIANCE=.5,tR.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],tR.START_PATTERN=Int32Array.from([1,1,1,1]),tR.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class tO extends tT{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let e,r=!1,n=0,i=Int32Array.from([0,0,0]);for(;!r;){i=Int32Array.from([0,0,0]);let s=(e=tO.findGuardPattern(t,n,!1,this.START_END_PATTERN,i))[0],o=s-((n=e[1])-s);o>=0&&(r=t.isRange(o,s,!1))}return e}static checkChecksum(t){return tO.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return tO.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-48;if(e<0||e>9)throw new U;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-48;if(e<0||e>9)throw new U;r+=e}return(1e3-r)%10}static decodeEnd(t,e){return tO.findGuardPattern(t,e,!1,tO.START_END_PATTERN,new Int32Array(tO.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,e,r,n){return this.findGuardPattern(t,e,r,n,new Int32Array(n.length))}static findGuardPattern(t,e,r,n,i){let s=t.getSize();e=r?t.getNextUnset(e):t.getNextSet(e);let o=0,a=e,l=n.length,u=r;for(let r=e;r<s;r++)if(t.get(r)!==u)i[o]++;else{if(o===l-1){if(tT.patternMatchVariance(i,n,tO.MAX_INDIVIDUAL_VARIANCE)<tO.MAX_AVG_VARIANCE)return Int32Array.from([a,r]);a+=i[0]+i[1];let t=i.slice(2,i.length-1);for(let e=0;e<o-1;e++)i[e]=t[e];i[o-1]=0,i[o]=0,o--}else o++;i[o]=1,u=!u}throw new W}static decodeDigit(t,e,r,n){this.recordPattern(t,r,e);let i=this.MAX_AVG_VARIANCE,s=-1,o=n.length;for(let t=0;t<o;t++){let r=n[t],o=tT.patternMatchVariance(e,r,tO.MAX_INDIVIDUAL_VARIANCE);o<i&&(i=o,s=t)}if(s>=0)return s;throw new W}}tO.MAX_AVG_VARIANCE=.48,tO.MAX_INDIVIDUAL_VARIANCE=.7,tO.START_END_PATTERN=Int32Array.from([1,1,1]),tO.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),tO.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),tO.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class tD{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(e,r,n),s=n.toString(),o=tD.parseExtensionString(s),a=new te(s,null,0,[new tp((r[0]+r[1])/2,t),new tp(i,t)],tr.UPC_EAN_EXTENSION,new Date().getTime());return null!=o&&a.putAllMetadata(o),a}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),s=e[1],o=0;for(let e=0;e<5&&s<i;e++){let i=tO.decodeDigit(t,n,s,tO.L_AND_G_PATTERNS);for(let t of(r+=String.fromCharCode(48+i%10),n))s+=t;i>=10&&(o|=1<<4-e),4!==e&&(s=t.getNextSet(s),s=t.getNextUnset(s))}if(5!==r.length)throw new W;let a=this.determineCheckDigit(o);if(tD.extensionChecksum(r.toString())!==a)throw new W;return s}static extensionChecksum(t){let e=t.length,r=0;for(let n=e-2;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-48;r*=3;for(let n=e-1;n>=0;n-=2)r+=t.charAt(n).charCodeAt(0)-48;return(r*=3)%10}determineCheckDigit(t){for(let e=0;e<10;e++)if(t===this.CHECK_DIGIT_ENCODINGS[e])return e;throw new W}static parseExtensionString(t){if(5!==t.length)return null;let e=tD.parseExtension5String(t);return null==e?null:new Map([[tn.SUGGESTED_PRICE,e]])}static parseExtension5String(t){let e;switch(t.charAt(0)){case"0":e="£";break;case"5":e="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}e="";break;default:e=""}let r=parseInt(t.substring(1)),n=(r/100).toString(),i=r%100;return e+n+"."+(i<10?"0"+i:i.toString())}}class tM{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,e,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(e,r,n),s=n.toString(),o=tM.parseExtensionString(s),a=new te(s,null,0,[new tp((r[0]+r[1])/2,t),new tp(i,t)],tr.UPC_EAN_EXTENSION,new Date().getTime());return null!=o&&a.putAllMetadata(o),a}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),s=e[1],o=0;for(let e=0;e<2&&s<i;e++){let i=tO.decodeDigit(t,n,s,tO.L_AND_G_PATTERNS);for(let t of(r+=String.fromCharCode(48+i%10),n))s+=t;i>=10&&(o|=1<<1-e),1!==e&&(s=t.getNextSet(s),s=t.getNextUnset(s))}if(2!==r.length||parseInt(r.toString())%4!==o)throw new W;return s}static parseExtensionString(t){return 2!==t.length?null:new Map([[tn.ISSUE_NUMBER,parseInt(t)]])}}class tx{static decodeRow(t,e,r){let n=tO.findGuardPattern(e,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new tD().decodeRow(t,e,n)}catch(r){return new tM().decodeRow(t,e,n)}}}tx.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class tB extends tO{constructor(){super(),this.decodeRowStringBuffer="",tB.L_AND_G_PATTERNS=tB.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let e=tB.L_PATTERNS[t-10],r=new Int32Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[e.length-t-1];tB.L_AND_G_PATTERNS[t]=r}}decodeRow(t,e,r){let n=tB.findStartGuardPattern(e),i=null==r?null:r.get(F.NEED_RESULT_POINT_CALLBACK);if(null!=i){let e=new tp((n[0]+n[1])/2,t);i.foundPossibleResultPoint(e)}let s=this.decodeMiddle(e,n,this.decodeRowStringBuffer),o=s.rowOffset,a=s.resultString;if(null!=i){let e=new tp(o,t);i.foundPossibleResultPoint(e)}let l=this.decodeEnd(e,o);if(null!=i){let e=new tp((l[0]+l[1])/2,t);i.foundPossibleResultPoint(e)}let u=l[1],c=u+(u-l[0]);if(c>=e.getSize()||!e.isRange(u,c,!1))throw new W;let h=a.toString();if(h.length<8)throw new U;if(!tB.checkChecksum(h))throw new O;let d=(n[1]+n[0])/2,f=(l[1]+l[0])/2,g=this.getBarcodeFormat(),p=new te(h,null,0,[new tp(d,t),new tp(f,t)],g,new Date().getTime()),m=0;try{let r=tx.decodeRow(t,e,l[1]);p.putMetadata(tn.UPC_EAN_EXTENSION,r.getText()),p.putAllMetadata(r.getResultMetadata()),p.addResultPoints(r.getResultPoints()),m=r.getText().length}catch(t){}let w=null==r?null:r.get(F.ALLOWED_EAN_EXTENSIONS);if(null!=w){let t=!1;for(let e in w)if(m.toString()===e){t=!0;break}if(!t)throw new W}return p}decodeEnd(t,e){return tB.findGuardPattern(t,e,!1,tB.START_END_PATTERN,new Int32Array(tB.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return tB.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let e=t.length;if(0===e)return!1;let r=parseInt(t.charAt(e-1),10);return tB.getStandardUPCEANChecksum(t.substring(0,e-1))===r}static getStandardUPCEANChecksum(t){let e=t.length,r=0;for(let n=e-1;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-48;if(e<0||e>9)throw new U;r+=e}r*=3;for(let n=e-2;n>=0;n-=2){let e=t.charAt(n).charCodeAt(0)-48;if(e<0||e>9)throw new U;r+=e}return(1e3-r)%10}}class tP extends tB{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),s=e[1],o=0;for(let e=0;e<6&&s<i;e++){let i=tB.decodeDigit(t,n,s,tB.L_AND_G_PATTERNS);for(let t of(r+=String.fromCharCode(48+i%10),n))s+=t;i>=10&&(o|=1<<5-e)}r=tP.determineFirstDigit(r,o),s=tB.findGuardPattern(t,s,!0,tB.MIDDLE_PATTERN,new Int32Array(tB.MIDDLE_PATTERN.length).fill(0))[1];for(let e=0;e<6&&s<i;e++){let e=tB.decodeDigit(t,n,s,tB.L_PATTERNS);for(let t of(r+=String.fromCharCode(48+e),n))s+=t}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return tr.EAN_13}static determineFirstDigit(t,e){for(let r=0;r<10;r++)if(e===this.FIRST_DIGIT_ENCODINGS[r])return t=String.fromCharCode(48+r)+t;throw new W}}tP.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class tL extends tB{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),s=e[1];for(let e=0;e<4&&s<i;e++){let e=tB.decodeDigit(t,n,s,tB.L_PATTERNS);for(let t of(r+=String.fromCharCode(48+e),n))s+=t}s=tB.findGuardPattern(t,s,!0,tB.MIDDLE_PATTERN,new Int32Array(tB.MIDDLE_PATTERN.length).fill(0))[1];for(let e=0;e<4&&s<i;e++){let e=tB.decodeDigit(t,n,s,tB.L_PATTERNS);for(let t of(r+=String.fromCharCode(48+e),n))s+=t}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return tr.EAN_8}}class tk extends tB{constructor(){super(...arguments),this.ean13Reader=new tP}getBarcodeFormat(){return tr.UPC_A}decode(t,e){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,e,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,e,r))}decodeMiddle(t,e,r){return this.ean13Reader.decodeMiddle(t,e,r)}maybeReturnResult(t){let e=t.getText();if("0"===e.charAt(0)){let r=new te(e.substring(1),null,null,t.getResultPoints(),tr.UPC_A);return null!=t.getResultMetadata()&&r.putAllMetadata(t.getResultMetadata()),r}throw new W}reset(){this.ean13Reader.reset()}}class tU extends tB{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,e,r){let n=this.decodeMiddleCounters.map(t=>t);n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=t.getSize(),s=e[1],o=0;for(let e=0;e<6&&s<i;e++){let i=tU.decodeDigit(t,n,s,tU.L_AND_G_PATTERNS);for(let t of(r+=String.fromCharCode(48+i%10),n))s+=t;i>=10&&(o|=1<<5-e)}return{rowOffset:s,resultString:tU.determineNumSysAndCheckDigit(r,o)}}decodeEnd(t,e){return tU.findGuardPatternWithoutCounters(t,e,!0,tU.MIDDLE_END_PATTERN)}checkChecksum(t){return tB.checkChecksum(tU.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,e){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(e===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return String.fromCharCode(48+r)+t+String.fromCharCode(48+n);throw W.getNotFoundInstance()}getBarcodeFormat(){return tr.UPC_E}static convertUPCEtoUPCA(t){let e=t.slice(1,7).split("").map(t=>t.charCodeAt(0)),r=new j;r.append(t.charAt(0));let n=e[5];switch(n){case 0:case 1:case 2:r.appendChars(e,0,2),r.append(n),r.append("0000"),r.appendChars(e,2,3);break;case 3:r.appendChars(e,0,3),r.append("00000"),r.appendChars(e,3,2);break;case 4:r.appendChars(e,0,4),r.append("00000"),r.append(e[4]);break;default:r.appendChars(e,0,5),r.append("0000"),r.append(n)}return t.length>=8&&r.append(t.charAt(7)),r.toString()}}tU.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),tU.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class tH extends tT{constructor(t){super();let e=null==t?null:t.get(F.POSSIBLE_FORMATS),r=[];null==e?(r.push(new tP),r.push(new tk),r.push(new tL),r.push(new tU)):(e.indexOf(tr.EAN_13)>-1&&r.push(new tP),e.indexOf(tr.UPC_A)>-1&&r.push(new tk),e.indexOf(tr.EAN_8)>-1&&r.push(new tL),e.indexOf(tr.UPC_E)>-1&&r.push(new tU)),this.readers=r}decodeRow(t,e,r){for(let n of this.readers)try{let i=n.decodeRow(t,e,r),s=i.getBarcodeFormat()===tr.EAN_13&&"0"===i.getText().charAt(0),o=null==r?null:r.get(F.POSSIBLE_FORMATS),a=null==o||o.includes(tr.UPC_A);if(s&&a){let t=i.getRawBytes(),e=new te(i.getText().substring(1),t,t?t.length:null,i.getResultPoints(),tr.UPC_A);return e.putAllMetadata(i.getResultMetadata()),e}return i}catch(t){}throw new W}reset(){for(let t of this.readers)t.reset()}}class tV extends tT{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=[,,,,],this.evenRoundingErrors=[,,,,],this.oddCounts=Array(this.dataCharacterCounters.length/2),this.evenCounts=Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,e){for(let r=0;r<e.length;r++)if(tT.patternMatchVariance(t,e[r],tV.MAX_INDIVIDUAL_VARIANCE)<tV.MAX_AVG_VARIANCE)return r;throw new W}static count(t){return tf.sum(new Int32Array(t))}static increment(t,e){let r=0,n=e[0];for(let i=1;i<t.length;i++)e[i]>n&&(n=e[i],r=i);t[r]++}static decrement(t,e){let r=0,n=e[0];for(let i=1;i<t.length;i++)e[i]<n&&(n=e[i],r=i);t[r]--}static isFinderPattern(t){let e=t[0]+t[1],r=e+t[2]+t[3],n=e/r;if(n>=tV.MIN_FINDER_PATTERN_RATIO&&n<=tV.MAX_FINDER_PATTERN_RATIO){let e=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of t)n>r&&(r=n),n<e&&(e=n);return r<10*e}return!1}}tV.MAX_AVG_VARIANCE=.2,tV.MAX_INDIVIDUAL_VARIANCE=.45,tV.MIN_FINDER_PATTERN_RATIO=9.5/12,tV.MAX_FINDER_PATTERN_RATIO=12.5/14;class tz{constructor(t,e){this.value=t,this.checksumPortion=e}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){return t instanceof tz&&this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class tG{constructor(t,e,r,n,i){this.value=t,this.startEnd=e,this.value=t,this.startEnd=e,this.resultPoints=[],this.resultPoints.push(new tp(r,i)),this.resultPoints.push(new tp(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){return t instanceof tG&&this.value===t.value}hashCode(){return this.value}}class tj{constructor(){}static getRSSvalue(t,e,r){let n=0;for(let e of t)n+=e;let i=0,s=0,o=t.length;for(let a=0;a<o-1;a++){let l;for(l=1,s|=1<<a;l<t[a];l++,s&=~(1<<a)){let t=tj.combins(n-l-1,o-a-2);if(r&&0===s&&n-l-(o-a-1)>=o-a-1&&(t-=tj.combins(n-l-(o-a),o-a-2)),o-a-1>1){let r=0;for(let t=n-l-(o-a-2);t>e;t--)r+=tj.combins(n-l-t-1,o-a-3);t-=r*(o-1-a)}else n-l>e&&t--;i+=t}n-=l}return i}static combins(t,e){let r,n;t-e>e?(n=e,r=t-e):(n=t-e,r=e);let i=1,s=1;for(let e=t;e>r;e--)i*=e,s<=n&&(i/=s,s++);for(;s<=n;)i/=s,s++;return i}}class tQ{static buildBitArray(t){let e=2*t.length-1;null==t[t.length-1].getRightChar()&&(e-=1);let r=new k(12*e),n=0,i=t[0].getRightChar().getValue();for(let t=11;t>=0;--t)(i&1<<t)!=0&&r.set(n),n++;for(let e=1;e<t.length;++e){let i=t[e],s=i.getLeftChar().getValue();for(let t=11;t>=0;--t)(s&1<<t)!=0&&r.set(n),n++;if(null!=i.getRightChar()){let t=i.getRightChar().getValue();for(let e=11;e>=0;--e)(t&1<<e)!=0&&r.set(n),n++}}return r}}class tW{constructor(t,e){e?this.decodedInformation=null:(this.finished=t,this.decodedInformation=e)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class tY{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class tX extends tY{constructor(t,e){super(t),this.value=e}getValue(){return this.value}isFNC1(){return this.value===tX.FNC1}}tX.FNC1="$";class tq extends tY{constructor(t,e,r){super(t),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=e}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class tK extends tY{constructor(t,e,r){if(super(t),e<0||e>10||r<0||r>10)throw new U;this.firstDigit=e,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===tK.FNC1}isSecondDigitFNC1(){return this.secondDigit===tK.FNC1}isAnyFNC1(){return this.firstDigit===tK.FNC1||this.secondDigit===tK.FNC1}}tK.FNC1=10;class tZ{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new W;let e=t.substring(0,2);for(let r of tZ.TWO_DIGIT_DATA_LENGTH)if(r[0]===e){if(r[1]===tZ.VARIABLE_LENGTH)return tZ.processVariableAI(2,r[2],t);return tZ.processFixedAI(2,r[1],t)}if(t.length<3)throw new W;let r=t.substring(0,3);for(let e of tZ.THREE_DIGIT_DATA_LENGTH)if(e[0]===r){if(e[1]===tZ.VARIABLE_LENGTH)return tZ.processVariableAI(3,e[2],t);return tZ.processFixedAI(3,e[1],t)}for(let e of tZ.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(e[0]===r){if(e[1]===tZ.VARIABLE_LENGTH)return tZ.processVariableAI(4,e[2],t);return tZ.processFixedAI(4,e[1],t)}if(t.length<4)throw new W;let n=t.substring(0,4);for(let e of tZ.FOUR_DIGIT_DATA_LENGTH)if(e[0]===n){if(e[1]===tZ.VARIABLE_LENGTH)return tZ.processVariableAI(4,e[2],t);return tZ.processFixedAI(4,e[1],t)}throw new W}static processFixedAI(t,e,r){if(r.length<t)throw new W;let n=r.substring(0,t);if(r.length<t+e)throw new W;let i=r.substring(t,t+e),s=r.substring(t+e),o="("+n+")"+i,a=tZ.parseFieldsInGeneralPurpose(s);return null==a?o:o+a}static processVariableAI(t,e,r){let n,i=r.substring(0,t);n=r.length<t+e?r.length:t+e;let s=r.substring(t,n),o=r.substring(n),a="("+i+")"+s,l=tZ.parseFieldsInGeneralPurpose(o);return null==l?a:a+l}}tZ.VARIABLE_LENGTH=[],tZ.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",tZ.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",tZ.VARIABLE_LENGTH,20],["22",tZ.VARIABLE_LENGTH,29],["30",tZ.VARIABLE_LENGTH,8],["37",tZ.VARIABLE_LENGTH,8],["90",tZ.VARIABLE_LENGTH,30],["91",tZ.VARIABLE_LENGTH,30],["92",tZ.VARIABLE_LENGTH,30],["93",tZ.VARIABLE_LENGTH,30],["94",tZ.VARIABLE_LENGTH,30],["95",tZ.VARIABLE_LENGTH,30],["96",tZ.VARIABLE_LENGTH,30],["97",tZ.VARIABLE_LENGTH,3],["98",tZ.VARIABLE_LENGTH,30],["99",tZ.VARIABLE_LENGTH,30]],tZ.THREE_DIGIT_DATA_LENGTH=[["240",tZ.VARIABLE_LENGTH,30],["241",tZ.VARIABLE_LENGTH,30],["242",tZ.VARIABLE_LENGTH,6],["250",tZ.VARIABLE_LENGTH,30],["251",tZ.VARIABLE_LENGTH,30],["253",tZ.VARIABLE_LENGTH,17],["254",tZ.VARIABLE_LENGTH,20],["400",tZ.VARIABLE_LENGTH,30],["401",tZ.VARIABLE_LENGTH,30],["402",17],["403",tZ.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",tZ.VARIABLE_LENGTH,20],["421",tZ.VARIABLE_LENGTH,15],["422",3],["423",tZ.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],tZ.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",tZ.VARIABLE_LENGTH,15],["391",tZ.VARIABLE_LENGTH,18],["392",tZ.VARIABLE_LENGTH,15],["393",tZ.VARIABLE_LENGTH,18],["703",tZ.VARIABLE_LENGTH,30]],tZ.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",tZ.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",tZ.VARIABLE_LENGTH,20],["8003",tZ.VARIABLE_LENGTH,30],["8004",tZ.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",tZ.VARIABLE_LENGTH,30],["8008",tZ.VARIABLE_LENGTH,12],["8018",18],["8020",tZ.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",tZ.VARIABLE_LENGTH,70],["8200",tZ.VARIABLE_LENGTH,70]];class tJ{constructor(t){this.buffer=new j,this.information=t}decodeAllCodes(t,e){let r=e,n=null;for(;;){let e=this.decodeGeneralPurposeField(r,n),i=tZ.parseFieldsInGeneralPurpose(e.getNewString());if(null!=i&&t.append(i),n=e.isRemaining()?""+e.getRemainingValue():null,r===e.getNewPosition())break;r=e.getNewPosition()}return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let e=t;e<t+3;++e)if(this.information.get(e))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let e=this.extractNumericValueFromBitArray(t,4);return 0===e?new tK(this.information.getSize(),tK.FNC1,tK.FNC1):new tK(this.information.getSize(),e-1,tK.FNC1)}let e=this.extractNumericValueFromBitArray(t,7);return new tK(t+7,(e-8)/11,(e-8)%11)}extractNumericValueFromBitArray(t,e){return tJ.extractNumericValueFromBitArray(this.information,t,e)}static extractNumericValueFromBitArray(t,e,r){let n=0;for(let i=0;i<r;++i)t.get(e+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(t,e){this.buffer.setLengthToZero(),null!=e&&this.buffer.append(e),this.current.setPosition(t);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new tq(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new tq(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,e;do{let r=this.current.getPosition();if(t=this.current.isAlpha()?(e=this.parseAlphaBlock()).isFinished():this.current.isIsoIec646()?(e=this.parseIsoIec646Block()).isFinished():(e=this.parseNumericBlock()).isFinished(),r===this.current.getPosition()&&!t)break}while(!t)return e.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let e;return new tW(!0,t.isSecondDigitFNC1()?new tq(this.current.getPosition(),this.buffer.toString()):new tq(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()))}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1())return new tW(!0,new tq(this.current.getPosition(),this.buffer.toString()));this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new tW(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1())return new tW(!0,new tq(this.current.getPosition(),this.buffer.toString()));this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new tW(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1())return new tW(!0,new tq(this.current.getPosition(),this.buffer.toString()));this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new tW(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,7);if(r>=64&&r<116)return!0;if(t+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(t,8);return n>=232&&n<253}decodeIsoIec646(t){let e,r=this.extractNumericValueFromBitArray(t,5);if(15===r)return new tX(t+5,tX.FNC1);if(r>=5&&r<15)return new tX(t+5,"0"+(r-5));let n=this.extractNumericValueFromBitArray(t,7);if(n>=64&&n<90)return new tX(t+7,""+(n+1));if(n>=90&&n<116)return new tX(t+7,""+(n+7));switch(this.extractNumericValueFromBitArray(t,8)){case 232:e="!";break;case 233:e='"';break;case 234:e="%";break;case 235:e="&";break;case 236:e="'";break;case 237:e="(";break;case 238:e=")";break;case 239:e="*";break;case 240:e="+";break;case 241:e=",";break;case 242:e="-";break;case 243:e=".";break;case 244:e="/";break;case 245:e=":";break;case 246:e=";";break;case 247:e="<";break;case 248:e="=";break;case 249:e=">";break;case 250:e="?";break;case 251:e="_";break;case 252:e=" ";break;default:throw new U}return new tX(t+8,e)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let e=this.extractNumericValueFromBitArray(t,5);if(e>=5&&e<16)return!0;if(t+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(t,6);return r>=16&&r<63}decodeAlphanumeric(t){let e,r=this.extractNumericValueFromBitArray(t,5);if(15===r)return new tX(t+5,tX.FNC1);if(r>=5&&r<15)return new tX(t+5,"0"+(r-5));let n=this.extractNumericValueFromBitArray(t,6);if(n>=32&&n<58)return new tX(t+6,""+(n+33));switch(n){case 58:e="*";break;case 59:e=",";break;case 60:e="-";break;case 61:e=".";break;case 62:e="/";break;default:throw new tc("Decoding invalid alphanumeric value: "+n)}return new tX(t+6,e)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<5&&e+t<this.information.getSize();++e)if(2===e){if(!this.information.get(t+2))return!1}else if(this.information.get(t+e))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let e=t;e<t+3;++e)if(this.information.get(e))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let e=0;e<4&&e+t<this.information.getSize();++e)if(this.information.get(t+e))return!1;return!0}}class t${constructor(t){this.information=t,this.generalDecoder=new tJ(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class t1 extends t${constructor(t){super(t)}encodeCompressedGtin(t,e){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,e,r)}encodeCompressedGtinWithoutAI(t,e,r){for(let r=0;r<4;++r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e+10*r,10);n/100==0&&t.append("0"),n/10==0&&t.append("0"),t.append(n)}t1.appendCheckDigit(t,r)}static appendCheckDigit(t,e){let r=0;for(let n=0;n<13;n++){let i=t.charAt(n+e).charCodeAt(0)-48;r+=(1&n)==0?3*i:i}10==(r=10-r%10)&&(r=0),t.append(r)}}t1.GTIN_SIZE=40;class t0 extends t1{constructor(t){super(t)}parseInformation(){let t=new j;t.append("(01)");let e=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(t0.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,t0.HEADER_SIZE+4,e),this.getGeneralDecoder().decodeAllCodes(t,t0.HEADER_SIZE+44)}}t0.HEADER_SIZE=4;class t2 extends t${constructor(t){super(t)}parseInformation(){let t=new j;return this.getGeneralDecoder().decodeAllCodes(t,t2.HEADER_SIZE)}}t2.HEADER_SIZE=5;class t3 extends t1{constructor(t){super(t)}encodeCompressedWeight(t,e,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(e,r);this.addWeightCode(t,n);let i=this.checkWeight(n),s=1e5;for(let e=0;e<5;++e)i/s==0&&t.append("0"),s/=10;t.append(i)}}class t4 extends t3{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=t4.HEADER_SIZE+t3.GTIN_SIZE+t4.WEIGHT_SIZE)throw new W;let t=new j;return this.encodeCompressedGtin(t,t4.HEADER_SIZE),this.encodeCompressedWeight(t,t4.HEADER_SIZE+t3.GTIN_SIZE,t4.WEIGHT_SIZE),t.toString()}}t4.HEADER_SIZE=5,t4.WEIGHT_SIZE=15;class t8 extends t4{constructor(t){super(t)}addWeightCode(t,e){t.append("(3103)")}checkWeight(t){return t}}class t6 extends t4{constructor(t){super(t)}addWeightCode(t,e){e<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class t5 extends t1{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<t5.HEADER_SIZE+t1.GTIN_SIZE)throw new W;let t=new j;this.encodeCompressedGtin(t,t5.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(t5.HEADER_SIZE+t1.GTIN_SIZE,t5.LAST_DIGIT_SIZE);t.append("(392"),t.append(e),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(t5.HEADER_SIZE+t1.GTIN_SIZE+t5.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}t5.HEADER_SIZE=8,t5.LAST_DIGIT_SIZE=2;class t7 extends t1{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<t7.HEADER_SIZE+t1.GTIN_SIZE)throw new W;let t=new j;this.encodeCompressedGtin(t,t7.HEADER_SIZE);let e=this.getGeneralDecoder().extractNumericValueFromBitArray(t7.HEADER_SIZE+t1.GTIN_SIZE,t7.LAST_DIGIT_SIZE);t.append("(393"),t.append(e),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t7.HEADER_SIZE+t1.GTIN_SIZE+t7.LAST_DIGIT_SIZE,t7.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(t7.HEADER_SIZE+t1.GTIN_SIZE+t7.LAST_DIGIT_SIZE+t7.FIRST_THREE_DIGITS_SIZE,null);return t.append(n.getNewString()),t.toString()}}t7.HEADER_SIZE=8,t7.LAST_DIGIT_SIZE=2,t7.FIRST_THREE_DIGITS_SIZE=10;class t9 extends t3{constructor(t,e,r){super(t),this.dateCode=r,this.firstAIdigits=e}parseInformation(){if(this.getInformation().getSize()!=t9.HEADER_SIZE+t9.GTIN_SIZE+t9.WEIGHT_SIZE+t9.DATE_SIZE)throw new W;let t=new j;return this.encodeCompressedGtin(t,t9.HEADER_SIZE),this.encodeCompressedWeight(t,t9.HEADER_SIZE+t9.GTIN_SIZE,t9.WEIGHT_SIZE),this.encodeCompressedDate(t,t9.HEADER_SIZE+t9.GTIN_SIZE+t9.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,e){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(e,t9.DATE_SIZE);if(38400==r)return;t.append("("),t.append(this.dateCode),t.append(")");let n=r%32,i=(r/=32)%12+1,s=r/=12;s/10==0&&t.append("0"),t.append(s),i/10==0&&t.append("0"),t.append(i),n/10==0&&t.append("0"),t.append(n)}addWeightCode(t,e){t.append("("),t.append(this.firstAIdigits),t.append(e/1e5),t.append(")")}checkWeight(t){return t%1e5}}function et(t){try{if(t.get(1))return new t0(t);if(!t.get(2))return new t2(t);switch(tJ.extractNumericValueFromBitArray(t,1,4)){case 4:return new t8(t);case 5:return new t6(t)}switch(tJ.extractNumericValueFromBitArray(t,1,5)){case 12:return new t5(t);case 13:return new t7(t)}switch(tJ.extractNumericValueFromBitArray(t,1,7)){case 56:return new t9(t,"310","11");case 57:return new t9(t,"320","11");case 58:return new t9(t,"310","13");case 59:return new t9(t,"320","13");case 60:return new t9(t,"310","15");case 61:return new t9(t,"320","15");case 62:return new t9(t,"310","17");case 63:return new t9(t,"320","17")}}catch(e){throw console.log(e),new tc("unknown decoder: "+t)}}t9.HEADER_SIZE=8,t9.WEIGHT_SIZE=20,t9.DATE_SIZE=16;class ee{constructor(t,e,r,n){this.leftchar=t,this.rightchar=e,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(t,e){return t instanceof ee&&ee.equalsOrNull(t.leftchar,e.leftchar)&&ee.equalsOrNull(t.rightchar,e.rightchar)&&ee.equalsOrNull(t.finderpattern,e.finderpattern)}static equalsOrNull(t,e){return null===t?null===e:ee.equals(t,e)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class er{constructor(t,e,r){this.pairs=t,this.rowNumber=e,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,e){return t instanceof er&&this.checkEqualitity(t,e)&&t.wasReversed===e.wasReversed}checkEqualitity(t,e){let r;if(t&&e)return t.forEach((t,n)=>{e.forEach(e=>{t.getLeftChar().getValue()===e.getLeftChar().getValue()&&t.getRightChar().getValue()===e.getRightChar().getValue()&&t.getFinderPatter().getValue()===e.getFinderPatter().getValue()&&(r=!0)})}),r}}class en extends tV{constructor(t){super(...arguments),this.pairs=Array(en.MAX_PAIRS),this.rows=[],this.startEnd=[2],this.verbose=!0===t}decodeRow(t,e,r){this.pairs.length=0,this.startFromEven=!1;try{return en.constructResult(this.decodeRow2pairs(t,e))}catch(t){this.verbose&&console.log(t)}return this.pairs.length=0,this.startFromEven=!0,en.constructResult(this.decodeRow2pairs(t,e))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,e){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(e,this.pairs,t))}catch(t){if(t instanceof W){if(!this.pairs.length)throw new W;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(t,!1),r){let t=this.checkRowsBoolean(!1);if(null!=t||null!=(t=this.checkRowsBoolean(!0)))return t}throw new W}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let e=null;try{e=this.checkRows([],0)}catch(t){this.verbose&&console.log(t)}return t&&(this.rows=this.rows.reverse()),e}checkRows(t,e){for(let r=e;r<this.rows.length;r++){let e=this.rows[r];for(let e of(this.pairs.length=0,t))this.pairs.push(e.getPairs());if(this.pairs.push(e.getPairs()),!en.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let n=Array(t);n.push(e);try{return this.checkRows(n,r+1)}catch(t){this.verbose&&console.log(t)}}throw new W}static isValidSequence(t){for(let e of en.FINDER_PATTERN_SEQUENCES){if(t.length>e.length)continue;let r=!0;for(let n=0;n<t.length;n++)if(t[n].getFinderPattern().getValue()!=e[n]){r=!1;break}if(r)return!0}return!1}storeRow(t,e){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let e=this.rows[r];if(e.getRowNumber()>t){i=e.isEquivalent(this.pairs);break}n=e.isEquivalent(this.pairs),r++}i||n||en.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new er(this.pairs,t,e)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,e){for(let r of e)if(r.getPairs().length!==t.length){for(let e of r.getPairs())for(let r of t)if(ee.equals(e,r))break}}static isPartialRow(t,e){for(let r of e){let e=!0;for(let n of t){let t=!1;for(let e of r.getPairs())if(n.equals(e)){t=!0;break}if(!t){e=!1;break}}if(e)return!0}return!1}getRows(){return this.rows}static constructResult(t){let e=et(tQ.buildBitArray(t)).parseInformation(),r=t[0].getFinderPattern().getResultPoints(),n=t[t.length-1].getFinderPattern().getResultPoints();return new te(e,null,null,[r[0],r[1],n[0],n[1]],tr.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),e=t.getLeftChar(),r=t.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),i=2;for(let t=1;t<this.pairs.size();++t){let e=this.pairs.get(t);n+=e.getLeftChar().getChecksumPortion(),i++;let r=e.getRightChar();null!=r&&(n+=r.getChecksumPortion(),i++)}return 211*(i-4)+(n%=211)==e.getValue()}static getNextSecondBar(t,e){let r;return t.get(e)?(r=t.getNextUnset(e),r=t.getNextSet(r)):(r=t.getNextSet(e),r=t.getNextUnset(r)),r}retrieveNextPair(t,e,r){let n,i,s=e.length%2==0;this.startFromEven&&(s=!s);let o=!0,a=-1;do this.findNextPair(t,e,a),null==(n=this.parseFoundFinderPattern(t,r,s))?a=en.getNextSecondBar(t,this.startEnd[0]):o=!1;while(o)let l=this.decodeDataCharacter(t,n,s,!0);if(!this.isEmptyPair(e)&&e[e.length-1].mustBeLast())throw new W;try{i=this.decodeDataCharacter(t,n,s,!1)}catch(t){i=null,this.verbose&&console.log(t)}return new ee(l,i,n,!0)}isEmptyPair(t){return 0===t.length}findNextPair(t,e,r){let n,i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let s=t.getSize();n=r>=0?r:this.isEmptyPair(e)?0:e[e.length-1].getFinderPattern().getStartEnd()[1];let o=e.length%2!=0;this.startFromEven&&(o=!o);let a=!1;for(;n<s&&(a=!t.get(n));)n++;let l=0,u=n;for(let e=n;e<s;e++)if(t.get(e)!=a)i[l]++;else{if(3==l){if(o&&en.reverseCounters(i),en.isFinderPattern(i)){this.startEnd[0]=u,this.startEnd[1]=e;return}o&&en.reverseCounters(i),u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,a=!a}throw new W}static reverseCounters(t){let e=t.length;for(let r=0;r<e/2;++r){let n=t[r];t[r]=t[e-r-1],t[e-r-1]=n}}parseFoundFinderPattern(t,e,r){let n,i,s,o;if(r){let e=this.startEnd[0]-1;for(;e>=0&&!t.get(e);)e--;e++,n=this.startEnd[0]-e,i=e,s=this.startEnd[1]}else i=this.startEnd[0],n=(s=t.getNextUnset(this.startEnd[1]+1))-this.startEnd[1];let a=this.getDecodeFinderCounters();M.arraycopy(a,0,a,1,a.length-1),a[0]=n;try{o=this.parseFinderValue(a,en.FINDER_PATTERNS)}catch(t){return null}return new tG(o,[i,s],i,s,e)}decodeDataCharacter(t,e,r,n){let i=this.getDataCharacterCounters();for(let t=0;t<i.length;t++)i[t]=0;if(n)en.recordPatternInReverse(t,e.getStartEnd()[0],i);else{en.recordPattern(t,e.getStartEnd()[1],i);for(let t=0,e=i.length-1;t<e;t++,e--){let r=i[t];i[t]=i[e],i[e]=r}}let s=tf.sum(new Int32Array(i))/17,o=(e.getStartEnd()[1]-e.getStartEnd()[0])/15;if(Math.abs(s-o)/o>.3)throw new W;let a=this.getOddCounts(),l=this.getEvenCounts(),u=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let t=0;t<i.length;t++){let e=i[t]/s,r=e+.5;if(r<1){if(e<.3)throw new W;r=1}else if(r>8){if(e>8.7)throw new W;r=8}let n=t/2;(1&t)==0?(a[n]=r,u[n]=e-r):(l[n]=r,c[n]=e-r)}this.adjustOddEvenCounts(17);let h=4*e.getValue()+2*!r+ +!n-1,d=0,f=0;for(let t=a.length-1;t>=0;t--){if(en.isNotA1left(e,r,n)){let e=en.WEIGHTS[h][2*t];f+=a[t]*e}d+=a[t]}let g=0;for(let t=l.length-1;t>=0;t--)if(en.isNotA1left(e,r,n)){let e=en.WEIGHTS[h][2*t+1];g+=l[t]*e}let p=f+g;if((1&d)!=0||d>13||d<4)throw new W;let m=(13-d)/2,w=en.SYMBOL_WIDEST[m],y=tj.getRSSvalue(a,w,!0),A=tj.getRSSvalue(l,9-w,!1);return new tz(y*en.EVEN_TOTAL_SUBSET[m]+A+en.GSUM[m],p)}static isNotA1left(t,e,r){return!(0==t.getValue()&&e&&r)}adjustOddEvenCounts(t){let e=tf.sum(new Int32Array(this.getOddCounts())),r=tf.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;e>13?i=!0:e<4&&(n=!0);let s=!1,o=!1;r>13?o=!0:r<4&&(s=!0);let a=e+r-t,l=(1&e)==1,u=(1&r)==0;if(1==a)if(l){if(u)throw new W;i=!0}else{if(!u)throw new W;o=!0}else if(-1==a)if(l){if(u)throw new W;n=!0}else{if(!u)throw new W;s=!0}else if(0==a){if(l){if(!u)throw new W;e<r?(n=!0,o=!0):(i=!0,s=!0)}else if(u)throw new W}else throw new W;if(n){if(i)throw new W;en.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&en.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(o)throw new W;en.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&en.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}en.SYMBOL_WIDEST=[7,5,4,3,1],en.EVEN_TOTAL_SUBSET=[4,20,52,104,204],en.GSUM=[0,348,1388,2948,3988],en.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],en.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],en.FINDER_PAT_A=0,en.FINDER_PAT_B=1,en.FINDER_PAT_C=2,en.FINDER_PAT_D=3,en.FINDER_PAT_E=4,en.FINDER_PAT_F=5,en.FINDER_PATTERN_SEQUENCES=[[en.FINDER_PAT_A,en.FINDER_PAT_A],[en.FINDER_PAT_A,en.FINDER_PAT_B,en.FINDER_PAT_B],[en.FINDER_PAT_A,en.FINDER_PAT_C,en.FINDER_PAT_B,en.FINDER_PAT_D],[en.FINDER_PAT_A,en.FINDER_PAT_E,en.FINDER_PAT_B,en.FINDER_PAT_D,en.FINDER_PAT_C],[en.FINDER_PAT_A,en.FINDER_PAT_E,en.FINDER_PAT_B,en.FINDER_PAT_D,en.FINDER_PAT_D,en.FINDER_PAT_F],[en.FINDER_PAT_A,en.FINDER_PAT_E,en.FINDER_PAT_B,en.FINDER_PAT_D,en.FINDER_PAT_E,en.FINDER_PAT_F,en.FINDER_PAT_F],[en.FINDER_PAT_A,en.FINDER_PAT_A,en.FINDER_PAT_B,en.FINDER_PAT_B,en.FINDER_PAT_C,en.FINDER_PAT_C,en.FINDER_PAT_D,en.FINDER_PAT_D],[en.FINDER_PAT_A,en.FINDER_PAT_A,en.FINDER_PAT_B,en.FINDER_PAT_B,en.FINDER_PAT_C,en.FINDER_PAT_C,en.FINDER_PAT_D,en.FINDER_PAT_E,en.FINDER_PAT_E],[en.FINDER_PAT_A,en.FINDER_PAT_A,en.FINDER_PAT_B,en.FINDER_PAT_B,en.FINDER_PAT_C,en.FINDER_PAT_C,en.FINDER_PAT_D,en.FINDER_PAT_E,en.FINDER_PAT_F,en.FINDER_PAT_F],[en.FINDER_PAT_A,en.FINDER_PAT_A,en.FINDER_PAT_B,en.FINDER_PAT_B,en.FINDER_PAT_C,en.FINDER_PAT_D,en.FINDER_PAT_D,en.FINDER_PAT_E,en.FINDER_PAT_E,en.FINDER_PAT_F,en.FINDER_PAT_F]],en.MAX_PAIRS=11;class ei extends tz{constructor(t,e,r){super(t,e),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class es extends tV{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,e,r){let n=this.decodePair(e,!1,t,r);es.addOrTally(this.possibleLeftPairs,n),e.reverse();let i=this.decodePair(e,!0,t,r);for(let t of(es.addOrTally(this.possibleRightPairs,i),e.reverse(),this.possibleLeftPairs))if(t.getCount()>1){for(let e of this.possibleRightPairs)if(e.getCount()>1&&es.checkChecksum(t,e))return es.constructResult(t,e)}throw new W}static addOrTally(t,e){if(null==e)return;let r=!1;for(let n of t)if(n.getValue()===e.getValue()){n.incrementCount(),r=!0;break}r||t.push(e)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,e){let r=new String(4537077*t.getValue()+e.getValue()).toString(),n=new j;for(let t=13-r.length;t>0;t--)n.append("0");n.append(r);let i=0;for(let t=0;t<13;t++){let e=n.charAt(t).charCodeAt(0)-48;i+=(1&t)==0?3*e:e}10==(i=10-i%10)&&(i=0),n.append(i.toString());let s=t.getFinderPattern().getResultPoints(),o=e.getFinderPattern().getResultPoints();return new te(n.toString(),null,0,[s[0],s[1],o[0],o[1]],tr.RSS_14,new Date().getTime())}static checkChecksum(t,e){let r=(t.getChecksumPortion()+16*e.getChecksumPortion())%79,n=9*t.getFinderPattern().getValue()+e.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(t,e,r,n){try{let i=this.findFinderPattern(t,e),s=this.parseFoundFinderPattern(t,r,e,i),o=null==n?null:n.get(F.NEED_RESULT_POINT_CALLBACK);if(null!=o){let n=(i[0]+i[1])/2;e&&(n=t.getSize()-1-n),o.foundPossibleResultPoint(new tp(n,r))}let a=this.decodeDataCharacter(t,s,!0),l=this.decodeDataCharacter(t,s,!1);return new ei(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),s)}catch(t){return null}}decodeDataCharacter(t,e,r){let n=this.getDataCharacterCounters();for(let t=0;t<n.length;t++)n[t]=0;if(r)tT.recordPatternInReverse(t,e.getStartEnd()[0],n);else{tT.recordPattern(t,e.getStartEnd()[1]+1,n);for(let t=0,e=n.length-1;t<e;t++,e--){let r=n[t];n[t]=n[e],n[e]=r}}let i=r?16:15,s=tf.sum(new Int32Array(n))/i,o=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),u=this.getEvenRoundingErrors();for(let t=0;t<n.length;t++){let e=n[t]/s,r=Math.floor(e+.5);r<1?r=1:r>8&&(r=8);let i=Math.floor(t/2);(1&t)==0?(o[i]=r,l[i]=e-r):(a[i]=r,u[i]=e-r)}this.adjustOddEvenCounts(r,i);let c=0,h=0;for(let t=o.length-1;t>=0;t--)h*=9,h+=o[t],c+=o[t];let d=0,f=0;for(let t=a.length-1;t>=0;t--)d*=9,d+=a[t],f+=a[t];let g=h+3*d;if(r){if((1&c)!=0||c>12||c<4)throw new W;let t=(12-c)/2,e=es.OUTSIDE_ODD_WIDEST[t],r=tj.getRSSvalue(o,e,!1),n=tj.getRSSvalue(a,9-e,!0);return new tz(r*es.OUTSIDE_EVEN_TOTAL_SUBSET[t]+n+es.OUTSIDE_GSUM[t],g)}{if((1&f)!=0||f>10||f<4)throw new W;let t=(10-f)/2,e=es.INSIDE_ODD_WIDEST[t],r=tj.getRSSvalue(o,e,!0);return new tz(tj.getRSSvalue(a,9-e,!1)*es.INSIDE_ODD_TOTAL_SUBSET[t]+r+es.INSIDE_GSUM[t],g)}}findFinderPattern(t,e){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=t.getSize(),i=!1,s=0;for(;s<n&&e!==(i=!t.get(s));)s++;let o=0,a=s;for(let e=s;e<n;e++)if(t.get(e)!==i)r[o]++;else{if(3===o){if(tV.isFinderPattern(r))return[a,e];a+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,o--}else o++;r[o]=1,i=!i}throw new W}parseFoundFinderPattern(t,e,r,n){let i=t.get(n[0]),s=n[0]-1;for(;s>=0&&i!==t.get(s);)s--;s++;let o=n[0]-s,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);M.arraycopy(a,0,l,1,a.length-1),l[0]=o;let u=this.parseFinderValue(l,es.FINDER_PATTERNS),c=s,h=n[1];return r&&(c=t.getSize()-1-c,h=t.getSize()-1-h),new tG(u,[s,n[1]],c,h,e)}adjustOddEvenCounts(t,e){let r=tf.sum(new Int32Array(this.getOddCounts())),n=tf.sum(new Int32Array(this.getEvenCounts())),i=!1,s=!1,o=!1,a=!1;t?(r>12?s=!0:r<4&&(i=!0),n>12?a=!0:n<4&&(o=!0)):(r>11?s=!0:r<5&&(i=!0),n>10?a=!0:n<4&&(o=!0));let l=r+n-e,u=(1&r)==+!!t,c=(1&n)==1;if(1===l)if(u){if(c)throw new W;s=!0}else{if(!c)throw new W;a=!0}else if(-1===l)if(u){if(c)throw new W;i=!0}else{if(!c)throw new W;o=!0}else if(0===l){if(u){if(!c)throw new W;r<n?(i=!0,a=!0):(s=!0,o=!0)}else if(c)throw new W}else throw new W;if(i){if(s)throw new W;tV.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&tV.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(a)throw new W;tV.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&tV.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}es.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],es.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],es.OUTSIDE_GSUM=[0,161,961,2015,2715],es.INSIDE_GSUM=[0,336,1036,1516],es.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],es.INSIDE_ODD_WIDEST=[2,4,6,8],es.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class eo extends tT{constructor(t,e){super(),this.readers=[],this.verbose=!0===e;let r=t?t.get(F.POSSIBLE_FORMATS):null,n=t&&void 0!==t.get(F.ASSUME_CODE_39_CHECK_DIGIT);r?((r.includes(tr.EAN_13)||r.includes(tr.UPC_A)||r.includes(tr.EAN_8)||r.includes(tr.UPC_E))&&this.readers.push(new tH(t)),r.includes(tr.CODE_39)&&this.readers.push(new tN(n)),r.includes(tr.CODE_128)&&this.readers.push(new tv),r.includes(tr.ITF)&&this.readers.push(new tR),r.includes(tr.RSS_14)&&this.readers.push(new es),r.includes(tr.RSS_EXPANDED)&&this.readers.push(new en(this.verbose))):(this.readers.push(new tH(t)),this.readers.push(new tN),this.readers.push(new tH(t)),this.readers.push(new tv),this.readers.push(new tR),this.readers.push(new es),this.readers.push(new en(this.verbose)))}decodeRow(t,e,r){for(let n=0;n<this.readers.length;n++)try{return this.readers[n].decodeRow(t,e,r)}catch(t){}throw new W}reset(){this.readers.forEach(t=>t.reset())}}class ea{constructor(t,e,r){this.ecCodewords=t,this.ecBlocks=[e],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class el{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class eu{constructor(t,e,r,n,i,s){this.versionNumber=t,this.symbolSizeRows=e,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=s;let o=0,a=s.getECCodewords();for(let t of s.getECBlocks())o+=t.getCount()*(t.getDataCodewords()+a);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,e){if((1&t)!=0||(1&e)!=0)throw new U;for(let r of eu.VERSIONS)if(r.symbolSizeRows===t&&r.symbolSizeColumns===e)return r;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new eu(1,10,10,8,8,new ea(5,new el(1,3))),new eu(2,12,12,10,10,new ea(7,new el(1,5))),new eu(3,14,14,12,12,new ea(10,new el(1,8))),new eu(4,16,16,14,14,new ea(12,new el(1,12))),new eu(5,18,18,16,16,new ea(14,new el(1,18))),new eu(6,20,20,18,18,new ea(18,new el(1,22))),new eu(7,22,22,20,20,new ea(20,new el(1,30))),new eu(8,24,24,22,22,new ea(24,new el(1,36))),new eu(9,26,26,24,24,new ea(28,new el(1,44))),new eu(10,32,32,14,14,new ea(36,new el(1,62))),new eu(11,36,36,16,16,new ea(42,new el(1,86))),new eu(12,40,40,18,18,new ea(48,new el(1,114))),new eu(13,44,44,20,20,new ea(56,new el(1,144))),new eu(14,48,48,22,22,new ea(68,new el(1,174))),new eu(15,52,52,24,24,new ea(42,new el(2,102))),new eu(16,64,64,14,14,new ea(56,new el(2,140))),new eu(17,72,72,16,16,new ea(36,new el(4,92))),new eu(18,80,80,18,18,new ea(48,new el(4,114))),new eu(19,88,88,20,20,new ea(56,new el(4,144))),new eu(20,96,96,22,22,new ea(68,new el(4,174))),new eu(21,104,104,24,24,new ea(56,new el(6,136))),new eu(22,120,120,18,18,new ea(68,new el(6,175))),new eu(23,132,132,20,20,new ea(62,new el(8,163))),new eu(24,144,144,22,22,new ea(62,new el(8,156),new el(2,155))),new eu(25,8,18,6,16,new ea(7,new el(1,5))),new eu(26,8,32,6,14,new ea(11,new el(1,10))),new eu(27,12,26,10,24,new ea(14,new el(1,16))),new eu(28,12,36,10,16,new ea(18,new el(1,22))),new eu(29,16,36,14,16,new ea(24,new el(1,32))),new eu(30,16,48,14,22,new ea(28,new el(1,49)))]}}eu.VERSIONS=eu.buildVersions();class ec{constructor(t){let e=t.getHeight();if(e<8||e>144||(1&e)!=0)throw new U;this.version=ec.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Q(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){let e=t.getHeight(),r=t.getWidth();return eu.getVersionForDimensions(e,r)}readCodewords(){let t=new Int8Array(this.version.getTotalCodewords()),e=0,r=4,n=0,i=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),o=!1,a=!1,l=!1,u=!1;do if(r!==i||0!==n||o)if(r!==i-2||0!==n||(3&s)==0||a)if(r!==i+4||2!==n||(7&s)!=0||l)if(r!==i-2||0!==n||(7&s)!=4||u){do r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,i,s)),r-=2,n+=2;while(r>=0&&n<s)r+=1,n+=3;do r>=0&&n<s&&!this.readMappingMatrix.get(n,r)&&(t[e++]=255&this.readUtah(r,n,i,s)),r+=2,n-=2;while(r<i&&n>=0)r+=3,n+=1}else t[e++]=255&this.readCorner4(i,s),r-=2,n+=2,u=!0;else t[e++]=255&this.readCorner3(i,s),r-=2,n+=2,l=!0;else t[e++]=255&this.readCorner2(i,s),r-=2,n+=2,a=!0;else t[e++]=255&this.readCorner1(i,s),r-=2,n+=2,o=!0;while(r<i||n<s)if(e!==this.version.getTotalCodewords())throw new U;return t}readModule(t,e,r,n){return t<0&&(t+=r,e+=4-(r+4&7)),e<0&&(e+=n,t+=4-(n+4&7)),this.readMappingMatrix.set(e,t),this.mappingBitMatrix.get(e,t)}readUtah(t,e,r,n){let i=0;return this.readModule(t-2,e-2,r,n)&&(i|=1),i<<=1,this.readModule(t-2,e-1,r,n)&&(i|=1),i<<=1,this.readModule(t-1,e-2,r,n)&&(i|=1),i<<=1,this.readModule(t-1,e-1,r,n)&&(i|=1),i<<=1,this.readModule(t-1,e,r,n)&&(i|=1),i<<=1,this.readModule(t,e-2,r,n)&&(i|=1),i<<=1,this.readModule(t,e-1,r,n)&&(i|=1),i<<=1,this.readModule(t,e,r,n)&&(i|=1),i}readCorner1(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,1,t,e)&&(r|=1),r<<=1,this.readModule(t-1,2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}readCorner2(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-4,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner3(t,e){let r=0;return this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(0,e-3,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-3,t,e)&&(r|=1),r<<=1,this.readModule(1,e-2,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r}readCorner4(t,e){let r=0;return this.readModule(t-3,0,t,e)&&(r|=1),r<<=1,this.readModule(t-2,0,t,e)&&(r|=1),r<<=1,this.readModule(t-1,0,t,e)&&(r|=1),r<<=1,this.readModule(0,e-2,t,e)&&(r|=1),r<<=1,this.readModule(0,e-1,t,e)&&(r|=1),r<<=1,this.readModule(1,e-1,t,e)&&(r|=1),r<<=1,this.readModule(2,e-1,t,e)&&(r|=1),r<<=1,this.readModule(3,e-1,t,e)&&(r|=1),r}extractDataRegion(t){let e=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(t.getHeight()!==e)throw new N("Dimension of bitMatrix must match the version size");let n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),s=e/n|0,o=r/i|0,a=new Q(o*i,s*n);for(let e=0;e<s;++e){let r=e*n;for(let s=0;s<o;++s){let o=s*i;for(let l=0;l<n;++l){let u=e*(n+2)+1+l,c=r+l;for(let e=0;e<i;++e){let r=s*(i+2)+1+e;if(t.get(r,u)){let t=o+e;a.set(t,c)}}}}}return a}}class eh{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e){let r=e.getECBlocks(),n=0,i=r.getECBlocks();for(let t of i)n+=t.getCount();let s=Array(n),o=0;for(let t of i)for(let e=0;e<t.getCount();e++){let e=t.getDataCodewords(),n=r.getECCodewords()+e;s[o++]=new eh(e,new Uint8Array(n))}let a=s[0].codewords.length-r.getECCodewords(),l=a-1,u=0;for(let e=0;e<l;e++)for(let r=0;r<o;r++)s[r].codewords[e]=t[u++];let c=24===e.getVersionNumber(),h=c?8:o;for(let e=0;e<h;e++)s[e].codewords[a-1]=t[u++];let d=s[0].codewords.length;for(let e=a;e<d;e++)for(let r=0;r<o;r++){let n=c?(r+8)%o:r,i=c&&n>7?e-1:e;s[n].codewords[i]=t[u++]}if(u!==t.length)throw new N;return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ed{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new N(""+t);let e=0,r=this.bitOffset,n=this.byteOffset,i=this.bytes;if(r>0){let s=8-r,o=t<s?t:s,a=s-o;e=(i[n]&255>>8-o<<a)>>a,t-=o,8===(r+=o)&&(r=0,n++)}if(t>0){for(;t>=8;)e=e<<8|255&i[n],n++,t-=8;if(t>0){let s=8-t;e=e<<t|(i[n]&255>>s<<s)>>s,r+=t}}return this.bitOffset=r,this.byteOffset=n,e}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}(a=y||(y={}))[a.PAD_ENCODE=0]="PAD_ENCODE",a[a.ASCII_ENCODE=1]="ASCII_ENCODE",a[a.C40_ENCODE=2]="C40_ENCODE",a[a.TEXT_ENCODE=3]="TEXT_ENCODE",a[a.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",a[a.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",a[a.BASE256_ENCODE=6]="BASE256_ENCODE";class ef{static decode(t){let e=new ed(t),r=new j,n=new j,i=[],s=y.ASCII_ENCODE;do if(s===y.ASCII_ENCODE)s=this.decodeAsciiSegment(e,r,n);else{switch(s){case y.C40_ENCODE:this.decodeC40Segment(e,r);break;case y.TEXT_ENCODE:this.decodeTextSegment(e,r);break;case y.ANSIX12_ENCODE:this.decodeAnsiX12Segment(e,r);break;case y.EDIFACT_ENCODE:this.decodeEdifactSegment(e,r);break;case y.BASE256_ENCODE:this.decodeBase256Segment(e,r,i);break;default:throw new U}s=y.ASCII_ENCODE}while(s!==y.PAD_ENCODE&&e.available()>0)return n.length()>0&&r.append(n.toString()),new ti(t,r.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(t,e,r){let n=!1;do{let i=t.readBits(8);if(0===i)throw new U;if(i<=128){n&&(i+=128),e.append(String.fromCharCode(i-1));break}if(129===i)return y.PAD_ENCODE;else if(i<=229){let t=i-130;t<10&&e.append("0"),e.append(""+t)}else switch(i){case 230:return y.C40_ENCODE;case 231:return y.BASE256_ENCODE;case 232:e.append("\x1d");break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:e.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:e.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return y.ANSIX12_ENCODE;case 239:return y.TEXT_ENCODE;case 240:return y.EDIFACT_ENCODE;default:if(254!==i||0!==t.available())throw new U}}while(t.available()>0)return y.ASCII_ENCODE}static decodeC40Segment(t,e){let r=!1,n=[],i=0;do{if(8===t.available())return;let s=t.readBits(8);if(254===s)return;this.parseTwoBytes(s,t.readBits(8),n);for(let t=0;t<3;t++){let s=n[t];switch(i){case 0:if(s<3)i=s+1;else if(s<this.C40_BASIC_SET_CHARS.length){let t=this.C40_BASIC_SET_CHARS[s];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else throw new U;break;case 1:r?(e.append(String.fromCharCode(s+128)),r=!1):e.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.C40_SHIFT2_SET_CHARS.length){let t=this.C40_SHIFT2_SET_CHARS[s];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(s){case 27:e.append("\x1d");break;case 30:r=!0;break;default:throw new U}i=0;break;case 3:r?(e.append(String.fromCharCode(s+224)),r=!1):e.append(String.fromCharCode(s+96)),i=0;break;default:throw new U}}}while(t.available()>0)}static decodeTextSegment(t,e){let r=!1,n=[],i=0;do{if(8===t.available())return;let s=t.readBits(8);if(254===s)return;this.parseTwoBytes(s,t.readBits(8),n);for(let t=0;t<3;t++){let s=n[t];switch(i){case 0:if(s<3)i=s+1;else if(s<this.TEXT_BASIC_SET_CHARS.length){let t=this.TEXT_BASIC_SET_CHARS[s];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else throw new U;break;case 1:r?(e.append(String.fromCharCode(s+128)),r=!1):e.append(String.fromCharCode(s)),i=0;break;case 2:if(s<this.TEXT_SHIFT2_SET_CHARS.length){let t=this.TEXT_SHIFT2_SET_CHARS[s];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t)}else switch(s){case 27:e.append("\x1d");break;case 30:r=!0;break;default:throw new U}i=0;break;case 3:if(s<this.TEXT_SHIFT3_SET_CHARS.length){let t=this.TEXT_SHIFT3_SET_CHARS[s];r?(e.append(String.fromCharCode(t.charCodeAt(0)+128)),r=!1):e.append(t),i=0}else throw new U;break;default:throw new U}}}while(t.available()>0)}static decodeAnsiX12Segment(t,e){let r=[];do{if(8===t.available())return;let n=t.readBits(8);if(254===n)return;this.parseTwoBytes(n,t.readBits(8),r);for(let t=0;t<3;t++){let n=r[t];switch(n){case 0:e.append("\r");break;case 1:e.append("*");break;case 2:e.append(">");break;case 3:e.append(" ");break;default:if(n<14)e.append(String.fromCharCode(n+44));else if(n<40)e.append(String.fromCharCode(n+51));else throw new U}}}while(t.available()>0)}static parseTwoBytes(t,e,r){let n=(t<<8)+e-1,i=Math.floor(n/1600);r[0]=i,n-=1600*i,i=Math.floor(n/40),r[1]=i,r[2]=n-40*i}static decodeEdifactSegment(t,e){do{if(16>=t.available())return;for(let r=0;r<4;r++){let r=t.readBits(6);if(31===r){let e=8-t.getBitOffset();8!==e&&t.readBits(e);return}(32&r)==0&&(r|=64),e.append(String.fromCharCode(r))}}while(t.available()>0)}static decodeBase256Segment(t,e,r){let n,i=1+t.getByteOffset(),s=this.unrandomize255State(t.readBits(8),i++);if((n=0===s?t.available()/8|0:s<250?s:250*(s-249)+this.unrandomize255State(t.readBits(8),i++))<0)throw new U;let o=new Uint8Array(n);for(let e=0;e<n;e++){if(8>t.available())throw new U;o[e]=this.unrandomize255State(t.readBits(8),i++)}r.push(o);try{e.append(z.decode(o,G.ISO88591))}catch(t){throw new tc("Platform does not support required encoding: "+t.message)}}static unrandomize255State(t,e){let r=t-(149*e%255+1);return r>=0?r:r+256}}ef.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ef.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ef.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ef.TEXT_SHIFT2_SET_CHARS=ef.C40_SHIFT2_SET_CHARS,ef.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class eg{constructor(){this.rsDecoder=new th(tl.DATA_MATRIX_FIELD_256)}decode(t){let e=new ec(t),r=e.getVersion(),n=e.readCodewords(),i=eh.getDataBlocks(n,r),s=0;for(let t of i)s+=t.getNumDataCodewords();let o=new Uint8Array(s),a=i.length;for(let t=0;t<a;t++){let e=i[t],r=e.getCodewords(),n=e.getNumDataCodewords();this.correctErrors(r,n);for(let e=0;e<n;e++)o[e*a+t]=r[e]}return ef.decode(o)}correctErrors(t,e){let r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(t){throw new O}for(let n=0;n<e;n++)t[n]=r[n]}}class ep{constructor(t){this.image=t,this.rectangleDetector=new ty(this.image)}detect(){let t=this.rectangleDetector.detect(),e=this.detectSolid1(t);if((e=this.detectSolid2(e))[3]=this.correctTopRight(e),!e[3])throw new W;let r=(e=this.shiftToModuleCenter(e))[0],n=e[1],i=e[2],s=e[3],o=this.transitionsBetween(r,s)+1,a=this.transitionsBetween(i,s)+1;return(1&o)==1&&(o+=1),(1&a)==1&&(a+=1),4*o<7*a&&4*a<7*o&&(o=a=Math.max(o,a)),new tm(ep.sampleGrid(this.image,r,n,i,s,o,a),[r,n,i,s])}static shiftPoint(t,e,r){let n=(e.getX()-t.getX())/(r+1),i=(e.getY()-t.getY())/(r+1);return new tp(t.getX()+n,t.getY()+i)}static moveAway(t,e,r){let n=t.getX(),i=t.getY();return n<e?n-=1:n+=1,i<r?i-=1:i+=1,new tp(n,i)}detectSolid1(t){let e=t[0],r=t[1],n=t[3],i=t[2],s=this.transitionsBetween(e,r),o=this.transitionsBetween(r,n),a=this.transitionsBetween(n,i),l=this.transitionsBetween(i,e),u=s,c=[i,e,r,n];return u>o&&(u=o,c[0]=e,c[1]=r,c[2]=n,c[3]=i),u>a&&(u=a,c[0]=r,c[1]=n,c[2]=i,c[3]=e),u>l&&(c[0]=n,c[1]=i,c[2]=e,c[3]=r),c}detectSolid2(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=this.transitionsBetween(e,i),o=ep.shiftPoint(r,n,(s+1)*4),a=ep.shiftPoint(n,r,(s+1)*4);return this.transitionsBetween(o,e)<this.transitionsBetween(a,i)?(t[0]=e,t[1]=r,t[2]=n,t[3]=i):(t[0]=r,t[1]=n,t[2]=i,t[3]=e),t}correctTopRight(t){let e=t[0],r=t[1],n=t[2],i=t[3],s=this.transitionsBetween(e,i),o=this.transitionsBetween(r,i),a=ep.shiftPoint(e,r,(o+1)*4),l=ep.shiftPoint(n,r,(s+1)*4);s=this.transitionsBetween(a,i),o=this.transitionsBetween(l,i);let u=new tp(i.getX()+(n.getX()-r.getX())/(s+1),i.getY()+(n.getY()-r.getY())/(s+1)),c=new tp(i.getX()+(e.getX()-r.getX())/(o+1),i.getY()+(e.getY()-r.getY())/(o+1));return this.isValid(u)?this.isValid(c)?this.transitionsBetween(a,u)+this.transitionsBetween(l,u)>this.transitionsBetween(a,c)+this.transitionsBetween(l,c)?u:c:u:this.isValid(c)?c:null}shiftToModuleCenter(t){let e,r,n=t[0],i=t[1],s=t[2],o=t[3],a=this.transitionsBetween(n,o)+1,l=this.transitionsBetween(s,o)+1,u=ep.shiftPoint(n,i,4*l),c=ep.shiftPoint(s,i,4*a);a=this.transitionsBetween(u,o)+1,l=this.transitionsBetween(c,o)+1,(1&a)==1&&(a+=1),(1&l)==1&&(l+=1);let h=(n.getX()+i.getX()+s.getX()+o.getX())/4,d=(n.getY()+i.getY()+s.getY()+o.getY())/4;return n=ep.moveAway(n,h,d),i=ep.moveAway(i,h,d),s=ep.moveAway(s,h,d),o=ep.moveAway(o,h,d),u=ep.shiftPoint(n,i,4*l),u=ep.shiftPoint(u,o,4*a),e=ep.shiftPoint(i,n,4*l),e=ep.shiftPoint(e,s,4*a),c=ep.shiftPoint(s,o,4*l),c=ep.shiftPoint(c,i,4*a),r=ep.shiftPoint(o,s,4*l),[u,e,c,r=ep.shiftPoint(r,n,4*a)]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,e,r,n,i,s,o){return tC.getInstance().sampleGrid(t,s,o,.5,.5,s-.5,.5,s-.5,o-.5,.5,o-.5,e.getX(),e.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(t,e){let r=Math.trunc(t.getX()),n=Math.trunc(t.getY()),i=Math.trunc(e.getX()),s=Math.trunc(e.getY()),o=Math.abs(s-n)>Math.abs(i-r);if(o){let t=r;r=n,n=t,t=i,i=s,s=t}let a=Math.abs(i-r),l=Math.abs(s-n),u=-a/2,c=n<s?1:-1,h=r<i?1:-1,d=0,f=this.image.get(o?n:r,o?r:n);for(let t=r,e=n;t!==i;t+=h){let r=this.image.get(o?e:t,o?t:e);if(r!==f&&(d++,f=r),(u+=l)>0){if(e===s)break;e+=c,u-=a}}return d}}class em{constructor(){this.decoder=new eg}decode(t,e=null){let r,n;if(null!=e&&e.has(F.PURE_BARCODE)){let e=em.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(e),n=em.NO_POINTS}else{let e=new ep(t.getBlackMatrix()).detect();r=this.decoder.decode(e.getBits()),n=e.getPoints()}let i=r.getRawBytes(),s=new te(r.getText(),i,8*i.length,n,tr.DATA_MATRIX,M.currentTimeMillis()),o=r.getByteSegments();null!=o&&s.putMetadata(tn.BYTE_SEGMENTS,o);let a=r.getECLevel();return null!=a&&s.putMetadata(tn.ERROR_CORRECTION_LEVEL,a),s}reset(){}static extractPureBits(t){let e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null==e||null==r)throw new W;let n=this.moduleSize(e,t),i=e[1],s=r[1],o=e[0],a=(r[0]-o+1)/n,l=(s-i+1)/n;if(a<=0||l<=0)throw new W;let u=n/2;i+=u,o+=u;let c=new Q(a,l);for(let e=0;e<l;e++){let r=i+e*n;for(let i=0;i<a;i++)t.get(o+i*n,r)&&c.set(i,e)}return c}static moduleSize(t,e){let r=e.getWidth(),n=t[0],i=t[1];for(;n<r&&e.get(n,i);)n++;if(n===r)throw new W;let s=n-t[0];if(0===s)throw new W;return s}}em.NO_POINTS=[],(l=A||(A={}))[l.L=0]="L",l[l.M=1]="M",l[l.Q=2]="Q",l[l.H=3]="H";class ew{constructor(t,e,r){this.value=t,this.stringValue=e,this.bits=r,ew.FOR_BITS.set(r,this),ew.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return ew.L;case"M":return ew.M;case"Q":return ew.Q;case"H":return ew.H;default:throw new v(t+"not available")}}toString(){return this.stringValue}equals(t){return t instanceof ew&&this.value===t.value}static forBits(t){if(t<0||t>=ew.FOR_BITS.size)throw new N;return ew.FOR_BITS.get(t)}}ew.FOR_BITS=new Map,ew.FOR_VALUE=new Map,ew.L=new ew(A.L,"L",1),ew.M=new ew(A.M,"M",0),ew.Q=new ew(A.Q,"Q",3),ew.H=new ew(A.H,"H",2);class ey{constructor(t){this.errorCorrectionLevel=ew.forBits(t>>3&3),this.dataMask=7&t}static numBitsDiffering(t,e){return L.bitCount(t^e)}static decodeFormatInformation(t,e){let r=ey.doDecodeFormatInformation(t,e);return null!==r?r:ey.doDecodeFormatInformation(t^ey.FORMAT_INFO_MASK_QR,e^ey.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;for(let i of ey.FORMAT_INFO_DECODE_LOOKUP){let s=i[0];if(s===t||s===e)return new ey(i[1]);let o=ey.numBitsDiffering(t,s);o<r&&(n=i[1],r=o),t!==e&&(o=ey.numBitsDiffering(e,s))<r&&(n=i[1],r=o)}return r<=3?new ey(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){return t instanceof ey&&this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}ey.FORMAT_INFO_MASK_QR=21522,ey.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class eA{constructor(t,...e){this.ecCodewordsPerBlock=t,this.ecBlocks=e}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;for(let e of this.ecBlocks)t+=e.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class eE{constructor(t,e){this.count=t,this.dataCodewords=e}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class eb{constructor(t,e,...r){this.versionNumber=t,this.alignmentPatternCenters=e,this.ecBlocks=r;let n=0,i=r[0].getECCodewordsPerBlock();for(let t of r[0].getECBlocks())n+=t.getCount()*(t.getDataCodewords()+i);this.totalCodewords=n}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!=1)throw new U;try{return this.getVersionForNumber((t-17)/4)}catch(t){throw new U}}static getVersionForNumber(t){if(t<1||t>40)throw new N;return eb.VERSIONS[t-1]}static decodeVersionInformation(t){let e=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<eb.VERSION_DECODE_INFO.length;n++){let i=eb.VERSION_DECODE_INFO[n];if(i===t)return eb.getVersionForNumber(n+7);let s=ey.numBitsDiffering(t,i);s<e&&(r=n+7,e=s)}return e<=3?eb.getVersionForNumber(r):null}buildFunctionPattern(){let t=this.getDimensionForVersion(),e=new Q(t);e.setRegion(0,0,9,9),e.setRegion(t-8,0,8,9),e.setRegion(0,t-8,9,8);let r=this.alignmentPatternCenters.length;for(let t=0;t<r;t++){let n=this.alignmentPatternCenters[t]-2;for(let i=0;i<r;i++)(0!==t||0!==i&&i!==r-1)&&(t!==r-1||0!==i)&&e.setRegion(this.alignmentPatternCenters[i]-2,n,5,5)}return e.setRegion(6,9,1,t-17),e.setRegion(9,6,t-17,1),this.versionNumber>6&&(e.setRegion(t-11,0,3,6),e.setRegion(0,t-11,6,3)),e}toString(){return""+this.versionNumber}}eb.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),eb.VERSIONS=[new eb(1,new Int32Array(0),new eA(7,new eE(1,19)),new eA(10,new eE(1,16)),new eA(13,new eE(1,13)),new eA(17,new eE(1,9))),new eb(2,Int32Array.from([6,18]),new eA(10,new eE(1,34)),new eA(16,new eE(1,28)),new eA(22,new eE(1,22)),new eA(28,new eE(1,16))),new eb(3,Int32Array.from([6,22]),new eA(15,new eE(1,55)),new eA(26,new eE(1,44)),new eA(18,new eE(2,17)),new eA(22,new eE(2,13))),new eb(4,Int32Array.from([6,26]),new eA(20,new eE(1,80)),new eA(18,new eE(2,32)),new eA(26,new eE(2,24)),new eA(16,new eE(4,9))),new eb(5,Int32Array.from([6,30]),new eA(26,new eE(1,108)),new eA(24,new eE(2,43)),new eA(18,new eE(2,15),new eE(2,16)),new eA(22,new eE(2,11),new eE(2,12))),new eb(6,Int32Array.from([6,34]),new eA(18,new eE(2,68)),new eA(16,new eE(4,27)),new eA(24,new eE(4,19)),new eA(28,new eE(4,15))),new eb(7,Int32Array.from([6,22,38]),new eA(20,new eE(2,78)),new eA(18,new eE(4,31)),new eA(18,new eE(2,14),new eE(4,15)),new eA(26,new eE(4,13),new eE(1,14))),new eb(8,Int32Array.from([6,24,42]),new eA(24,new eE(2,97)),new eA(22,new eE(2,38),new eE(2,39)),new eA(22,new eE(4,18),new eE(2,19)),new eA(26,new eE(4,14),new eE(2,15))),new eb(9,Int32Array.from([6,26,46]),new eA(30,new eE(2,116)),new eA(22,new eE(3,36),new eE(2,37)),new eA(20,new eE(4,16),new eE(4,17)),new eA(24,new eE(4,12),new eE(4,13))),new eb(10,Int32Array.from([6,28,50]),new eA(18,new eE(2,68),new eE(2,69)),new eA(26,new eE(4,43),new eE(1,44)),new eA(24,new eE(6,19),new eE(2,20)),new eA(28,new eE(6,15),new eE(2,16))),new eb(11,Int32Array.from([6,30,54]),new eA(20,new eE(4,81)),new eA(30,new eE(1,50),new eE(4,51)),new eA(28,new eE(4,22),new eE(4,23)),new eA(24,new eE(3,12),new eE(8,13))),new eb(12,Int32Array.from([6,32,58]),new eA(24,new eE(2,92),new eE(2,93)),new eA(22,new eE(6,36),new eE(2,37)),new eA(26,new eE(4,20),new eE(6,21)),new eA(28,new eE(7,14),new eE(4,15))),new eb(13,Int32Array.from([6,34,62]),new eA(26,new eE(4,107)),new eA(22,new eE(8,37),new eE(1,38)),new eA(24,new eE(8,20),new eE(4,21)),new eA(22,new eE(12,11),new eE(4,12))),new eb(14,Int32Array.from([6,26,46,66]),new eA(30,new eE(3,115),new eE(1,116)),new eA(24,new eE(4,40),new eE(5,41)),new eA(20,new eE(11,16),new eE(5,17)),new eA(24,new eE(11,12),new eE(5,13))),new eb(15,Int32Array.from([6,26,48,70]),new eA(22,new eE(5,87),new eE(1,88)),new eA(24,new eE(5,41),new eE(5,42)),new eA(30,new eE(5,24),new eE(7,25)),new eA(24,new eE(11,12),new eE(7,13))),new eb(16,Int32Array.from([6,26,50,74]),new eA(24,new eE(5,98),new eE(1,99)),new eA(28,new eE(7,45),new eE(3,46)),new eA(24,new eE(15,19),new eE(2,20)),new eA(30,new eE(3,15),new eE(13,16))),new eb(17,Int32Array.from([6,30,54,78]),new eA(28,new eE(1,107),new eE(5,108)),new eA(28,new eE(10,46),new eE(1,47)),new eA(28,new eE(1,22),new eE(15,23)),new eA(28,new eE(2,14),new eE(17,15))),new eb(18,Int32Array.from([6,30,56,82]),new eA(30,new eE(5,120),new eE(1,121)),new eA(26,new eE(9,43),new eE(4,44)),new eA(28,new eE(17,22),new eE(1,23)),new eA(28,new eE(2,14),new eE(19,15))),new eb(19,Int32Array.from([6,30,58,86]),new eA(28,new eE(3,113),new eE(4,114)),new eA(26,new eE(3,44),new eE(11,45)),new eA(26,new eE(17,21),new eE(4,22)),new eA(26,new eE(9,13),new eE(16,14))),new eb(20,Int32Array.from([6,34,62,90]),new eA(28,new eE(3,107),new eE(5,108)),new eA(26,new eE(3,41),new eE(13,42)),new eA(30,new eE(15,24),new eE(5,25)),new eA(28,new eE(15,15),new eE(10,16))),new eb(21,Int32Array.from([6,28,50,72,94]),new eA(28,new eE(4,116),new eE(4,117)),new eA(26,new eE(17,42)),new eA(28,new eE(17,22),new eE(6,23)),new eA(30,new eE(19,16),new eE(6,17))),new eb(22,Int32Array.from([6,26,50,74,98]),new eA(28,new eE(2,111),new eE(7,112)),new eA(28,new eE(17,46)),new eA(30,new eE(7,24),new eE(16,25)),new eA(24,new eE(34,13))),new eb(23,Int32Array.from([6,30,54,78,102]),new eA(30,new eE(4,121),new eE(5,122)),new eA(28,new eE(4,47),new eE(14,48)),new eA(30,new eE(11,24),new eE(14,25)),new eA(30,new eE(16,15),new eE(14,16))),new eb(24,Int32Array.from([6,28,54,80,106]),new eA(30,new eE(6,117),new eE(4,118)),new eA(28,new eE(6,45),new eE(14,46)),new eA(30,new eE(11,24),new eE(16,25)),new eA(30,new eE(30,16),new eE(2,17))),new eb(25,Int32Array.from([6,32,58,84,110]),new eA(26,new eE(8,106),new eE(4,107)),new eA(28,new eE(8,47),new eE(13,48)),new eA(30,new eE(7,24),new eE(22,25)),new eA(30,new eE(22,15),new eE(13,16))),new eb(26,Int32Array.from([6,30,58,86,114]),new eA(28,new eE(10,114),new eE(2,115)),new eA(28,new eE(19,46),new eE(4,47)),new eA(28,new eE(28,22),new eE(6,23)),new eA(30,new eE(33,16),new eE(4,17))),new eb(27,Int32Array.from([6,34,62,90,118]),new eA(30,new eE(8,122),new eE(4,123)),new eA(28,new eE(22,45),new eE(3,46)),new eA(30,new eE(8,23),new eE(26,24)),new eA(30,new eE(12,15),new eE(28,16))),new eb(28,Int32Array.from([6,26,50,74,98,122]),new eA(30,new eE(3,117),new eE(10,118)),new eA(28,new eE(3,45),new eE(23,46)),new eA(30,new eE(4,24),new eE(31,25)),new eA(30,new eE(11,15),new eE(31,16))),new eb(29,Int32Array.from([6,30,54,78,102,126]),new eA(30,new eE(7,116),new eE(7,117)),new eA(28,new eE(21,45),new eE(7,46)),new eA(30,new eE(1,23),new eE(37,24)),new eA(30,new eE(19,15),new eE(26,16))),new eb(30,Int32Array.from([6,26,52,78,104,130]),new eA(30,new eE(5,115),new eE(10,116)),new eA(28,new eE(19,47),new eE(10,48)),new eA(30,new eE(15,24),new eE(25,25)),new eA(30,new eE(23,15),new eE(25,16))),new eb(31,Int32Array.from([6,30,56,82,108,134]),new eA(30,new eE(13,115),new eE(3,116)),new eA(28,new eE(2,46),new eE(29,47)),new eA(30,new eE(42,24),new eE(1,25)),new eA(30,new eE(23,15),new eE(28,16))),new eb(32,Int32Array.from([6,34,60,86,112,138]),new eA(30,new eE(17,115)),new eA(28,new eE(10,46),new eE(23,47)),new eA(30,new eE(10,24),new eE(35,25)),new eA(30,new eE(19,15),new eE(35,16))),new eb(33,Int32Array.from([6,30,58,86,114,142]),new eA(30,new eE(17,115),new eE(1,116)),new eA(28,new eE(14,46),new eE(21,47)),new eA(30,new eE(29,24),new eE(19,25)),new eA(30,new eE(11,15),new eE(46,16))),new eb(34,Int32Array.from([6,34,62,90,118,146]),new eA(30,new eE(13,115),new eE(6,116)),new eA(28,new eE(14,46),new eE(23,47)),new eA(30,new eE(44,24),new eE(7,25)),new eA(30,new eE(59,16),new eE(1,17))),new eb(35,Int32Array.from([6,30,54,78,102,126,150]),new eA(30,new eE(12,121),new eE(7,122)),new eA(28,new eE(12,47),new eE(26,48)),new eA(30,new eE(39,24),new eE(14,25)),new eA(30,new eE(22,15),new eE(41,16))),new eb(36,Int32Array.from([6,24,50,76,102,128,154]),new eA(30,new eE(6,121),new eE(14,122)),new eA(28,new eE(6,47),new eE(34,48)),new eA(30,new eE(46,24),new eE(10,25)),new eA(30,new eE(2,15),new eE(64,16))),new eb(37,Int32Array.from([6,28,54,80,106,132,158]),new eA(30,new eE(17,122),new eE(4,123)),new eA(28,new eE(29,46),new eE(14,47)),new eA(30,new eE(49,24),new eE(10,25)),new eA(30,new eE(24,15),new eE(46,16))),new eb(38,Int32Array.from([6,32,58,84,110,136,162]),new eA(30,new eE(4,122),new eE(18,123)),new eA(28,new eE(13,46),new eE(32,47)),new eA(30,new eE(48,24),new eE(14,25)),new eA(30,new eE(42,15),new eE(32,16))),new eb(39,Int32Array.from([6,26,54,82,110,138,166]),new eA(30,new eE(20,117),new eE(4,118)),new eA(28,new eE(40,47),new eE(7,48)),new eA(30,new eE(43,24),new eE(22,25)),new eA(30,new eE(10,15),new eE(67,16))),new eb(40,Int32Array.from([6,30,58,86,114,142,170]),new eA(30,new eE(19,118),new eE(6,119)),new eA(28,new eE(18,47),new eE(31,48)),new eA(30,new eE(34,24),new eE(34,25)),new eA(30,new eE(20,15),new eE(61,16)))],(u=E||(E={}))[u.DATA_MASK_000=0]="DATA_MASK_000",u[u.DATA_MASK_001=1]="DATA_MASK_001",u[u.DATA_MASK_010=2]="DATA_MASK_010",u[u.DATA_MASK_011=3]="DATA_MASK_011",u[u.DATA_MASK_100=4]="DATA_MASK_100",u[u.DATA_MASK_101=5]="DATA_MASK_101",u[u.DATA_MASK_110=6]="DATA_MASK_110",u[u.DATA_MASK_111=7]="DATA_MASK_111";class eC{constructor(t,e){this.value=t,this.isMasked=e}unmaskBitMatrix(t,e){for(let r=0;r<e;r++)for(let n=0;n<e;n++)this.isMasked(r,n)&&t.flip(n,r)}}eC.values=new Map([[E.DATA_MASK_000,new eC(E.DATA_MASK_000,(t,e)=>(t+e&1)==0)],[E.DATA_MASK_001,new eC(E.DATA_MASK_001,(t,e)=>(1&t)==0)],[E.DATA_MASK_010,new eC(E.DATA_MASK_010,(t,e)=>e%3==0)],[E.DATA_MASK_011,new eC(E.DATA_MASK_011,(t,e)=>(t+e)%3==0)],[E.DATA_MASK_100,new eC(E.DATA_MASK_100,(t,e)=>(Math.floor(t/2)+Math.floor(e/3)&1)==0)],[E.DATA_MASK_101,new eC(E.DATA_MASK_101,(t,e)=>t*e%6==0)],[E.DATA_MASK_110,new eC(E.DATA_MASK_110,(t,e)=>t*e%6<3)],[E.DATA_MASK_111,new eC(E.DATA_MASK_111,(t,e)=>(t+e+t*e%3&1)==0)]]);class eI{constructor(t){let e=t.getHeight();if(e<21||(3&e)!=1)throw new U;this.bitMatrix=t}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let t=0;for(let e=0;e<6;e++)t=this.copyBit(e,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let e=5;e>=0;e--)t=this.copyBit(8,e,t);let e=this.bitMatrix.getHeight(),r=0,n=e-7;for(let t=e-1;t>=n;t--)r=this.copyBit(8,t,r);for(let t=e-8;t<e;t++)r=this.copyBit(t,8,r);if(this.parsedFormatInfo=ey.decodeFormatInformation(t,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new U}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;let t=this.bitMatrix.getHeight(),e=Math.floor((t-17)/4);if(e<=6)return eb.getVersionForNumber(e);let r=0,n=t-11;for(let e=5;e>=0;e--)for(let i=t-9;i>=n;i--)r=this.copyBit(i,e,r);let i=eb.decodeVersionInformation(r);if(null!==i&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;r=0;for(let e=5;e>=0;e--)for(let i=t-9;i>=n;i--)r=this.copyBit(e,i,r);if(null!==(i=eb.decodeVersionInformation(r))&&i.getDimensionForVersion()===t)return this.parsedVersion=i,i;throw new U}copyBit(t,e,r){return(this.isMirror?this.bitMatrix.get(e,t):this.bitMatrix.get(t,e))?r<<1|1:r<<1}readCodewords(){let t=this.readFormatInformation(),e=this.readVersion(),r=eC.values.get(t.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);let i=e.buildFunctionPattern(),s=!0,o=new Uint8Array(e.getTotalCodewords()),a=0,l=0,u=0;for(let t=n-1;t>0;t-=2){6===t&&t--;for(let e=0;e<n;e++){let r=s?n-1-e:e;for(let e=0;e<2;e++)i.get(t-e,r)||(u++,l<<=1,this.bitMatrix.get(t-e,r)&&(l|=1),8===u&&(o[a++]=l,u=0,l=0))}s=!s}if(a!==e.getTotalCodewords())throw new U;return o}remask(){if(null===this.parsedFormatInfo)return;let t=eC.values[this.parsedFormatInfo.getDataMask()],e=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,e)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){let t=this.bitMatrix;for(let e=0,r=t.getWidth();e<r;e++)for(let r=e+1,n=t.getHeight();r<n;r++)t.get(e,r)!==t.get(r,e)&&(t.flip(r,e),t.flip(e,r))}}class e_{constructor(t,e){this.numDataCodewords=t,this.codewords=e}static getDataBlocks(t,e,r){if(t.length!==e.getTotalCodewords())throw new N;let n=e.getECBlocksForLevel(r),i=0,s=n.getECBlocks();for(let t of s)i+=t.getCount();let o=Array(i),a=0;for(let t of s)for(let e=0;e<t.getCount();e++){let e=t.getDataCodewords(),r=n.getECCodewordsPerBlock()+e;o[a++]=new e_(e,new Uint8Array(r))}let l=o[0].codewords.length,u=o.length-1;for(;u>=0&&o[u].codewords.length!==l;)u--;u++;let c=l-n.getECCodewordsPerBlock(),h=0;for(let e=0;e<c;e++)for(let r=0;r<a;r++)o[r].codewords[e]=t[h++];for(let e=u;e<a;e++)o[e].codewords[c]=t[h++];let d=o[0].codewords.length;for(let e=c;e<d;e++)for(let r=0;r<a;r++){let n=r<u?e:e+1;o[r].codewords[n]=t[h++]}return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}(c=b||(b={}))[c.TERMINATOR=0]="TERMINATOR",c[c.NUMERIC=1]="NUMERIC",c[c.ALPHANUMERIC=2]="ALPHANUMERIC",c[c.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",c[c.BYTE=4]="BYTE",c[c.ECI=5]="ECI",c[c.KANJI=6]="KANJI",c[c.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",c[c.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",c[c.HANZI=9]="HANZI";class eS{constructor(t,e,r,n){this.value=t,this.stringValue=e,this.characterCountBitsForVersions=r,this.bits=n,eS.FOR_BITS.set(n,this),eS.FOR_VALUE.set(t,this)}static forBits(t){let e=eS.FOR_BITS.get(t);if(void 0===e)throw new N;return e}getCharacterCountBits(t){let e,r=t.getVersionNumber();return e=r<=9?0:r<=26?1:2,this.characterCountBitsForVersions[e]}getValue(){return this.value}getBits(){return this.bits}equals(t){return t instanceof eS&&this.value===t.value}toString(){return this.stringValue}}eS.FOR_BITS=new Map,eS.FOR_VALUE=new Map,eS.TERMINATOR=new eS(b.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),eS.NUMERIC=new eS(b.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),eS.ALPHANUMERIC=new eS(b.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),eS.STRUCTURED_APPEND=new eS(b.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),eS.BYTE=new eS(b.BYTE,"BYTE",Int32Array.from([8,16,16]),4),eS.ECI=new eS(b.ECI,"ECI",Int32Array.from([0,0,0]),7),eS.KANJI=new eS(b.KANJI,"KANJI",Int32Array.from([8,10,12]),8),eS.FNC1_FIRST_POSITION=new eS(b.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),eS.FNC1_SECOND_POSITION=new eS(b.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),eS.HANZI=new eS(b.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class eT{static decode(t,e,r,n){let i=new ed(t),s=new j,o=[],a=-1,l=-1;try{let t,r=null,u=!1;do{if(4>i.available())t=eS.TERMINATOR;else{let e=i.readBits(4);t=eS.forBits(e)}switch(t){case eS.TERMINATOR:break;case eS.FNC1_FIRST_POSITION:case eS.FNC1_SECOND_POSITION:u=!0;break;case eS.STRUCTURED_APPEND:if(16>i.available())throw new U;a=i.readBits(8),l=i.readBits(8);break;case eS.ECI:let c=eT.parseECIValue(i);if(r=H.getCharacterSetECIByValue(c),null===r)throw new U;break;case eS.HANZI:let h=i.readBits(4),d=i.readBits(t.getCharacterCountBits(e));h===eT.GB2312_SUBSET&&eT.decodeHanziSegment(i,s,d);break;default:let f=i.readBits(t.getCharacterCountBits(e));switch(t){case eS.NUMERIC:eT.decodeNumericSegment(i,s,f);break;case eS.ALPHANUMERIC:eT.decodeAlphanumericSegment(i,s,f,u);break;case eS.BYTE:eT.decodeByteSegment(i,s,f,r,o,n);break;case eS.KANJI:eT.decodeKanjiSegment(i,s,f);break;default:throw new U}}}while(t!==eS.TERMINATOR)}catch(t){throw new U}return new ti(t,s.toString(),0===o.length?null:o,null===r?null:r.toString(),a,l)}static decodeHanziSegment(t,e,r){if(13*r>t.available())throw new U;let n=new Uint8Array(2*r),i=0;for(;r>0;){let e=t.readBits(13),s=e/96<<8|e%96;s<959?s+=41377:s+=42657,n[i]=s>>8&255,n[i+1]=255&s,i+=2,r--}try{e.append(z.decode(n,G.GB2312))}catch(t){throw new U(t)}}static decodeKanjiSegment(t,e,r){if(13*r>t.available())throw new U;let n=new Uint8Array(2*r),i=0;for(;r>0;){let e=t.readBits(13),s=e/192<<8|e%192;s<7936?s+=33088:s+=49472,n[i]=s>>8,n[i+1]=s,i+=2,r--}try{e.append(z.decode(n,G.SHIFT_JIS))}catch(t){throw new U(t)}}static decodeByteSegment(t,e,r,n,i,s){let o;if(8*r>t.available())throw new U;let a=new Uint8Array(r);for(let e=0;e<r;e++)a[e]=t.readBits(8);o=null===n?G.guessEncoding(a,s):n.getName();try{e.append(z.decode(a,o))}catch(t){throw new U(t)}i.push(a)}static toAlphaNumericChar(t){if(t>=eT.ALPHANUMERIC_CHARS.length)throw new U;return eT.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,e,r,n){let i=e.length();for(;r>1;){if(11>t.available())throw new U;let n=t.readBits(11);e.append(eT.toAlphaNumericChar(Math.floor(n/45))),e.append(eT.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(6>t.available())throw new U;e.append(eT.toAlphaNumericChar(t.readBits(6)))}if(n)for(let t=i;t<e.length();t++)"%"===e.charAt(t)&&(t<e.length()-1&&"%"===e.charAt(t+1)?e.deleteCharAt(t+1):e.setCharAt(t,"\x1d"))}static decodeNumericSegment(t,e,r){for(;r>=3;){if(10>t.available())throw new U;let n=t.readBits(10);if(n>=1e3)throw new U;e.append(eT.toAlphaNumericChar(Math.floor(n/100))),e.append(eT.toAlphaNumericChar(Math.floor(n/10)%10)),e.append(eT.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(7>t.available())throw new U;let r=t.readBits(7);if(r>=100)throw new U;e.append(eT.toAlphaNumericChar(Math.floor(r/10))),e.append(eT.toAlphaNumericChar(r%10))}else if(1===r){if(4>t.available())throw new U;let r=t.readBits(4);if(r>=10)throw new U;e.append(eT.toAlphaNumericChar(r))}}static parseECIValue(t){let e=t.readBits(8);if((128&e)==0)return 127&e;if((192&e)==128)return(63&e)<<8|t.readBits(8);if((224&e)==192)return(31&e)<<16|t.readBits(16);throw new U}}eT.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",eT.GB2312_SUBSET=1;class ev{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||null===t||t.length<3)return;let e=t[0];t[0]=t[2],t[2]=e}}class eN{constructor(){this.rsDecoder=new th(tl.QR_CODE_FIELD_256)}decodeBooleanArray(t,e){return this.decodeBitMatrix(Q.parseFromBooleanArray(t),e)}decodeBitMatrix(t,e){let r=new eI(t),n=null;try{return this.decodeBitMatrixParser(r,e)}catch(t){n=t}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();let t=this.decodeBitMatrixParser(r,e);return t.setOther(new ev(!0)),t}catch(t){if(null!==n)throw n;throw t}}decodeBitMatrixParser(t,e){let r=t.readVersion(),n=t.readFormatInformation().getErrorCorrectionLevel(),i=t.readCodewords(),s=e_.getDataBlocks(i,r,n),o=0;for(let t of s)o+=t.getNumDataCodewords();let a=new Uint8Array(o),l=0;for(let t of s){let e=t.getCodewords(),r=t.getNumDataCodewords();this.correctErrors(e,r);for(let t=0;t<r;t++)a[l++]=e[t]}return eT.decode(a,r,n,e)}correctErrors(t,e){let r=new Int32Array(t);try{this.rsDecoder.decode(r,t.length-e)}catch(t){throw new O}for(let n=0;n<e;n++)t[n]=r[n]}}class eR extends tp{constructor(t,e,r){super(t,e),this.estimatedModuleSize=r}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){let e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){let n=(this.getX()+e)/2;return new eR(n,(this.getY()+t)/2,(this.estimatedModuleSize+r)/2)}}class eO{constructor(t,e,r,n,i,s,o){this.image=t,this.startX=e,this.startY=r,this.width=n,this.height=i,this.moduleSize=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let t=this.startX,e=this.height,r=t+this.width,n=this.startY+e/2,i=new Int32Array(3),s=this.image;for(let o=0;o<e;o++){let e=n+((1&o)==0?Math.floor((o+1)/2):-Math.floor((o+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=t;for(;a<r&&!s.get(a,e);)a++;let l=0;for(;a<r;){if(s.get(a,e))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){let t=this.handlePossibleCenter(i,e,a);if(null!==t)return t}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;a++}if(this.foundPatternCross(i)){let t=this.handlePossibleCenter(i,e,r);if(null!==t)return t}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new W}static centerFromEnd(t,e){return e-t[2]-t[1]/2}foundPatternCross(t){let e=this.moduleSize,r=e/2;for(let n=0;n<3;n++)if(Math.abs(e-t[n])>=r)return!1;return!0}crossCheckVertical(t,e,r,n){let i=this.image,s=i.getHeight(),o=this.crossCheckStateCount;o[0]=0,o[1]=0,o[2]=0;let a=t;for(;a>=0&&i.get(e,a)&&o[1]<=r;)o[1]++,a--;if(a<0||o[1]>r)return NaN;for(;a>=0&&!i.get(e,a)&&o[0]<=r;)o[0]++,a--;if(o[0]>r)return NaN;for(a=t+1;a<s&&i.get(e,a)&&o[1]<=r;)o[1]++,a++;if(a===s||o[1]>r)return NaN;for(;a<s&&!i.get(e,a)&&o[2]<=r;)o[2]++,a++;return o[2]>r||5*Math.abs(o[0]+o[1]+o[2]-n)>=2*n?NaN:this.foundPatternCross(o)?eO.centerFromEnd(o,a):NaN}handlePossibleCenter(t,e,r){let n=t[0]+t[1]+t[2],i=eO.centerFromEnd(t,r),s=this.crossCheckVertical(e,i,2*t[1],n);if(!isNaN(s)){let e=(t[0]+t[1]+t[2])/3;for(let t of this.possibleCenters)if(t.aboutEquals(e,s,i))return t.combineEstimate(s,i,e);let r=new eR(i,s,e);this.possibleCenters.push(r),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class eD extends tp{constructor(t,e,r,n){super(t,e),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,e,r){if(Math.abs(e-this.getY())<=t&&Math.abs(r-this.getX())<=t){let e=Math.abs(t-this.estimatedModuleSize);return e<=1||e<=this.estimatedModuleSize}return!1}combineEstimate(t,e,r){let n=this.count+1,i=(this.count*this.getX()+e)/n;return new eD(i,(this.count*this.getY()+t)/n,(this.count*this.estimatedModuleSize+r)/n,n)}}class eM{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ex{constructor(t,e){this.image=t,this.resultPointCallback=e,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=e}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){let e=null!=t&&void 0!==t.get(F.TRY_HARDER),r=null!=t&&void 0!==t.get(F.PURE_BARCODE),n=this.image,i=n.getHeight(),s=n.getWidth(),o=Math.floor(3*i/(4*ex.MAX_MODULES));(o<ex.MIN_SKIP||e)&&(o=ex.MIN_SKIP);let a=!1,l=new Int32Array(5);for(let t=o-1;t<i&&!a;t+=o){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let i=0;i<s;i++)if(n.get(i,t))(1&e)==1&&e++,l[e]++;else if((1&e)==0)if(4===e)if(ex.foundPatternCross(l)){if(!0===this.handlePossibleCenter(l,t,i,r))if(o=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{let e=this.findRowSkip();e>l[2]&&(t+=e-l[2]-o,i=s-1)}else{l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;ex.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,t,s,r)&&(o=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}let u=this.selectBestPatterns();return tp.orderBestPatterns(u),new eM(u)}static centerFromEnd(t,e){return e-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let e=0;for(let r=0;r<5;r++){let n=t[r];if(0===n)return!1;e+=n}if(e<7)return!1;let r=e/7,n=r/2;return Math.abs(r-t[0])<n&&Math.abs(r-t[1])<n&&Math.abs(3*r-t[2])<3*n&&Math.abs(r-t[3])<n&&Math.abs(r-t[4])<n}getCrossCheckStateCount(){let t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,e,r,n){let i=this.getCrossCheckStateCount(),s=0,o=this.image;for(;t>=s&&e>=s&&o.get(e-s,t-s);)i[2]++,s++;if(t<s||e<s)return!1;for(;t>=s&&e>=s&&!o.get(e-s,t-s)&&i[1]<=r;)i[1]++,s++;if(t<s||e<s||i[1]>r)return!1;for(;t>=s&&e>=s&&o.get(e-s,t-s)&&i[0]<=r;)i[0]++,s++;if(i[0]>r)return!1;let a=o.getHeight(),l=o.getWidth();for(s=1;t+s<a&&e+s<l&&o.get(e+s,t+s);)i[2]++,s++;if(t+s>=a||e+s>=l)return!1;for(;t+s<a&&e+s<l&&!o.get(e+s,t+s)&&i[3]<r;)i[3]++,s++;if(t+s>=a||e+s>=l||i[3]>=r)return!1;for(;t+s<a&&e+s<l&&o.get(e+s,t+s)&&i[4]<r;)i[4]++,s++;return!(i[4]>=r)&&Math.abs(i[0]+i[1]+i[2]+i[3]+i[4]-n)<2*n&&ex.foundPatternCross(i)}crossCheckVertical(t,e,r,n){let i=this.image,s=i.getHeight(),o=this.getCrossCheckStateCount(),a=t;for(;a>=0&&i.get(e,a);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(e,a)&&o[1]<=r;)o[1]++,a--;if(a<0||o[1]>r)return NaN;for(;a>=0&&i.get(e,a)&&o[0]<=r;)o[0]++,a--;if(o[0]>r)return NaN;for(a=t+1;a<s&&i.get(e,a);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(e,a)&&o[3]<r;)o[3]++,a++;if(a===s||o[3]>=r)return NaN;for(;a<s&&i.get(e,a)&&o[4]<r;)o[4]++,a++;return o[4]>=r||5*Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-n)>=2*n?NaN:ex.foundPatternCross(o)?ex.centerFromEnd(o,a):NaN}crossCheckHorizontal(t,e,r,n){let i=this.image,s=i.getWidth(),o=this.getCrossCheckStateCount(),a=t;for(;a>=0&&i.get(a,e);)o[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,e)&&o[1]<=r;)o[1]++,a--;if(a<0||o[1]>r)return NaN;for(;a>=0&&i.get(a,e)&&o[0]<=r;)o[0]++,a--;if(o[0]>r)return NaN;for(a=t+1;a<s&&i.get(a,e);)o[2]++,a++;if(a===s)return NaN;for(;a<s&&!i.get(a,e)&&o[3]<r;)o[3]++,a++;if(a===s||o[3]>=r)return NaN;for(;a<s&&i.get(a,e)&&o[4]<r;)o[4]++,a++;return o[4]>=r||5*Math.abs(o[0]+o[1]+o[2]+o[3]+o[4]-n)>=n?NaN:ex.foundPatternCross(o)?ex.centerFromEnd(o,a):NaN}handlePossibleCenter(t,e,r,n){let i=t[0]+t[1]+t[2]+t[3]+t[4],s=ex.centerFromEnd(t,r),o=this.crossCheckVertical(e,Math.floor(s),t[2],i);if(!isNaN(o)&&!isNaN(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(o),t[2],i))&&(!n||this.crossCheckDiagonal(Math.floor(o),Math.floor(s),t[2],i))){let t=i/7,e=!1,r=this.possibleCenters;for(let n=0,i=r.length;n<i;n++){let i=r[n];if(i.aboutEquals(t,o,s)){r[n]=i.combineEstimate(o,s,t),e=!0;break}}if(!e){let e=new eD(s,o,t);r.push(e),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(e)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let t=null;for(let e of this.possibleCenters)if(e.getCount()>=ex.CENTER_QUORUM)if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.getX()-e.getX())-Math.abs(t.getY()-e.getY()))/2);else t=e;return 0}haveMultiplyConfirmedCenters(){let t=0,e=0,r=this.possibleCenters.length;for(let r of this.possibleCenters)r.getCount()>=ex.CENTER_QUORUM&&(t++,e+=r.getEstimatedModuleSize());if(t<3)return!1;let n=e/r,i=0;for(let t of this.possibleCenters)i+=Math.abs(t.getEstimatedModuleSize()-n);return i<=.05*e}selectBestPatterns(){let t,e=this.possibleCenters.length;if(e<3)throw new W;let r=this.possibleCenters;if(e>3){let n=0,i=0;for(let t of this.possibleCenters){let e=t.getEstimatedModuleSize();n+=e,i+=e*e}t=n/e;let s=Math.sqrt(i/e-t*t);r.sort((e,r)=>{let n=Math.abs(r.getEstimatedModuleSize()-t),i=Math.abs(e.getEstimatedModuleSize()-t);return n<i?-1:+(n>i)});let o=Math.max(.2*t,s);for(let e=0;e<r.length&&r.length>3;e++)Math.abs(r[e].getEstimatedModuleSize()-t)>o&&(r.splice(e,1),e--)}if(r.length>3){let e=0;for(let t of r)e+=t.getEstimatedModuleSize();t=e/r.length,r.sort((e,r)=>{if(r.getCount()!==e.getCount())return r.getCount()-e.getCount();{let n=Math.abs(r.getEstimatedModuleSize()-t),i=Math.abs(e.getEstimatedModuleSize()-t);return n<i?1:n>i?-1:0}}),r.splice(3)}return[r[0],r[1],r[2]]}}ex.CENTER_QUORUM=2,ex.MIN_SKIP=3,ex.MAX_MODULES=57;class eB{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=null==t?null:t.get(F.NEED_RESULT_POINT_CALLBACK);let e=new ex(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(e)}processFinderPatternInfo(t){let e,r=t.getTopLeft(),n=t.getTopRight(),i=t.getBottomLeft(),s=this.calculateModuleSize(r,n,i);if(s<1)throw new W("No pattern found in proccess finder.");let o=eB.computeDimension(r,n,i,s),a=eb.getProvisionalVersionForDimension(o),l=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0){let t=n.getX()-r.getX()+i.getX(),e=n.getY()-r.getY()+i.getY(),o=1-3/l,a=Math.floor(r.getX()+o*(t-r.getX())),c=Math.floor(r.getY()+o*(e-r.getY()));for(let t=4;t<=16;t<<=1)try{u=this.findAlignmentInRegion(s,a,c,t);break}catch(t){if(!(t instanceof W))throw t}}let c=eB.createTransform(r,n,i,u,o);return new tm(eB.sampleGrid(this.image,c,o),null===u?[i,r,n]:[i,r,n,u])}static createTransform(t,e,r,n,i){let s,o,a,l,u=i-3.5;return null!==n?(s=n.getX(),o=n.getY(),l=a=u-3):(s=e.getX()-t.getX()+r.getX(),o=e.getY()-t.getY()+r.getY(),a=u,l=u),tE.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,a,l,3.5,u,t.getX(),t.getY(),e.getX(),e.getY(),s,o,r.getX(),r.getY())}static sampleGrid(t,e,r){return tC.getInstance().sampleGridWithTransform(t,r,r,e)}static computeDimension(t,e,r,n){let i=Math.floor((tf.round(tp.distance(t,e)/n)+tf.round(tp.distance(t,r)/n))/2)+7;switch(3&i){case 0:i++;break;case 2:i--;break;case 3:throw new W("Dimensions could be not found.")}return i}calculateModuleSize(t,e,r){return(this.calculateModuleSizeOneWay(t,e)+this.calculateModuleSizeOneWay(t,r))/2}calculateModuleSizeOneWay(t,e){let r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(t,e,r,n){let i=this.sizeOfBlackWhiteBlackRun(t,e,r,n),s=1,o=t-(r-t);o<0?(s=t/(t-o),o=0):o>=this.image.getWidth()&&(s=(this.image.getWidth()-1-t)/(o-t),o=this.image.getWidth()-1);let a=Math.floor(e-(n-e)*s);return s=1,a<0?(s=e/(e-a),a=0):a>=this.image.getHeight()&&(s=(this.image.getHeight()-1-e)/(a-e),a=this.image.getHeight()-1),o=Math.floor(t+(o-t)*s),(i+=this.sizeOfBlackWhiteBlackRun(t,e,o,a))-1}sizeOfBlackWhiteBlackRun(t,e,r,n){let i=Math.abs(n-e)>Math.abs(r-t);if(i){let i=t;t=e,e=i,i=r,r=n,n=i}let s=Math.abs(r-t),o=Math.abs(n-e),a=-s/2,l=t<r?1:-1,u=e<n?1:-1,c=0,h=r+l;for(let r=t,d=e;r!==h;r+=l){let l=i?d:r,h=i?r:d;if(1===c===this.image.get(l,h)){if(2===c)return tf.distance(r,d,t,e);c++}if((a+=o)>0){if(d===n)break;d+=u,a-=s}}return 2===c?tf.distance(r+l,n,t,e):NaN}findAlignmentInRegion(t,e,r,n){let i=Math.floor(n*t),s=Math.max(0,e-i),o=Math.min(this.image.getWidth()-1,e+i);if(o-s<3*t)throw new W("Alignment top exceeds estimated module size.");let a=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-a<3*t)throw new W("Alignment bottom exceeds estimated module size.");return new eO(this.image,s,a,o-s,l-a,t,this.resultPointCallback).find()}}class eP{constructor(){this.decoder=new eN}getDecoder(){return this.decoder}decode(t,e){let r,n;if(null!=e&&void 0!==e.get(F.PURE_BARCODE)){let i=eP.extractPureBits(t.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,e),n=eP.NO_POINTS}else{let i=new eB(t.getBlackMatrix()).detect(e);r=this.decoder.decodeBitMatrix(i.getBits(),e),n=i.getPoints()}r.getOther()instanceof ev&&r.getOther().applyMirroredCorrection(n);let i=new te(r.getText(),r.getRawBytes(),void 0,n,tr.QR_CODE,void 0),s=r.getByteSegments();null!==s&&i.putMetadata(tn.BYTE_SEGMENTS,s);let o=r.getECLevel();return null!==o&&i.putMetadata(tn.ERROR_CORRECTION_LEVEL,o),r.hasStructuredAppend()&&(i.putMetadata(tn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),i.putMetadata(tn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),i}reset(){}static extractPureBits(t){let e=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(null===e||null===r)throw new W;let n=this.moduleSize(e,t),i=e[1],s=r[1],o=e[0],a=r[0];if(o>=a||i>=s||s-i!=a-o&&(a=o+(s-i))>=t.getWidth())throw new W;let l=Math.round((a-o+1)/n),u=Math.round((s-i+1)/n);if(l<=0||u<=0||u!==l)throw new W;let c=Math.floor(n/2);i+=c;let h=(o+=c)+Math.floor((l-1)*n)-a;if(h>0){if(h>c)throw new W;o-=h}let d=i+Math.floor((u-1)*n)-s;if(d>0){if(d>c)throw new W;i-=d}let f=new Q(l,u);for(let e=0;e<u;e++){let r=i+Math.floor(e*n);for(let i=0;i<l;i++)t.get(o+Math.floor(i*n),r)&&f.set(i,e)}return f}static moduleSize(t,e){let r=e.getHeight(),n=e.getWidth(),i=t[0],s=t[1],o=!0,a=0;for(;i<n&&s<r;){if(o!==e.get(i,s)){if(5==++a)break;o=!o}i++,s++}if(i===n||s===r)throw new W;return(i-t[0])/7}}eP.NO_POINTS=[];class eL{PDF417Common(){}static getBitCountSum(t){return tf.sum(t)}static toIntArray(t){if(null==t||!t.length)return eL.EMPTY_INT_ARRAY;let e=new Int32Array(t.length),r=0;for(let n of t)e[r++]=n;return e}static getCodeword(t){let e=P.binarySearch(eL.SYMBOL_TABLE,262143&t);return e<0?-1:(eL.CODEWORD_TABLE[e]-1)%eL.NUMBER_OF_CODEWORDS}}eL.NUMBER_OF_CODEWORDS=929,eL.MAX_CODEWORDS_IN_BARCODE=eL.NUMBER_OF_CODEWORDS-1,eL.MIN_ROWS_IN_BARCODE=3,eL.MAX_ROWS_IN_BARCODE=90,eL.MODULES_IN_CODEWORD=17,eL.MODULES_IN_STOP_PATTERN=18,eL.BARS_IN_MODULE=8,eL.EMPTY_INT_ARRAY=new Int32Array([]),eL.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),eL.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ek{constructor(t,e){this.bits=t,this.points=e}getBits(){return this.bits}getPoints(){return this.points}}class eF{static detectMultiple(t,e,r){let n=t.getBlackMatrix(),i=eF.detect(r,n);return i.length||((n=n.clone()).rotate180(),i=eF.detect(r,n)),new ek(n,i)}static detect(t,e){let r=[],n=0,i=0,s=!1;for(;n<e.getHeight();){let o=eF.findVertices(e,n,i);if(null==o[0]&&null==o[3]){if(!s)break;for(let t of(s=!1,i=0,r))null!=t[1]&&(n=Math.trunc(Math.max(n,t[1].getY()))),null!=t[3]&&(n=Math.max(n,Math.trunc(t[3].getY())));n+=eF.ROW_STEP;continue}if(s=!0,r.push(o),!t)break;null!=o[2]?(i=Math.trunc(o[2].getX()),n=Math.trunc(o[2].getY())):(i=Math.trunc(o[4].getX()),n=Math.trunc(o[4].getY()))}return r}static findVertices(t,e,r){let n=t.getHeight(),i=t.getWidth(),s=Array(8);return eF.copyToResult(s,eF.findRowsWithPattern(t,n,i,e,r,eF.START_PATTERN),eF.INDEXES_START_PATTERN),null!=s[4]&&(r=Math.trunc(s[4].getX()),e=Math.trunc(s[4].getY())),eF.copyToResult(s,eF.findRowsWithPattern(t,n,i,e,r,eF.STOP_PATTERN),eF.INDEXES_STOP_PATTERN),s}static copyToResult(t,e,r){for(let n=0;n<r.length;n++)t[r[n]]=e[n]}static findRowsWithPattern(t,e,r,n,i,s){let o=[,,,,],a=!1,l=new Int32Array(s.length);for(;n<e;n+=eF.ROW_STEP){let e=eF.findGuardPattern(t,i,n,r,!1,s,l);if(null!=e){for(;n>0;){let o=eF.findGuardPattern(t,i,--n,r,!1,s,l);if(null!=o)e=o;else{n++;break}}o[0]=new tp(e[0],n),o[1]=new tp(e[1],n),a=!0;break}}let u=n+1;if(a){let n=0,i=Int32Array.from([Math.trunc(o[0].getX()),Math.trunc(o[1].getX())]);for(;u<e;u++){let e=eF.findGuardPattern(t,i[0],u,r,!1,s,l);if(null!=e&&Math.abs(i[0]-e[0])<eF.MAX_PATTERN_DRIFT&&Math.abs(i[1]-e[1])<eF.MAX_PATTERN_DRIFT)i=e,n=0;else if(n>eF.SKIPPED_ROW_COUNT_MAX)break;else n++}u-=n+1,o[2]=new tp(i[0],u),o[3]=new tp(i[1],u)}return u-n<eF.BARCODE_MIN_HEIGHT&&P.fill(o,null),o}static findGuardPattern(t,e,r,n,i,s,o){P.fillWithin(o,0,o.length,0);let a=e,l=0;for(;t.get(a,r)&&a>0&&l++<eF.MAX_PIXEL_DRIFT;)a--;let u=a,c=0,h=s.length;for(let e=i;u<n;u++)if(t.get(u,r)!==e)o[c]++;else{if(c===h-1){if(eF.patternMatchVariance(o,s,eF.MAX_INDIVIDUAL_VARIANCE)<eF.MAX_AVG_VARIANCE)return new Int32Array([a,u]);a+=o[0]+o[1],M.arraycopy(o,2,o,0,c-1),o[c-1]=0,o[c]=0,c--}else c++;o[c]=1,e=!e}return c===h-1&&eF.patternMatchVariance(o,s,eF.MAX_INDIVIDUAL_VARIANCE)<eF.MAX_AVG_VARIANCE?new Int32Array([a,u-1]):null}static patternMatchVariance(t,e,r){let n=t.length,i=0,s=0;for(let r=0;r<n;r++)i+=t[r],s+=e[r];if(i<s)return 1/0;let o=i/s;r*=o;let a=0;for(let i=0;i<n;i++){let n=t[i],s=e[i]*o,l=n>s?n-s:s-n;if(l>r)return 1/0;a+=l}return a/i}}eF.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),eF.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),eF.MAX_AVG_VARIANCE=.42,eF.MAX_INDIVIDUAL_VARIANCE=.8,eF.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),eF.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),eF.MAX_PIXEL_DRIFT=3,eF.MAX_PATTERN_DRIFT=5,eF.SKIPPED_ROW_COUNT_MAX=25,eF.ROW_STEP=5,eF.BARCODE_MIN_HEIGHT=10;class eU{constructor(t,e){if(0===e.length)throw new N;this.field=t;let r=e.length;if(r>1&&0===e[0]){let t=1;for(;t<r&&0===e[t];)t++;t===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-t),M.arraycopy(e,t,this.coefficients,0,this.coefficients.length))}else this.coefficients=e}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(0===t)return this.getCoefficient(0);if(1===t){let t=0;for(let e of this.coefficients)t=this.field.add(t,e);return t}let e=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)e=this.field.add(this.field.multiply(t,e),this.coefficients[n]);return e}add(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let e=this.coefficients,r=t.coefficients;if(e.length>r.length){let t=e;e=r,r=t}let n=new Int32Array(r.length),i=r.length-e.length;M.arraycopy(r,0,n,0,i);for(let t=i;t<r.length;t++)n[t]=this.field.add(e[t-i],r[t]);return new eU(this.field,n)}subtract(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof eU?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new eU(this.field,new Int32Array([0]));let e=this.coefficients,r=e.length,n=t.coefficients,i=n.length,s=new Int32Array(r+i-1);for(let t=0;t<r;t++){let r=e[t];for(let e=0;e<i;e++)s[t+e]=this.field.add(s[t+e],this.field.multiply(r,n[e]))}return new eU(this.field,s)}negative(){let t=this.coefficients.length,e=new Int32Array(t);for(let r=0;r<t;r++)e[r]=this.field.subtract(0,this.coefficients[r]);return new eU(this.field,e)}multiplyScalar(t){if(0===t)return new eU(this.field,new Int32Array([0]));if(1===t)return this;let e=this.coefficients.length,r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=this.field.multiply(this.coefficients[n],t);return new eU(this.field,r)}multiplyByMonomial(t,e){if(t<0)throw new N;if(0===e)return new eU(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+t);for(let t=0;t<r;t++)n[t]=this.field.multiply(this.coefficients[t],e);return new eU(this.field,n)}toString(){let t=new j;for(let e=this.getDegree();e>=0;e--){let r=this.getCoefficient(e);0!==r&&(r<0?(t.append(" - "),r=-r):t.length()>0&&t.append(" + "),(0===e||1!==r)&&t.append(r),0!==e&&(1===e?t.append("x"):(t.append("x^"),t.append(e))))}return t.toString()}}class eH{add(t,e){return(t+e)%this.modulus}subtract(t,e){return(this.modulus+t-e)%this.modulus}exp(t){return this.expTable[t]}log(t){if(0===t)throw new N;return this.logTable[t]}inverse(t){if(0===t)throw new ta;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,e){return 0===t||0===e?0:this.expTable[(this.logTable[t]+this.logTable[e])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class eV extends eH{constructor(t,e){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let r=1;for(let n=0;n<t;n++)this.expTable[n]=r,r=r*e%t;for(let e=0;e<t-1;e++)this.logTable[this.expTable[e]]=e;this.zero=new eU(this,new Int32Array([0])),this.one=new eU(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,e){if(t<0)throw new N;if(0===e)return this.zero;let r=new Int32Array(t+1);return r[0]=e,new eU(this,r)}}eV.PDF417_GF=new eV(eL.NUMBER_OF_CODEWORDS,3);class ez{constructor(){this.field=eV.PDF417_GF}decode(t,e,r){let n=new eU(this.field,t),i=new Int32Array(e),s=!1;for(let t=e;t>0;t--){let r=n.evaluateAt(this.field.exp(t));i[e-t]=r,0!==r&&(s=!0)}if(!s)return 0;let o=this.field.getOne();if(null!=r)for(let e of r){let r=this.field.exp(t.length-1-e),n=new eU(this.field,new Int32Array([this.field.subtract(0,r),1]));o=o.multiply(n)}let a=new eU(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(e,1),a,e),u=l[0],c=l[1],h=this.findErrorLocations(u),d=this.findErrorMagnitudes(c,u,h);for(let e=0;e<h.length;e++){let r=t.length-1-this.field.log(h[e]);if(r<0)throw O.getChecksumInstance();t[r]=this.field.subtract(t[r],d[e])}return h.length}runEuclideanAlgorithm(t,e,r){if(t.getDegree()<e.getDegree()){let r=t;t=e,e=r}let n=t,i=e,s=this.field.getZero(),o=this.field.getOne();for(;i.getDegree()>=Math.round(r/2);){let t=n,e=s;if(n=i,s=o,n.isZero())throw O.getChecksumInstance();i=t;let r=this.field.getZero(),a=n.getCoefficient(n.getDegree()),l=this.field.inverse(a);for(;i.getDegree()>=n.getDegree()&&!i.isZero();){let t=i.getDegree()-n.getDegree(),e=this.field.multiply(i.getCoefficient(i.getDegree()),l);r=r.add(this.field.buildMonomial(t,e)),i=i.subtract(n.multiplyByMonomial(t,e))}o=r.multiply(s).subtract(e).negative()}let a=o.getCoefficient(0);if(0===a)throw O.getChecksumInstance();let l=this.field.inverse(a);return[o.multiply(l),i.multiply(l)]}findErrorLocations(t){let e=t.getDegree(),r=new Int32Array(e),n=0;for(let i=1;i<this.field.getSize()&&n<e;i++)0===t.evaluateAt(i)&&(r[n]=this.field.inverse(i),n++);if(n!==e)throw O.getChecksumInstance();return r}findErrorMagnitudes(t,e,r){let n=e.getDegree(),i=new Int32Array(n);for(let t=1;t<=n;t++)i[n-t]=this.field.multiply(t,e.getCoefficient(t));let s=new eU(this.field,i),o=r.length,a=new Int32Array(o);for(let e=0;e<o;e++){let n=this.field.inverse(r[e]),i=this.field.subtract(0,t.evaluateAt(n)),o=this.field.inverse(s.evaluateAt(n));a[e]=this.field.multiply(i,o)}return a}}class eG{constructor(t,e,r,n,i){t instanceof eG?this.constructor_2(t):this.constructor_1(t,e,r,n,i)}constructor_1(t,e,r,n,i){let s=null==e||null==r,o=null==n||null==i;if(s&&o)throw new W;s?(e=new tp(0,n.getY()),r=new tp(0,i.getY())):o&&(n=new tp(t.getWidth()-1,e.getY()),i=new tp(t.getWidth()-1,r.getY())),this.image=t,this.topLeft=e,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(e.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(e.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,e){return null==t?e:null==e?t:new eG(t.image,t.topLeft,t.bottomLeft,e.topRight,e.bottomRight)}addMissingRows(t,e,r){let n=this.topLeft,i=this.bottomLeft,s=this.topRight,o=this.bottomRight;if(t>0){let e=r?this.topLeft:this.topRight,i=Math.trunc(e.getY()-t);i<0&&(i=0);let o=new tp(e.getX(),i);r?n=o:s=o}if(e>0){let t=r?this.bottomLeft:this.bottomRight,n=Math.trunc(t.getY()+e);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let s=new tp(t.getX(),n);r?i=s:o=s}return new eG(this.image,n,i,s,o)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ej{constructor(t,e,r,n){this.columnCount=t,this.errorCorrectionLevel=n,this.rowCountUpperPart=e,this.rowCountLowerPart=r,this.rowCount=e+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class eQ{constructor(){this.buffer=""}static form(t,e){let r=-1;return t.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function(t,n,i,s,o,a){let l;if("%%"===t)return"%";if(void 0===e[++r])return;t=s?parseInt(s.substr(1)):void 0;let u=o?parseInt(o.substr(1)):void 0;switch(a){case"s":l=e[r];break;case"c":l=e[r][0];break;case"f":l=parseFloat(e[r]).toFixed(t);break;case"p":l=parseFloat(e[r]).toPrecision(t);break;case"e":l=parseFloat(e[r]).toExponential(t);break;case"x":l=parseInt(e[r]).toString(u||16);break;case"d":l=parseFloat(parseInt(e[r],u||10).toPrecision(t)).toFixed(0)}l="object"==typeof l?JSON.stringify(l):(+l).toString(u);let c=parseInt(i),h=i&&i[0]+""=="0"?"0":" ";for(;l.length<c;)l=void 0!==n?l+h:h+l;return l})}format(t,...e){this.buffer+=eQ.form(t,e)}toString(){return this.buffer}}class eW{constructor(t){this.boundingBox=new eG(t),this.codewords=Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let e=this.getCodeword(t);if(null!=e)return e;for(let r=1;r<eW.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(t)-r;if(n>=0&&null!=(e=this.codewords[n])||(n=this.imageRowToCodewordIndex(t)+r)<this.codewords.length&&null!=(e=this.codewords[n]))return e}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,e){this.codewords[this.imageRowToCodewordIndex(t)]=e}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let t=new eQ,e=0;for(let r of this.codewords){if(null==r){t.format("%3d:    |   %n",e++);continue}t.format("%3d: %3d|%3d%n",e++,r.getRowNumber(),r.getValue())}return t.toString()}}eW.MAX_NEARBY_DISTANCE=5;class eY{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let e=this.values.get(t);null==e&&(e=0),e++,this.values.set(t,e)}getValue(){let t=-1,e=[];for(let[r,n]of this.values.entries()){let i={getKey:()=>r,getValue:()=>n};i.getValue()>t?(t=i.getValue(),(e=[]).push(i.getKey())):i.getValue()===t&&e.push(i.getKey())}return eL.toIntArray(e)}getConfidence(t){return this.values.get(t)}}class eX extends eW{constructor(t,e){super(t),this._isLeft=e}setRowNumbers(){for(let t of this.getCodewords())null!=t&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let e=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(e,t);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,u=0;for(let r=s;r<o;r++){if(null==e[r])continue;let n=e[r],i=n.getRowNumber()-a;if(0===i)u++;else if(1===i)l=Math.max(l,u),u=1,a=n.getRowNumber();else if(i<0||n.getRowNumber()>=t.getRowCount()||i>r)e[r]=null;else{let t,s=(t=l>2?(l-2)*i:i)>=r;for(let n=1;n<=t&&!s;n++)s=null!=e[r-n];s?e[r]=null:(a=n.getRowNumber(),u=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(null==t)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let e=new Int32Array(t.getRowCount());for(let t of this.getCodewords())if(null!=t){let r=t.getRowNumber();if(r>=e.length)continue;e[r]++}return e}adjustIncompleteIndicatorColumnRowNumbers(t){let e=this.getBoundingBox(),r=this._isLeft?e.getTopLeft():e.getTopRight(),n=this._isLeft?e.getBottomLeft():e.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.getCodewords(),a=-1;for(let e=i;e<s;e++){if(null==o[e])continue;let r=o[e];r.setRowNumberAsRowIndicatorColumn();let n=r.getRowNumber()-a;0===n||(1===n?a=r.getRowNumber():r.getRowNumber()>=t.getRowCount()?o[e]=null:a=r.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),e=new eY,r=new eY,n=new eY,i=new eY;for(let s of t){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let t=s.getValue()%30,o=s.getRowNumber();switch(!this._isLeft&&(o+=2),o%3){case 0:r.setValue(3*t+1);break;case 1:i.setValue(t/3),n.setValue(t%3);break;case 2:e.setValue(t+1)}}if(0===e.getValue().length||0===r.getValue().length||0===n.getValue().length||0===i.getValue().length||e.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<eL.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>eL.MAX_ROWS_IN_BARCODE)return null;let s=new ej(e.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(t,s),s}removeIncorrectCodewords(t,e){for(let r=0;r<t.length;r++){let n=t[r];if(null==t[r])continue;let i=n.getValue()%30,s=n.getRowNumber();if(s>e.getRowCount()){t[r]=null;continue}switch(!this._isLeft&&(s+=2),s%3){case 0:3*i+1!==e.getRowCountUpperPart()&&(t[r]=null);break;case 1:(Math.trunc(i/3)!==e.getErrorCorrectionLevel()||i%3!==e.getRowCountLowerPart())&&(t[r]=null);break;case 2:i+1!==e.getColumnCount()&&(t[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class eq{constructor(t,e){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=e,this.detectionResultColumns=Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){let t;this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=eL.MAX_CODEWORDS_IN_BARCODE;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t)return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){null!=t&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(0===t)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let r=0;r<e.length;r++)null!=e[r]&&(e[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,e))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let t=this.detectionResultColumns[0].getCodewords(),e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++)if(null!=t[r]&&null!=e[r]&&t[r].getRowNumber()===e[r].getRowNumber())for(let e=1;e<=this.barcodeColumnCount;e++){let n=this.detectionResultColumns[e].getCodewords()[r];null!=n&&(n.setRowNumber(t[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[e].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let t=0,e=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),i=0;for(let e=this.barcodeColumnCount+1;e>0&&i<this.ADJUST_ROW_NUMBER_SKIP;e--){let s=this.detectionResultColumns[e].getCodewords()[r];null!=s&&(i=eq.adjustRowNumberIfValid(n,i,s),!s.hasValidRowNumber()&&t++)}}return t}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let t=0,e=this.detectionResultColumns[0].getCodewords();for(let r=0;r<e.length;r++){if(null==e[r])continue;let n=e[r].getRowNumber(),i=0;for(let e=1;e<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;e++){let s=this.detectionResultColumns[e].getCodewords()[r];null!=s&&(i=eq.adjustRowNumberIfValid(n,i,s),!s.hasValidRowNumber()&&t++)}}return t}static adjustRowNumberIfValid(t,e,r){return null==r||!r.hasValidRowNumber()&&(r.isValidRowNumber(t)?(r.setRowNumber(t),e=0):++e),e}adjustRowNumbers(t,e,r){if(!this.detectionResultColumns[t-1])return;let n=r[e],i=this.detectionResultColumns[t-1].getCodewords(),s=i;null!=this.detectionResultColumns[t+1]&&(s=this.detectionResultColumns[t+1].getCodewords());let o=Array(14);for(let t of(o[2]=i[e],o[3]=s[e],e>0&&(o[0]=r[e-1],o[4]=i[e-1],o[5]=s[e-1]),e>1&&(o[8]=r[e-2],o[10]=i[e-2],o[11]=s[e-2]),e<r.length-1&&(o[1]=r[e+1],o[6]=i[e+1],o[7]=s[e+1]),e<r.length-2&&(o[9]=r[e+2],o[12]=i[e+2],o[13]=s[e+2]),o))if(eq.adjustRowNumber(n,t))return}static adjustRowNumber(t,e){return null!=e&&!!e.hasValidRowNumber()&&e.getBucket()===t.getBucket()&&(t.setRowNumber(e.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,e){this.detectionResultColumns[t]=e}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];null==t&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let e=new eQ;for(let r=0;r<t.getCodewords().length;r++){e.format("CW %3d:",r);for(let t=0;t<this.barcodeColumnCount+2;t++){if(null==this.detectionResultColumns[t]){e.format("    |   ");continue}let n=this.detectionResultColumns[t].getCodewords()[r];if(null==n){e.format("    |   ");continue}e.format(" %3d|%3d",n.getRowNumber(),n.getValue())}e.format("%n")}return e.toString()}}class eK{constructor(t,e,r,n){this.rowNumber=eK.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(e),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==eK.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}eK.BARCODE_ROW_UNKNOWN=-1;class eZ{static initialize(){for(let t=0;t<eL.SYMBOL_TABLE.length;t++){let e=eL.SYMBOL_TABLE[t],r=1&e;for(let n=0;n<eL.BARS_IN_MODULE;n++){let i=0;for(;(1&e)===r;)i+=1,e>>=1;r=1&e,eZ.RATIOS_TABLE[t]||(eZ.RATIOS_TABLE[t]=Array(eL.BARS_IN_MODULE)),eZ.RATIOS_TABLE[t][eL.BARS_IN_MODULE-n-1]=Math.fround(i/eL.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let e=eZ.getDecodedCodewordValue(eZ.sampleBitCounts(t));return -1!==e?e:eZ.getClosestDecodedValue(t)}static sampleBitCounts(t){let e=tf.sum(t),r=new Int32Array(eL.BARS_IN_MODULE),n=0,i=0;for(let s=0;s<eL.MODULES_IN_CODEWORD;s++){let o=e/(2*eL.MODULES_IN_CODEWORD)+s*e/eL.MODULES_IN_CODEWORD;i+t[n]<=o&&(i+=t[n],n++),r[n]++}return r}static getDecodedCodewordValue(t){let e=eZ.getBitValue(t);return -1===eL.getCodeword(e)?-1:e}static getBitValue(t){let e=0;for(let r=0;r<t.length;r++)for(let n=0;n<t[r];n++)e=e<<1|r%2==0;return Math.trunc(e)}static getClosestDecodedValue(t){let e=tf.sum(t),r=Array(eL.BARS_IN_MODULE);if(e>1)for(let n=0;n<r.length;n++)r[n]=Math.fround(t[n]/e);let n=tg.MAX_VALUE,i=-1;this.bSymbolTableReady||eZ.initialize();for(let t=0;t<eZ.RATIOS_TABLE.length;t++){let e=0,s=eZ.RATIOS_TABLE[t];for(let t=0;t<eL.BARS_IN_MODULE;t++){let i=Math.fround(s[t]-r[t]);if((e+=Math.fround(i*i))>=n)break}e<n&&(n=e,i=eL.SYMBOL_TABLE[t])}return i}}eZ.bSymbolTableReady=!1,eZ.RATIOS_TABLE=Array(eL.SYMBOL_TABLE.length).map(t=>Array(eL.BARS_IN_MODULE));class eJ{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class e${static parseLong(t,e){return parseInt(t,e)}}class e1 extends T{}e1.kind="NullPointerException";class e0{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,e,r){if(null==t)throw new e1;if(e<0||e>t.length||r<0||e+r>t.length||e+r<0)throw new x;if(0!==r)for(let n=0;n<r;n++)this.write(t[e+n])}flush(){}close(){}}class e2 extends T{}class e3 extends e0{constructor(t=32){if(super(),this.count=0,t<0)throw new N("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let e=this.buf.length<<1;if(e-t<0&&(e=t),e<0){if(t<0)throw new e2;e=L.MAX_VALUE}this.buf=P.copyOfUint8Array(this.buf,e)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,e,r){if(e<0||e>t.length||r<0||e+r-t.length>0)throw new x;this.ensureCapacity(this.count+r),M.arraycopy(t,e,this.buf,this.count,r),this.count+=r}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return P.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?"string"==typeof t?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}function e4(){if("undefined"!=typeof window)return window.BigInt||null;if(void 0!==tF)return tF.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw Error("Can't search globals for BigInt!")}function e8(t){if(void 0===e&&(e=e4()),null===e)throw Error("BigInt is not supported!");return e(t)}(h=C||(C={}))[h.ALPHA=0]="ALPHA",h[h.LOWER=1]="LOWER",h[h.MIXED=2]="MIXED",h[h.PUNCT=3]="PUNCT",h[h.ALPHA_SHIFT=4]="ALPHA_SHIFT",h[h.PUNCT_SHIFT=5]="PUNCT_SHIFT";class e6{static decode(t,e){let r=new j(""),n=H.ISO8859_1;r.enableDecoding(n);let i=1,s=t[i++],o=new eJ;for(;i<t[0];){switch(s){case e6.TEXT_COMPACTION_MODE_LATCH:i=e6.textCompaction(t,i,r);break;case e6.BYTE_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH_6:i=e6.byteCompaction(s,t,n,i,r);break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[i++]);break;case e6.NUMERIC_COMPACTION_MODE_LATCH:i=e6.numericCompaction(t,i,r);break;case e6.ECI_CHARSET:H.getCharacterSetECIByValue(t[i++]);break;case e6.ECI_GENERAL_PURPOSE:i+=2;break;case e6.ECI_USER_DEFINED:i++;break;case e6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=e6.decodeMacroBlock(t,i,o);break;case e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e6.MACRO_PDF417_TERMINATOR:throw new U;default:i--,i=e6.textCompaction(t,i,r)}if(i<t.length)s=t[i++];else throw U.getFormatInstance()}if(0===r.length())throw U.getFormatInstance();let a=new ti(null,r.toString(),null,e);return a.setOther(o),a}static decodeMacroBlock(t,e,r){if(e+e6.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw U.getFormatInstance();let n=new Int32Array(e6.NUMBER_OF_SEQUENCE_CODEWORDS);for(let r=0;r<e6.NUMBER_OF_SEQUENCE_CODEWORDS;r++,e++)n[r]=t[e];r.setSegmentIndex(L.parseInt(e6.decodeBase900toBase10(n,e6.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new j;e=e6.textCompaction(t,e,i),r.setFileId(i.toString());let s=-1;for(t[e]===e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=e+1);e<t[0];)switch(t[e]){case e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t[++e]){case e6.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new j;e=e6.textCompaction(t,e+1,n),r.setFileName(n.toString());break;case e6.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new j;e=e6.textCompaction(t,e+1,i),r.setSender(i.toString());break;case e6.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let s=new j;e=e6.textCompaction(t,e+1,s),r.setAddressee(s.toString());break;case e6.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let o=new j;e=e6.numericCompaction(t,e+1,o),r.setSegmentCount(L.parseInt(o.toString()));break;case e6.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new j;e=e6.numericCompaction(t,e+1,a),r.setTimestamp(e$.parseLong(a.toString()));break;case e6.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new j;e=e6.numericCompaction(t,e+1,l),r.setChecksum(L.parseInt(l.toString()));break;case e6.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let u=new j;e=e6.numericCompaction(t,e+1,u),r.setFileSize(e$.parseLong(u.toString()));break;default:throw U.getFormatInstance()}break;case e6.MACRO_PDF417_TERMINATOR:e++,r.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(-1!==s){let n=e-s;r.isLastSegment()&&n--,r.setOptionalData(P.copyOfRange(t,s,s+n))}return e}static textCompaction(t,e,r){let n=new Int32Array((t[0]-e)*2),i=new Int32Array((t[0]-e)*2),s=0,o=!1;for(;e<t[0]&&!o;){let r=t[e++];if(r<e6.TEXT_COMPACTION_MODE_LATCH)n[s]=r/30,n[s+1]=r%30,s+=2;else switch(r){case e6.TEXT_COMPACTION_MODE_LATCH:n[s++]=e6.TEXT_COMPACTION_MODE_LATCH;break;case e6.BYTE_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH_6:case e6.NUMERIC_COMPACTION_MODE_LATCH:case e6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e6.MACRO_PDF417_TERMINATOR:e--,o=!0;break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[s]=e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=t[e++],i[s]=r,s++}}return e6.decodeTextCompaction(n,i,s,r),e}static decodeTextCompaction(t,e,r,n){let i=C.ALPHA,s=C.ALPHA,o=0;for(;o<r;){let r=t[o],a="";switch(i){case C.ALPHA:if(r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case e6.LL:i=C.LOWER;break;case e6.ML:i=C.MIXED;break;case e6.PS:s=i,i=C.PUNCT_SHIFT;break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o]);break;case e6.TEXT_COMPACTION_MODE_LATCH:i=C.ALPHA}break;case C.LOWER:if(r<26)a=String.fromCharCode(97+r);else switch(r){case 26:a=" ";break;case e6.AS:s=i,i=C.ALPHA_SHIFT;break;case e6.ML:i=C.MIXED;break;case e6.PS:s=i,i=C.PUNCT_SHIFT;break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o]);break;case e6.TEXT_COMPACTION_MODE_LATCH:i=C.ALPHA}break;case C.MIXED:if(r<e6.PL)a=e6.MIXED_CHARS[r];else switch(r){case e6.PL:i=C.PUNCT;break;case 26:a=" ";break;case e6.LL:i=C.LOWER;break;case e6.AL:i=C.ALPHA;break;case e6.PS:s=i,i=C.PUNCT_SHIFT;break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o]);break;case e6.TEXT_COMPACTION_MODE_LATCH:i=C.ALPHA}break;case C.PUNCT:if(r<e6.PAL)a=e6.PUNCT_CHARS[r];else switch(r){case e6.PAL:i=C.ALPHA;break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o]);break;case e6.TEXT_COMPACTION_MODE_LATCH:i=C.ALPHA}break;case C.ALPHA_SHIFT:if(i=s,r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case e6.TEXT_COMPACTION_MODE_LATCH:i=C.ALPHA}break;case C.PUNCT_SHIFT:if(i=s,r<e6.PAL)a=e6.PUNCT_CHARS[r];else switch(r){case e6.PAL:i=C.ALPHA;break;case e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[o]);break;case e6.TEXT_COMPACTION_MODE_LATCH:i=C.ALPHA}}""!==a&&n.append(a),o++}}static byteCompaction(t,e,r,n,i){let s=new e3,o=0,a=0,l=!1;switch(t){case e6.BYTE_COMPACTION_MODE_LATCH:let u=new Int32Array(6),c=e[n++];for(;n<e[0]&&!l;)switch(u[o++]=c,a=900*a+c,c=e[n++]){case e6.TEXT_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH:case e6.NUMERIC_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH_6:case e6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e6.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(o%5==0&&o>0){for(let t=0;t<6;++t)s.write(Number(e8(a)>>e8(8*(5-t))));a=0,o=0}}n===e[0]&&c<e6.TEXT_COMPACTION_MODE_LATCH&&(u[o++]=c);for(let t=0;t<o;t++)s.write(u[t]);break;case e6.BYTE_COMPACTION_MODE_LATCH_6:for(;n<e[0]&&!l;){let t=e[n++];if(t<e6.TEXT_COMPACTION_MODE_LATCH)o++,a=900*a+t;else switch(t){case e6.TEXT_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH:case e6.NUMERIC_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH_6:case e6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e6.MACRO_PDF417_TERMINATOR:n--,l=!0}if(o%5==0&&o>0){for(let t=0;t<6;++t)s.write(Number(e8(a)>>e8(8*(5-t))));a=0,o=0}}}return i.append(z.decode(s.toByteArray(),r)),n}static numericCompaction(t,e,r){let n=0,i=!1,s=new Int32Array(e6.MAX_NUMERIC_CODEWORDS);for(;e<t[0]&&!i;){let o=t[e++];if(e===t[0]&&(i=!0),o<e6.TEXT_COMPACTION_MODE_LATCH)s[n]=o,n++;else switch(o){case e6.TEXT_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH:case e6.BYTE_COMPACTION_MODE_LATCH_6:case e6.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case e6.MACRO_PDF417_TERMINATOR:e--,i=!0}(n%e6.MAX_NUMERIC_CODEWORDS==0||o===e6.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(e6.decodeBase900toBase10(s,n)),n=0)}return e}static decodeBase900toBase10(t,e){let r=e8(0);for(let n=0;n<e;n++)r+=e6.EXP900[e-n-1]*e8(t[n]);let n=r.toString();if("1"!==n.charAt(0))throw new U;return n.substring(1)}}e6.TEXT_COMPACTION_MODE_LATCH=900,e6.BYTE_COMPACTION_MODE_LATCH=901,e6.NUMERIC_COMPACTION_MODE_LATCH=902,e6.BYTE_COMPACTION_MODE_LATCH_6=924,e6.ECI_USER_DEFINED=925,e6.ECI_GENERAL_PURPOSE=926,e6.ECI_CHARSET=927,e6.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,e6.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,e6.MACRO_PDF417_TERMINATOR=922,e6.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,e6.MAX_NUMERIC_CODEWORDS=15,e6.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,e6.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,e6.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,e6.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,e6.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,e6.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,e6.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,e6.PL=25,e6.LL=27,e6.AS=27,e6.ML=28,e6.AL=28,e6.PS=29,e6.PAL=29,e6.PUNCT_CHARS=";<>@[\\]_`~!\r	,:\n-.$/\"|*()?{}'",e6.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",e6.EXP900=e4()?function(){let t=[];t[0]=e8(1);let e=e8(900);t[1]=e;for(let r=2;r<16;r++)t[r]=t[r-1]*e;return t}():[],e6.NUMBER_OF_SEQUENCE_CODEWORDS=2;class e5{constructor(){}static decode(t,e,r,n,i,s,o){let a,l=new eG(t,e,r,n,i),u=null,c=null;for(let r=!0;;r=!1){if(null!=e&&(u=e5.getRowIndicatorColumn(t,l,e,!0,s,o)),null!=n&&(c=e5.getRowIndicatorColumn(t,l,n,!1,s,o)),null==(a=e5.merge(u,c)))throw W.getNotFoundInstance();let i=a.getBoundingBox();if(r&&null!=i&&(i.getMinY()<l.getMinY()||i.getMaxY()>l.getMaxY()))l=i;else break}a.setBoundingBox(l);let h=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,u),a.setDetectionResultColumn(h,c);let d=null!=u;for(let e=1;e<=h;e++){let r,n=d?e:h-e;if(void 0!==a.getDetectionResultColumn(n))continue;r=0===n||n===h?new eX(l,0===n):new eW(l),a.setDetectionResultColumn(n,r);let i=-1,u=-1;for(let e=l.getMinY();e<=l.getMaxY();e++){if((i=e5.getStartColumn(a,n,e,d))<0||i>l.getMaxX()){if(-1===u)continue;i=u}let c=e5.detectCodeword(t,l.getMinX(),l.getMaxX(),d,i,e,s,o);null!=c&&(r.setCodeword(e,c),u=i,s=Math.min(s,c.getWidth()),o=Math.max(o,c.getWidth()))}}return e5.createDecoderResult(a)}static merge(t,e){if(null==t&&null==e)return null;let r=e5.getBarcodeMetadata(t,e);return null==r?null:new eq(r,eG.merge(e5.adjustBoundingBox(t),e5.adjustBoundingBox(e)))}static adjustBoundingBox(t){if(null==t)return null;let e=t.getRowHeights();if(null==e)return null;let r=e5.getMax(e),n=0;for(let t of e)if(n+=r-t,t>0)break;let i=t.getCodewords();for(let t=0;n>0&&null==i[t];t++)n--;let s=0;for(let t=e.length-1;t>=0&&(s+=r-e[t],!(e[t]>0));t--);for(let t=i.length-1;s>0&&null==i[t];t--)s--;return t.getBoundingBox().addMissingRows(n,s,t.isLeft())}static getMax(t){let e=-1;for(let r of t)e=Math.max(e,r);return e}static getBarcodeMetadata(t,e){let r,n;return null==t||null==(r=t.getBarcodeMetadata())?null==e?null:e.getBarcodeMetadata():null==e||null==(n=e.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(t,e,r,n,i,s){let o=new eX(e,n);for(let a=0;a<2;a++){let l=0===a?1:-1,u=Math.trunc(Math.trunc(r.getX()));for(let a=Math.trunc(Math.trunc(r.getY()));a<=e.getMaxY()&&a>=e.getMinY();a+=l){let e=e5.detectCodeword(t,0,t.getWidth(),n,u,a,i,s);null!=e&&(o.setCodeword(a,e),u=n?e.getStartX():e.getEndX())}}return o}static adjustCodewordCount(t,e){let r=e[0][1],n=r.getValue(),i=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-e5.getNumberOfECCodeWords(t.getBarcodeECLevel());if(0===n.length){if(i<1||i>eL.MAX_CODEWORDS_IN_BARCODE)throw W.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(t){let e=e5.createBarcodeMatrix(t);e5.adjustCodewordCount(t,e);let r=[],n=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),i=[],s=[];for(let o=0;o<t.getBarcodeRowCount();o++)for(let a=0;a<t.getBarcodeColumnCount();a++){let l=e[o][a+1].getValue(),u=o*t.getBarcodeColumnCount()+a;0===l.length?r.push(u):1===l.length?n[u]=l[0]:(s.push(u),i.push(l))}let o=Array(i.length);for(let t=0;t<o.length;t++)o[t]=i[t];return e5.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),n,eL.toIntArray(r),eL.toIntArray(s),o)}static createDecoderResultFromAmbiguousValues(t,e,r,n,i){let s=new Int32Array(n.length),o=100;for(;o-- >0;){for(let t=0;t<s.length;t++)e[n[t]]=i[t][s[t]];try{return e5.decodeCodewords(e,t,r)}catch(t){if(!(t instanceof O))throw t}if(0===s.length)break;for(let t=0;t<s.length;t++)if(s[t]<i[t].length-1){s[t]++;break}else if(s[t]=0,t===s.length-1)throw O.getChecksumInstance()}throw O.getChecksumInstance()}static createBarcodeMatrix(t){let e=Array.from({length:t.getBarcodeRowCount()},()=>Array(t.getBarcodeColumnCount()+2));for(let t=0;t<e.length;t++)for(let r=0;r<e[t].length;r++)e[t][r]=new eY;let r=0;for(let n of t.getDetectionResultColumns()){if(null!=n){for(let t of n.getCodewords())if(null!=t){let n=t.getRowNumber();if(n>=0){if(n>=e.length)continue;e[n][r].setValue(t.getValue())}}}r++}return e}static isValidBarcodeColumn(t,e){return e>=0&&e<=t.getBarcodeColumnCount()+1}static getStartColumn(t,e,r,n){let i=n?1:-1,s=null;if(e5.isValidBarcodeColumn(t,e-i)&&(s=t.getDetectionResultColumn(e-i).getCodeword(r)),null!=s)return n?s.getEndX():s.getStartX();if(null!=(s=t.getDetectionResultColumn(e).getCodewordNearby(r)))return n?s.getStartX():s.getEndX();if(e5.isValidBarcodeColumn(t,e-i)&&(s=t.getDetectionResultColumn(e-i).getCodewordNearby(r)),null!=s)return n?s.getEndX():s.getStartX();let o=0;for(;e5.isValidBarcodeColumn(t,e-i);){for(let r of(e-=i,t.getDetectionResultColumn(e).getCodewords()))if(null!=r)return(n?r.getEndX():r.getStartX())+i*o*(r.getEndX()-r.getStartX());o++}return n?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,e,r,n,i,s,o,a){let l;i=e5.adjustCodewordStartColumn(t,e,r,n,i,s);let u=e5.getModuleBitCount(t,e,r,n,i,s);if(null==u)return null;let c=tf.sum(u);if(n)l=i+c;else{for(let t=0;t<u.length/2;t++){let e=u[t];u[t]=u[u.length-1-t],u[u.length-1-t]=e}i=(l=i)-c}if(!e5.checkCodewordSkew(c,o,a))return null;let h=eZ.getDecodedValue(u),d=eL.getCodeword(h);return -1===d?null:new eK(i,l,e5.getCodewordBucketNumber(h),d)}static getModuleBitCount(t,e,r,n,i,s){let o=i,a=new Int32Array(8),l=0,u=n?1:-1,c=n;for(;(n?o<r:o>=e)&&l<a.length;)t.get(o,s)===c?(a[l]++,o+=u):(l++,c=!c);return l===a.length||o===(n?r:e)&&l===a.length-1?a:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,e,r,n,i,s){let o=i,a=n?-1:1;for(let l=0;l<2;l++){for(;(n?o>=e:o<r)&&n===t.get(o,s);){if(Math.abs(i-o)>e5.CODEWORD_SKEW_SIZE)return i;o+=a}a=-a,n=!n}return o}static checkCodewordSkew(t,e,r){return e-e5.CODEWORD_SKEW_SIZE<=t&&t<=r+e5.CODEWORD_SKEW_SIZE}static decodeCodewords(t,e,r){if(0===t.length)throw U.getFormatInstance();let n=1<<e+1,i=e5.correctErrors(t,r,n);e5.verifyCodewordCount(t,n);let s=e6.decode(t,""+e);return s.setErrorsCorrected(i),s.setErasures(r.length),s}static correctErrors(t,e,r){if(null!=e&&e.length>r/2+e5.MAX_ERRORS||r<0||r>e5.MAX_EC_CODEWORDS)throw O.getChecksumInstance();return e5.errorCorrection.decode(t,r,e)}static verifyCodewordCount(t,e){if(t.length<4)throw U.getFormatInstance();let r=t[0];if(r>t.length)throw U.getFormatInstance();if(0===r)if(e<t.length)t[0]=t.length-e;else throw U.getFormatInstance()}static getBitCountForCodeword(t){let e=new Int32Array(8),r=0,n=e.length-1;for(;!((1&t)!==r&&(r=1&t,--n<0));)e[n]++,t>>=1;return e}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return e5.getCodewordBucketNumber(e5.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let e=new eQ;for(let r=0;r<t.length;r++){e.format("Row %2d: ",r);for(let n=0;n<t[r].length;n++){let i=t[r][n];0===i.getValue().length?e.format("        ",null):e.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}e.format("%n")}return e.toString()}}e5.CODEWORD_SKEW_SIZE=2,e5.MAX_ERRORS=3,e5.MAX_EC_CODEWORDS=512,e5.errorCorrection=new ez;class e7{decode(t,e=null){let r=e7.decode(t,e,!1);if(null==r||0===r.length||null==r[0])throw W.getNotFoundInstance();return r[0]}decodeMultiple(t,e=null){try{return e7.decode(t,e,!0)}catch(t){if(t instanceof U||t instanceof O)throw W.getNotFoundInstance();throw t}}static decode(t,e,r){let n=[],i=eF.detectMultiple(t,e,r);for(let t of i.getPoints()){let e=e5.decode(i.getBits(),t[4],t[5],t[6],t[7],e7.getMinCodewordWidth(t),e7.getMaxCodewordWidth(t)),r=new te(e.getText(),e.getRawBytes(),void 0,t,tr.PDF_417);r.putMetadata(tn.ERROR_CORRECTION_LEVEL,e.getECLevel());let s=e.getOther();null!=s&&r.putMetadata(tn.PDF417_EXTRA_METADATA,s),n.push(r)}return n.map(t=>t)}static getMaxWidth(t,e){return null==t||null==e?0:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMinWidth(t,e){return null==t||null==e?L.MAX_VALUE:Math.trunc(Math.abs(t.getX()-e.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(e7.getMaxWidth(t[0],t[4]),e7.getMaxWidth(t[6],t[2])*eL.MODULES_IN_CODEWORD/eL.MODULES_IN_STOP_PATTERN),Math.max(e7.getMaxWidth(t[1],t[5]),e7.getMaxWidth(t[7],t[3])*eL.MODULES_IN_CODEWORD/eL.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(e7.getMinWidth(t[0],t[4]),e7.getMinWidth(t[6],t[2])*eL.MODULES_IN_CODEWORD/eL.MODULES_IN_STOP_PATTERN),Math.min(e7.getMinWidth(t[1],t[5]),e7.getMinWidth(t[7],t[3])*eL.MODULES_IN_CODEWORD/eL.MODULES_IN_STOP_PATTERN)))}reset(){}}class e9 extends T{}e9.kind="ReaderException";class rt{constructor(t,e){this.verbose=!0===t,e&&this.setHints(e)}decode(t,e){return e&&this.setHints(e),this.decodeInternal(t)}decodeWithState(t){return(null===this.readers||void 0===this.readers)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;let e=null!=t&&!0===t.get(F.TRY_HARDER),r=null==t?null:t.get(F.POSSIBLE_FORMATS),n=[];if(null!=r){let i=r.some(t=>t===tr.UPC_A||t===tr.UPC_E||t===tr.EAN_13||t===tr.EAN_8||t===tr.CODABAR||t===tr.CODE_39||t===tr.CODE_93||t===tr.CODE_128||t===tr.ITF||t===tr.RSS_14||t===tr.RSS_EXPANDED);i&&!e&&n.push(new eo(t,this.verbose)),r.includes(tr.QR_CODE)&&n.push(new eP),r.includes(tr.DATA_MATRIX)&&n.push(new em),r.includes(tr.AZTEC)&&n.push(new tS),r.includes(tr.PDF_417)&&n.push(new e7),i&&e&&n.push(new eo(t,this.verbose))}0===n.length&&(e||n.push(new eo(t,this.verbose)),n.push(new eP),n.push(new em),n.push(new tS),n.push(new e7),e&&n.push(new eo(t,this.verbose))),this.readers=n}reset(){if(null!==this.readers)for(let t of this.readers)t.reset()}decodeInternal(t){if(null===this.readers)throw new e9("No readers where selected, nothing can be read.");for(let e of this.readers)try{return e.decode(t,this.hints)}catch(t){if(t instanceof e9)continue}throw new W("No MultiFormat Readers were able to detect the code.")}}(d=I||(I={}))[d.ERROR_CORRECTION=0]="ERROR_CORRECTION",d[d.CHARACTER_SET=1]="CHARACTER_SET",d[d.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",d[d.MIN_SIZE=3]="MIN_SIZE",d[d.MAX_SIZE=4]="MAX_SIZE",d[d.MARGIN=5]="MARGIN",d[d.PDF417_COMPACT=6]="PDF417_COMPACT",d[d.PDF417_COMPACTION=7]="PDF417_COMPACTION",d[d.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",d[d.AZTEC_LAYERS=9]="AZTEC_LAYERS",d[d.QR_VERSION=10]="QR_VERSION";var re=I;class rr{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new to(t,Int32Array.from([1])))}buildGenerator(t){let e=this.cachedGenerators;if(t>=e.length){let r=e[e.length-1],n=this.field;for(let i=e.length;i<=t;i++){let t=r.multiply(new to(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));e.push(t),r=t}}return e[t]}encode(t,e){if(0===e)throw new N("No error correction bytes");let r=t.length-e;if(r<=0)throw new N("No data bytes provided");let n=this.buildGenerator(e),i=new Int32Array(r);M.arraycopy(t,0,i,0,r);let s=new to(this.field,i),o=(s=s.multiplyByMonomial(e,1)).divide(n)[1].getCoefficients(),a=e-o.length;for(let e=0;e<a;e++)t[r+e]=0;M.arraycopy(o,0,t,r+a,o.length)}}class rn{constructor(){}static applyMaskPenaltyRule1(t){return rn.applyMaskPenaltyRule1Internal(t,!0)+rn.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let e=0,r=t.getArray(),n=t.getWidth(),i=t.getHeight();for(let t=0;t<i-1;t++){let i=r[t];for(let s=0;s<n-1;s++){let n=i[s];n===i[s+1]&&n===r[t+1][s]&&n===r[t+1][s+1]&&e++}}return rn.N2*e}static applyMaskPenaltyRule3(t){let e=0,r=t.getArray(),n=t.getWidth(),i=t.getHeight();for(let t=0;t<i;t++)for(let s=0;s<n;s++){let o=r[t];s+6<n&&1===o[s]&&0===o[s+1]&&1===o[s+2]&&1===o[s+3]&&1===o[s+4]&&0===o[s+5]&&1===o[s+6]&&(rn.isWhiteHorizontal(o,s-4,s)||rn.isWhiteHorizontal(o,s+7,s+11))&&e++,t+6<i&&1===r[t][s]&&0===r[t+1][s]&&1===r[t+2][s]&&1===r[t+3][s]&&1===r[t+4][s]&&0===r[t+5][s]&&1===r[t+6][s]&&(rn.isWhiteVertical(r,s,t-4,t)||rn.isWhiteVertical(r,s,t+7,t+11))&&e++}return e*rn.N3}static isWhiteHorizontal(t,e,r){e=Math.max(e,0),r=Math.min(r,t.length);for(let n=e;n<r;n++)if(1===t[n])return!1;return!0}static isWhiteVertical(t,e,r,n){r=Math.max(r,0),n=Math.min(n,t.length);for(let i=r;i<n;i++)if(1===t[i][e])return!1;return!0}static applyMaskPenaltyRule4(t){let e=0,r=t.getArray(),n=t.getWidth(),i=t.getHeight();for(let t=0;t<i;t++){let i=r[t];for(let t=0;t<n;t++)1===i[t]&&e++}let s=t.getHeight()*t.getWidth();return Math.floor(10*Math.abs(2*e-s)/s)*rn.N4}static getDataMaskBit(t,e,r){let n,i;switch(t){case 0:n=r+e&1;break;case 1:n=1&r;break;case 2:n=e%3;break;case 3:n=(r+e)%3;break;case 4:n=Math.floor(r/2)+Math.floor(e/3)&1;break;case 5:n=(1&(i=r*e))+i%3;break;case 6:n=(1&(i=r*e))+i%3&1;break;case 7:n=(i=r*e)%3+(r+e&1)&1;break;default:throw new N("Invalid mask pattern: "+t)}return 0===n}static applyMaskPenaltyRule1Internal(t,e){let r=0,n=e?t.getHeight():t.getWidth(),i=e?t.getWidth():t.getHeight(),s=t.getArray();for(let t=0;t<n;t++){let n=0,o=-1;for(let a=0;a<i;a++){let i=e?s[t][a]:s[a][t];i===o?n++:(n>=5&&(r+=rn.N1+(n-5)),n=1,o=i)}n>=5&&(r+=rn.N1+(n-5))}return r}}rn.N1=3,rn.N2=3,rn.N3=40,rn.N4=10;class ri{constructor(t,e){this.width=t,this.height=e;let r=Array(e);for(let n=0;n!==e;n++)r[n]=new Uint8Array(t);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(t,e){return this.bytes[e][t]}getArray(){return this.bytes}setNumber(t,e,r){this.bytes[e][t]=r}setBoolean(t,e,r){this.bytes[e][t]=+!!r}clear(t){for(let e of this.bytes)P.fill(e,t)}equals(t){if(!(t instanceof ri)||this.width!==t.width||this.height!==t.height)return!1;for(let e=0,r=this.height;e<r;++e){let r=this.bytes[e],n=t.bytes[e];for(let t=0,e=this.width;t<e;++t)if(r[t]!==n[t])return!1}return!0}toString(){let t=new j;for(let e=0,r=this.height;e<r;++e){let r=this.bytes[e];for(let e=0,n=this.width;e<n;++e)switch(r[e]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ")}t.append("\n")}return t.toString()}}class rs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let t=new j;return t.append("<<\n"),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append("\n ecLevel: "),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append("\n version: "),t.append(this.version?this.version.toString():"null"),t.append("\n maskPattern: "),t.append(this.maskPattern.toString()),this.matrix?(t.append("\n matrix:\n"),t.append(this.matrix.toString())):t.append("\n matrix: null\n"),t.append(">>\n"),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<rs.NUM_MASK_PATTERNS}}rs.NUM_MASK_PATTERNS=8;class ro extends T{}ro.kind="WriterException";class ra{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,e,r,n,i){ra.clearMatrix(i),ra.embedBasicPatterns(r,i),ra.embedTypeInfo(e,n,i),ra.maybeEmbedVersionInfo(r,i),ra.embedDataBits(t,n,i)}static embedBasicPatterns(t,e){ra.embedPositionDetectionPatternsAndSeparators(e),ra.embedDarkDotAtLeftBottomCorner(e),ra.maybeEmbedPositionAdjustmentPatterns(t,e),ra.embedTimingPatterns(e)}static embedTypeInfo(t,e,r){let n=new k;ra.makeTypeInfoBits(t,e,n);for(let t=0,e=n.getSize();t<e;++t){let e=n.get(n.getSize()-1-t),i=ra.TYPE_INFO_COORDINATES[t],s=i[0],o=i[1];if(r.setBoolean(s,o,e),t<8){let n=r.getWidth()-t-1;r.setBoolean(n,8,e)}else{let n=r.getHeight()-7+(t-8);r.setBoolean(8,n,e)}}}static maybeEmbedVersionInfo(t,e){if(7>t.getVersionNumber())return;let r=new k;ra.makeVersionInfoBits(t,r);let n=17;for(let t=0;t<6;++t)for(let i=0;i<3;++i){let s=r.get(n);n--,e.setBoolean(t,e.getHeight()-11+i,s),e.setBoolean(e.getHeight()-11+i,t,s)}}static embedDataBits(t,e,r){let n=0,i=-1,s=r.getWidth()-1,o=r.getHeight()-1;for(;s>0;){for(6===s&&(s-=1);o>=0&&o<r.getHeight();){for(let i=0;i<2;++i){let a,l=s-i;ra.isEmpty(r.get(l,o))&&(n<t.getSize()?(a=t.get(n),++n):a=!1,255!==e&&rn.getDataMaskBit(e,l,o)&&(a=!a),r.setBoolean(l,o,a))}o+=i}o+=i=-i,s-=2}if(n!==t.getSize())throw new ro("Not all bits consumed: "+n+"/"+t.getSize())}static findMSBSet(t){return 32-L.numberOfLeadingZeros(t)}static calculateBCHCode(t,e){if(0===e)throw new N("0 polynomial");let r=ra.findMSBSet(e);for(t<<=r-1;ra.findMSBSet(t)>=r;)t^=e<<ra.findMSBSet(t)-r;return t}static makeTypeInfoBits(t,e,r){if(!rs.isValidMaskPattern(e))throw new ro("Invalid mask pattern");let n=t.getBits()<<3|e;r.appendBits(n,5);let i=ra.calculateBCHCode(n,ra.TYPE_INFO_POLY);r.appendBits(i,10);let s=new k;if(s.appendBits(ra.TYPE_INFO_MASK_PATTERN,15),r.xor(s),15!==r.getSize())throw new ro("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(t,e){e.appendBits(t.getVersionNumber(),6);let r=ra.calculateBCHCode(t.getVersionNumber(),ra.VERSION_INFO_POLY);if(e.appendBits(r,12),18!==e.getSize())throw new ro("should not happen but we got: "+e.getSize())}static isEmpty(t){return 255===t}static embedTimingPatterns(t){for(let e=8;e<t.getWidth()-8;++e){let r=(e+1)%2;ra.isEmpty(t.get(e,6))&&t.setNumber(e,6,r),ra.isEmpty(t.get(6,e))&&t.setNumber(6,e,r)}}static embedDarkDotAtLeftBottomCorner(t){if(0===t.get(8,t.getHeight()-8))throw new ro;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,e,r){for(let n=0;n<8;++n){if(!ra.isEmpty(r.get(t+n,e)))throw new ro;r.setNumber(t+n,e,0)}}static embedVerticalSeparationPattern(t,e,r){for(let n=0;n<7;++n){if(!ra.isEmpty(r.get(t,e+n)))throw new ro;r.setNumber(t,e+n,0)}}static embedPositionAdjustmentPattern(t,e,r){for(let n=0;n<5;++n){let i=ra.POSITION_ADJUSTMENT_PATTERN[n];for(let s=0;s<5;++s)r.setNumber(t+s,e+n,i[s])}}static embedPositionDetectionPattern(t,e,r){for(let n=0;n<7;++n){let i=ra.POSITION_DETECTION_PATTERN[n];for(let s=0;s<7;++s)r.setNumber(t+s,e+n,i[s])}}static embedPositionDetectionPatternsAndSeparators(t){let e=ra.POSITION_DETECTION_PATTERN[0].length;ra.embedPositionDetectionPattern(0,0,t),ra.embedPositionDetectionPattern(t.getWidth()-e,0,t),ra.embedPositionDetectionPattern(0,t.getWidth()-e,t),ra.embedHorizontalSeparationPattern(0,7,t),ra.embedHorizontalSeparationPattern(t.getWidth()-8,7,t),ra.embedHorizontalSeparationPattern(0,t.getWidth()-8,t),ra.embedVerticalSeparationPattern(7,0,t),ra.embedVerticalSeparationPattern(t.getHeight()-7-1,0,t),ra.embedVerticalSeparationPattern(7,t.getHeight()-7,t)}static maybeEmbedPositionAdjustmentPatterns(t,e){if(2>t.getVersionNumber())return;let r=t.getVersionNumber()-1,n=ra.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let t=0,r=n.length;t!==r;t++){let i=n[t];if(i>=0)for(let t=0;t!==r;t++){let r=n[t];r>=0&&ra.isEmpty(e.get(r,i))&&ra.embedPositionAdjustmentPattern(r-2,i-2,e)}}}}ra.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ra.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ra.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ra.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ra.VERSION_INFO_POLY=7973,ra.TYPE_INFO_POLY=1335,ra.TYPE_INFO_MASK_PATTERN=21522;class rl{constructor(t,e){this.dataBytes=t,this.errorCorrectionBytes=e}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ru{constructor(){}static calculateMaskPenalty(t){return rn.applyMaskPenaltyRule1(t)+rn.applyMaskPenaltyRule2(t)+rn.applyMaskPenaltyRule3(t)+rn.applyMaskPenaltyRule4(t)}static encode(t,e,r=null){let n,i=ru.DEFAULT_BYTE_MODE_ENCODING,s=null!==r&&void 0!==r.get(re.CHARACTER_SET);s&&(i=r.get(re.CHARACTER_SET).toString());let o=this.chooseMode(t,i),a=new k;if(o===eS.BYTE&&(s||ru.DEFAULT_BYTE_MODE_ENCODING!==i)){let t=H.getCharacterSetECIByName(i);void 0!==t&&this.appendECI(t,a)}this.appendModeInfo(o,a);let l=new k;if(this.appendBytes(t,o,l,i),null!==r&&void 0!==r.get(re.QR_VERSION)){let t=Number.parseInt(r.get(re.QR_VERSION).toString(),10);n=eb.getVersionForNumber(t);let i=this.calculateBitsNeeded(o,a,l,n);if(!this.willFit(i,n,e))throw new ro("Data too big for requested version")}else n=this.recommendVersion(e,o,a,l);let u=new k;u.appendBitArray(a);let c=o===eS.BYTE?l.getSizeInBytes():t.length;this.appendLengthInfo(c,n,o,u),u.appendBitArray(l);let h=n.getECBlocksForLevel(e),d=n.getTotalCodewords()-h.getTotalECCodewords();this.terminateBits(d,u);let f=this.interleaveWithECBytes(u,n.getTotalCodewords(),d,h.getNumBlocks()),g=new rs;g.setECLevel(e),g.setMode(o),g.setVersion(n);let p=n.getDimensionForVersion(),m=new ri(p,p),w=this.chooseMaskPattern(f,e,n,m);return g.setMaskPattern(w),ra.buildMatrix(f,e,n,w,m),g.setMatrix(m),g}static recommendVersion(t,e,r,n){let i=this.calculateBitsNeeded(e,r,n,eb.getVersionForNumber(1)),s=this.chooseVersion(i,t),o=this.calculateBitsNeeded(e,r,n,s);return this.chooseVersion(o,t)}static calculateBitsNeeded(t,e,r,n){return e.getSize()+t.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(t){return t<ru.ALPHANUMERIC_TABLE.length?ru.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,e=null){if(H.SJIS.getName()===e&&this.isOnlyDoubleByteKanji(t))return eS.KANJI;let r=!1,n=!1;for(let e=0,i=t.length;e<i;++e){let i=t.charAt(e);if(ru.isDigit(i))r=!0;else{if(-1===this.getAlphanumericCode(i.charCodeAt(0)))return eS.BYTE;n=!0}}return n?eS.ALPHANUMERIC:r?eS.NUMERIC:eS.BYTE}static isOnlyDoubleByteKanji(t){let e;try{e=z.encode(t,H.SJIS)}catch(t){return!1}let r=e.length;if(r%2!=0)return!1;for(let t=0;t<r;t+=2){let r=255&e[t];if((r<129||r>159)&&(r<224||r>235))return!1}return!0}static chooseMaskPattern(t,e,r,n){let i=Number.MAX_SAFE_INTEGER,s=-1;for(let o=0;o<rs.NUM_MASK_PATTERNS;o++){ra.buildMatrix(t,e,r,o,n);let a=this.calculateMaskPenalty(n);a<i&&(i=a,s=o)}return s}static chooseVersion(t,e){for(let r=1;r<=40;r++){let n=eb.getVersionForNumber(r);if(ru.willFit(t,n,e))return n}throw new ro("Data too big")}static willFit(t,e,r){let n=e.getTotalCodewords();return n-e.getECBlocksForLevel(r).getTotalECCodewords()>=(t+7)/8}static terminateBits(t,e){let r=8*t;if(e.getSize()>r)throw new ro("data bits cannot fit in the QR Code"+e.getSize()+" > "+r);for(let t=0;t<4&&e.getSize()<r;++t)e.appendBit(!1);let n=7&e.getSize();if(n>0)for(let t=n;t<8;t++)e.appendBit(!1);let i=t-e.getSizeInBytes();for(let t=0;t<i;++t)e.appendBits((1&t)==0?236:17,8);if(e.getSize()!==r)throw new ro("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,e,r,n,i,s){if(n>=r)throw new ro("Block ID too large");let o=t%r,a=r-o,l=Math.floor(t/r),u=Math.floor(e/r),c=u+1,h=l-u,d=l+1-c;if(h!==d)throw new ro("EC bytes mismatch");if(r!==a+o)throw new ro("RS blocks mismatch");if(t!==(u+h)*a+(c+d)*o)throw new ro("Total bytes mismatch");n<a?(i[0]=u,s[0]=h):(i[0]=c,s[0]=d)}static interleaveWithECBytes(t,e,r,n){if(t.getSizeInBytes()!==r)throw new ro("Number of bits and data bytes does not match");let i=0,s=0,o=0,a=[];for(let l=0;l<n;++l){let u=new Int32Array(1),c=new Int32Array(1);ru.getNumDataBytesAndNumECBytesForBlockID(e,r,n,l,u,c);let h=u[0],d=new Uint8Array(h);t.toBytes(8*i,d,0,h);let f=ru.generateECBytes(d,c[0]);a.push(new rl(d,f)),s=Math.max(s,h),o=Math.max(o,f.length),i+=u[0]}if(r!==i)throw new ro("Data bytes does not match offset");let l=new k;for(let t=0;t<s;++t)for(let e of a){let r=e.getDataBytes();t<r.length&&l.appendBits(r[t],8)}for(let t=0;t<o;++t)for(let e of a){let r=e.getErrorCorrectionBytes();t<r.length&&l.appendBits(r[t],8)}if(e!==l.getSizeInBytes())throw new ro("Interleaving error: "+e+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(t,e){let r=t.length,n=new Int32Array(r+e);for(let e=0;e<r;e++)n[e]=255&t[e];new rr(tl.QR_CODE_FIELD_256).encode(n,e);let i=new Uint8Array(e);for(let t=0;t<e;t++)i[t]=n[r+t];return i}static appendModeInfo(t,e){e.appendBits(t.getBits(),4)}static appendLengthInfo(t,e,r,n){let i=r.getCharacterCountBits(e);if(t>=1<<i)throw new ro(t+" is bigger than "+((1<<i)-1));n.appendBits(t,i)}static appendBytes(t,e,r,n){switch(e){case eS.NUMERIC:ru.appendNumericBytes(t,r);break;case eS.ALPHANUMERIC:ru.appendAlphanumericBytes(t,r);break;case eS.BYTE:ru.append8BitBytes(t,r,n);break;case eS.KANJI:ru.appendKanjiBytes(t,r);break;default:throw new ro("Invalid mode: "+e)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){let e=ru.getDigit(t);return e>=0&&e<=9}static appendNumericBytes(t,e){let r=t.length,n=0;for(;n<r;){let i=ru.getDigit(t.charAt(n));if(n+2<r){let r=ru.getDigit(t.charAt(n+1)),s=ru.getDigit(t.charAt(n+2));e.appendBits(100*i+10*r+s,10),n+=3}else if(n+1<r){let r=ru.getDigit(t.charAt(n+1));e.appendBits(10*i+r,7),n+=2}else e.appendBits(i,4),n++}}static appendAlphanumericBytes(t,e){let r=t.length,n=0;for(;n<r;){let i=ru.getAlphanumericCode(t.charCodeAt(n));if(-1===i)throw new ro;if(n+1<r){let r=ru.getAlphanumericCode(t.charCodeAt(n+1));if(-1===r)throw new ro;e.appendBits(45*i+r,11),n+=2}else e.appendBits(i,6),n++}}static append8BitBytes(t,e,r){let n;try{n=z.encode(t,r)}catch(t){throw new ro(t)}for(let t=0,r=n.length;t!==r;t++){let r=n[t];e.appendBits(r,8)}}static appendKanjiBytes(t,e){let r;try{r=z.encode(t,H.SJIS)}catch(t){throw new ro(t)}let n=r.length;for(let t=0;t<n;t+=2){let n=(255&r[t])<<8|255&r[t+1],i=-1;if(n>=33088&&n<=40956?i=n-33088:n>=57408&&n<=60351&&(i=n-49472),-1===i)throw new ro("Invalid byte sequence");let s=(i>>8)*192+(255&i);e.appendBits(s,13)}}static appendECI(t,e){e.appendBits(eS.ECI.getBits(),4),e.appendBits(t.getValue(),8)}}ru.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ru.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class rc{write(t,e,r,n=null){if(0===t.length)throw new N("Found empty contents");if(e<0||r<0)throw new N("Requested dimensions are too small: "+e+"x"+r);let i=ew.L,s=rc.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(re.ERROR_CORRECTION)&&(i=ew.fromString(n.get(re.ERROR_CORRECTION).toString())),void 0!==n.get(re.MARGIN)&&(s=Number.parseInt(n.get(re.MARGIN).toString(),10)));let o=ru.encode(t,i,n);return this.renderResult(o,e,r,s)}writeToDom(t,e,r,n,i=null){"string"==typeof t&&(t=document.querySelector(t));let s=this.write(e,r,n,i);t&&t.appendChild(s)}renderResult(t,e,r,n){let i=t.getMatrix();if(null===i)throw new tc;let s=i.getWidth(),o=i.getHeight(),a=s+2*n,l=o+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-s*h)/2),f=Math.floor((c-o*h)/2),g=this.createSVGElement(u,c);for(let t=0,e=f;t<o;t++,e+=h)for(let r=0,n=d;r<s;r++,n+=h)if(1===i.get(r,t)){let t=this.createSvgRectElement(n,e,h,h);g.appendChild(t)}return g}createSVGElement(t,e){let r=document.createElementNS(rc.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",e.toString()),r}createSvgRectElement(t,e,r,n){let i=document.createElementNS(rc.SVG_NS,"rect");return i.setAttributeNS(null,"x",t.toString()),i.setAttributeNS(null,"y",e.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}rc.QUIET_ZONE_SIZE=4,rc.SVG_NS="http://www.w3.org/2000/svg";class rh{encode(t,e,r,n,i){if(0===t.length)throw new N("Found empty contents");if(e!==tr.QR_CODE)throw new N("Can only encode QR_CODE, but got "+e);if(r<0||n<0)throw new N(`Requested dimensions are too small: ${r}x${n}`);let s=ew.L,o=rh.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(re.ERROR_CORRECTION)&&(s=ew.fromString(i.get(re.ERROR_CORRECTION).toString())),void 0!==i.get(re.MARGIN)&&(o=Number.parseInt(i.get(re.MARGIN).toString(),10)));let a=ru.encode(t,s,i);return rh.renderResult(a,r,n,o)}static renderResult(t,e,r,n){let i=t.getMatrix();if(null===i)throw new tc;let s=i.getWidth(),o=i.getHeight(),a=s+2*n,l=o+2*n,u=Math.max(e,a),c=Math.max(r,l),h=Math.min(Math.floor(u/a),Math.floor(c/l)),d=Math.floor((u-s*h)/2),f=Math.floor((c-o*h)/2),g=new Q(u,c);for(let t=0,e=f;t<o;t++,e+=h)for(let r=0,n=d;r<s;r++,n+=h)1===i.get(r,t)&&g.setRegion(n,e,h,h);return g}}rh.QUIET_ZONE_SIZE=4;class rd extends q{constructor(t,e,r,n,i,s,o,a){if(super(s,o),this.yuvData=t,this.dataWidth=e,this.dataHeight=r,this.left=n,this.top=i,n+s>e||i+o>r)throw new N("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(s,o)}getRow(t,e){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);let r=this.getWidth();(null==e||e.length<r)&&(e=new Uint8ClampedArray(r));let n=(t+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,n,e,0,r),e}getMatrix(){let t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.yuvData;let r=t*e,n=new Uint8ClampedArray(r),i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return M.arraycopy(this.yuvData,i,n,0,r),n;for(let r=0;r<e;r++){let e=r*t;M.arraycopy(this.yuvData,i,n,e,t),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(t,e,r,n){return new rd(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+e,r,n,!1)}renderThumbnail(){let t=this.getWidth()/rd.THUMBNAIL_SCALE_FACTOR,e=this.getHeight()/rd.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*e),n=this.yuvData,i=this.top*this.dataWidth+this.left;for(let s=0;s<e;s++){let e=s*t;for(let s=0;s<t;s++){let t=255&n[i+s*rd.THUMBNAIL_SCALE_FACTOR];r[e+s]=0xff000000|65793*t}i+=this.dataWidth*rd.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/rd.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rd.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,e){let r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<e;n++,i+=this.dataWidth){let e=i+t/2;for(let n=i,s=i+t-1;n<e;n++,s--){let t=r[n];r[n]=r[s],r[s]=t}}}invert(){return new K(this)}}rd.THUMBNAIL_SCALE_FACTOR=2;class rf extends q{constructor(t,e,r,n,i,s,o){if(super(e,r),this.dataWidth=n,this.dataHeight=i,this.left=s,this.top=o,4===t.BYTES_PER_ELEMENT){let n=e*r,i=new Uint8ClampedArray(n);for(let e=0;e<n;e++){let r=t[e],n=r>>16&255,s=r>>7&510,o=255&r;i[e]=(n+s+o)/4&255}this.luminances=i}else this.luminances=t;if(void 0===n&&(this.dataWidth=e),void 0===i&&(this.dataHeight=r),void 0===s&&(this.left=0),void 0===o&&(this.top=0),this.left+e>this.dataWidth||this.top+r>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(t,e){if(t<0||t>=this.getHeight())throw new N("Requested row is outside the image: "+t);let r=this.getWidth();(null==e||e.length<r)&&(e=new Uint8ClampedArray(r));let n=(t+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,n,e,0,r),e}getMatrix(){let t=this.getWidth(),e=this.getHeight();if(t===this.dataWidth&&e===this.dataHeight)return this.luminances;let r=t*e,n=new Uint8ClampedArray(r),i=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return M.arraycopy(this.luminances,i,n,0,r),n;for(let r=0;r<e;r++){let e=r*t;M.arraycopy(this.luminances,i,n,e,t),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(t,e,r,n){return new rf(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+t,this.top+e)}invert(){return new K(this)}}class rg extends H{static forName(t){return this.getCharacterSetECIByName(t)}}class rp{}rp.ISO_8859_1=H.ISO8859_1;class rm{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class rw{static singletonList(t){return[t]}static min(t,e){return t.sort(e)[0]}}class ry{constructor(t){this.previous=t}getPrevious(){return this.previous}}class rA extends ry{constructor(t,e,r){super(t),this.value=e,this.bitCount=r}appendTo(t,e){t.appendBits(this.value,this.bitCount)}add(t,e){return new rA(this,t,e)}addBinaryShift(t,e){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new rA(this,t,e)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+L.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class rE extends rA{constructor(t,e,r){super(t,0,0),this.binaryShiftStart=e,this.binaryShiftByteCount=r}appendTo(t,e){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):0===r?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(e[this.binaryShiftStart+r],8)}addBinaryShift(t,e){return new rE(this,t,e)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function rb(t,e,r){return new rA(t,e,r)}let rC=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],rI=new rA(null,0,0),r_=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])],rS=function(t){for(let e of t)P.fill(e,-1);return t[0][4]=0,t[1][4]=0,t[1][0]=28,t[3][4]=0,t[2][4]=0,t[2][0]=15,t}(P.createInt32Array(6,6));class rT{constructor(t,e,r,n){this.token=t,this.mode=e,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,e){let r=this.bitCount,n=this.token;if(t!==this.mode){let e=r_[this.mode][t];n=rb(n,65535&e,e>>16),r+=e>>16}let i=2===t?4:5;return new rT(n=rb(n,e,i),t,0,r+i)}shiftAndAppend(t,e){let r=this.token,n=2===this.mode?4:5;return r=rb(r,rS[this.mode][t],n),new rT(r=rb(r,e,5),this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(t){let e=this.token,r=this.mode,n=this.bitCount;if(4===this.mode||2===this.mode){let t=r_[r][0];e=rb(e,65535&t,t>>16),n+=t>>16,r=0}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,s=new rT(e,r,this.binaryShiftByteCount+1,n+i);return 2078===s.binaryShiftByteCount&&(s=s.endBinaryShift(t+1)),s}endBinaryShift(t){if(0===this.binaryShiftByteCount)return this;let e=this.token;return new rT(e=new rE(e,t-this.binaryShiftByteCount,this.binaryShiftByteCount),this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let e=this.bitCount+(r_[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?e+=rT.calculateBinaryShiftCost(t)-rT.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(e+=10),e<=t.bitCount}toBitArray(t){let e=[];for(let r=this.endBinaryShift(t.length).token;null!==r;r=r.getPrevious())e.unshift(r);let r=new k;for(let n of e)n.appendTo(r,t);return r}toString(){return G.format("%s bits=%d bytes=%d",rC[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:10*(t.binaryShiftByteCount>0)}}rT.INITIAL_STATE=new rT(rI,0,0,0);let rv=function(t){let e=G.getCharCode(" "),r=G.getCharCode("."),n=G.getCharCode(",");t[0][e]=1;let i=G.getCharCode("Z"),s=G.getCharCode("A");for(let e=s;e<=i;e++)t[0][e]=e-s+2;t[1][e]=1;let o=G.getCharCode("z"),a=G.getCharCode("a");for(let e=a;e<=o;e++)t[1][e]=e-a+2;t[2][e]=1;let l=G.getCharCode("9"),u=G.getCharCode("0");for(let e=u;e<=l;e++)t[2][e]=e-u+2;t[2][n]=12,t[2][r]=13;let c=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","	","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~",""];for(let e=0;e<c.length;e++)t[3][G.getCharCode(c[e])]=e;let h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let e=0;e<h.length;e++)G.getCharCode(h[e])>0&&(t[4][G.getCharCode(h[e])]=e);return t}(P.createInt32Array(5,256));class rN{constructor(t){this.text=t}encode(){let t=G.getCharCode(" "),e=G.getCharCode("\n"),r=rw.singletonList(rT.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let i,s=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case G.getCharCode("\r"):i=2*(s===e);break;case G.getCharCode("."):i=3*(s===t);break;case G.getCharCode(","):i=4*(s===t);break;case G.getCharCode(":"):i=5*(s===t);break;default:i=0}i>0?(r=rN.updateStateListForPair(r,n,i),n++):r=this.updateStateListForChar(r,n)}return rw.min(r,(t,e)=>t.getBitCount()-e.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,e){let r=[];for(let n of t)this.updateStateForChar(n,e,r);return rN.simplifyStates(r)}updateStateForChar(t,e,r){let n=255&this.text[e],i=rv[t.getMode()][n]>0,s=null;for(let o=0;o<=4;o++){let a=rv[o][n];if(a>0){if(null==s&&(s=t.endBinaryShift(e)),!i||o===t.getMode()||2===o){let t=s.latchAndAppend(o,a);r.push(t)}if(!i&&rS[t.getMode()][o]>=0){let t=s.shiftAndAppend(o,a);r.push(t)}}}if(t.getBinaryShiftByteCount()>0||0===rv[t.getMode()][n]){let n=t.addBinaryShiftChar(e);r.push(n)}}static updateStateListForPair(t,e,r){let n=[];for(let i of t)this.updateStateForPair(i,e,r,n);return this.simplifyStates(n)}static updateStateForPair(t,e,r,n){let i=t.endBinaryShift(e);if(n.push(i.latchAndAppend(4,r)),4!==t.getMode()&&n.push(i.shiftAndAppend(4,r)),3===r||4===r){let t=i.latchAndAppend(2,16-r).latchAndAppend(2,1);n.push(t)}if(t.getBinaryShiftByteCount()>0){let r=t.addBinaryShiftChar(e).addBinaryShiftChar(e+1);n.push(r)}}static simplifyStates(t){let e=[];for(let r of t){let t=!0;for(let n of e){if(n.isBetterThanOrEqualTo(r)){t=!1;break}r.isBetterThanOrEqualTo(n)&&(e=e.filter(t=>t!==n))}t&&e.push(r)}return e}}class rR{constructor(){}static encodeBytes(t){return rR.encode(t,rR.DEFAULT_EC_PERCENT,rR.DEFAULT_AZTEC_LAYERS)}static encode(t,e,r){let n,i,s,o,a,l,u=new rN(t).encode(),c=L.truncDivision(u.getSize()*e,100)+11,h=u.getSize()+c;if(r!==rR.DEFAULT_AZTEC_LAYERS){if(n=r<0,(i=Math.abs(r))>(n?rR.MAX_NB_BITS_COMPACT:rR.MAX_NB_BITS))throw new N(G.format("Illegal value %s for layers",r));let t=(s=rR.totalBitsInLayer(i,n))-s%(o=rR.WORD_SIZE[i]);if((a=rR.stuffBits(u,o)).getSize()+c>t||n&&a.getSize()>64*o)throw new N("Data to large for user specified layer")}else{o=0,a=null;for(let t=0;;t++){if(t>rR.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(i=(n=t<=3)?t+1:t,h>(s=rR.totalBitsInLayer(i,n)))continue;(null==a||o!==rR.WORD_SIZE[i])&&(o=rR.WORD_SIZE[i],a=rR.stuffBits(u,o));let e=s-s%o;if(!(n&&a.getSize()>64*o)&&a.getSize()+c<=e)break}}let d=rR.generateCheckWords(a,s,o),f=a.getSize()/o,g=rR.generateModeMessage(n,i,f),p=(n?11:14)+4*i,m=new Int32Array(p);if(n){l=p;for(let t=0;t<m.length;t++)m[t]=t}else{l=p+1+2*L.truncDivision(L.truncDivision(p,2)-1,15);let t=L.truncDivision(p,2),e=L.truncDivision(l,2);for(let r=0;r<t;r++){let n=r+L.truncDivision(r,15);m[t-r-1]=e-n-1,m[t+r]=e+n+1}}let w=new Q(l);for(let t=0,e=0;t<i;t++){let r=(i-t)*4+(n?9:12);for(let n=0;n<r;n++){let i=2*n;for(let s=0;s<2;s++)d.get(e+i+s)&&w.set(m[2*t+s],m[2*t+n]),d.get(e+2*r+i+s)&&w.set(m[2*t+n],m[p-1-2*t-s]),d.get(e+4*r+i+s)&&w.set(m[p-1-2*t-s],m[p-1-2*t-n]),d.get(e+6*r+i+s)&&w.set(m[p-1-2*t-n],m[2*t+s])}e+=8*r}if(rR.drawModeMessage(w,n,l,g),n)rR.drawBullsEye(w,L.truncDivision(l,2),5);else{rR.drawBullsEye(w,L.truncDivision(l,2),7);for(let t=0,e=0;t<L.truncDivision(p,2)-1;t+=15,e+=16)for(let t=1&L.truncDivision(l,2);t<l;t+=2)w.set(L.truncDivision(l,2)-e,t),w.set(L.truncDivision(l,2)+e,t),w.set(t,L.truncDivision(l,2)-e),w.set(t,L.truncDivision(l,2)+e)}let y=new rm;return y.setCompact(n),y.setSize(l),y.setLayers(i),y.setCodeWords(f),y.setMatrix(w),y}static drawBullsEye(t,e,r){for(let n=0;n<r;n+=2)for(let r=e-n;r<=e+n;r++)t.set(r,e-n),t.set(r,e+n),t.set(e-n,r),t.set(e+n,r);t.set(e-r,e-r),t.set(e-r+1,e-r),t.set(e-r,e-r+1),t.set(e+r,e-r),t.set(e+r,e-r+1),t.set(e+r,e+r-1)}static generateModeMessage(t,e,r){let n=new k;return t?(n.appendBits(e-1,2),n.appendBits(r-1,6),n=rR.generateCheckWords(n,28,4)):(n.appendBits(e-1,5),n.appendBits(r-1,11),n=rR.generateCheckWords(n,40,4)),n}static drawModeMessage(t,e,r,n){let i=L.truncDivision(r,2);if(e)for(let e=0;e<7;e++){let r=i-3+e;n.get(e)&&t.set(r,i-5),n.get(e+7)&&t.set(i+5,r),n.get(20-e)&&t.set(r,i+5),n.get(27-e)&&t.set(i-5,r)}else for(let e=0;e<10;e++){let r=i-5+e+L.truncDivision(e,5);n.get(e)&&t.set(r,i-7),n.get(e+10)&&t.set(i+7,r),n.get(29-e)&&t.set(r,i+7),n.get(39-e)&&t.set(i-7,r)}}static generateCheckWords(t,e,r){let n=t.getSize()/r,i=new rr(rR.getGF(r)),s=L.truncDivision(e,r),o=rR.bitsToWords(t,r,s);i.encode(o,s-n);let a=e%r,l=new k;for(let t of(l.appendBits(0,a),Array.from(o)))l.appendBits(t,r);return l}static bitsToWords(t,e,r){let n,i,s=new Int32Array(r);for(n=0,i=t.getSize()/e;n<i;n++){let r=0;for(let i=0;i<e;i++)r|=t.get(n*e+i)?1<<e-i-1:0;s[n]=r}return s}static getGF(t){switch(t){case 4:return tl.AZTEC_PARAM;case 6:return tl.AZTEC_DATA_6;case 8:return tl.AZTEC_DATA_8;case 10:return tl.AZTEC_DATA_10;case 12:return tl.AZTEC_DATA_12;default:throw new N("Unsupported word size "+t)}}static stuffBits(t,e){let r=new k,n=t.getSize(),i=(1<<e)-2;for(let s=0;s<n;s+=e){let o=0;for(let r=0;r<e;r++)(s+r>=n||t.get(s+r))&&(o|=1<<e-1-r);(o&i)===i?(r.appendBits(o&i,e),s--):(o&i)==0?(r.appendBits(1|o,e),s--):r.appendBits(o,e)}return r}static totalBitsInLayer(t,e){return((e?88:112)+16*t)*t}}rR.DEFAULT_EC_PERCENT=33,rR.DEFAULT_AZTEC_LAYERS=0,rR.MAX_NB_BITS=32,rR.MAX_NB_BITS_COMPACT=4,rR.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class rO{encode(t,e,r,n){return this.encodeWithHints(t,e,r,n,null)}encodeWithHints(t,e,r,n,i){let s=rp.ISO_8859_1,o=rR.DEFAULT_EC_PERCENT,a=rR.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(re.CHARACTER_SET)&&(s=rg.forName(i.get(re.CHARACTER_SET).toString())),i.has(re.ERROR_CORRECTION)&&(o=L.parseInt(i.get(re.ERROR_CORRECTION).toString())),i.has(re.AZTEC_LAYERS)&&(a=L.parseInt(i.get(re.AZTEC_LAYERS).toString()))),rO.encodeLayers(t,e,r,n,s,o,a)}static encodeLayers(t,e,r,n,i,s,o){if(e!==tr.AZTEC)throw new N("Can only encode AZTEC, but got "+e);let a=rR.encode(G.getBytes(t,i),s,o);return rO.renderResult(a,r,n)}static renderResult(t,e,r){let n=t.getMatrix();if(null==n)throw new tc;let i=n.getWidth(),s=n.getHeight(),o=Math.max(e,i),a=Math.max(r,s),l=Math.min(o/i,a/s),u=(o-i*l)/2,c=(a-s*l)/2,h=new Q(o,a);for(let t=0,e=c;t<s;t++,e+=l)for(let r=0,s=u;r<i;r++,s+=l)n.get(r,t)&&h.setRegion(s,e,l,l);return h}}t.AbstractExpandedDecoder=t$,t.ArgumentException=v,t.ArithmeticException=ta,t.AztecCode=rm,t.AztecCodeReader=tS,t.AztecCodeWriter=rO,t.AztecDecoder=td,t.AztecDetector=t_,t.AztecDetectorResult=tw,t.AztecEncoder=rR,t.AztecHighLevelEncoder=rN,t.AztecPoint=tI,t.BarcodeFormat=tr,t.Binarizer=D,t.BinaryBitmap=R,t.BitArray=k,t.BitMatrix=Q,t.BitSource=ed,t.BrowserAztecCodeReader=class extends tt{constructor(t=500){super(new tS,t)}},t.BrowserBarcodeReader=class extends tt{constructor(t=500,e){super(new eo(e),t,e)}},t.BrowserCodeReader=tt,t.BrowserDatamatrixCodeReader=class extends tt{constructor(t=500){super(new em,t)}},t.BrowserMultiFormatReader=class extends tt{constructor(t=null,e=500){let r=new rt;r.setHints(t),super(r,e)}decodeBitmap(t){return this.reader.decodeWithState(t)}},t.BrowserPDF417Reader=class extends tt{constructor(t=500){super(new e7,t)}},t.BrowserQRCodeReader=class extends tt{constructor(t=500){super(new eP,t)}},t.BrowserQRCodeSvgWriter=rc,t.CharacterSetECI=H,t.ChecksumException=O,t.Code128Reader=tv,t.Code39Reader=tN,t.DataMatrixDecodedBitStreamParser=ef,t.DataMatrixReader=em,t.DecodeHintType=F,t.DecoderResult=ti,t.DefaultGridSampler=tb,t.DetectorResult=tm,t.EAN13Reader=tP,t.EncodeHintType=re,t.Exception=T,t.FormatException=U,t.GenericGF=tl,t.GenericGFPoly=to,t.GlobalHistogramBinarizer=Y,t.GridSampler=tA,t.GridSamplerInstance=tC,t.HTMLCanvasElementLuminanceSource=Z,t.HybridBinarizer=X,t.ITFReader=tR,t.IllegalArgumentException=N,t.IllegalStateException=tc,t.InvertedLuminanceSource=K,t.LuminanceSource=q,t.MathUtils=tf,t.MultiFormatOneDReader=eo,t.MultiFormatReader=rt,t.MultiFormatWriter=class{encode(t,e,r,n,i){let s;if(e===tr.QR_CODE)s=new rh;else throw new N("No encoder available for format "+e);return s.encode(t,e,r,n,i)}},t.NotFoundException=W,t.OneDReader=tT,t.PDF417DecodedBitStreamParser=e6,t.PDF417DecoderErrorCorrection=ez,t.PDF417Reader=e7,t.PDF417ResultMetadata=eJ,t.PerspectiveTransform=tE,t.PlanarYUVLuminanceSource=rd,t.QRCodeByteMatrix=ri,t.QRCodeDataMask=eC,t.QRCodeDecodedBitStreamParser=eT,t.QRCodeDecoderErrorCorrectionLevel=ew,t.QRCodeDecoderFormatInformation=ey,t.QRCodeEncoder=ru,t.QRCodeEncoderQRCode=rs,t.QRCodeMaskUtil=rn,t.QRCodeMatrixUtil=ra,t.QRCodeMode=eS,t.QRCodeReader=eP,t.QRCodeVersion=eb,t.QRCodeWriter=rh,t.RGBLuminanceSource=rf,t.RSS14Reader=es,t.RSSExpandedReader=en,t.ReaderException=e9,t.ReedSolomonDecoder=th,t.ReedSolomonEncoder=rr,t.ReedSolomonException=tu,t.Result=te,t.ResultMetadataType=tn,t.ResultPoint=tp,t.StringUtils=G,t.UnsupportedOperationException=V,t.VideoInputDevice=J,t.WhiteRectangleDetector=ty,t.WriterException=ro,t.ZXingArrays=P,t.ZXingCharset=rg,t.ZXingInteger=L,t.ZXingStandardCharsets=rp,t.ZXingStringBuilder=j,t.ZXingStringEncoding=z,t.ZXingSystem=M,t.createAbstractExpandedDecoder=et,Object.defineProperty(t,"__esModule",{value:!0})})(on);var oi=function(){function t(t,e,r){if(this.formatMap=new Map([[v.QR_CODE,on.BarcodeFormat.QR_CODE],[v.AZTEC,on.BarcodeFormat.AZTEC],[v.CODABAR,on.BarcodeFormat.CODABAR],[v.CODE_39,on.BarcodeFormat.CODE_39],[v.CODE_93,on.BarcodeFormat.CODE_93],[v.CODE_128,on.BarcodeFormat.CODE_128],[v.DATA_MATRIX,on.BarcodeFormat.DATA_MATRIX],[v.MAXICODE,on.BarcodeFormat.MAXICODE],[v.ITF,on.BarcodeFormat.ITF],[v.EAN_13,on.BarcodeFormat.EAN_13],[v.EAN_8,on.BarcodeFormat.EAN_8],[v.PDF_417,on.BarcodeFormat.PDF_417],[v.RSS_14,on.BarcodeFormat.RSS_14],[v.RSS_EXPANDED,on.BarcodeFormat.RSS_EXPANDED],[v.UPC_A,on.BarcodeFormat.UPC_A],[v.UPC_E,on.BarcodeFormat.UPC_E],[v.UPC_EAN_EXTENSION,on.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!on)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=e,this.logger=r;var n=this.createZXingFormats(t),i=new Map;i.set(on.DecodeHintType.POSSIBLE_FORMATS,n),i.set(on.DecodeHintType.TRY_HARDER,!1),this.hints=i}return t.prototype.decodeAsync=function(t){var e=this;return new Promise(function(r,n){try{r(e.decode(t))}catch(t){n(t)}})},t.prototype.decode=function(t){var e=new on.MultiFormatReader(this.verbose,this.hints),r=new on.HTMLCanvasElementLuminanceSource(t),n=new on.BinaryBitmap(new on.HybridBinarizer(r)),i=e.decode(n);return{text:i.text,format:s4.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(e,r,n){t.set(e,r)}),t},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},t.prototype.createZXingFormats=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];this.formatMap.has(n)?e.push(this.formatMap.get(n)):this.logger.logError("".concat(n," is not supported by")+"ZXingHtml5QrcodeShim")}return e},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),os=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},oo=function(){function t(e,r,n){if(this.formatMap=new Map([[v.QR_CODE,"qr_code"],[v.AZTEC,"aztec"],[v.CODABAR,"codabar"],[v.CODE_39,"code_39"],[v.CODE_93,"code_93"],[v.CODE_128,"code_128"],[v.DATA_MATRIX,"data_matrix"],[v.ITF,"itf"],[v.EAN_13,"ean_13"],[v.EAN_8,"ean_8"],[v.PDF_417,"pdf417"],[v.UPC_A,"upc_a"],[v.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){return"BarcodeDetector"in window&&(new BarcodeDetector({formats:["qr_code"]}),!0)},t.prototype.decodeAsync=function(t){var e,r,n,i;return e=this,r=void 0,n=void 0,i=function(){var e,r;return os(this,function(n){switch(n.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(e=n.sent())||0===e.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(e)).rawValue,format:s4.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})},new(n||(n=Promise))(function(t,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n(function(t){t(r)})).then(o,a)}l((i=i.apply(e,r||[])).next())})},t.prototype.selectLargestBarcode=function(t){for(var e=null,r=0,n=0;n<t.length;n++){var i=t[n],s=i.boundingBox.width*i.boundingBox.height;s>r&&(r=s,e=i)}if(!e)throw"No largest barcode found";return e},t.prototype.createBarcodeDetectorFormats=function(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];this.formatMap.has(n)?e.push(this.formatMap.get(n)):this.logger.warn("".concat(n," is not supported by")+"BarcodeDetectorDelegate")}return{formats:e}},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(e,r,n){t.set(e,r)}),t},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),oa=function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})},ol=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},ou=function(){function t(t,e,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,e&&oo.isSupported()?(this.primaryDecoder=new oo(t,r,n),this.secondaryDecoder=new oi(t,r,n)):this.primaryDecoder=new oi(t,r,n)}return t.prototype.decodeAsync=function(t){return oa(this,void 0,void 0,function(){var e;return ol(this,function(r){switch(r.label){case 0:e=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(e),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(t){return oa(this,void 0,void 0,function(){var e,r;return ol(this,function(n){switch(n.label){case 0:e=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(e),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(t){if(this.verbose){var e=performance.now()-t;this.executionResults.push(e),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,e=0,r=this.executionResults;e<r.length;e++)t+=r[e];var n=t/this.executionResults.length;console.log("".concat(n," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),oc=(I=function(t,e){return(I=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),oh=function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})},od=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},of=function(){function t(t,e){this.name=t,this.track=e}return t.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},t.prototype.apply=function(t){var e={};return e[this.name]=t,this.track.applyConstraints({advanced:[e]})},t.prototype.value=function(){var t=this.track.getSettings();return this.name in t?t[this.name]:null},t}(),og=function(t){function e(e){return t.call(this,"zoom",e)||this}return oc(e,t),e}(function(t){function e(e,r){return t.call(this,e,r)||this}return oc(e,t),e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var e={};return e[this.name]=t,this.track.applyConstraints({advanced:[e]})},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities()[this.name];return{min:t.min,max:t.max,step:t.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw Error("".concat(this.name," capability not supported"))},e}(of)),op=function(t){function e(e){return t.call(this,"torch",e)||this}return oc(e,t),e}(of),om=function(){function t(t){this.track=t}return t.prototype.zoomFeature=function(){return new og(this.track)},t.prototype.torchFeature=function(){return new op(this.track)},t}(),ow=function(){function t(t,e,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=e,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return t.prototype.createVideoElement=function(t){var e=document.createElement("video");return e.style.width="".concat(t,"px"),e.style.display="block",e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},t.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var e=function(){var r=t.surface.clientWidth,n=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,n),t.surface.removeEventListener("playing",e)};this.surface.addEventListener("playing",e),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,r,n,i){return oh(this,void 0,void 0,function(){var s,o;return od(this,function(a){switch(a.label){case 0:if(s=new t(e,r,i),!n.aspectRatio)return[3,2];return o={aspectRatio:n.aspectRatio},[4,s.getFirstTrackOrFail().applyConstraints(o)];case 1:a.sent(),a.label=2;case 2:return s.setupSurface(),[2,s]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(t){this.failIfClosed();var e=this,r=function(){setTimeout(t,200),e.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(t){return oh(this,void 0,void 0,function(){return od(this,function(e){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(e,r){var n=t.mediaStream.getVideoTracks().length,i=0;t.mediaStream.getVideoTracks().forEach(function(r){t.mediaStream.removeTrack(r),r.stop(),++i>=n&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),e())})})},t.prototype.getCapabilities=function(){return new om(this.getFirstTrackOrFail())},t}(),oy=function(){function t(t){this.mediaStream=t}return t.prototype.render=function(t,e,r){return oh(this,void 0,void 0,function(){return od(this,function(n){return[2,ow.create(t,this.mediaStream,e,r)]})})},t.create=function(e){return oh(this,void 0,void 0,function(){var r;return od(this,function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return[2,new t(n.sent())]}})})},t}(),oA=function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})},oE=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},ob=function(){function t(){}return t.failIfNotSupported=function(){return oA(this,void 0,void 0,function(){return oE(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(t){return oA(this,void 0,void 0,function(){return oE(this,function(e){return[2,oy.create(t)]})})},t}(),oC=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},oI=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=s9.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=s9.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},t.getCamerasFromMediaDevices=function(){var t,e,r,n;return t=this,e=void 0,r=void 0,n=function(){var t,e,r,n,i,s,o;return oC(this,function(a){switch(a.label){case 0:return t=function(t){for(var e=t.getVideoTracks(),r=0;r<e.length;r++){var n=e[r];n.enabled=!1,n.stop(),t.removeTrack(n)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return e=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=0,r=a.sent(),n=[],s=r;i<s.length;i++)"videoinput"===(o=s[i]).kind&&n.push({id:o.deviceId,label:o.label});return t(e),[2,n]}})},new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,e){MediaStreamTrack.getSources(function(e){for(var r=[],n=0;n<e.length;n++){var i=e[n];"video"===i.kind&&r.push({id:i.id,label:i.label})}t(r)})})},t}();(_=D||(D={}))[_.UNKNOWN=0]="UNKNOWN",_[_.NOT_STARTED=1]="NOT_STARTED",_[_.SCANNING=2]="SCANNING",_[_.PAUSED=3]="PAUSED";var o_=function(){function t(){this.state=D.NOT_STARTED,this.onGoingTransactionNewState=D.UNKNOWN}return t.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},t.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===D.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=D.UNKNOWN,this.directTransition(t)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===D.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=D.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==D.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(t){switch(this.state){case D.UNKNOWN:throw"Transition from unknown is not allowed";case D.NOT_STARTED:this.failIfNewStateIs(t,[D.PAUSED]);case D.SCANNING:case D.PAUSED:}},t.prototype.failIfNewStateIs=function(t,e){for(var r=0;r<e.length;r++)if(t===e[r])throw"Cannot transition from ".concat(this.state," to ").concat(t)},t}(),oS=function(){function t(t){this.stateManager=t}return t.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},t.prototype.directTransition=function(t){this.stateManager.directTransition(t)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===D.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==D.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===D.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===D.PAUSED},t}(),oT=function(){function t(){}return t.create=function(){return new oS(new o_)},t}(),ov=(S=function(t,e){return(S=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),oN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ov(e,t),e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(s3),oR=function(){function t(t,e){this.logger=e,this.fps=oN.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=oN.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?or.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!s7(this.qrbox)},t.create=function(e,r){return new t(e,r)},t}(),oO=function(){function t(t,e){var r;if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1,"boolean"==typeof e?this.verbose=!0===e:e&&(r=e,this.verbose=!0===r.verbose,r.experimentalFeatures),this.logger=new s5(this.verbose),this.qrcode=new ou(this.getSupportedFormats(e),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=oT.create()}return t.prototype.start=function(t,e,r,n){var i,s=this;if(!t)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";i=n||(this.verbose?this.logger.log:function(){});var o=oR.create(e,this.logger);this.clearElement();var a=!1;o.videoConstraints&&(o.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,u=document.getElementById(this.elementId);u.clientWidth?u.clientWidth:oN.DEFAULT_WIDTH,u.style.position="relative",this.shouldScan=!0,this.element=u;var c=this,h=this.stateManagerProxy.startTransition(D.SCANNING);return new Promise(function(e,n){var a=l?o.videoConstraints:c.createVideoConstraints(t);if(!a){h.cancel(),n("videoConstraints should be defined");return}var u={};(!l||o.aspectRatio)&&(u.aspectRatio=o.aspectRatio);var d={onRenderSurfaceReady:function(t,e){c.setupUi(t,e,o),c.isScanning=!0,c.foreverScan(o,r,i)}};ob.failIfNotSupported().then(function(t){t.create(a).then(function(t){return t.render(s.element,u,d).then(function(t){c.renderedCamera=t,h.execute(),e(null)}).catch(function(t){h.cancel(),n(t)})}).catch(function(t){h.cancel(),n(s9.errorGettingUserMedia(t))})}).catch(function(t){h.cancel(),n(s9.cameraStreamingNotSupported())})})},t.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(D.PAUSED),this.showPausedState(),(s7(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,e=function(){t.stateManagerProxy.directTransition(D.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused())return void e();this.renderedCamera.resume(function(){e()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var e=this.stateManagerProxy.startTransition(D.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var e=document.getElementById(oN.SHADED_REGION_ELEMENT_ID);e&&t.element.removeChild(e)}},n=this;return this.renderedCamera.close().then(function(){return n.renderedCamera=null,n.element&&(n.element.removeChild(n.canvasElement),n.canvasElement=null),r(),n.qrRegion&&(n.qrRegion=null),n.context&&(n.context=null),e.execute(),n.hidePausedState(),n.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(t,e){return this.scanFileV2(t,e).then(function(t){return t.decodedText})},t.prototype.scanFileV2=function(t,e){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(s7(e)&&(e=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var s=new Image;s.onload=function(){var t=s.width,o=s.height,a=document.getElementById(r.elementId),l=a.clientWidth?a.clientWidth:oN.DEFAULT_WIDTH,u=Math.max(a.clientHeight?a.clientHeight:o,oN.FILE_SCAN_MIN_HEIGHT),c=r.computeCanvasDrawConfig(t,o,l,u);if(e){var h=r.createCanvasElement(l,u,"qr-canvas-visible");h.style.display="inline-block",a.appendChild(h);var d=h.getContext("2d");if(!d)throw"Unable to get 2d context from canvas";d.canvas.width=l,d.canvas.height=u,d.drawImage(s,0,0,t,o,c.x,c.y,c.width,c.height)}var f=oN.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(s.width,c.width),p=Math.max(s.height,c.height),m=g+2*f,w=p+2*f,y=r.createCanvasElement(m,w);a.appendChild(y);var A=y.getContext("2d");if(!A)throw"Unable to get 2d context from canvas";A.canvas.width=m,A.canvas.height=w,A.drawImage(s,0,0,t,o,f,f,g,p);try{r.qrcode.decodeRobustlyAsync(y).then(function(t){n(s8.createFromQrcodeResult(t))}).catch(i)}catch(t){i("QR code parse error, error = ".concat(t))}},s.onerror=i,s.onabort=i,s.onstalled=i,s.onsuspend=i,s.src=URL.createObjectURL(t)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return oI.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(t){if(t){if(!or.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},t.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(t){var e=[v.QR_CODE,v.AZTEC,v.CODABAR,v.CODE_39,v.CODE_93,v.CODE_128,v.DATA_MATRIX,v.MAXICODE,v.ITF,v.EAN_13,v.EAN_8,v.PDF_417,v.RSS_14,v.RSS_EXPANDED,v.UPC_A,v.UPC_E,v.UPC_EAN_EXTENSION];if(!t||"boolean"==typeof t||!t.formatsToSupport)return e;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,i=t.formatsToSupport;n<i.length;n++){var s=i[n];Object.values(v).includes(s)?r.push(s):this.logger.warn("Invalid format: ".concat(s," passed in config, ignoring."))}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(t){if(s7(t))return!0;if(!s7(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(s7(t.experimentalFeatures))return!0;var e=t.experimentalFeatures;return!!s7(e.useBarCodeDetectorIfSupported)||!1!==e.useBarCodeDetectorIfSupported},t.prototype.validateQrboxSize=function(t,e,r){var n,i=r.qrbox;this.validateQrboxConfig(i);var s=this.toQrdimensions(t,e,i),o=function(t){if(t<oN.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(oN.MIN_QR_BOX_SIZE,"px.")};o(s.width),o(s.height),(n=s.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),n=t),s.width=n},t.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(t,e,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(t,e)}catch(t){throw Error("qrbox config was passed as a function but it failed with unknown error"+t)}return r},t.prototype.setupUi=function(t,e,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,e,r);var n=s7(r.qrbox)?{width:t,height:e}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(t,e,n);i.height>e&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var s=r.isShadedBoxEnabled()&&i.height<=e,o=s?this.getShadedRegionBounds(t,e,i):{x:0,y:0,width:t,height:e},a=this.createCanvasElement(o.width,o.height),l=a.getContext("2d",{willReadFrequently:!0});l.canvas.width=o.width,l.canvas.height=o.height,this.element.append(a),s&&this.possiblyInsertShadingElement(this.element,t,e,i),this.createScannerPausedUiElement(this.element),this.qrRegion=o,this.context=l,this.canvasElement=a},t.prototype.createScannerPausedUiElement=function(t){var e=document.createElement("div");e.innerText=s9.scannerPaused(),e.style.display="none",e.style.position="absolute",e.style.top="0px",e.style.zIndex="1",e.style.background="rgba(9, 9, 9, 0.46)",e.style.color="#FFECEC",e.style.textAlign="center",e.style.width="100%",t.appendChild(e),this.scannerPausedUiElement=e},t.prototype.scanContext=function(t,e){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(e){return t(e.text,s8.createFromQrcodeResult(e)),r.possiblyUpdateShaders(!0),!0}).catch(function(t){r.possiblyUpdateShaders(!1);var n=s9.codeParseError(t);return e(n,s6.createFrom(n)),!1})},t.prototype.foreverScan=function(t,e,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),s=i.videoWidth/i.clientWidth,o=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*s,l=this.qrRegion.height*o,u=this.qrRegion.x*s,c=this.qrRegion.y*o;this.context.drawImage(i,u,c,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var h=function(){n.foreverScanTimeout=setTimeout(function(){n.foreverScan(t,e,r)},n.getTimeoutFps(t.fps))};this.scanContext(e,r).then(function(i){i||!0===t.disableFlip?h():(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(e,r).finally(function(){h()}))}).catch(function(t){n.logger.logError("Error happend while scanning context",t),h()})}},t.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var e="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",s=function(t){if(t in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(t,"'")},o=Object.keys(t);if(1!==o.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(o.length," keys");var a=Object.keys(t)[0];if(a!==e&&a!==r)throw"Only '".concat(e,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(a===e){var l=t.facingMode;if("string"==typeof l){if(s(l))return{facingMode:l}}else if("object"==typeof l)if(i in l){if(s(l["".concat(i)]))return{facingMode:{exact:l["".concat(i)]}}}else throw"'facingMode' should be string or object with"+" ".concat(i," as key.");else{var u=typeof l;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var c=t.deviceId;if("string"==typeof c)return{deviceId:c};if("object"==typeof c)if(i in c)return{deviceId:{exact:c["".concat(i)]}};else throw"'deviceId' should be string or object with"+" ".concat(i," as key.");var h=typeof c;throw"Invalid type of 'deviceId' = ".concat(h)}}var d=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(d)},t.prototype.computeCanvasDrawConfig=function(t,e,r,n){if(t<=r&&e<=n)return{x:(r-t)/2,y:(n-e)/2,width:t,height:e};var i=t,s=e;return t>r&&(e=r/t*e,t=r),e>n&&(t=n/e*t,e=n),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(s)+" to ".concat(t,"X").concat(e,".")),this.computeCanvasDrawConfig(t,e,r,n)},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},t.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(e){e.style.backgroundColor=t?oN.BORDER_SHADER_MATCH_COLOR:oN.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(t,e,r){var n=document.createElement("canvas");return n.style.width="".concat(t,"px"),n.style.height="".concat(e,"px"),n.style.display="none",n.id=s7(r)?"qr-canvas":r,n},t.prototype.getShadedRegionBounds=function(t,e,r){if(r.width>t||r.height>e)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(e-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(t,e,r,n){if(!(e-n.width<1)&&!(r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var s=(e-n.width)/2,o=(r-n.height)/2;i.style.borderLeft="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(oN.SHADED_REGION_ELEMENT_ID),e-n.width<11||r-n.height<11?this.hasBorderShaders=!1:(this.insertShaderBorders(i,40,5,-5,null,0,!0),this.insertShaderBorders(i,40,5,-5,null,0,!1),this.insertShaderBorders(i,40,5,null,-5,0,!0),this.insertShaderBorders(i,40,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0),t.append(i)}},t.prototype.insertShaderBorders=function(t,e,r,n,i,s,o){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=oN.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(e,"px"),a.style.height="".concat(r,"px"),null!==n&&(a.style.top="".concat(n,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),o?a.style.left="".concat(s,"px"):a.style.right="".concat(s,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),t.appendChild(a)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(t){return 1e3/t},t}(),oD="data:image/svg+xml;base64,",oM=oD+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ox=oD+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",oB=oD+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",oP=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),oL=function(){function t(){this.data=oP.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},t.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=oP.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),ok=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=oe.poweredBy();var e=document.createElement("a");e.innerText="ScanApp",e.href="https://scanapp.org",e.target="new",e.style.color="white",this.infoDiv.appendChild(e);var r=document.createElement("br"),n=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(n);var i=document.createElement("a");i.innerText=oe.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),t.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),oF=function(){function t(t,e){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=e,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(t){var e=this;this.infoIcon.alt="Info icon",this.infoIcon.src=oB,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(t){return e.onHoverIn()},this.infoIcon.onmouseout=function(t){return e.onHoverOut()},this.infoIcon.onclick=function(t){return e.onClick()},t.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=oB,this.infoIcon.style.opacity="0.6")},t}(),oU=function(){function t(){var t=this;this.infoDiv=new ok,this.infoIcon=new oF(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return t.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},t}(),oH=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},oV=function(){function t(){}return t.hasPermissions=function(){var t,e,r,n;return t=this,e=void 0,r=void 0,n=function(){var t,e,r;return oH(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=0,e=n.sent();t<e.length;t++)if("videoinput"===(r=e[t]).kind&&r.label)return[2,!0];return[2,!1]}})},new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})},t}(),oz=function(){function t(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,r=this.supportedScanTypes;e<r.length;e++){var n=r[e];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(t){return t===R.SCAN_TYPE_CAMERA},t.isFileScanType=function(t){return t===R.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return s3.DEFAULT_SUPPORTED_SCAN_TYPE;var e=s3.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>e)throw"Max ".concat(e," values expected for ")+"supportedScanTypes";for(var r=0;r<t.length;r++){var n=t[r];if(!s3.DEFAULT_SUPPORTED_SCAN_TYPE.includes(n))throw"Unsupported scan type ".concat(n)}return t},t}(),oG=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),oj=function(){function t(){}return t.createElement=function(t,e){var r=document.createElement(t);return r.id=e,r.classList.add(oG.ALL_ELEMENT_CLASS),"button"===t&&r.setAttribute("type","button"),r},t}(),oQ=function(t,e,r,n){return new(r||(r=Promise))(function(i,s){function o(t){try{l(n.next(t))}catch(t){s(t)}}function a(t){try{l(n.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?i(t.value):((e=t.value)instanceof r?e:new r(function(t){t(e)})).then(o,a)}l((n=n.apply(t,e||[])).next())})},oW=function(t,e){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){var u=[a,l];if(r)throw TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&u[0]?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===u[0]||2===u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(t,o)}catch(t){u=[6,t],n=0}finally{r=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}},oY=function(){function t(t,e,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=r}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return oQ(this,void 0,void 0,function(){var t,e;return oW(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return e=r.sent(),this.propagateFailure(t,e),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(t,e){t===e?(this.buttonController.setText(e?ot.torchOffButton():ot.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()},t.prototype.propagateFailure=function(t,e){var r=t?ot.torchOnFailedMessage():ot.torchOffFailedMessage();e&&(r+="; Error = "+e),this.onTorchActionFailureCallback(r)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),oX=function(){function t(t,e){this.onTorchActionFailureCallback=e,this.torchButton=oj.createElement("button",oG.TORCH_BUTTON_ID),this.torchController=new oY(t,this,e)}return t.prototype.render=function(t,e){var r=this;this.torchButton.innerText=ot.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;var n=this;this.torchButton.addEventListener("click",function(t){return oQ(r,void 0,void 0,function(){return oW(this,function(t){switch(t.label){case 0:return[4,n.torchController.flipState()];case 1:return t.sent(),n.torchController.isTorchEnabled()?(n.torchButton.classList.remove(oG.TORCH_BUTTON_CLASS_TORCH_OFF),n.torchButton.classList.add(oG.TORCH_BUTTON_CLASS_TORCH_ON)):(n.torchButton.classList.remove(oG.TORCH_BUTTON_CLASS_TORCH_ON),n.torchButton.classList.add(oG.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(t){this.torchController=new oY(t,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(t){this.torchButton.innerText=t},t.prototype.reset=function(){this.torchButton.innerText=ot.torchOnButton(),this.torchController.reset()},t.create=function(e,r,n,i){var s=new t(r,i);return s.render(e,n),s},t}(),oq=function(){function t(t,e,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=e?"block":"none",t.appendChild(this.fileBasedScanRegion);var n=document.createElement("label");n.setAttribute("for",this.getFileScanInputId()),n.style.display="inline-block",this.fileBasedScanRegion.appendChild(n),this.fileSelectionButton=oj.createElement("button",oG.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(t){n.click()}),n.append(this.fileSelectionButton),this.fileScanInput=oj.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",n.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",function(t){if(null!=t&&null!=t.target){var e=t.target;if(!e.files||0!==e.files.length){var n=e.files[0],s=n.name;i.setImageNameToButton(s),r(n)}}});var s=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(s),this.fileBasedScanRegion.addEventListener("dragenter",function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),t.stopPropagation(),t.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(t){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var e=t.dataTransfer;if(e){var n=e.files;if(!n||0===n.length)return;for(var o=!1,a=0;a<n.length;++a){var l=n.item(a);if(l){var u=/image.*/;if(l.type.match(u)){o=!0;var c=l.name;i.setImageNameToButton(c),r(l),s.innerText=ot.dragAndDropMessage();break}}}o||(s.innerText=ot.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=ot.dragAndDropMessage(),t.style.fontWeight="400",t},t.prototype.setImageNameToButton=function(t){if(t.length>20){var e=t.substring(0,8),r=t.length,n=t.substring(r-8,r);t="".concat(e,"....").concat(n)}var i=ot.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=i},t.prototype.setInitialValueToButton=function(){var t=ot.fileSelectionChooseImage()+" - "+ot.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,r,n){return new t(e,r,n)},t}(),oK=function(){function t(t){this.selectElement=oj.createElement("select",oG.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return t.prototype.render=function(t){var e=document.createElement("span");e.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw Error("No cameras found");if(1===r)e.style.display="none";else{var n=ot.selectCamera();e.innerText="".concat(n," (").concat(this.cameras.length,")  ")}for(var i=1,s=0,o=this.cameras;s<o.length;s++){var a=o[s],l=a.id,u=null==a.label?l:a.label;u&&""!==u||(u=[ot.anonymousCameraPrefix(),i++].join(" "));var c=document.createElement("option");c.value=l,c.innerText=u,this.options.push(c),this.selectElement.appendChild(c)}e.appendChild(this.selectElement),t.appendChild(e)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return!0===this.selectElement.disabled},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(t){for(var e=0,r=this.options;e<r.length;e++)if(r[e].value===t)return!0;return!1},t.prototype.setValue=function(t){if(!this.hasValue(t))throw Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},t.prototype.hasSingleItem=function(){return 1===this.cameras.length},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,r){var n=new t(r);return n.render(e),n},t}(),oZ=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=oj.createElement("input",oG.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(t,e){this.zoomElementContainer.style.display=e?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var n=this;this.rangeInput.addEventListener("input",function(){return n.onValueChange()}),this.rangeInput.addEventListener("change",function(){return n.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var t=ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(t,e,r,n){this.rangeInput.min=t.toString(),this.rangeInput.max=e.toString(),this.rangeInput.step=n.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,r){var n=new t;return n.render(e,r),n},t}();function oJ(t,e,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(e),this.verbose=!0===r,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new oz(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new s5(this.verbose),this.persistedDataManager=new oL,!0!==e.rememberLastUsedCamera&&this.persistedDataManager.reset()}(T=M||(M={}))[T.STATUS_DEFAULT=0]="STATUS_DEFAULT",T[T.STATUS_SUCCESS=1]="STATUS_SUCCESS",T[T.STATUS_WARNING=2]="STATUS_WARNING",T[T.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",oJ.prototype.render=function(t,e){var r,n,i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(e,r){if(t)t(e,r);else{if(i.lastMatchFound===e)return;i.lastMatchFound=e,i.setHeaderMessage(ot.lastMatch(e),M.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(t,r){e&&e(t,r)};var s=document.getElementById(this.elementId);if(!s)throw"HTML Element with id=".concat(this.elementId," not found");s.innerHTML="",this.createBasicLayout(s),this.html5Qrcode=new oO(this.getScanRegionId(),(r=this.config,n=this.verbose,{formatsToSupport:r.formatsToSupport,useBarCodeDetectorIfSupported:r.useBarCodeDetectorIfSupported,experimentalFeatures:r.experimentalFeatures,verbose:n}))},oJ.prototype.pause=function(t){(s7(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},oJ.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},oJ.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},oJ.prototype.clear=function(){var t=this,e=function(){var e=document.getElementById(t.elementId);e&&(e.innerHTML="",t.resetBasicLayout(e))};return this.html5Qrcode?new Promise(function(r,n){if(!t.html5Qrcode)return void r();t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(n){if(!t.html5Qrcode)return void r();t.html5Qrcode.clear(),e(),r()}).catch(function(e){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",e),n(e)}):(t.html5Qrcode.clear(),e(),r())}):Promise.resolve()},oJ.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},oJ.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},oJ.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},oJ.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},oJ.prototype.createConfig=function(t){return t?(t.fps||(t.fps=s3.SCAN_DEFAULT_FPS),!s3.DEFAULT_REMEMBER_LAST_CAMERA_USED!==t.rememberLastUsedCamera&&(t.rememberLastUsedCamera=s3.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=s3.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:s3.SCAN_DEFAULT_FPS,rememberLastUsedCamera:s3.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:s3.DEFAULT_SUPPORTED_SCAN_TYPE}},oJ.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var e=document.createElement("div");e.id=this.getScanRegionId(),e.style.width="100%",e.style.minHeight="100px",e.style.textAlign="center",t.appendChild(e),oz.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div");r.id=this.getDashboardId(),r.style.width="100%",t.appendChild(r),this.setupInitialDashboard(r)},oJ.prototype.resetBasicLayout=function(t){t.style.border="none"},oJ.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},oJ.prototype.createHeader=function(t){var e=document.createElement("div");e.style.textAlign="left",e.style.margin="0px",t.appendChild(e),new oU().renderInto(e);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",e.appendChild(r)},oJ.prototype.createSection=function(t){var e=document.createElement("div");e.id=this.getDashboardSectionId(),e.style.width="100%",e.style.padding="10px 0px 10px 0px",e.style.textAlign="left",t.appendChild(e)},oJ.prototype.createCameraListUi=function(t,e,r){var n=this;n.showHideScanTypeSwapLink(!1),n.setHeaderMessage(ot.cameraPermissionRequesting());var i=function(){r||n.createPermissionButton(t,e)};oO.getCameras().then(function(r){n.persistedDataManager.setHasPermission(!0),n.showHideScanTypeSwapLink(!0),n.resetHeaderMessage(),r&&r.length>0?(t.removeChild(e),n.renderCameraSelection(r)):(n.setHeaderMessage(ot.noCameraFound(),M.STATUS_WARNING),i())}).catch(function(t){n.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:i(),n.setHeaderMessage(t,M.STATUS_WARNING),n.showHideScanTypeSwapLink(!0)})},oJ.prototype.createPermissionButton=function(t,e){var r=this,n=oj.createElement("button",this.getCameraPermissionButtonId());n.innerText=ot.cameraPermissionTitle(),n.addEventListener("click",function(){n.disabled=!0,r.createCameraListUi(t,e,n)}),e.appendChild(n)},oJ.prototype.createPermissionsUi=function(t,e){var r=this;if(oz.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions())return void oV.hasPermissions().then(function(n){n?r.createCameraListUi(t,e):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,e))}).catch(function(n){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,e)});this.createPermissionButton(t,e)},oJ.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),e=document.createElement("div");t.appendChild(e);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=oz.isCameraScanType(this.currentScanType)?"block":"none",e.appendChild(r);var n=document.createElement("div");n.style.textAlign="center",r.appendChild(n),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,n),this.renderFileScanUi(e)},oJ.prototype.renderFileScanUi=function(t){var e=oz.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=oq.create(t,e,function(t){if(!r.html5Qrcode)throw"html5Qrcode not defined";oz.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(ot.loadingImage()),r.html5Qrcode.scanFileV2(t,!0).then(function(t){r.resetHeaderMessage(),r.qrCodeSuccessCallback(t.decodedText,t)}).catch(function(t){r.setHeaderMessage(t,M.STATUS_WARNING),r.qrCodeErrorCallback(t,s6.createFrom(t))}))})},oJ.prototype.renderCameraSelection=function(t){var e,r=this,n=this,i=document.getElementById(this.getDashboardSectionCameraScanRegionId());i.style.textAlign="center";var s=oZ.create(i,!1),o=function(t){var e=t.zoomFeature();if(e.isSupported()){s.setOnCameraZoomValueChangeCallback(function(t){e.apply(t)});var n,i,o,a=1;r.config.defaultZoomValueIfSupported&&(a=r.config.defaultZoomValueIfSupported),n=a,i=e.min(),a=n>(o=e.max())?o:n<i?i:n,s.setValues(e.min(),e.max(),a,e.step()),s.show()}},a=oK.create(i,t),l=document.createElement("span"),u=oj.createElement("button",oG.CAMERA_START_BUTTON_ID);u.innerText=ot.scanButtonStartScanningText(),l.appendChild(u);var c=oj.createElement("button",oG.CAMERA_STOP_BUTTON_ID);c.innerText=ot.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,l.appendChild(c);var h=function(t){if(!t.torchFeature().isSupported()){e&&e.hide();return}e?e.updateTorchCapability(t.torchFeature()):e=oX.create(l,t.torchFeature(),{display:"none",marginLeft:"5px"},function(t){n.setHeaderMessage(t,M.STATUS_WARNING)}),e.show()};i.appendChild(l);var d=function(t){t||(u.style.display="none"),u.innerText=ot.scanButtonStartScanningText(),u.style.opacity="1",u.disabled=!1,t&&(u.style.display="inline-block")};if(u.addEventListener("click",function(t){u.innerText=ot.scanButtonScanningStarting(),a.disable(),u.disabled=!0,u.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var e,i=a.getValue();n.persistedDataManager.setLastUsedCameraId(i),n.html5Qrcode.start(i,{fps:(e=n.config).fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints},n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(t){c.disabled=!1,c.style.display="inline-block",d(!1);var e=n.html5Qrcode.getRunningTrackCameraCapabilities();!0===r.config.showTorchButtonIfSupported&&h(e),!0===r.config.showZoomSliderIfSupported&&o(e)}).catch(function(t){n.showHideScanTypeSwapLink(!0),a.enable(),d(!0),n.setHeaderMessage(t,M.STATUS_WARNING)})}),a.hasSingleItem()&&u.click(),c.addEventListener("click",function(t){if(!n.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,n.html5Qrcode.stop().then(function(t){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),a.enable(),u.disabled=!1,c.style.display="none",u.style.display="inline-block",e&&(e.reset(),e.hide()),s.removeOnCameraZoomValueChangeCallback(),s.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(t){c.disabled=!1,n.setHeaderMessage(t,M.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var f=n.persistedDataManager.getLastUsedCameraId();a.hasValue(f)?(a.setValue(f),u.click()):n.persistedDataManager.resetLastUsedCameraId()}},oJ.prototype.createSectionSwap=function(){var t=this,e=ot.textIfCameraScanSelected(),r=ot.textIfFileScanSelected(),n=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var s=oj.createElement("span",this.getDashboardSectionSwapLinkId());s.style.textDecoration="underline",s.style.cursor="pointer",s.innerText=oz.isCameraScanType(this.currentScanType)?e:r,s.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,oz.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),s.innerText=r,t.currentScanType=R.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),s.innerText=e,t.currentScanType=R.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),i.appendChild(s),n.appendChild(i)},oJ.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,e=this;if(this.persistedDataManager.hasCameraPermissions())return void oV.hasPermissions().then(function(r){if(r){var n=document.getElementById(e.getCameraPermissionButtonId());if(!n)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";n.click()}else e.persistedDataManager.setHasPermission(!1)}).catch(function(t){e.persistedDataManager.setHasPermission(!1)})},oJ.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},oJ.prototype.setHeaderMessage=function(t,e){e||(e=M.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",e){case M.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case M.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case M.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},oJ.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},oJ.prototype.insertCameraScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){e.innerHTML="<br>",e.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){e.innerHTML="<br>",e.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=oM,this.cameraScanImage.alt=ot.cameraScanAltText()},oJ.prototype.insertFileScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.fileScanImage){e.innerHTML="<br>",e.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){e.innerHTML="<br>",e.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ox,this.fileScanImage.alt=ot.fileScanAltText()},oJ.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},oJ.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},oJ.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},oJ.prototype.getDashboardSectionSwapLinkId=function(){return oG.SCAN_TYPE_CHANGE_ANCHOR_ID},oJ.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},oJ.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},oJ.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},oJ.prototype.getCameraPermissionButtonId=function(){return oG.CAMERA_PERMISSION_BUTTON_ID},oJ.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},oJ.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},oJ.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())};var o$={},o1={};o1=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var e=document.activeElement,r=[],n=0;n<t.rangeCount;n++)r.push(t.getRangeAt(n));switch(e.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":e.blur();break;default:e=null}return t.removeAllRanges(),function(){"Caret"===t.type&&t.removeAllRanges(),t.rangeCount||r.forEach(function(e){t.addRange(e)}),e&&e.focus()}};var o0={"text/plain":"Text","text/html":"Url",default:"Text"};o$=function(t,e){var r,n,i,s,o,a,l,u,c=!1;e||(e={}),i=e.debug||!1;try{if(o=o1(),a=document.createRange(),l=document.getSelection(),(u=document.createElement("span")).textContent=t,u.ariaHidden="true",u.style.all="unset",u.style.position="fixed",u.style.top=0,u.style.clip="rect(0, 0, 0, 0)",u.style.whiteSpace="pre",u.style.webkitUserSelect="text",u.style.MozUserSelect="text",u.style.msUserSelect="text",u.style.userSelect="text",u.addEventListener("copy",function(r){if(r.stopPropagation(),e.format)if(r.preventDefault(),void 0===r.clipboardData){i&&console.warn("unable to use e.clipboardData"),i&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var n=o0[e.format]||o0.default;window.clipboardData.setData(n,t)}else r.clipboardData.clearData(),r.clipboardData.setData(e.format,t);e.onCopy&&(r.preventDefault(),e.onCopy(r.clipboardData))}),document.body.appendChild(u),a.selectNodeContents(u),l.addRange(a),!document.execCommand("copy"))throw Error("copy command was unsuccessful");c=!0}catch(o){i&&console.error("unable to copy using execCommand: ",o),i&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(e.format||"text",t),e.onCopy&&e.onCopy(window.clipboardData),c=!0}catch(o){i&&console.error("unable to copy using clipboardData: ",o),i&&console.error("falling back to prompt"),r="message"in e?e.message:"Copy to clipboard: #{key}, Enter",n=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",s=r.replace(/#{\s*key\s*}/g,n),window.prompt(s,t)}}finally{l&&("function"==typeof l.removeRange?l.removeRange(a):l.removeAllRanges()),u&&document.body.removeChild(u),o()}return c};var o2={};y(o2,"create",()=>x,t=>x=t),y(o2,"toCanvas",()=>B,t=>B=t),y(o2,"toDataURL",()=>P,t=>P=t),y(o2,"toString",()=>L,t=>L=t);var o3={};o3=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then};const o4=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];F=function(t){if(!t)throw Error('"version" cannot be null or undefined');if(t<1||t>40)throw Error('"version" should be in range from 1 to 40');return 4*t+17},U=function(t){return o4[t]},H=function(t){let e=0;for(;0!==t;)e++,t>>>=1;return e},V=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');t=e},z=function(){return void 0!==t},G={bit:1},j={bit:0},Q={bit:3},W={bit:2},Y=function(t,e){if(t&&void 0!==t.bit&&t.bit>=0&&t.bit<4)return t;try{if("string"!=typeof t)throw Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return G;case"m":case"medium":return j;case"q":case"quartile":return Q;case"h":case"high":return W;default:throw Error("Unknown EC Level: "+t)}}catch(t){return e}};var o8={};function o6(){this.buffer=[],this.length=0}o6.prototype={get:function(t){let e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1},put:function(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(t){let e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},o8=o6;var o5={};function o7(t){if(!t||t<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}o7.prototype.set=function(t,e,r,n){let i=t*this.size+e;this.data[i]=r,n&&(this.reservedBit[i]=!0)},o7.prototype.get=function(t,e){return this.data[t*this.size+e]},o7.prototype.xor=function(t,e,r){this.data[t*this.size+e]^=r},o7.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]},o5=o7,X=function(t){if(1===t)return[];let e=Math.floor(t/7)+2,r=F(t),n=145===r?26:2*Math.ceil((r-13)/(2*e-2)),i=[r-7];for(let t=1;t<e-1;t++)i[t]=i[t-1]-n;return i.push(6),i.reverse()},q=function(t){let e=[],r=X(t),n=r.length;for(let t=0;t<n;t++)for(let i=0;i<n;i++)(0!==t||0!==i)&&(0!==t||i!==n-1)&&(t!==n-1||0!==i)&&e.push([r[t],r[i]]);return e},K=function(t){let e=F(t);return[[0,0],[e-7,0],[0,e-7]]},Z={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o9={N1:3,N2:3,N3:40,N4:10};J=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7?parseInt(t,10):void 0},$=function(t){let e=t.size,r=0,n=0,i=0,s=null,o=null;for(let a=0;a<e;a++){n=i=0,s=o=null;for(let l=0;l<e;l++){let e=t.get(a,l);e===s?n++:(n>=5&&(r+=o9.N1+(n-5)),s=e,n=1),(e=t.get(l,a))===o?i++:(i>=5&&(r+=o9.N1+(i-5)),o=e,i=1)}n>=5&&(r+=o9.N1+(n-5)),i>=5&&(r+=o9.N1+(i-5))}return r},tt=function(t){let e=t.size,r=0;for(let n=0;n<e-1;n++)for(let i=0;i<e-1;i++){let e=t.get(n,i)+t.get(n,i+1)+t.get(n+1,i)+t.get(n+1,i+1);(4===e||0===e)&&r++}return r*o9.N2},te=function(t){let e=t.size,r=0,n=0,i=0;for(let s=0;s<e;s++){n=i=0;for(let o=0;o<e;o++)n=n<<1&2047|t.get(s,o),o>=10&&(1488===n||93===n)&&r++,i=i<<1&2047|t.get(o,s),o>=10&&(1488===i||93===i)&&r++}return r*o9.N3},tr=function(t){let e=0,r=t.data.length;for(let n=0;n<r;n++)e+=t.data[n];return Math.abs(Math.ceil(100*e/r/5)-10)*o9.N4},tn=function(t,e){let r=e.size;for(let n=0;n<r;n++)for(let i=0;i<r;i++)e.isReserved(i,n)||e.xor(i,n,function(t,e,r){switch(t){case Z.PATTERN000:return(e+r)%2==0;case Z.PATTERN001:return e%2==0;case Z.PATTERN010:return r%3==0;case Z.PATTERN011:return(e+r)%3==0;case Z.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case Z.PATTERN101:return e*r%2+e*r%3==0;case Z.PATTERN110:return(e*r%2+e*r%3)%2==0;case Z.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw Error("bad maskPattern:"+t)}}(t,i,n))},ti=function(t,e){let r=Object.keys(Z).length,n=0,i=1/0;for(let s=0;s<r;s++){e(s),tn(s,t);let r=$(t)+tt(t)+te(t)+tr(t);tn(s,t),r<i&&(i=r,n=s)}return n};const at=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],ae=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ts=function(t,e){switch(e){case G:return at[(t-1)*4+0];case j:return at[(t-1)*4+1];case Q:return at[(t-1)*4+2];case W:return at[(t-1)*4+3];default:return}},to=function(t,e){switch(e){case G:return ae[(t-1)*4+0];case j:return ae[(t-1)*4+1];case Q:return ae[(t-1)*4+2];case W:return ae[(t-1)*4+3];default:return}};var ar={};const an=new Uint8Array(512),ai=new Uint8Array(256);let as=1;for(let t=0;t<255;t++)an[t]=as,ai[as]=t,256&(as<<=1)&&(as^=285);for(let t=255;t<512;t++)an[t]=an[t-255];function ao(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}tc=function(t,e){return 0===t||0===e?0:an[ai[t]+ai[e]]},ta=function(t,e){let r=new Uint8Array(t.length+e.length-1);for(let n=0;n<t.length;n++)for(let i=0;i<e.length;i++)r[n+i]^=tc(t[n],e[i]);return r},tl=function(t,e){let r=new Uint8Array(t);for(;r.length-e.length>=0;){let t=r[0];for(let n=0;n<e.length;n++)r[n]^=tc(e[n],t);let n=0;for(;n<r.length&&0===r[n];)n++;r=r.slice(n)}return r},tu=function(t){let e=new Uint8Array([1]);for(let r=0;r<t;r++)e=ta(e,new Uint8Array([1,an[r]]));return e},ao.prototype.initialize=function(t){this.degree=t,this.genPoly=tu(this.degree)},ao.prototype.encode=function(t){if(!this.genPoly)throw Error("Encoder not initialized");let e=new Uint8Array(t.length+this.degree);e.set(t);let r=tl(e,this.genPoly),n=this.degree-r.length;if(n>0){let t=new Uint8Array(this.degree);return t.set(r,n),t}return r},ar=ao,tI=function(t){return!isNaN(t)&&t>=1&&t<=40};const aa="[0-9]+";let al="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";const au="(?:(?![A-Z0-9 $%*+\\-./:]|"+(al=al.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t_=RegExp(al,"g"),tS=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),tT=RegExp(au,"g"),tv=RegExp(aa,"g"),tN=RegExp("[A-Z $%*+\\-./:]+","g");const ac=RegExp("^"+al+"$"),ah=RegExp("^"+aa+"$"),ad=RegExp("^[A-Z0-9 $%*+\\-./:]+$");tg={id:"Numeric",bit:1,ccBits:[10,12,14]},tp={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},tm={id:"Byte",bit:4,ccBits:[8,16,16]},tw={id:"Kanji",bit:8,ccBits:[8,10,12]},ty={bit:-1},tA=function(t,e){if(!t.ccBits)throw Error("Invalid mode: "+t);if(!tI(e))throw Error("Invalid version: "+e);return e>=1&&e<10?t.ccBits[0]:e<27?t.ccBits[1]:t.ccBits[2]},tE=function(t){return ah.test(t)?tg:ad.test(t)?tp:ac.test(t)?tw:tm},tb=function(t){if(t&&t.id)return t.id;throw Error("Invalid mode")},tC=function(t,e){if(t&&t.bit&&t.ccBits)return t;try{if("string"!=typeof t)throw Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return tg;case"alphanumeric":return tp;case"kanji":return tw;case"byte":return tm;default:throw Error("Unknown mode: "+t)}}catch(t){return e}};const af=H(7973);th=function(t,e,r){if(!tI(t))throw Error("Invalid QR Code version");void 0===r&&(r=tm);let n=(U(t)-to(t,e))*8;if(r===ty)return n;let i=n-(tA(r,t)+4);switch(r){case tg:return Math.floor(i/10*3);case tp:return Math.floor(i/11*2);case tw:return Math.floor(i/13);default:return Math.floor(i/8)}},td=function(t,e){let r,n=Y(e,j);if(Array.isArray(t)){if(t.length>1){for(let e=1;e<=40;e++)if(function(t,e){let r=0;return t.forEach(function(t){let n=tA(t.mode,e)+4;r+=n+t.getBitsLength()}),r}(t,e)<=th(e,n,ty))return e;return}if(0===t.length)return 1;r=t[0]}else r=t;return function(t,e,r){for(let n=1;n<=40;n++)if(e<=th(n,r,t))return n}(r.mode,r.getLength(),n)},tf=function(t){if(!tI(t)||t<7)throw Error("Invalid QR Code version");let e=t<<12;for(;H(e)-af>=0;)e^=7973<<H(e)-af;return t<<12|e};const ag=H(1335);tR=function(t,e){let r=t.bit<<3|e,n=r<<10;for(;H(n)-ag>=0;)n^=1335<<H(n)-ag;return(r<<10|n)^21522};var ap={};function am(t){this.mode=tg,this.data=t.toString()}am.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},am.prototype.getLength=function(){return this.data.length},am.prototype.getBitsLength=function(){return am.getBitsLength(this.data.length)},am.prototype.write=function(t){let e,r,n;for(e=0;e+3<=this.data.length;e+=3)n=parseInt(this.data.substr(e,3),10),t.put(n,10);let i=this.data.length-e;i>0&&(n=parseInt(this.data.substr(e),10),t.put(n,3*i+1))},ap=am;var aw={};const ay=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function aA(t){this.mode=tp,this.data=t}aA.getBitsLength=function(t){return 11*Math.floor(t/2)+t%2*6},aA.prototype.getLength=function(){return this.data.length},aA.prototype.getBitsLength=function(){return aA.getBitsLength(this.data.length)},aA.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let r=45*ay.indexOf(this.data[e]);r+=ay.indexOf(this.data[e+1]),t.put(r,11)}this.data.length%2&&t.put(ay.indexOf(this.data[e]),6)},aw=aA;var aE={};function ab(t){this.mode=tm,"string"==typeof t?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}ab.getBitsLength=function(t){return 8*t},ab.prototype.getLength=function(){return this.data.length},ab.prototype.getBitsLength=function(){return ab.getBitsLength(this.data.length)},ab.prototype.write=function(t){for(let e=0,r=this.data.length;e<r;e++)t.put(this.data[e],8)},aE=ab;var aC={};function aI(t){this.mode=tw,this.data=t}aI.getBitsLength=function(t){return 13*t},aI.prototype.getLength=function(){return this.data.length},aI.prototype.getBitsLength=function(){return aI.getBitsLength(this.data.length)},aI.prototype.write=function(e){let r;for(r=0;r<this.data.length;r++){var n;let i=(n=this.data[r],t(n));if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw Error("Invalid SJIS character: "+this.data[r]+"\nMake sure your charset is UTF-8");i=(i>>>8&255)*192+(255&i),e.put(i,13)}},aC=aI;var a_={},aS={single_source_shortest_paths:function(t,e,r){var n,i,s,o,a,l,u,c={},h={};h[e]=0;var d=aS.PriorityQueue.make();for(d.push(e,0);!d.empty();)for(s in i=(n=d.pop()).value,o=n.cost,a=t[i]||{})a.hasOwnProperty(s)&&(l=o+a[s],u=h[s],(void 0===h[s]||u>l)&&(h[s]=l,d.push(s,l),c[s]=i));if(void 0!==r&&void 0===h[r])throw Error(["Could not find a path from ",e," to ",r,"."].join(""));return c},extract_shortest_path_from_predecessor_list:function(t,e){for(var r=[],n=e;n;)r.push(n),t[n],n=t[n];return r.reverse(),r},find_path:function(t,e,r){var n=aS.single_source_shortest_paths(t,e,r);return aS.extract_shortest_path_from_predecessor_list(n,r)},PriorityQueue:{make:function(t){var e,r=aS.PriorityQueue,n={};for(e in t=t||{},r)r.hasOwnProperty(e)&&(n[e]=r[e]);return n.queue=[],n.sorter=t.sorter||r.default_sorter,n},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){this.queue.push({value:t,cost:e}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};function aT(t){return unescape(encodeURIComponent(t)).length}function av(t,e,r){let n,i=[];for(;null!==(n=t.exec(r));)i.push({data:n[0],index:n.index,mode:e,length:n[0].length});return i}function aN(t){let e,r,n=av(tv,tg,t),i=av(tN,tp,t);return z()?(e=av(tT,tm,t),r=av(t_,tw,t)):(e=av(tS,tm,t),r=[]),n.concat(i,e,r).sort(function(t,e){return t.index-e.index}).map(function(t){return{data:t.data,mode:t.mode,length:t.length}})}function aR(t,e){switch(e){case tg:return ap.getBitsLength(t);case tp:return aw.getBitsLength(t);case tw:return aC.getBitsLength(t);case tm:return aE.getBitsLength(t)}}function aO(t,e){let r,n=tE(t);if((r=tC(e,n))!==tm&&r.bit<n.bit)throw Error('"'+t+'" cannot be encoded with mode '+tb(r)+".\n Suggested mode is: "+tb(n));switch(r===tw&&!z()&&(r=tm),r){case tg:return new ap(t);case tp:return new aw(t);case tw:return new aC(t);case tm:return new aE(t)}}function aD(t,e,r){let n,i,s=t.size,o=tR(e,r);for(n=0;n<15;n++)i=(o>>n&1)==1,n<6?t.set(n,8,i,!0):n<8?t.set(n+1,8,i,!0):t.set(s-15+n,8,i,!0),n<8?t.set(8,s-n-1,i,!0):n<9?t.set(8,15-n-1+1,i,!0):t.set(8,15-n-1,i,!0);t.set(s-8,8,1,!0)}function aM(t){if("number"==typeof t&&(t=t.toString()),"string"!=typeof t)throw Error("Color should be defined as hex string");let e=t.slice().replace("#","").split("");if(e.length<3||5===e.length||e.length>8)throw Error("Invalid hex color: "+t);(3===e.length||4===e.length)&&(e=Array.prototype.concat.apply([],e.map(function(t){return[t,t]}))),6===e.length&&e.push("F","F");let r=parseInt(e.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+e.slice(0,6).join("")}}function ax(t,e){let r=t.a/255,n=e+'="'+t.hex+'"';return r<1?n+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function aB(t,e,r){let n=t+e;return void 0!==r&&(n+=" "+r),n}function aP(t,e,r,n,i){let s=[].slice.call(arguments,1),o=s.length,a="function"==typeof s[o-1];if(!a&&!o3())throw Error("Callback required as last argument");if(a){if(o<2)throw Error("Too few arguments provided");2===o?(i=r,r=e,e=n=void 0):3===o&&(e.getContext&&void 0===i?(i=n,n=void 0):(i=n,n=r,r=e,e=void 0))}else{if(o<1)throw Error("Too few arguments provided");return 1===o?(r=e,e=n=void 0):2!==o||e.getContext||(n=r,r=e,e=void 0),new Promise(function(i,s){try{let s=k(r,n);i(t(s,e,n))}catch(t){s(t)}})}try{let s=k(r,n);i(null,t(s,e,n))}catch(t){i(t)}}a_=aS,tO=function(t){return t.reduce(function(t,e){return"string"==typeof e?t.push(aO(e,null)):e.data&&t.push(aO(e.data,e.mode)),t},[])},tD=function(t,e){let r=function(t,e){let r={},n={start:{}},i=["start"];for(let s=0;s<t.length;s++){let o=t[s],a=[];for(let t=0;t<o.length;t++){let l=o[t],u=""+s+t;a.push(u),r[u]={node:l,lastCount:0},n[u]={};for(let t=0;t<i.length;t++){let s=i[t];r[s]&&r[s].node.mode===l.mode?(n[s][u]=aR(r[s].lastCount+l.length,l.mode)-aR(r[s].lastCount,l.mode),r[s].lastCount+=l.length):(r[s]&&(r[s].lastCount=l.length),n[s][u]=aR(l.length,l.mode)+4+tA(l.mode,e))}}i=a}for(let t=0;t<i.length;t++)n[i[t]].end=0;return{map:n,table:r}}(function(t){let e=[];for(let r=0;r<t.length;r++){let n=t[r];switch(n.mode){case tg:e.push([n,{data:n.data,mode:tp,length:n.length},{data:n.data,mode:tm,length:n.length}]);break;case tp:e.push([n,{data:n.data,mode:tm,length:n.length}]);break;case tw:e.push([n,{data:n.data,mode:tm,length:aT(n.data)}]);break;case tm:e.push([{data:n.data,mode:tm,length:aT(n.data)}])}}return e}(aN(t,z())),e),n=a_.find_path(r.map,"start","end"),i=[];for(let t=1;t<n.length-1;t++)i.push(r.table[n[t]].node);return tO(i.reduce(function(t,e){let r=t.length-1>=0?t[t.length-1]:null;return r&&r.mode===e.mode?t[t.length-1].data+=e.data:t.push(e),t},[]))},k=function(t,e){let r,n;if(void 0===t||""===t)throw Error("No input text");let i=j;if(void 0!==e){var s;i=Y(e.errorCorrectionLevel,j),r=tI(s=e.version)?parseInt(s,10):void 0,n=J(e.maskPattern),e.toSJISFunc&&V(e.toSJISFunc)}return function(t,e,r,n){let i;if(Array.isArray(t))i=tO(t);else if("string"==typeof t){let n=e;n||(n=td(tO(aN(t,z())),r)),i=tD(t,n||40)}else throw Error("Invalid data");let s=td(i,r);if(!s)throw Error("The amount of data is too big to be stored in a QR Code");if(e){if(e<s)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+s+".\n")}else e=s;let o=function(t,e,r){let n=new o8;r.forEach(function(e){n.put(e.mode.bit,4),n.put(e.getLength(),tA(e.mode,t)),e.write(n)});let i=(U(t)-to(t,e))*8;for(n.getLengthInBits()+4<=i&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);let s=(i-n.getLengthInBits())/8;for(let t=0;t<s;t++)n.put(t%2?17:236,8);return function(t,e,r){let n,i,s=U(e),o=s-to(e,r),a=ts(e,r),l=s%a,u=a-l,c=Math.floor(s/a),h=Math.floor(o/a),d=h+1,f=c-h,g=new ar(f),p=0,m=Array(a),w=Array(a),y=0,A=new Uint8Array(t.buffer);for(let t=0;t<a;t++){let e=t<u?h:d;m[t]=A.slice(p,p+e),w[t]=g.encode(m[t]),p+=e,y=Math.max(y,e)}let E=new Uint8Array(s),b=0;for(n=0;n<y;n++)for(i=0;i<a;i++)n<m[i].length&&(E[b++]=m[i][n]);for(n=0;n<f;n++)for(i=0;i<a;i++)E[b++]=w[i][n];return E}(n,t,e)}(e,r,i),a=F(e),l=new o5(a);!function(t,e){let r=t.size,n=K(e);for(let e=0;e<n.length;e++){let i=n[e][0],s=n[e][1];for(let e=-1;e<=7;e++)if(!(i+e<=-1)&&!(r<=i+e))for(let n=-1;n<=7;n++)s+n<=-1||r<=s+n||(e>=0&&e<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===e||6===e)||e>=2&&e<=4&&n>=2&&n<=4?t.set(i+e,s+n,!0,!0):t.set(i+e,s+n,!1,!0))}}(l,e);let u=l.size;for(let t=8;t<u-8;t++){let e=t%2==0;l.set(t,6,e,!0),l.set(6,t,e,!0)}return!function(t,e){let r=q(e);for(let e=0;e<r.length;e++){let n=r[e][0],i=r[e][1];for(let e=-2;e<=2;e++)for(let r=-2;r<=2;r++)-2===e||2===e||-2===r||2===r||0===e&&0===r?t.set(n+e,i+r,!0,!0):t.set(n+e,i+r,!1,!0)}}(l,e),aD(l,r,0),e>=7&&function(t,e){let r,n,i,s=t.size,o=tf(e);for(let e=0;e<18;e++)r=Math.floor(e/3),n=e%3+s-8-3,i=(o>>e&1)==1,t.set(r,n,i,!0),t.set(n,r,i,!0)}(l,e),!function(t,e){let r=t.size,n=-1,i=r-1,s=7,o=0;for(let a=r-1;a>0;a-=2)for(6===a&&a--;;){for(let r=0;r<2;r++)if(!t.isReserved(i,a-r)){let n=!1;o<e.length&&(n=(e[o]>>>s&1)==1),t.set(i,a-r,n),-1==--s&&(o++,s=7)}if((i+=n)<0||r<=i){i-=n,n=-n;break}}}(l,o),isNaN(n)&&(n=ti(l,aD.bind(null,l,r))),tn(n,l),aD(l,r,n),{modules:l,version:e,errorCorrectionLevel:r,maskPattern:n,segments:i}}(t,r,i,n)},tx=function(t){t||(t={}),t.color||(t.color={});let e=void 0===t.margin||null===t.margin||t.margin<0?4:t.margin,r=t.width&&t.width>=21?t.width:void 0,n=t.scale||4;return{width:r,scale:r?4:n,margin:e,color:{dark:aM(t.color.dark||"#000000ff"),light:aM(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},tB=function(t,e){return e.width&&e.width>=t+2*e.margin?e.width/(t+2*e.margin):e.scale},tP=function(t,e){let r=tB(t,e);return Math.floor((t+2*e.margin)*r)},tL=function(t,e,r){let n=e.modules.size,i=e.modules.data,s=tB(n,r),o=Math.floor((n+2*r.margin)*s),a=r.margin*s,l=[r.color.light,r.color.dark];for(let e=0;e<o;e++)for(let u=0;u<o;u++){let c=(e*o+u)*4,h=r.color.light;e>=a&&u>=a&&e<o-a&&u<o-a&&(h=l[+!!i[Math.floor((e-a)/s)*n+Math.floor((u-a)/s)]]),t[c++]=h.r,t[c++]=h.g,t[c++]=h.b,t[c]=h.a}},tM=function(t,e,r){var n;let i=r,s=e;void 0!==i||e&&e.getContext||(i=e,e=void 0),e||(s=function(){try{return document.createElement("canvas")}catch(t){throw Error("You need to specify a canvas element")}}()),i=tx(i);let o=tP(t.modules.size,i),a=s.getContext("2d"),l=a.createImageData(o,o);return tL(l.data,t,i),n=s,a.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=o,n.width=o,n.style.height=o+"px",n.style.width=o+"px",a.putImageData(l,0,0),s},tk=function(t,e,r){let n=tx(e),i=t.modules.size,s=t.modules.data,o=i+2*n.margin,a=n.color.light.a?"<path "+ax(n.color.light,"fill")+' d="M0 0h'+o+"v"+o+'H0z"/>':"",l="<path "+ax(n.color.dark,"stroke")+' d="'+function(t,e,r){let n="",i=0,s=!1,o=0;for(let a=0;a<t.length;a++){let l=Math.floor(a%e),u=Math.floor(a/e);l||s||(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(n+=s?aB("M",l+r,.5+u+r):aB("m",i,0),i=0,s=!1),l+1<e&&t[a+1]||(n+=aB("h",o),o=0)):i++}return n}(s,i,n.margin)+'"/>',u='<svg xmlns="http://www.w3.org/2000/svg" '+(n.width?'width="'+n.width+'" height="'+n.width+'" ':"")+('viewBox="0 0 '+o+" ")+o+'" shape-rendering="crispEdges">'+a+l+"</svg>\n";return"function"==typeof r&&r(null,u),u},x=k,B=aP.bind(null,tM),P=aP.bind(null,function(t,e,r){let n=r;void 0!==n||e&&e.getContext||(n=e,e=void 0),n||(n={});let i=tM(t,e,n),s=n.type||"image/png",o=n.rendererOpts||{};return i.toDataURL(s,o.quality)}),L=aP.bind(null,function(t,e,r){return tk(t,r)});var aL={};Object.defineProperty(aL,"__esModule",{value:!0}),aL.hmac=aL.HMAC=void 0;var ak={};function aF(t){if(!Number.isSafeInteger(t)||t<0)throw Error(`Wrong positive integer: ${t}`)}function aU(t){if("boolean"!=typeof t)throw Error(`Expected boolean, not ${t}`)}function aH(t,...e){if(!(t instanceof Uint8Array))throw Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function aV(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");aF(t.outputLen),aF(t.blockLen)}function az(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function aG(t,e){aH(t);let r=e.outputLen;if(t.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(ak,"__esModule",{value:!0}),ak.output=ak.exists=ak.hash=ak.bytes=ak.bool=ak.number=void 0,ak.number=aF,ak.bool=aU,ak.bytes=aH,ak.hash=aV,ak.exists=az,ak.output=aG,ak.default={number:aF,bool:aU,bytes:aH,hash:aV,exists:az,output:aG};var aj={};Object.defineProperty(aj,"__esModule",{value:!0}),aj.randomBytes=aj.wrapXOFConstructorWithOpts=aj.wrapConstructorWithOpts=aj.wrapConstructor=aj.checkOpts=aj.Hash=aj.concatBytes=aj.toBytes=aj.utf8ToBytes=aj.asyncLoop=aj.nextTick=aj.hexToBytes=aj.bytesToHex=aj.isLE=aj.rotr=aj.createView=aj.u32=aj.u8=void 0;var aQ={};Object.defineProperty(aQ,"__esModule",{value:!0}),aQ.crypto=void 0,aQ.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;const aW=t=>t instanceof Uint8Array;if(aj.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),aj.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),aj.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),aj.rotr=(t,e)=>t<<32-e|t>>>e,aj.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],!aj.isLE)throw Error("Non little-endian hardware is not supported");const aY=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));aj.bytesToHex=function(t){if(!aW(t))throw Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=aY[t[r]];return e},aj.hexToBytes=function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let r=new Uint8Array(e/2);for(let e=0;e<r.length;e++){let n=2*e,i=Number.parseInt(t.slice(n,n+2),16);if(Number.isNaN(i)||i<0)throw Error("Invalid byte sequence");r[e]=i}return r};const aX=async()=>{};async function aq(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let t=Date.now()-n;t>=0&&t<e||(await (0,aj.nextTick)(),n+=t)}}function aK(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function aZ(t){if("string"==typeof t&&(t=aK(t)),!aW(t))throw Error(`expected Uint8Array, got ${typeof t}`);return t}aj.nextTick=aX,aj.asyncLoop=aq,aj.utf8ToBytes=aK,aj.toBytes=aZ,aj.concatBytes=function(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),r=0;return t.forEach(t=>{if(!aW(t))throw Error("Uint8Array expected");e.set(t,r),r+=t.length}),e},aj.Hash=class{clone(){return this._cloneInto()}};const aJ={}.toString;aj.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!==aJ.call(e))throw Error("Options should be object or undefined");return Object.assign(t,e)},aj.wrapConstructor=function(t){let e=e=>t().update(aZ(e)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e},aj.wrapConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(aZ(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},aj.wrapXOFConstructorWithOpts=function(t){let e=(e,r)=>t(r).update(aZ(e)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=e=>t(e),e},aj.randomBytes=function(t=32){if(aQ.crypto&&"function"==typeof aQ.crypto.getRandomValues)return aQ.crypto.getRandomValues(new Uint8Array(t));throw Error("crypto.getRandomValues must be defined")};class a$ extends aj.Hash{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,(0,ak.hash)(t);let r=(0,aj.toBytes)(e);if(this.iHash=t.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?t.create().update(r).digest():r);for(let t=0;t<i.length;t++)i[t]^=54;this.iHash.update(i),this.oHash=t.create();for(let t=0;t<i.length;t++)i[t]^=106;this.oHash.update(i),i.fill(0)}update(t){return(0,ak.exists)(this),this.iHash.update(t),this}digestInto(t){(0,ak.exists)(this),(0,ak.bytes)(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return t.finished=n,t.destroyed=i,t.blockLen=s,t.outputLen=o,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}aL.HMAC=a$,aL.hmac=(t,e,r)=>new a$(t,e).update(r).digest(),aL.hmac.create=(t,e)=>new a$(t,e);var a1={};function a0(t,e,r,n){(0,ak.hash)(t);let{c:i,dkLen:s,asyncTick:o}=(0,aj.checkOpts)({dkLen:32,asyncTick:10},n);if((0,ak.number)(i),(0,ak.number)(s),(0,ak.number)(o),i<1)throw Error("PBKDF2: iterations (c) should be >= 1");let a=(0,aj.toBytes)(e),l=(0,aj.toBytes)(r),u=new Uint8Array(s),c=aL.hmac.create(t,a),h=c._cloneInto().update(l);return{c:i,dkLen:s,asyncTick:o,DK:u,PRF:c,PRFSalt:h}}function a2(t,e,r,n,i){return t.destroy(),e.destroy(),n&&n.destroy(),i.fill(0),r}Object.defineProperty(a1,"__esModule",{value:!0}),a1.pbkdf2Async=a1.pbkdf2=void 0,a1.pbkdf2=function(t,e,r,n){let i,{c:s,dkLen:o,DK:a,PRF:l,PRFSalt:u}=a0(t,e,r,n),c=new Uint8Array(4),h=(0,aj.createView)(c),d=new Uint8Array(l.outputLen);for(let t=1,e=0;e<o;t++,e+=l.outputLen){let r=a.subarray(e,e+l.outputLen);h.setInt32(0,t,!1),(i=u._cloneInto(i)).update(c).digestInto(d),r.set(d.subarray(0,r.length));for(let t=1;t<s;t++){l._cloneInto(i).update(d).digestInto(d);for(let t=0;t<r.length;t++)r[t]^=d[t]}}return a2(l,u,a,i,d)},a1.pbkdf2Async=async function(t,e,r,n){let i,{c:s,dkLen:o,asyncTick:a,DK:l,PRF:u,PRFSalt:c}=a0(t,e,r,n),h=new Uint8Array(4),d=(0,aj.createView)(h),f=new Uint8Array(u.outputLen);for(let t=1,e=0;e<o;t++,e+=u.outputLen){let r=l.subarray(e,e+u.outputLen);d.setInt32(0,t,!1),(i=c._cloneInto(i)).update(h).digestInto(f),r.set(f.subarray(0,r.length)),await (0,aj.asyncLoop)(s-1,a,()=>{u._cloneInto(i).update(f).digestInto(f);for(let t=0;t<r.length;t++)r[t]^=f[t]})}return a2(u,c,l,i,f)};var a3={};Object.defineProperty(a3,"__esModule",{value:!0}),a3.sha224=a3.sha256=void 0;var a4={};Object.defineProperty(a4,"__esModule",{value:!0}),a4.SHA2=void 0;class a8 extends aj.Hash{constructor(t,e,r,n){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,aj.createView)(this.buffer)}update(t){(0,ak.exists)(this);let{view:e,buffer:r,blockLen:n}=this,i=(t=(0,aj.toBytes)(t)).length;for(let s=0;s<i;){let o=Math.min(n-this.pos,i-s);if(o===n){let e=(0,aj.createView)(t);for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,ak.exists)(this),(0,ak.output)(t,this),this.finished=!0;let{buffer:e,view:r,blockLen:n,isLE:i}=this,{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let t=s;t<n;t++)e[t]=0;!function(t,e,r,n){if("function"==typeof t.setBigUint64)return t.setBigUint64(e,r,n);let i=BigInt(32),s=BigInt(0xffffffff),o=Number(r>>i&s),a=Number(r&s),l=4*!!n,u=4*!n;t.setUint32(e+l,o,n),t.setUint32(e+u,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let o=(0,aj.createView)(t),a=this.outputLen;if(a%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=a/4,u=this.get();if(l>u.length)throw Error("_sha2: outputLen bigger than state");for(let t=0;t<l;t++)o.setUint32(4*t,u[t],i)}digest(){let{buffer:t,outputLen:e}=this;this.digestInto(t);let r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:e,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return t.length=n,t.pos=o,t.finished=i,t.destroyed=s,n%e&&t.buffer.set(r),t}}a4.SHA2=a8;const a6=(t,e,r)=>t&e^~t&r,a5=(t,e,r)=>t&e^t&r^e&r,a7=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),a9=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),lt=new Uint32Array(64);class le extends a4.SHA2{constructor(){super(64,32,8,!1),this.A=0|a9[0],this.B=0|a9[1],this.C=0|a9[2],this.D=0|a9[3],this.E=0|a9[4],this.F=0|a9[5],this.G=0|a9[6],this.H=0|a9[7]}get(){let{A:t,B:e,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[t,e,r,n,i,s,o,a]}set(t,e,r,n,i,s,o,a){this.A=0|t,this.B=0|e,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(t,e){for(let r=0;r<16;r++,e+=4)lt[r]=t.getUint32(e,!1);for(let t=16;t<64;t++){let e=lt[t-15],r=lt[t-2],n=(0,aj.rotr)(e,7)^(0,aj.rotr)(e,18)^e>>>3,i=(0,aj.rotr)(r,17)^(0,aj.rotr)(r,19)^r>>>10;lt[t]=i+lt[t-7]+n+lt[t-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:l,H:u}=this;for(let t=0;t<64;t++){let e=u+((0,aj.rotr)(o,6)^(0,aj.rotr)(o,11)^(0,aj.rotr)(o,25))+a6(o,a,l)+a7[t]+lt[t]|0,c=((0,aj.rotr)(r,2)^(0,aj.rotr)(r,13)^(0,aj.rotr)(r,22))+a5(r,n,i)|0;u=l,l=a,a=o,o=s+e|0,s=i,i=n,n=r,r=e+c|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,n,i,s,o,a,l,u)}roundClean(){lt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class lr extends le{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}a3.sha256=(0,aj.wrapConstructor)(()=>new le),a3.sha224=(0,aj.wrapConstructor)(()=>new lr);var ln={};Object.defineProperty(ln,"__esModule",{value:!0}),ln.sha384=ln.sha512_256=ln.sha512_224=ln.sha512=ln.SHA512=void 0;var li={};Object.defineProperty(li,"__esModule",{value:!0}),li.add5L=li.add5H=li.add4H=li.add4L=li.add3H=li.add3L=li.add=li.rotlBL=li.rotlBH=li.rotlSL=li.rotlSH=li.rotr32L=li.rotr32H=li.rotrBL=li.rotrBH=li.rotrSL=li.rotrSH=li.shrSL=li.shrSH=li.toBig=li.split=li.fromBig=void 0;const ls=BigInt(0x100000000-1),lo=BigInt(32);function la(t,e=!1){return e?{h:Number(t&ls),l:Number(t>>lo&ls)}:{h:0|Number(t>>lo&ls),l:0|Number(t&ls)}}function ll(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l:o}=la(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}li.fromBig=la,li.split=ll;const lu=(t,e)=>BigInt(t>>>0)<<lo|BigInt(e>>>0);li.toBig=lu;const lc=(t,e,r)=>t>>>r;li.shrSH=lc;const lh=(t,e,r)=>t<<32-r|e>>>r;li.shrSL=lh;const ld=(t,e,r)=>t>>>r|e<<32-r;li.rotrSH=ld;const lf=(t,e,r)=>t<<32-r|e>>>r;li.rotrSL=lf;const lg=(t,e,r)=>t<<64-r|e>>>r-32;li.rotrBH=lg;const lp=(t,e,r)=>t>>>r-32|e<<64-r;li.rotrBL=lp;const lm=(t,e)=>e;li.rotr32H=lm;const lw=(t,e)=>t;li.rotr32L=lw;const ly=(t,e,r)=>t<<r|e>>>32-r;li.rotlSH=ly;const lA=(t,e,r)=>e<<r|t>>>32-r;li.rotlSL=lA;const lE=(t,e,r)=>e<<r-32|t>>>64-r;li.rotlBH=lE;const lb=(t,e,r)=>t<<r-32|e>>>64-r;function lC(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/0x100000000|0)|0,l:0|i}}li.rotlBL=lb,li.add=lC;const lI=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);li.add3L=lI;const l_=(t,e,r,n)=>e+r+n+(t/0x100000000|0)|0;li.add3H=l_;const lS=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);li.add4L=lS;const lT=(t,e,r,n,i)=>e+r+n+i+(t/0x100000000|0)|0;li.add4H=lT;const lv=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);li.add5L=lv;const lN=(t,e,r,n,i,s)=>e+r+n+i+s+(t/0x100000000|0)|0;li.add5H=lN,li.default={fromBig:la,split:ll,toBig:lu,shrSH:lc,shrSL:lh,rotrSH:ld,rotrSL:lf,rotrBH:lg,rotrBL:lp,rotr32H:lm,rotr32L:lw,rotlSH:ly,rotlSL:lA,rotlBH:lE,rotlBL:lb,add:lC,add3L:lI,add3H:l_,add4L:lS,add4H:lT,add5H:lN,add5L:lv};const[lR,lO]=li.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),lD=new Uint32Array(80),lM=new Uint32Array(80);class lx extends a4.SHA2{constructor(){super(128,64,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:t,Al:e,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:l,El:u,Fh:c,Fl:h,Gh:d,Gl:f,Hh:g,Hl:p}=this;return[t,e,r,n,i,s,o,a,l,u,c,h,d,f,g,p]}set(t,e,r,n,i,s,o,a,l,u,c,h,d,f,g,p){this.Ah=0|t,this.Al=0|e,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|l,this.El=0|u,this.Fh=0|c,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|g,this.Hl=0|p}process(t,e){for(let r=0;r<16;r++,e+=4)lD[r]=t.getUint32(e),lM[r]=t.getUint32(e+=4);for(let t=16;t<80;t++){let e=0|lD[t-15],r=0|lM[t-15],n=li.default.rotrSH(e,r,1)^li.default.rotrSH(e,r,8)^li.default.shrSH(e,r,7),i=li.default.rotrSL(e,r,1)^li.default.rotrSL(e,r,8)^li.default.shrSL(e,r,7),s=0|lD[t-2],o=0|lM[t-2],a=li.default.rotrSH(s,o,19)^li.default.rotrBH(s,o,61)^li.default.shrSH(s,o,6),l=li.default.rotrSL(s,o,19)^li.default.rotrBL(s,o,61)^li.default.shrSL(s,o,6),u=li.default.add4L(i,l,lM[t-7],lM[t-16]),c=li.default.add4H(u,n,a,lD[t-7],lD[t-16]);lD[t]=0|c,lM[t]=0|u}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:l,Dl:u,Eh:c,El:h,Fh:d,Fl:f,Gh:g,Gl:p,Hh:m,Hl:w}=this;for(let t=0;t<80;t++){let e=li.default.rotrSH(c,h,14)^li.default.rotrSH(c,h,18)^li.default.rotrBH(c,h,41),y=li.default.rotrSL(c,h,14)^li.default.rotrSL(c,h,18)^li.default.rotrBL(c,h,41),A=c&d^~c&g,E=h&f^~h&p,b=li.default.add5L(w,y,E,lO[t],lM[t]),C=li.default.add5H(b,m,e,A,lR[t],lD[t]),I=0|b,_=li.default.rotrSH(r,n,28)^li.default.rotrBH(r,n,34)^li.default.rotrBH(r,n,39),S=li.default.rotrSL(r,n,28)^li.default.rotrBL(r,n,34)^li.default.rotrBL(r,n,39),T=r&i^r&o^i&o,v=n&s^n&a^s&a;m=0|g,w=0|p,g=0|d,p=0|f,d=0|c,f=0|h,({h:c,l:h}=li.default.add(0|l,0|u,0|C,0|I)),l=0|o,u=0|a,o=0|i,a=0|s,i=0|r,s=0|n;let N=li.default.add3L(I,S,v);r=li.default.add3H(N,C,_,T),n=0|N}({h:r,l:n}=li.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=li.default.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=li.default.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:l,l:u}=li.default.add(0|this.Dh,0|this.Dl,0|l,0|u)),({h:c,l:h}=li.default.add(0|this.Eh,0|this.El,0|c,0|h)),({h:d,l:f}=li.default.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:g,l:p}=li.default.add(0|this.Gh,0|this.Gl,0|g,0|p)),({h:m,l:w}=li.default.add(0|this.Hh,0|this.Hl,0|m,0|w)),this.set(r,n,i,s,o,a,l,u,c,h,d,f,g,p,m,w)}roundClean(){lD.fill(0),lM.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}ln.SHA512=lx;class lB extends lx{constructor(){super(),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f,this.outputLen=28}}class lP extends lx{constructor(){super(),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e,this.outputLen=32}}class lL extends lx{constructor(){super(),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c,this.outputLen=48}}async function lk(t){let e=Object.keys(t);return(await Promise.all(e.map(e=>Promise.resolve(t[e])))).reduce((t,r,n)=>(t[e[n]]=r,t),{})}function lF(t,e,r){for(let n in e){let i=e[n],s=r?r[n]:null;s&&function(t,e,r){let n=e.split("|").map(t=>t.trim());for(let r=0;r<n.length;r++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}let i=Error(`invalid value for type ${e}`);throw i.code="INVALID_ARGUMENT",i.argument=`value.${r}`,i.value=t,i}(i,s,n),Object.defineProperty(t,n,{enumerable:!0,value:i,writable:!1})}}function lU(t,e){if(null==t)return"null";if(null==e&&(e=new Set),"object"==typeof t){if(e.has(t))return"[Circular]";e.add(t)}if(Array.isArray(t))return"[ "+t.map(t=>lU(t,e)).join(", ")+" ]";if(t instanceof Uint8Array){let e="0123456789abcdef",r="0x";for(let n=0;n<t.length;n++)r+=e[t[n]>>4],r+=e[15&t[n]];return r}if("object"==typeof t&&"function"==typeof t.toJSON)return lU(t.toJSON(),e);switch(typeof t){case"boolean":case"number":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"string":return JSON.stringify(t);case"object":{let r=Object.keys(t);return r.sort(),"{ "+r.map(r=>`${lU(r,e)}: ${lU(t[r],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function lH(t,e){return t&&t.code===e}function lV(t){return lH(t,"CALL_EXCEPTION")}function lz(t,e,r){let n,i=t;{let n=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${lU(r)}`);for(let t in r){if("shortMessage"===t)continue;let e=r[t];n.push(t+"="+lU(e))}}n.push(`code=${e}`),n.push("version=6.14.3"),n.length&&(t+=" ("+n.join(", ")+")")}switch(e){case"INVALID_ARGUMENT":n=TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":n=RangeError(t);break;default:n=Error(t)}return lF(n,{code:e}),r&&Object.assign(n,r),null==n.shortMessage&&lF(n,{shortMessage:i}),n}function lG(t,e,r,n){if(!t)throw lz(e,r,n)}function lj(t,e,r,n){lG(t,e,"INVALID_ARGUMENT",{argument:r,value:n})}function lQ(t,e,r){null==r&&(r=""),r&&(r=": "+r),lG(t>=e,"missing argument"+r,"MISSING_ARGUMENT",{count:t,expectedCount:e}),lG(t<=e,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:t,expectedCount:e})}ln.sha512=(0,aj.wrapConstructor)(()=>new lx),ln.sha512_224=(0,aj.wrapConstructor)(()=>new lB),ln.sha512_256=(0,aj.wrapConstructor)(()=>new lP),ln.sha384=(0,aj.wrapConstructor)(()=>new lL);const lW=["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test"!=="test".normalize(e))throw Error("bad");if("NFD"===e){let t=String.fromCharCode(233).normalize("NFD"),e=String.fromCharCode(101,769);if(t!==e)throw Error("broken")}t.push(e)}catch(t){}return t},[]);function lY(t,e,r){if(null==r&&(r=""),t!==e){let t=r,e="new";r&&(t+=".",e+=" "+r),lG(!1,`private constructor; use ${t}from* methods`,"UNSUPPORTED_OPERATION",{operation:e})}}const lX=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==tF)return tF;throw Error("unable to locate global object")}(),lq=lX.crypto||lX.msCrypto;function lK(t){switch(t){case"sha256":return a3.sha256.create();case"sha512":return ln.sha512.create()}lj(!1,"invalid hashing algorithm name","algorithm",t)}function lZ(t,e,r){if(t instanceof Uint8Array)return r?new Uint8Array(t):t;if("string"==typeof t&&t.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let e=new Uint8Array((t.length-2)/2),r=2;for(let n=0;n<e.length;n++)e[n]=parseInt(t.substring(r,r+2),16),r+=2;return e}lj(!1,"invalid BytesLike value",e||"value",t)}function lJ(t,e){return lZ(t,e,!1)}function l$(t,e){return lZ(t,e,!0)}function l1(t,e){return"string"==typeof t&&!!t.match(/^0x[0-9A-Fa-f]*$/)&&("number"!=typeof e||t.length===2+2*e)&&(!0!==e||t.length%2==0)}function l0(t){return l1(t,!0)||t instanceof Uint8Array}const l2="0123456789abcdef";function l3(t){let e=lJ(t),r="0x";for(let t=0;t<e.length;t++){let n=e[t];r+=l2[(240&n)>>4]+l2[15&n]}return r}function l4(t){return"0x"+t.map(t=>l3(t).substring(2)).join("")}function l8(t){return l1(t,!0)?(t.length-2)/2:lJ(t).length}function l6(t,e,r){let n=lJ(t);return null!=r&&r>n.length&&lG(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:n,length:n.length,offset:r}),l3(n.slice(null==e?0:e,null==r?n.length:r))}function l5(t,e,r){let n=lJ(t);lG(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});let i=new Uint8Array(e);return i.fill(0),r?i.set(n,e-n.length):i.set(n,0),l3(i)}function l7(t,e){return l5(t,e,!0)}let l9=!1;const ut=function(t,e,r){return(function(t,e){let r={sha256:a3.sha256,sha512:ln.sha512}[t];return lj(null!=r,"invalid hmac algorithm","algorithm",t),aL.hmac.create(r,e)})(t,e).update(r).digest()};let ue=ut;function ur(t,e,r){let n=lJ(e,"key"),i=lJ(r,"data");return l3(ue(t,n,i))}ur._=ut,ur.lock=function(){l9=!0},ur.register=function(t){if(l9)throw Error("computeHmac is locked");ue=t},Object.freeze(ur);var un={};Object.defineProperty(un,"__esModule",{value:!0}),un.shake256=un.shake128=un.keccak_512=un.keccak_384=un.keccak_256=un.keccak_224=un.sha3_512=un.sha3_384=un.sha3_256=un.sha3_224=un.Keccak=un.keccakP=void 0;const[ui,us,uo]=[[],[],[]],ua=BigInt(0),ul=BigInt(1),uu=BigInt(2),uc=BigInt(7),uh=BigInt(256),ud=BigInt(113);for(let t=0,e=ul,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],ui.push(2*(5*n+r)),us.push((t+1)*(t+2)/2%64);let i=ua;for(let t=0;t<7;t++)(e=(e<<ul^(e>>uc)*ud)%uh)&uu&&(i^=ul<<(ul<<BigInt(t))-ul);uo.push(i)}const[uf,ug]=(0,li.split)(uo,!0),up=(t,e,r)=>r>32?(0,li.rotlBH)(t,e,r):(0,li.rotlSH)(t,e,r),um=(t,e,r)=>r>32?(0,li.rotlBL)(t,e,r):(0,li.rotlSL)(t,e,r);function uw(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)r[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let n=(e+8)%10,i=(e+2)%10,s=r[i],o=r[i+1],a=up(s,o,1)^r[n],l=um(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)t[e+r]^=a,t[e+r+1]^=l}let e=t[2],i=t[3];for(let r=0;r<24;r++){let n=us[r],s=up(e,i,n),o=um(e,i,n),a=ui[r];e=t[a],i=t[a+1],t[a]=s,t[a+1]=o}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)r[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~r[(n+2)%10]&r[(n+4)%10]}t[0]^=uf[n],t[1]^=ug[n]}r.fill(0)}un.keccakP=uw;class uy extends aj.Hash{constructor(t,e,r,n=!1,i=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,ak.number)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,aj.u32)(this.state)}keccak(){uw(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){(0,ak.exists)(this);let{blockLen:e,state:r}=this,n=(t=(0,aj.toBytes)(t)).length;for(let i=0;i<n;){let s=Math.min(e-this.pos,n-i);for(let e=0;e<s;e++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:r,blockLen:n}=this;t[r]^=e,(128&e)!=0&&r===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){(0,ak.exists)(this,!1),(0,ak.bytes)(t),this.finish();let e=this.state,{blockLen:r}=this;for(let n=0,i=t.length;n<i;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,i-n);t.set(e.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,ak.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,ak.output)(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return t||(t=new uy(e,r,n,s,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=n,t.enableXOF=s,t.destroyed=this.destroyed,t}}un.Keccak=uy;const uA=(t,e,r)=>(0,aj.wrapConstructor)(()=>new uy(e,t,r));un.sha3_224=uA(6,144,28),un.sha3_256=uA(6,136,32),un.sha3_384=uA(6,104,48),un.sha3_512=uA(6,72,64),un.keccak_224=uA(1,144,28),un.keccak_256=uA(1,136,32),un.keccak_384=uA(1,104,48),un.keccak_512=uA(1,72,64);const uE=(t,e,r)=>(0,aj.wrapXOFConstructorWithOpts)((n={})=>new uy(e,t,void 0===n.dkLen?r:n.dkLen,!0));un.shake128=uE(31,168,16),un.shake256=uE(31,136,32);let ub=!1;const uC=function(t){return(0,un.keccak_256)(t)};let uI=uC;function u_(t){let e=lJ(t,"data");return l3(uI(e))}u_._=uC,u_.lock=function(){ub=!0},u_.register=function(t){if(ub)throw TypeError("keccak256 is locked");uI=t},Object.freeze(u_);var uS={};Object.defineProperty(uS,"__esModule",{value:!0}),uS.ripemd160=uS.RIPEMD160=void 0;const uT=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),uv=Uint8Array.from({length:16},(t,e)=>e),uN=uv.map(t=>(9*t+5)%16);let uR=[uv],uO=[uN];for(let t=0;t<4;t++)for(let e of[uR,uO])e.push(e[t].map(t=>uT[t]));const uD=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),uM=uR.map((t,e)=>t.map(t=>uD[e][t])),ux=uO.map((t,e)=>t.map(t=>uD[e][t])),uB=new Uint32Array([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),uP=new Uint32Array([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]),uL=(t,e)=>t<<e|t>>>32-e;function uk(t,e,r,n){return 0===t?e^r^n:1===t?e&r|~e&n:2===t?(e|~r)^n:3===t?e&n|r&~n:e^(r|~n)}const uF=new Uint32Array(16);class uU extends a4.SHA2{constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}get(){let{h0:t,h1:e,h2:r,h3:n,h4:i}=this;return[t,e,r,n,i]}set(t,e,r,n,i){this.h0=0|t,this.h1=0|e,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(t,e){for(let r=0;r<16;r++,e+=4)uF[r]=t.getUint32(e,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,o=0|this.h2,a=o,l=0|this.h3,u=l,c=0|this.h4,h=c;for(let t=0;t<5;t++){let e=4-t,d=uB[t],f=uP[t],g=uR[t],p=uO[t],m=uM[t],w=ux[t];for(let e=0;e<16;e++){let n=uL(r+uk(t,i,o,l)+uF[g[e]]+d,m[e])+c|0;r=c,c=l,l=0|uL(o,10),o=i,i=n}for(let t=0;t<16;t++){let r=uL(n+uk(e,s,a,u)+uF[p[t]]+f,w[t])+h|0;n=h,h=u,u=0|uL(a,10),a=s,s=r}}this.set(this.h1+o+u|0,this.h2+l+h|0,this.h3+c+n|0,this.h4+r+s|0,this.h0+i+a|0)}roundClean(){uF.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}uS.RIPEMD160=uU,uS.ripemd160=(0,aj.wrapConstructor)(()=>new uU);let uH=!1;const uV=function(t){return(0,uS.ripemd160)(t)};let uz=uV;function uG(t){let e=lJ(t,"data");return l3(uz(e))}uG._=uV,uG.lock=function(){uH=!0},uG.register=function(t){if(uH)throw TypeError("ripemd160 is locked");uz=t},Object.freeze(uG);let uj=!1;const uQ=function(t,e,r,n,i){let s={sha256:a3.sha256,sha512:ln.sha512}[i];return lj(null!=s,"invalid pbkdf2 algorithm","algorithm",i),(0,a1.pbkdf2)(s,t,e,{c:r,dkLen:n})};let uW=uQ;function uY(t,e,r,n,i){let s=lJ(t,"password"),o=lJ(e,"salt");return l3(uW(s,o,r,n,i))}uY._=uQ,uY.lock=function(){uj=!0},uY.register=function(t){if(uj)throw Error("pbkdf2 is locked");uW=t},Object.freeze(uY);let uX=!1;const uq=function(t){return new Uint8Array(function(t){lG(null!=lq,"platform does not support secure random numbers","UNSUPPORTED_OPERATION",{operation:"randomBytes"}),lj(Number.isInteger(t)&&t>0&&t<=1024,"invalid length","length",t);let e=new Uint8Array(t);return lq.getRandomValues(e),e}(t))};let uK=uq;function uZ(t){return uK(t)}uZ._=uq,uZ.lock=function(){uX=!0},uZ.register=function(t){if(uX)throw Error("randomBytes is locked");uK=t},Object.freeze(uZ);var uJ={};Object.defineProperty(uJ,"__esModule",{value:!0}),uJ.scryptAsync=uJ.scrypt=void 0;const u$=(t,e)=>t<<e|t>>>32-e;function u1(t,e,r,n,i,s){let o=t[e++]^r[n++],a=t[e++]^r[n++],l=t[e++]^r[n++],u=t[e++]^r[n++],c=t[e++]^r[n++],h=t[e++]^r[n++],d=t[e++]^r[n++],f=t[e++]^r[n++],g=t[e++]^r[n++],p=t[e++]^r[n++],m=t[e++]^r[n++],w=t[e++]^r[n++],y=t[e++]^r[n++],A=t[e++]^r[n++],E=t[e++]^r[n++],b=t[e++]^r[n++],C=o,I=a,_=l,S=u,T=c,v=h,N=d,R=f,O=g,D=p,M=m,x=w,B=y,P=A,L=E,k=b;for(let t=0;t<8;t+=2)T^=u$(C+B|0,7),O^=u$(T+C|0,9),B^=u$(O+T|0,13),C^=u$(B+O|0,18),D^=u$(v+I|0,7),P^=u$(D+v|0,9),I^=u$(P+D|0,13),v^=u$(I+P|0,18),L^=u$(M+N|0,7),_^=u$(L+M|0,9),N^=u$(_+L|0,13),M^=u$(N+_|0,18),S^=u$(k+x|0,7),R^=u$(S+k|0,9),x^=u$(R+S|0,13),k^=u$(x+R|0,18),I^=u$(C+S|0,7),_^=u$(I+C|0,9),S^=u$(_+I|0,13),C^=u$(S+_|0,18),N^=u$(v+T|0,7),R^=u$(N+v|0,9),T^=u$(R+N|0,13),v^=u$(T+R|0,18),x^=u$(M+D|0,7),O^=u$(x+M|0,9),D^=u$(O+x|0,13),M^=u$(D+O|0,18),B^=u$(k+L|0,7),P^=u$(B+k|0,9),L^=u$(P+B|0,13),k^=u$(L+P|0,18);i[s++]=o+C|0,i[s++]=a+I|0,i[s++]=l+_|0,i[s++]=u+S|0,i[s++]=c+T|0,i[s++]=h+v|0,i[s++]=d+N|0,i[s++]=f+R|0,i[s++]=g+O|0,i[s++]=p+D|0,i[s++]=m+M|0,i[s++]=w+x|0,i[s++]=y+B|0,i[s++]=A+P|0,i[s++]=E+L|0,i[s++]=b+k|0}function u0(t,e,r,n,i){let s=n+0,o=n+16*i;for(let n=0;n<16;n++)r[o+n]=t[e+(2*i-1)*16+n];for(let n=0;n<i;n++,s+=16,e+=16)u1(r,o,t,e,r,s),n>0&&(o+=16),u1(r,s,t,e+=16,r,o)}function u2(t,e,r){let{N:n,r:i,p:s,dkLen:o,asyncTick:a,maxmem:l,onProgress:u}=(0,aj.checkOpts)({dkLen:32,asyncTick:10,maxmem:0x40000400},r);if((0,ak.number)(n),(0,ak.number)(i),(0,ak.number)(s),(0,ak.number)(o),(0,ak.number)(a),(0,ak.number)(l),void 0!==u&&"function"!=typeof u)throw Error("progressCb should be function");let c=128*i,h=c/4;if(n<=1||(n&n-1)!=0||n>=2**(c/8)||n>0x100000000)throw Error("Scrypt: N must be larger than 1, a power of 2, less than 2^(128 * r / 8) and less than 2^32");if(s<0||s>(0x100000000-1)*32/c)throw Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(o<0||o>(0x100000000-1)*32)throw Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");let d=c*(n+s);if(d>l)throw Error(`Scrypt: parameters too large, ${d} (128 * r * (N + p)) > ${l} (maxmem)`);let f=(0,a1.pbkdf2)(a3.sha256,t,e,{c:1,dkLen:c*s}),g=(0,aj.u32)(f),p=(0,aj.u32)(new Uint8Array(c*n)),m=(0,aj.u32)(new Uint8Array(c)),w=()=>{};if(u){let t=2*n*s,e=Math.max(Math.floor(t/1e4),1),r=0;w=()=>{r++,u&&(!(r%e)||r===t)&&u(r/t)}}return{N:n,r:i,p:s,dkLen:o,blockSize32:h,V:p,B32:g,B:f,tmp:m,blockMixCb:w,asyncTick:a}}function u3(t,e,r,n,i){let s=(0,a1.pbkdf2)(a3.sha256,t,r,{c:1,dkLen:e});return r.fill(0),n.fill(0),i.fill(0),s}uJ.scrypt=function(t,e,r){let{N:n,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:u,B:c,tmp:h,blockMixCb:d}=u2(t,e,r);for(let t=0;t<s;t++){let e=a*t;for(let t=0;t<a;t++)l[t]=u[e+t];for(let t=0,e=0;t<n-1;t++)u0(l,e,l,e+=a,i),d();u0(l,(n-1)*a,u,e,i),d();for(let t=0;t<n;t++){let t=u[e+a-16]%n;for(let r=0;r<a;r++)h[r]=u[e+r]^l[t*a+r];u0(h,0,u,e,i),d()}}return u3(t,o,c,l,h)},uJ.scryptAsync=async function(t,e,r){let{N:n,r:i,p:s,dkLen:o,blockSize32:a,V:l,B32:u,B:c,tmp:h,blockMixCb:d,asyncTick:f}=u2(t,e,r);for(let t=0;t<s;t++){let e=a*t;for(let t=0;t<a;t++)l[t]=u[e+t];let r=0;await (0,aj.asyncLoop)(n-1,f,()=>{u0(l,r,l,r+=a,i),d()}),u0(l,(n-1)*a,u,e,i),d(),await (0,aj.asyncLoop)(n,f,()=>{let t=u[e+a-16]%n;for(let r=0;r<a;r++)h[r]=u[e+r]^l[t*a+r];u0(h,0,u,e,i),d()})}return u3(t,o,c,l,h)};let u4=!1,u8=!1;const u6=async function(t,e,r,n,i,s,o){return await (0,uJ.scryptAsync)(t,e,{N:r,r:n,p:i,dkLen:s,onProgress:o})},u5=function(t,e,r,n,i,s){return(0,uJ.scrypt)(t,e,{N:r,r:n,p:i,dkLen:s})};let u7=u6,u9=u5;async function ct(t,e,r,n,i,s,o){let a=lJ(t,"passwd"),l=lJ(e,"salt");return l3(await u7(a,l,r,n,i,s,o))}function ce(t,e,r,n,i,s){let o=lJ(t,"passwd"),a=lJ(e,"salt");return l3(u9(o,a,r,n,i,s))}ct._=u6,ct.lock=function(){u8=!0},ct.register=function(t){if(u8)throw Error("scrypt is locked");u7=t},Object.freeze(ct),ce._=u5,ce.lock=function(){u4=!0},ce.register=function(t){if(u4)throw Error("scryptSync is locked");u9=t},Object.freeze(ce);const cr=function(t){return lK("sha256").update(t).digest()},cn=function(t){return lK("sha512").update(t).digest()};let ci=cr,cs=cn,co=!1,ca=!1;function cl(t){let e=lJ(t,"data");return l3(ci(e))}function cu(t){let e=lJ(t,"data");return l3(cs(e))}cl._=cr,cl.lock=function(){co=!0},cl.register=function(t){if(co)throw Error("sha256 is locked");ci=t},Object.freeze(cl),cu._=cn,cu.lock=function(){ca=!0},cu.register=function(t){if(ca)throw Error("sha512 is locked");cs=t},Object.freeze(cl);var cc={};Object.defineProperty(cc,"__esModule",{value:!0}),cc.encodeToCurve=cc.hashToCurve=cc.schnorr=cc.secp256k1=void 0;var ch=tV("6rvIJ"),cd={};Object.defineProperty(cd,"__esModule",{value:!0}),cd.mapToCurveSimpleSWU=cd.SWUFpSqrtRatio=cd.weierstrass=cd.weierstrassPoints=cd.DER=void 0;var ch=tV("6rvIJ"),cf=(tV("k39vF"),tV("k39vF")),cg=tV("fx8Cc");const{bytesToNumberBE:cp,hexToBytes:cm}=cf;cd.DER={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(t){let{Err:e}=cd.DER;if(t.length<2||2!==t[0])throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(128&n[0])throw new e("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:cp(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=cd.DER,r="string"==typeof t?cm(t):t;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let n=r.length;if(n<2||48!=r[0])throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=cd.DER._parseInt(r.subarray(2)),{d:o,l:a}=cd.DER._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){let e=t=>8&Number.parseInt(t[0],16)?"00"+t:t,r=t=>{let e=t.toString(16);return 1&e.length?`0${e}`:e},n=e(r(t.s)),i=e(r(t.r)),s=n.length/2,o=i.length/2,a=r(s),l=r(o);return`30${r(o+s+4)}02${l}${i}02${a}${n}`}};const cw=BigInt(0),cy=BigInt(1),cA=BigInt(2),cE=BigInt(3),cb=BigInt(4);function cC(t){let e=function(t){let e=(0,cg.validateBasic)(t);cf.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(t),{Fp:r}=e,n=e.toBytes||((t,e,n)=>{let i=e.toAffine();return cf.concatBytes(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=e.fromBytes||(t=>{let e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}});function s(t){let{a:n,b:i}=e,s=r.sqr(t),o=r.mul(s,t);return r.add(r.add(o,r.mul(t,n)),i)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw Error("bad generator point: equation left != right");function o(t){return"bigint"==typeof t&&cw<t&&t<e.n}function a(t){if(!o(t))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(t){let r,{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:s,n:o}=e;if(n&&"bigint"!=typeof t){if(t instanceof Uint8Array&&(t=cf.bytesToHex(t)),"string"!=typeof t||!n.includes(t.length))throw Error("Invalid key");t=t.padStart(2*i,"0")}try{r="bigint"==typeof t?t:cf.bytesToNumberBE((0,cf.ensureBytes)("private key",t,i))}catch(e){throw Error(`private key must be ${i} bytes, hex or bigint, not ${typeof t}`)}return s&&(r=ch.mod(r,o)),a(r),r}let u=new Map;function c(t){if(!(t instanceof h))throw Error("ProjectivePoint expected")}class h{constructor(t,e,n){if(this.px=t,this.py=e,this.pz=n,null==t||!r.isValid(t))throw Error("x required");if(null==e||!r.isValid(e))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required")}static fromAffine(t){let{x:e,y:n}=t||{};if(!t||!r.isValid(e)||!r.isValid(n))throw Error("invalid affine point");if(t instanceof h)throw Error("projective point not allowed");let i=t=>r.eql(t,r.ZERO);return i(e)&&i(n)?h.ZERO:new h(e,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(t){let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(h.fromAffine)}static fromHex(t){let e=h.fromAffine(i((0,cf.ensureBytes)("pointHex",t)));return e.assertValidity(),e}static fromPrivateKey(t){return h.BASE.multiply(l(t))}_setWindowSize(t){this._WINDOW_SIZE=t,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:t,y:n}=this.toAffine();if(!r.isValid(t)||!r.isValid(n))throw Error("bad point: x or y not FE");let i=r.sqr(n),o=s(t);if(!r.eql(i,o))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:t}=this.toAffine();if(r.isOdd)return!r.isOdd(t);throw Error("Field doesn't support isOdd")}equals(t){c(t);let{px:e,py:n,pz:i}=this,{px:s,py:o,pz:a}=t,l=r.eql(r.mul(e,a),r.mul(s,i)),u=r.eql(r.mul(n,a),r.mul(o,i));return l&&u}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:t,b:n}=e,i=r.mul(n,cE),{px:s,py:o,pz:a}=this,l=r.ZERO,u=r.ZERO,c=r.ZERO,d=r.mul(s,s),f=r.mul(o,o),g=r.mul(a,a),p=r.mul(s,o);return p=r.add(p,p),c=r.mul(s,a),c=r.add(c,c),l=r.mul(t,c),u=r.mul(i,g),u=r.add(l,u),l=r.sub(f,u),u=r.add(f,u),u=r.mul(l,u),l=r.mul(p,l),c=r.mul(i,c),g=r.mul(t,g),p=r.sub(d,g),p=r.mul(t,p),p=r.add(p,c),c=r.add(d,d),d=r.add(c,d),d=r.add(d,g),d=r.mul(d,p),u=r.add(u,d),g=r.mul(o,a),g=r.add(g,g),d=r.mul(g,p),l=r.sub(l,d),c=r.mul(g,f),c=r.add(c,c),new h(l,u,c=r.add(c,c))}add(t){c(t);let{px:n,py:i,pz:s}=this,{px:o,py:a,pz:l}=t,u=r.ZERO,d=r.ZERO,f=r.ZERO,g=e.a,p=r.mul(e.b,cE),m=r.mul(n,o),w=r.mul(i,a),y=r.mul(s,l),A=r.add(n,i),E=r.add(o,a);A=r.mul(A,E),E=r.add(m,w),A=r.sub(A,E),E=r.add(n,s);let b=r.add(o,l);return E=r.mul(E,b),b=r.add(m,y),E=r.sub(E,b),b=r.add(i,s),u=r.add(a,l),b=r.mul(b,u),u=r.add(w,y),b=r.sub(b,u),f=r.mul(g,E),u=r.mul(p,y),f=r.add(u,f),u=r.sub(w,f),f=r.add(w,f),d=r.mul(u,f),w=r.add(m,m),w=r.add(w,m),y=r.mul(g,y),E=r.mul(p,E),w=r.add(w,y),y=r.sub(m,y),y=r.mul(g,y),E=r.add(E,y),m=r.mul(w,E),d=r.add(d,m),m=r.mul(b,E),u=r.mul(A,u),u=r.sub(u,m),m=r.mul(A,w),f=r.mul(b,f),new h(u,d,f=r.add(f,m))}subtract(t){return this.add(t.negate())}is0(){return this.equals(h.ZERO)}wNAF(t){return f.wNAFCached(this,u,t,t=>{let e=r.invertBatch(t.map(t=>t.pz));return t.map((t,r)=>t.toAffine(e[r])).map(h.fromAffine)})}multiplyUnsafe(t){let n=h.ZERO;if(t===cw)return n;if(a(t),t===cy)return this;let{endo:i}=e;if(!i)return f.unsafeLadder(this,t);let{k1neg:s,k1:o,k2neg:l,k2:u}=i.splitScalar(t),c=n,d=n,g=this;for(;o>cw||u>cw;)o&cy&&(c=c.add(g)),u&cy&&(d=d.add(g)),g=g.double(),o>>=cy,u>>=cy;return s&&(c=c.negate()),l&&(d=d.negate()),d=new h(r.mul(d.px,i.beta),d.py,d.pz),c.add(d)}multiply(t){let n,i;a(t);let{endo:s}=e;if(s){let{k1neg:e,k1:o,k2neg:a,k2:l}=s.splitScalar(t),{p:u,f:c}=this.wNAF(o),{p:d,f:g}=this.wNAF(l);u=f.constTimeNegate(e,u),d=f.constTimeNegate(a,d),d=new h(r.mul(d.px,s.beta),d.py,d.pz),n=u.add(d),i=c.add(g)}else{let{p:e,f:r}=this.wNAF(t);n=e,i=r}return h.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(t,e,r){let n=h.BASE,i=(t,e)=>e!==cw&&e!==cy&&t.equals(n)?t.multiply(e):t.multiplyUnsafe(e),s=i(this,e).add(i(t,r));return s.is0()?void 0:s}toAffine(t){let{px:e,py:n,pz:i}=this,s=this.is0();null==t&&(t=s?r.ONE:r.inv(i));let o=r.mul(e,t),a=r.mul(n,t),l=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){let{h:t,isTorsionFree:r}=e;if(t===cy)return!0;if(r)return r(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:t,clearCofactor:r}=e;return t===cy?this:r?r(h,this):this.multiplyUnsafe(e.h)}toRawBytes(t=!0){return this.assertValidity(),n(h,this,t)}toHex(t=!0){return cf.bytesToHex(this.toRawBytes(t))}}h.BASE=new h(e.Gx,e.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let d=e.nBitLength,f=(0,cg.wNAF)(h,e.endo?Math.ceil(d/2):d);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function cI(t,e){let r=t.ORDER,n=cw;for(let t=r-cy;t%cA===cw;t/=cA)n+=cy;let i=n,s=cA<<i-cy-cy,o=s*cA,a=(r-cy)/o,l=(a-cy)/cA,u=o-cy,c=t.pow(e,a),h=t.pow(e,(a+cy)/cA),d=(e,r)=>{let n=c,o=t.pow(r,u),a=t.sqr(o);a=t.mul(a,r);let d=t.mul(e,a);d=t.pow(d,l),d=t.mul(d,o),o=t.mul(d,r),a=t.mul(d,e);let f=t.mul(a,o);d=t.pow(f,s);let g=t.eql(d,t.ONE);o=t.mul(a,h),d=t.mul(f,n),a=t.cmov(o,a,g),f=t.cmov(d,f,g);for(let e=i;e>cy;e--){let r=e-cA;r=cA<<r-cy;let i=t.pow(f,r),s=t.eql(i,t.ONE);o=t.mul(a,n),n=t.mul(n,n),i=t.mul(f,n),a=t.cmov(o,a,s),f=t.cmov(i,f,s)}return{isValid:g,value:a}};if(t.ORDER%cb===cE){let r=(t.ORDER-cE)/cb,n=t.sqrt(t.neg(e));d=(e,i)=>{let s=t.sqr(i),o=t.mul(e,i);s=t.mul(s,o);let a=t.pow(s,r);a=t.mul(a,o);let l=t.mul(a,n),u=t.mul(t.sqr(a),i),c=t.eql(u,e),h=t.cmov(l,a,c);return{isValid:c,value:h}}}return d}cd.weierstrassPoints=cC,cd.weierstrass=function(t){let e=function(t){let e=(0,cg.validateBasic)(t);return cf.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(t),{Fp:r,n:n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(t){return ch.mod(t,n)}function a(t){return ch.invert(t,n)}let{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:h}=cC({...e,toBytes(t,e,n){let i=e.toAffine(),s=r.toBytes(i.x),o=cf.concatBytes;return n?o(Uint8Array.from([e.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(t){let e=t.length,n=t[0],o=t.subarray(1);if(e===i&&(2===n||3===n)){let t=cf.bytesToNumberBE(o);if(!(cw<t&&t<r.ORDER))throw Error("Point is not on curve");let e=c(t),i=r.sqrt(e);return(1&n)==1!=((i&cy)===cy)&&(i=r.neg(i)),{x:t,y:i}}if(e===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${e} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),d=t=>cf.bytesToHex(cf.numberToBytesBE(t,e.nByteLength)),f=(t,e,r)=>cf.bytesToNumberBE(t.slice(e,r));class g{constructor(t,e,r){this.r=t,this.s=e,this.recovery=r,this.assertValidity()}static fromCompact(t){let r=e.nByteLength;return new g(f(t=(0,cf.ensureBytes)("compactSignature",t,2*r),0,r),f(t,r,2*r))}static fromDER(t){let{r:e,s:r}=cd.DER.toSig((0,cf.ensureBytes)("DER",t));return new g(e,r)}assertValidity(){if(!h(this.r))throw Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(t){return new g(this.r,this.s,t)}recoverPublicKey(t){let{r:n,s:i,recovery:s}=this,u=w((0,cf.ensureBytes)("msgHash",t));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let c=2===s||3===s?n+e.n:n;if(c>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&s)==0?"02":"03",f=l.fromHex(h+d(c)),g=a(c),p=o(-u*g),m=o(i*g),y=l.BASE.multiplyAndAddUnsafe(f,p,m);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>n>>cy}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return cf.hexToBytes(this.toDERHex())}toDERHex(){return cd.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return cf.hexToBytes(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}function p(t){let e=t instanceof Uint8Array,r="string"==typeof t,n=(e||r)&&t.length;return e?n===i||n===s:r?n===2*i||n===2*s:t instanceof l}let m=e.bits2int||function(t){let r=cf.bytesToNumberBE(t),n=8*t.length-e.nBitLength;return n>0?r>>BigInt(n):r},w=e.bits2int_modN||function(t){return o(m(t))},y=cf.bitMask(e.nBitLength);function A(t){if("bigint"!=typeof t)throw Error("bigint expected");if(!(cw<=t&&t<y))throw Error(`bigint expected < 2^${e.nBitLength}`);return cf.numberToBytesBE(t,e.nByteLength)}let E={lowS:e.lowS,prehash:!1},b={lowS:e.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(t,e=!0){return l.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e,r=!0){if(p(t))throw Error("first arg must be private key");if(!p(e))throw Error("second arg must be public key");return l.fromHex(e).multiply(u(t)).toRawBytes(r)},sign:function(t,i,s=E){let{seed:c,k2sig:d}=function(t,i,s=E){if(["recovered","canonical"].some(t=>t in s))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:d}=e,{lowS:f,prehash:p,extraEntropy:y}=s;null==f&&(f=!0),t=(0,cf.ensureBytes)("msgHash",t),p&&(t=(0,cf.ensureBytes)("prehashed msgHash",c(t)));let b=w(t),C=u(i),I=[A(C),A(b)];if(null!=y){let t=!0===y?d(r.BYTES):y;I.push((0,cf.ensureBytes)("extraEntropy",t))}return{seed:cf.concatBytes(...I),k2sig:function(t){var e;let r=m(t);if(!h(r))return;let i=a(r),s=l.BASE.multiply(r).toAffine(),u=o(s.x);if(u===cw)return;let c=o(i*o(b+u*C));if(c===cw)return;let d=2*(s.x!==u)|Number(s.y&cy),p=c;return f&&c>n>>cy&&(p=(e=c)>n>>cy?o(-e):e,d^=1),new g(u,p,d)}}}(t,i,s);return cf.createHmacDrbg(e.hash.outputLen,e.nByteLength,e.hmac)(c,d)},verify:function(t,r,n,i=b){let s,u;if(r=(0,cf.ensureBytes)("msgHash",r),n=(0,cf.ensureBytes)("publicKey",n),"strict"in i)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:h}=i;try{if("string"==typeof t||t instanceof Uint8Array)try{u=g.fromDER(t)}catch(e){if(!(e instanceof cd.DER.Err))throw e;u=g.fromCompact(t)}else if("object"==typeof t&&"bigint"==typeof t.r&&"bigint"==typeof t.s){let{r:e,s:r}=t;u=new g(e,r)}else throw Error("PARSE");s=l.fromHex(n)}catch(t){if("PARSE"===t.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&u.hasHighS())return!1;h&&(r=e.hash(r));let{r:d,s:f}=u,p=w(r),m=a(f),y=o(p*m),A=o(d*m),E=l.BASE.multiplyAndAddUnsafe(s,y,A)?.toAffine();return!!E&&o(E.x)===d},ProjectivePoint:l,Signature:g,utils:{isValidPrivateKey(t){try{return u(t),!0}catch(t){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let t=ch.getMinHashLength(e.n);return ch.mapHashToField(e.randomBytes(t),e.n)},precompute:(t=8,e=l.BASE)=>(e._setWindowSize(t),e.multiply(BigInt(3)),e)}}},cd.SWUFpSqrtRatio=cI,cd.mapToCurveSimpleSWU=function(t,e){if(ch.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=cI(t,e.Z);if(!t.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,l,u,c,h;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),u=t.sqr(a),l=t.mul(u,e.A),s=t.add(s,l),s=t.mul(s,o),u=t.mul(u,a),l=t.mul(u,e.B),s=t.add(s,l),c=t.mul(i,o);let{isValid:d,value:f}=r(s,u);h=t.mul(i,n),h=t.mul(h,f),c=t.cmov(c,o,d),h=t.cmov(h,f,d);let g=t.isOdd(n)===t.isOdd(h);return h=t.cmov(t.neg(h),h,g),{x:c=t.div(c,a),y:h}}};var cf=tV("k39vF"),c_={};Object.defineProperty(c_,"__esModule",{value:!0}),c_.createHasher=c_.isogenyMap=c_.hash_to_field=c_.expand_message_xof=c_.expand_message_xmd=void 0;var ch=tV("6rvIJ"),cf=tV("k39vF");const cS=cf.bytesToNumberBE;function cT(t,e){if(t<0||t>=1<<8*e)throw Error(`bad I2OSP call: value=${t} length=${e}`);let r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=255&t,t>>>=8;return new Uint8Array(r)}function cv(t){if(!(t instanceof Uint8Array))throw Error("Uint8Array expected")}function cN(t){if(!Number.isSafeInteger(t))throw Error("number expected")}function cR(t,e,r,n){cv(t),cv(e),cN(r),e.length>255&&(e=n((0,cf.concatBytes)((0,cf.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(o>255)throw Error("Invalid xmd length");let a=(0,cf.concatBytes)(e,cT(e.length,1)),l=cT(0,s),u=cT(r,2),c=Array(o),h=n((0,cf.concatBytes)(l,t,u,cT(0,1),a));c[0]=n((0,cf.concatBytes)(h,cT(1,1),a));for(let t=1;t<=o;t++){let e=[function(t,e){let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}(h,c[t-1]),cT(t+1,1),a];c[t]=n((0,cf.concatBytes)(...e))}return(0,cf.concatBytes)(...c).slice(0,r)}function cO(t,e,r,n,i){if(cv(t),cv(e),cN(r),e.length>255){let t=Math.ceil(2*n/8);e=i.create({dkLen:t}).update((0,cf.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(cT(r,2)).update(e).update(cT(e.length,1)).digest()}function cD(t,e,r){let n;(0,cf.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:i,k:s,m:o,hash:a,expand:l,DST:u}=r;cv(t),cN(e);let c=function(t){if(t instanceof Uint8Array)return t;if("string"==typeof t)return(0,cf.utf8ToBytes)(t);throw Error("DST must be Uint8Array or string")}(u),h=Math.ceil((i.toString(2).length+s)/8),d=e*o*h;if("xmd"===l)n=cR(t,c,d,a);else if("xof"===l)n=cO(t,c,d,s,a);else if("_internal_pass"===l)n=t;else throw Error('expand must be "xmd" or "xof"');let f=Array(e);for(let t=0;t<e;t++){let e=Array(o);for(let r=0;r<o;r++){let s=h*(r+t*o),a=n.subarray(s,s+h);e[r]=(0,ch.mod)(cS(a),i)}f[t]=e}return f}c_.expand_message_xmd=cR,c_.expand_message_xof=cO,c_.hash_to_field=cD,c_.isogenyMap=function(t,e){let r=e.map(t=>Array.from(t).reverse());return(e,n)=>{let[i,s,o,a]=r.map(r=>r.reduce((r,n)=>t.add(t.mul(r,e),n)));return e=t.div(i,s),n=t.mul(n,t.div(o,a)),{x:e,y:n}}},c_.createHasher=function(t,e,r){if("function"!=typeof e)throw Error("mapToCurve() must be defined");return{hashToCurve(n,i){let s=cD(n,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),l=o.add(a).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,i){let s=cD(n,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o}}};var cM={};function cx(t){return{hash:t,hmac:(e,...r)=>(0,aL.hmac)(t,e,(0,aj.concatBytes)(...r)),randomBytes:aj.randomBytes}}Object.defineProperty(cM,"__esModule",{value:!0}),cM.createCurve=cM.getHash=void 0,cM.getHash=cx,cM.createCurve=function(t,e){let r=e=>(0,cd.weierstrass)({...t,...cx(e)});return Object.freeze({...r(e),create:r})};const cB=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),cP=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),cL=BigInt(1),ck=BigInt(2),cF=(t,e)=>(t+e/ck)/e;function cU(t){let e=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),l=t*t*t%cB,u=l*l*t%cB,c=(0,ch.pow2)(u,e,cB)*u%cB,h=(0,ch.pow2)(c,e,cB)*u%cB,d=(0,ch.pow2)(h,ck,cB)*l%cB,f=(0,ch.pow2)(d,n,cB)*d%cB,g=(0,ch.pow2)(f,i,cB)*f%cB,p=(0,ch.pow2)(g,o,cB)*g%cB,m=(0,ch.pow2)(p,a,cB)*p%cB,w=(0,ch.pow2)(m,o,cB)*g%cB,y=(0,ch.pow2)(w,e,cB)*u%cB,A=(0,ch.pow2)(y,s,cB)*f%cB,E=(0,ch.pow2)(A,r,cB)*l%cB,b=(0,ch.pow2)(E,ck,cB);if(!cH.eql(cH.sqr(b),t))throw Error("Cannot find square root");return b}const cH=(0,ch.Field)(cB,void 0,void 0,{sqrt:cU});cc.secp256k1=(0,cM.createCurve)({a:BigInt(0),b:BigInt(7),Fp:cH,n:cP,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-cL*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),s=cF(e*t,cP),o=cF(-r*t,cP),a=(0,ch.mod)(t-s*e-o*n,cP),l=(0,ch.mod)(-s*r-o*e,cP),u=a>i,c=l>i;if(u&&(a=cP-a),c&&(l=cP-l),a>i||l>i)throw Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:a,k2neg:c,k2:l}}}},a3.sha256);const cV=BigInt(0),cz=t=>"bigint"==typeof t&&cV<t&&t<cB,cG=t=>"bigint"==typeof t&&cV<t&&t<cP,cj={};function cQ(t,...e){let r=cj[t];if(void 0===r){let e=(0,a3.sha256)(Uint8Array.from(t,t=>t.charCodeAt(0)));r=(0,cf.concatBytes)(e,e),cj[t]=r}return(0,a3.sha256)((0,cf.concatBytes)(r,...e))}const cW=t=>t.toRawBytes(!0).slice(1),cY=t=>(0,cf.numberToBytesBE)(t,32),cX=t=>(0,ch.mod)(t,cB),cq=t=>(0,ch.mod)(t,cP),cK=cc.secp256k1.ProjectivePoint,cZ=(t,e,r)=>cK.BASE.multiplyAndAddUnsafe(t,e,r);function cJ(t){let e=cc.secp256k1.utils.normPrivateKeyToScalar(t),r=cK.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:cq(-e),bytes:cW(r)}}function c$(t){if(!cz(t))throw Error("bad x: need 0 < x < p");let e=cX(t*t),r=cU(cX(e*t+BigInt(7)));r%ck!==cV&&(r=cX(-r));let n=new cK(t,r,cL);return n.assertValidity(),n}function c1(...t){return cq((0,cf.bytesToNumberBE)(cQ("BIP0340/challenge",...t)))}function c0(t,e,r){let n=(0,cf.ensureBytes)("signature",t,64),i=(0,cf.ensureBytes)("message",e),s=(0,cf.ensureBytes)("publicKey",r,32);try{let t=c$((0,cf.bytesToNumberBE)(s)),e=(0,cf.bytesToNumberBE)(n.subarray(0,32));if(!cz(e))return!1;let r=(0,cf.bytesToNumberBE)(n.subarray(32,64));if(!cG(r))return!1;let o=c1(cY(e),cW(t),i),a=cZ(t,r,cq(-o));if(!a||!a.hasEvenY()||a.toAffine().x!==e)return!1;return!0}catch(t){return!1}}cc.schnorr={getPublicKey:function(t){return cJ(t).bytes},sign:function(t,e,r=(0,aj.randomBytes)(32)){let n=(0,cf.ensureBytes)("message",t),{bytes:i,scalar:s}=cJ(e),o=(0,cf.ensureBytes)("auxRand",r,32),a=cY(s^(0,cf.bytesToNumberBE)(cQ("BIP0340/aux",o))),l=cQ("BIP0340/nonce",a,i,n),u=cq((0,cf.bytesToNumberBE)(l));if(u===cV)throw Error("sign failed: k is zero");let{bytes:c,scalar:h}=cJ(u),d=c1(c,i,n),f=new Uint8Array(64);if(f.set(c,0),f.set(cY(cq(h+d*s)),32),!c0(f,n,i))throw Error("sign: Invalid signature produced");return f},verify:c0,utils:{randomPrivateKey:cc.secp256k1.utils.randomPrivateKey,lift_x:c$,pointToBytes:cW,numberToBytesBE:cf.numberToBytesBE,bytesToNumberBE:cf.bytesToNumberBE,taggedHash:cQ,mod:ch.mod}};const c2=(0,c_.isogenyMap)(cH,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(t=>BigInt(t)))),c3=(0,cd.mapToCurveSimpleSWU)(cH,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:cH.create(BigInt("-11"))}),c4=(0,c_.createHasher)(cc.secp256k1.ProjectivePoint,t=>{let{x:e,y:r}=c3(cH.create(t[0]));return c2(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:cH.ORDER,m:1,k:128,expand:"xmd",hash:a3.sha256});cc.hashToCurve=c4.hashToCurve,cc.encodeToCurve=c4.encodeToCurve;const c8=BigInt(0),c6=BigInt(1);function c5(t,e){let r=c9(t,"value"),n=BigInt(hn(e,"width")),i=c6<<n-c6;return r<c8?(lG((r=-r)<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),(~r&(c6<<n)-c6)+c6):(lG(r<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:t}),r)}function c7(t,e){return ht(t,"value")&(c6<<BigInt(hn(e,"bits")))-c6}function c9(t,e){switch(typeof t){case"bigint":return t;case"number":return lj(Number.isInteger(t),"underflow",e||"value",t),lj(t>=-0x1fffffffffffff&&t<=0x1fffffffffffff,"overflow",e||"value",t),BigInt(t);case"string":try{if(""===t)throw Error("empty string");if("-"===t[0]&&"-"!==t[1])return-BigInt(t.substring(1));return BigInt(t)}catch(r){lj(!1,`invalid BigNumberish string: ${r.message}`,e||"value",t)}}lj(!1,"invalid BigNumberish value",e||"value",t)}function ht(t,e){let r=c9(t,e);return lG(r>=c8,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),r}const he="0123456789abcdef";function hr(t){if(t instanceof Uint8Array){let e="0x0";for(let r of t)e+=he[r>>4],e+=he[15&r];return BigInt(e)}return c9(t)}function hn(t,e){switch(typeof t){case"bigint":return lj(t>=-0x1fffffffffffff&&t<=0x1fffffffffffff,"overflow",e||"value",t),Number(t);case"number":return lj(Number.isInteger(t),"underflow",e||"value",t),lj(t>=-0x1fffffffffffff&&t<=0x1fffffffffffff,"overflow",e||"value",t),t;case"string":try{if(""===t)throw Error("empty string");return hn(BigInt(t),e)}catch(r){lj(!1,`invalid numeric string: ${r.message}`,e||"value",t)}}lj(!1,"invalid numeric value",e||"value",t)}function hi(t,e){let r=ht(t,"value").toString(16);if(null==e)r.length%2&&(r="0"+r);else{let n=hn(e,"width");for(lG(2*n>=r.length,`value exceeds width (${n} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:t});r.length<2*n;)r="0"+r}return"0x"+r}function hs(t){let e=ht(t,"value");if(e===c8)return new Uint8Array([]);let r=e.toString(16);r.length%2&&(r="0"+r);let n=new Uint8Array(r.length/2);for(let t=0;t<n.length;t++){let e=2*t;n[t]=parseInt(r.substring(e,e+2),16)}return n}function ho(t){let e=l3(l0(t)?t:hs(t)).substring(2);for(;e.startsWith("0");)e=e.substring(1);return""===e&&(e="0"),"0x"+e}const ha="0x0000000000000000000000000000000000000000000000000000000000000000",hl=BigInt(0),hu=BigInt(1),hc=BigInt(2),hh=BigInt(27),hd=BigInt(28),hf=BigInt(35),hg={};class hp{#t;#e;#r;#n;get r(){return this.#t}set r(t){lj(32===l8(t),"invalid r","value",t),this.#t=l3(t)}get s(){return this.#e}set s(t){lj(32===l8(t),"invalid s","value",t);let e=l3(t);lj(8>parseInt(e.substring(0,3)),"non-canonical s","value",e),this.#e=e}get v(){return this.#r}set v(t){let e=hn(t,"value");lj(27===e||28===e,"invalid v","v",t),this.#r=e}get networkV(){return this.#n}get legacyChainId(){let t=this.networkV;return null==t?null:hp.getChainId(t)}get yParity(){return+(27!==this.v)}get yParityAndS(){let t=lJ(this.s);return this.yParity&&(t[0]|=128),l3(t)}get compactSerialized(){return l4([this.r,this.yParityAndS])}get serialized(){return l4([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(t,e,r,n){lY(t,hg,"Signature"),this.#t=e,this.#e=r,this.#r=n,this.#n=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this.s}", yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let t=new hp(hg,this.r,this.s,this.v);return this.networkV&&(t.#n=this.networkV),t}toJSON(){let t=this.networkV;return{_type:"signature",networkV:null!=t?t.toString():null,r:this.r,s:this.s,v:this.v}}static getChainId(t){let e=c9(t,"v");return e==hh||e==hd?hl:(lj(e>=hf,"invalid EIP-155 v","v",t),(e-hf)/hc)}static getChainIdV(t,e){return c9(t)*hc+BigInt(35+e-27)}static getNormalizedV(t){let e=c9(t);return e===hl||e===hh?27:e===hu||e===hd?28:(lj(e>=hf,"invalid v","v",t),e&hu?27:28)}static from(t){function e(e,r){lj(e,r,"signature",t)}if(null==t)return new hp(hg,ha,ha,27);if("string"==typeof t){let r=lJ(t,"signature");if(64===r.length){let t=l3(r.slice(0,32)),e=r.slice(32,64),n=128&e[0]?28:27;return e[0]&=127,new hp(hg,t,l3(e),n)}if(65===r.length){let t=l3(r.slice(0,32)),n=r.slice(32,64);e((128&n[0])==0,"non-canonical s");let i=hp.getNormalizedV(r[64]);return new hp(hg,t,l3(n),i)}e(!1,"invalid raw signature length")}if(t instanceof hp)return t.clone();let r=t.r;e(null!=r,"missing r");let n=l7(hs(r),32),i=function(t,r){if(null!=t)return l7(hs(t),32);if(null!=r){e(l1(r,32),"invalid yParityAndS");let t=lJ(r);return t[0]&=127,l3(t)}e(!1,"missing s")}(t.s,t.yParityAndS);e((128&lJ(i)[0])==0,"non-canonical s");let{networkV:s,v:o}=function(t,r,n){if(null!=t){let e=c9(t);return{networkV:e>=hf?e:void 0,v:hp.getNormalizedV(e)}}if(null!=r)return e(l1(r,32),"invalid yParityAndS"),{v:128&lJ(r)[0]?28:27};if(null!=n){switch(hn(n,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}e(!1,"invalid yParity")}e(!1,"missing v")}(t.v,t.yParityAndS,t.yParity),a=new hp(hg,n,i,o);return s&&(a.#n=s),e(null==t.yParity||hn(t.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),e(null==t.yParityAndS||t.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}class hm{#i;constructor(t){lj(32===l8(t),"invalid private key","privateKey","[REDACTED]"),this.#i=l3(t)}get privateKey(){return this.#i}get publicKey(){return hm.computePublicKey(this.#i)}get compressedPublicKey(){return hm.computePublicKey(this.#i,!0)}sign(t){lj(32===l8(t),"invalid digest length","digest",t);let e=cc.secp256k1.sign(l$(t),l$(this.#i),{lowS:!0});return hp.from({r:hi(e.r,32),s:hi(e.s,32),v:e.recovery?28:27})}computeSharedSecret(t){let e=hm.computePublicKey(t);return l3(cc.secp256k1.getSharedSecret(l$(this.#i),lJ(e),!1))}static computePublicKey(t,e){let r=lJ(t,"key");if(32===r.length)return l3(cc.secp256k1.getPublicKey(r,!!e));if(64===r.length){let t=new Uint8Array(65);t[0]=4,t.set(r,1),r=t}return l3(cc.secp256k1.ProjectivePoint.fromHex(r).toRawBytes(e))}static recoverPublicKey(t,e){lj(32===l8(t),"invalid digest length","digest",t);let r=hp.from(e),n=cc.secp256k1.Signature.fromCompact(l$(l4([r.r,r.s]))),i=(n=n.addRecoveryBit(r.yParity)).recoverPublicKey(l$(t));return lj(null!=i,"invalid signature for digest","signature",e),"0x"+i.toHex(!1)}static addPoints(t,e,r){let n=cc.secp256k1.ProjectivePoint.fromHex(hm.computePublicKey(t).substring(2)),i=cc.secp256k1.ProjectivePoint.fromHex(hm.computePublicKey(e).substring(2));return"0x"+n.add(i).toHex(!!r)}}function hw(t,e,r,n,i){if("BAD_PREFIX"===t||"UNEXPECTED_CONTINUE"===t){let t=0;for(let n=e+1;n<r.length&&r[n]>>6==2;n++)t++;return t}return"OVERRUN"===t?r.length-e-1:0}const hy=Object.freeze({error:function(t,e,r,n,i){lj(!1,`invalid codepoint at offset ${e}; ${t}`,"bytes",r)},ignore:hw,replace:function(t,e,r,n,i){return"OVERLONG"===t?(lj("number"==typeof i,"invalid bad code point for replacement","badCodepoint",i),n.push(i),0):(n.push(65533),hw(t,e,r,n,i))}});function hA(t,e){(lj("string"==typeof t,"invalid string value","str",t),null!=e)&&(lG(lW.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}}),t=t.normalize(e));let r=[];for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if((64512&n)==55296){e++;let i=t.charCodeAt(e);lj(e<t.length&&(64512&i)==56320,"invalid surrogate pair","str",t);let s=65536+((1023&n)<<10)+(1023&i);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return new Uint8Array(r)}function hE(t,e){return(function(t,e){null==e&&(e=hy.error);let r=lJ(t,"bytes"),n=[],i=0;for(;i<r.length;){let t=r[i++];if(t>>7==0){n.push(t);continue}let s=null,o=null;if((224&t)==192)s=1,o=127;else if((240&t)==224)s=2,o=2047;else if((248&t)==240)s=3,o=65535;else{(192&t)==128?i+=e("UNEXPECTED_CONTINUE",i-1,r,n):i+=e("BAD_PREFIX",i-1,r,n);continue}if(i-1+s>=r.length){i+=e("OVERRUN",i-1,r,n);continue}let a=t&(1<<8-s-1)-1;for(let t=0;t<s;t++){let t=r[i];if((192&t)!=128){i+=e("MISSING_CONTINUE",i,r,n),a=null;break}a=a<<6|63&t,i++}if(null!==a){if(a>1114111){i+=e("OUT_OF_RANGE",i-1-s,r,n,a);continue}if(a>=55296&&a<=57343){i+=e("UTF16_SURROGATE",i-1-s,r,n,a);continue}if(a<=o){i+=e("OVERLONG",i-1-s,r,n,a);continue}n.push(a)}}return n})(t,e).map(t=>t<=65535?String.fromCharCode(t):String.fromCharCode(((t-=65536)>>10&1023)+55296,(1023&t)+56320)).join("")}function hb(t){return u_(hA(t))}const hC=new Uint8Array(32),hI=["then"],h_={},hS=new WeakMap;function hT(t){return hS.get(t)}function hv(t,e){let r=Error(`deferred error during ABI decoding triggered accessing ${t}`);throw r.error=e,r}class hN extends Array{#s;constructor(...t){var e,r;let n=t[0],i=t[1],s=(t[2]||[]).slice(),o=!0;n!==h_&&(i=t,s=[],o=!1),super(i.length),i.forEach((t,e)=>{this[e]=t});let a=s.reduce((t,e)=>("string"==typeof e&&t.set(e,(t.get(e)||0)+1),t),new Map);if(e=Object.freeze(i.map((t,e)=>{let r=s[e];return null!=r&&1===a.get(r)?r:null})),hS.set(this,e),this.#s=[],null==this.#s&&this.#s,!o)return;Object.freeze(this);let l=new Proxy(this,{get:(t,e,r)=>{if("string"==typeof e){if(e.match(/^[0-9]+$/)){let r=hn(e,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let n=t[r];return n instanceof Error&&hv(`index ${r}`,n),n}if(hI.indexOf(e)>=0)return Reflect.get(t,e,r);let n=t[e];if(n instanceof Function)return function(...e){return n.apply(this===r?t:this,e)};if(!(e in t))return t.getValue.apply(this===r?t:this,[e])}return Reflect.get(t,e,r)}});return r=hT(this),hS.set(l,r),l}toArray(t){let e=[];return this.forEach((r,n)=>{r instanceof Error&&hv(`index ${n}`,r),t&&r instanceof hN&&(r=r.toArray(t)),e.push(r)}),e}toObject(t){let e=hT(this);return e.reduce((r,n,i)=>(lG(null!=n,`value at index ${i} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),function t(e,r,n){return e.indexOf(null)>=0?r.map((e,r)=>e instanceof hN?t(hT(e),e,n):e):e.reduce((e,i,s)=>{let o=r.getValue(i);return i in e||(n&&o instanceof hN&&(o=t(hT(o),o,n)),e[i]=o),e},{})}(e,this,t)),{})}slice(t,e){null==t&&(t=0),t<0&&(t+=this.length)<0&&(t=0),null==e&&(e=this.length),e<0&&(e+=this.length)<0&&(e=0),e>this.length&&(e=this.length);let r=hT(this),n=[],i=[];for(let s=t;s<e;s++)n.push(this[s]),i.push(r[s]);return new hN(h_,n,i)}filter(t,e){let r=hT(this),n=[],i=[];for(let s=0;s<this.length;s++){let o=this[s];o instanceof Error&&hv(`index ${s}`,o),t.call(e,o,s,this)&&(n.push(o),i.push(r[s]))}return new hN(h_,n,i)}map(t,e){let r=[];for(let n=0;n<this.length;n++){let i=this[n];i instanceof Error&&hv(`index ${n}`,i),r.push(t.call(e,i,n,this))}return r}getValue(t){let e=hT(this).indexOf(t);if(-1===e)return;let r=this[e];return r instanceof Error&&hv(`property ${JSON.stringify(t)}`,r.error),r}static fromItems(t,e){return new hN(h_,t,e)}}function hR(t){let e=hs(t);return lG(e.length<=32,"value out-of-bounds","BUFFER_OVERRUN",{buffer:e,length:32,offset:e.length}),32!==e.length&&(e=l$(l4([hC.slice(e.length%32),e]))),e}class hO{name;type;localName;dynamic;constructor(t,e,r,n){lF(this,{name:t,type:e,localName:r,dynamic:n},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(t,e){lj(!1,t,this.localName,e)}}class hD{#o;#a;constructor(){this.#o=[],this.#a=0}get data(){return l4(this.#o)}get length(){return this.#a}#l(t){return this.#o.push(t),this.#a+=t.length,t.length}appendWriter(t){return this.#l(l$(t.data))}writeBytes(t){let e=l$(t),r=e.length%32;return r&&(e=l$(l4([e,hC.slice(r)]))),this.#l(e)}writeValue(t){return this.#l(hR(t))}writeUpdatableValue(){let t=this.#o.length;return this.#o.push(hC),this.#a+=32,e=>{this.#o[t]=hR(e)}}}class hM{allowLoose;#o;#u;#c;#h;#d;constructor(t,e,r){lF(this,{allowLoose:!!e}),this.#o=l$(t),this.#c=0,this.#h=null,this.#d=null!=r?r:1024,this.#u=0}get data(){return l3(this.#o)}get dataLength(){return this.#o.length}get consumed(){return this.#u}get bytes(){return new Uint8Array(this.#o)}#f(t){if(this.#h)return this.#h.#f(t);this.#c+=t,lG(this.#d<1||this.#c<=this.#d*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#d} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:l$(this.#o),offset:this.#u,length:t,info:{bytesRead:this.#c,dataLength:this.dataLength}})}#g(t,e,r){let n=32*Math.ceil(e/32);return this.#u+n>this.#o.length&&(this.allowLoose&&r&&this.#u+e<=this.#o.length?n=e:lG(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:l$(this.#o),length:this.#o.length,offset:this.#u+n})),this.#o.slice(this.#u,this.#u+n)}subReader(t){let e=new hM(this.#o.slice(this.#u+t),this.allowLoose,this.#d);return e.#h=this,e}readBytes(t,e){let r=this.#g(0,t,!!e);return this.#f(t),this.#u+=r.length,r.slice(0,t)}readValue(){return hr(this.readBytes(32))}readIndex(){return hn(hr(this.readBytes(32)))}}const hx=BigInt(0),hB=BigInt(36);function hP(t){let e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let t=0;t<40;t++)r[t]=e[t].charCodeAt(0);let n=lJ(u_(r));for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&(e[t]=e[t].toUpperCase()),(15&n[t>>1])>=8&&(e[t+1]=e[t+1].toUpperCase());return"0x"+e.join("")}const hL={};for(let t=0;t<10;t++)hL[String(t)]=String(t);for(let t=0;t<26;t++)hL[String.fromCharCode(65+t)]=String(10+t);const hk=function(){let t={};for(let e=0;e<36;e++)t["0123456789abcdefghijklmnopqrstuvwxyz"[e]]=BigInt(e);return t}();function hF(t){if(lj("string"==typeof t,"invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/)){t.startsWith("0x")||(t="0x"+t);let e=hP(t);return lj(!t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===t,"bad address checksum","address",t),e}if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){lj(t.substring(2,4)===function(t){let e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map(t=>hL[t]).join("");for(;e.length>=15;){let t=e.substring(0,15);e=parseInt(t,10)%97+e.substring(t.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}(t),"bad icap checksum","address",t);let e=(function(t){t=t.toLowerCase();let e=hx;for(let r=0;r<t.length;r++)e=e*hB+hk[t[r]];return e})(t.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return hP("0x"+e)}lj(!1,"invalid address","address",t)}const hU={};function hH(t,e){let r=!1;return e<0&&(r=!0,e*=-1),new hG(hU,`${r?"":"u"}int${e}`,t,{signed:r,width:e})}function hV(t,e){return new hG(hU,`bytes${e||""}`,t,{size:e})}const hz=Symbol.for("_ethers_typed");class hG{type;value;#p;_typedSymbol;constructor(t,e,r,n){null==n&&(n=null),lY(hU,t,"Typed"),lF(this,{_typedSymbol:hz,type:e,value:r}),this.#p=n,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(t=>t.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#p}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#p?-1:!1===this.#p?this.value.length:null}static from(t,e){return new hG(hU,t,e)}static uint8(t){return hH(t,8)}static uint16(t){return hH(t,16)}static uint24(t){return hH(t,24)}static uint32(t){return hH(t,32)}static uint40(t){return hH(t,40)}static uint48(t){return hH(t,48)}static uint56(t){return hH(t,56)}static uint64(t){return hH(t,64)}static uint72(t){return hH(t,72)}static uint80(t){return hH(t,80)}static uint88(t){return hH(t,88)}static uint96(t){return hH(t,96)}static uint104(t){return hH(t,104)}static uint112(t){return hH(t,112)}static uint120(t){return hH(t,120)}static uint128(t){return hH(t,128)}static uint136(t){return hH(t,136)}static uint144(t){return hH(t,144)}static uint152(t){return hH(t,152)}static uint160(t){return hH(t,160)}static uint168(t){return hH(t,168)}static uint176(t){return hH(t,176)}static uint184(t){return hH(t,184)}static uint192(t){return hH(t,192)}static uint200(t){return hH(t,200)}static uint208(t){return hH(t,208)}static uint216(t){return hH(t,216)}static uint224(t){return hH(t,224)}static uint232(t){return hH(t,232)}static uint240(t){return hH(t,240)}static uint248(t){return hH(t,248)}static uint256(t){return hH(t,256)}static uint(t){return hH(t,256)}static int8(t){return hH(t,-8)}static int16(t){return hH(t,-16)}static int24(t){return hH(t,-24)}static int32(t){return hH(t,-32)}static int40(t){return hH(t,-40)}static int48(t){return hH(t,-48)}static int56(t){return hH(t,-56)}static int64(t){return hH(t,-64)}static int72(t){return hH(t,-72)}static int80(t){return hH(t,-80)}static int88(t){return hH(t,-88)}static int96(t){return hH(t,-96)}static int104(t){return hH(t,-104)}static int112(t){return hH(t,-112)}static int120(t){return hH(t,-120)}static int128(t){return hH(t,-128)}static int136(t){return hH(t,-136)}static int144(t){return hH(t,-144)}static int152(t){return hH(t,-152)}static int160(t){return hH(t,-160)}static int168(t){return hH(t,-168)}static int176(t){return hH(t,-176)}static int184(t){return hH(t,-184)}static int192(t){return hH(t,-192)}static int200(t){return hH(t,-200)}static int208(t){return hH(t,-208)}static int216(t){return hH(t,-216)}static int224(t){return hH(t,-224)}static int232(t){return hH(t,-232)}static int240(t){return hH(t,-240)}static int248(t){return hH(t,-248)}static int256(t){return hH(t,-256)}static int(t){return hH(t,-256)}static bytes1(t){return hV(t,1)}static bytes2(t){return hV(t,2)}static bytes3(t){return hV(t,3)}static bytes4(t){return hV(t,4)}static bytes5(t){return hV(t,5)}static bytes6(t){return hV(t,6)}static bytes7(t){return hV(t,7)}static bytes8(t){return hV(t,8)}static bytes9(t){return hV(t,9)}static bytes10(t){return hV(t,10)}static bytes11(t){return hV(t,11)}static bytes12(t){return hV(t,12)}static bytes13(t){return hV(t,13)}static bytes14(t){return hV(t,14)}static bytes15(t){return hV(t,15)}static bytes16(t){return hV(t,16)}static bytes17(t){return hV(t,17)}static bytes18(t){return hV(t,18)}static bytes19(t){return hV(t,19)}static bytes20(t){return hV(t,20)}static bytes21(t){return hV(t,21)}static bytes22(t){return hV(t,22)}static bytes23(t){return hV(t,23)}static bytes24(t){return hV(t,24)}static bytes25(t){return hV(t,25)}static bytes26(t){return hV(t,26)}static bytes27(t){return hV(t,27)}static bytes28(t){return hV(t,28)}static bytes29(t){return hV(t,29)}static bytes30(t){return hV(t,30)}static bytes31(t){return hV(t,31)}static bytes32(t){return hV(t,32)}static address(t){return new hG(hU,"address",t)}static bool(t){return new hG(hU,"bool",!!t)}static bytes(t){return new hG(hU,"bytes",t)}static string(t){return new hG(hU,"string",t)}static array(t,e){throw Error("not implemented yet")}static tuple(t,e){throw Error("not implemented yet")}static overrides(t){return new hG(hU,"overrides",Object.assign({},t))}static isTyped(t){return t&&"object"==typeof t&&"_typedSymbol"in t&&t._typedSymbol===hz}static dereference(t,e){if(hG.isTyped(t)){if(t.type!==e)throw Error(`invalid type: expecetd ${e}, got ${t.type}`);return t.value}return t}}class hj extends hO{constructor(t){super("address","address",t,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(t,e){let r=hG.dereference(e,"string");try{r=hF(r)}catch(t){return this._throwError(t.message,e)}return t.writeValue(r)}decode(t){return hF(hi(t.readValue(),20))}}class hQ extends hO{coder;constructor(t){super(t.name,t.type,"_",t.dynamic),this.coder=t}defaultValue(){return this.coder.defaultValue()}encode(t,e){return this.coder.encode(t,e)}decode(t){return this.coder.decode(t)}}function hW(t,e,r){let n=[];if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let t={};n=e.map(e=>{let n=e.localName;return lG(n,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),lG(!t[n],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:e},value:r}),t[n]=!0,r[n]})}else lj(!1,"invalid tuple value","tuple",r);lj(e.length===n.length,"types/value length mismatch","tuple",r);let i=new hD,s=new hD,o=[];e.forEach((t,e)=>{let r=n[e];if(t.dynamic){let e=s.length;t.encode(s,r);let n=i.writeUpdatableValue();o.push(t=>{n(t+e)})}else t.encode(i,r)}),o.forEach(t=>{t(i.length)});let a=t.appendWriter(i);return a+t.appendWriter(s)}function hY(t,e){let r=[],n=[],i=t.subReader(0);return e.forEach(e=>{let s=null;if(e.dynamic){let r=t.readIndex(),n=i.subReader(r);try{s=e.decode(n)}catch(t){if(lH(t,"BUFFER_OVERRUN"))throw t;(s=t).baseType=e.name,s.name=e.localName,s.type=e.type}}else try{s=e.decode(t)}catch(t){if(lH(t,"BUFFER_OVERRUN"))throw t;(s=t).baseType=e.name,s.name=e.localName,s.type=e.type}if(void 0==s)throw Error("investigate");r.push(s),n.push(e.localName||null)}),hN.fromItems(r,n)}class hX extends hO{coder;length;constructor(t,e,r){super("array",t.type+"["+(e>=0?e:"")+"]",r,-1===e||t.dynamic),lF(this,{coder:t,length:e})}defaultValue(){let t=this.coder.defaultValue(),e=[];for(let r=0;r<this.length;r++)e.push(t);return e}encode(t,e){let r=hG.dereference(e,"array");Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;-1===n&&(n=r.length,t.writeValue(r.length)),lQ(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let t=0;t<r.length;t++)i.push(this.coder);return hW(t,i,r)}decode(t){let e=this.length;-1===e&&lG(32*(e=t.readIndex())<=t.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:t.bytes,offset:32*e,length:t.dataLength});let r=[];for(let t=0;t<e;t++)r.push(new hQ(this.coder));return hY(t,r)}}class hq extends hO{constructor(t){super("bool","bool",t,!1)}defaultValue(){return!1}encode(t,e){let r=hG.dereference(e,"bool");return t.writeValue(+!!r)}decode(t){return!!t.readValue()}}class hK extends hO{constructor(t,e){super(t,t,e,!0)}defaultValue(){return"0x"}encode(t,e){e=l$(e);let r=t.writeValue(e.length);return r+t.writeBytes(e)}decode(t){return t.readBytes(t.readIndex(),!0)}}class hZ extends hK{constructor(t){super("bytes",t)}decode(t){return l3(super.decode(t))}}class hJ extends hO{size;constructor(t,e){let r="bytes"+String(t);super(r,r,e,!1),lF(this,{size:t},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(t,e){let r=l$(hG.dereference(e,this.type));return r.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(r)}decode(t){return l3(t.readBytes(this.size))}}const h$=new Uint8Array([]);class h1 extends hO{constructor(t){super("null","",t,!1)}defaultValue(){return null}encode(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes(h$)}decode(t){return t.readBytes(0),null}}const h0=BigInt(0),h2=BigInt(1),h3=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class h4 extends hO{size;signed;constructor(t,e,r){let n=(e?"int":"uint")+8*t;super(n,n,r,!1),lF(this,{size:t,signed:e},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(t,e){let r=c9(hG.dereference(e,this.type)),n=c7(h3,256);if(this.signed){let t=c7(n,8*this.size-1);(r>t||r<-(t+h2))&&this._throwError("value out-of-bounds",e),r=c5(r,256)}else(r<h0||r>c7(n,8*this.size))&&this._throwError("value out-of-bounds",e);return t.writeValue(r)}decode(t){let e=c7(t.readValue(),8*this.size);return this.signed&&(e=function(t,e){let r=ht(t,"value"),n=BigInt(hn(e,"width"));return(lG(r>>n===c8,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),r>>n-c6)?-((~r&(c6<<n)-c6)+c6):r}(e,8*this.size)),e}}class h8 extends hK{constructor(t){super("string",t)}defaultValue(){return""}encode(t,e){return super.encode(t,hA(hG.dereference(e,"string")))}decode(t){return hE(super.decode(t))}}class h6 extends hO{coders;constructor(t,e){let r=!1,n=[];t.forEach(t=>{t.dynamic&&(r=!0),n.push(t.type)}),super("tuple","tuple("+n.join(",")+")",e,r),lF(this,{coders:Object.freeze(t.slice())})}defaultValue(){let t=[];this.coders.forEach(e=>{t.push(e.defaultValue())});let e=this.coders.reduce((t,e)=>{let r=e.localName;return r&&(t[r]||(t[r]=0),t[r]++),t},{});return this.coders.forEach((r,n)=>{let i=r.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[n]))}),Object.freeze(t)}encode(t,e){let r=hG.dereference(e,"tuple");return hW(t,this.coders,r)}decode(t){return hY(t,this.coders)}}function h5(t){let e=new Set;return t.forEach(t=>e.add(t)),Object.freeze(e)}const h7=h5("external public payable override".split(" ")),h9="constant external internal payable private public pure view override",dt=h5(h9.split(" ")),de="constructor error event fallback function receive struct",dr=h5(de.split(" ")),dn="calldata memory storage payable indexed",di=h5(dn.split(" ")),ds=h5([de,dn,"tuple returns",h9].join(" ").split(" ")),da={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},dl=RegExp("^(\\s*)"),du=RegExp("^([0-9]+)"),dc=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),dh=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),dd=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class df{#u;#m;get offset(){return this.#u}get length(){return this.#m.length-this.#u}constructor(t){this.#u=0,this.#m=t.slice()}clone(){return new df(this.#m)}reset(){this.#u=0}#w(t=0,e=0){return new df(this.#m.slice(t,e).map(e=>Object.freeze(Object.assign({},e,{match:e.match-t,linkBack:e.linkBack-t,linkNext:e.linkNext-t}))))}popKeyword(t){let e=this.peek();if("KEYWORD"!==e.type||!t.has(e.text))throw Error(`expected keyword ${e.text}`);return this.pop().text}popType(t){if(this.peek().type!==t){let e=this.peek();throw Error(`expected ${t}; got ${e.type} ${JSON.stringify(e.text)}`)}return this.pop().text}popParen(){let t=this.peek();if("OPEN_PAREN"!==t.type)throw Error("bad start");let e=this.#w(this.#u+1,t.match+1);return this.#u=t.match+1,e}popParams(){let t=this.peek();if("OPEN_PAREN"!==t.type)throw Error("bad start");let e=[];for(;this.#u<t.match-1;){let t=this.peek().linkNext;e.push(this.#w(this.#u+1,t)),this.#u=t}return this.#u=t.match+1,e}peek(){if(this.#u>=this.#m.length)throw Error("out-of-bounds");return this.#m[this.#u]}peekKeyword(t){let e=this.peekType("KEYWORD");return null!=e&&t.has(e)?e:null}peekType(t){if(0===this.length)return null;let e=this.peek();return e.type===t?e.text:null}pop(){let t=this.peek();return this.#u++,t}toString(){let t=[];for(let e=this.#u;e<this.#m.length;e++){let r=this.#m[e];t.push(`${r.type}:${r.text}`)}return`<TokenString ${t.join(" ")}>`}}function dg(t){let e=[],r=e=>{let r=s<t.length?JSON.stringify(t[s]):"$EOI";throw Error(`invalid token ${r} at ${s}: ${e}`)},n=[],i=[],s=0;for(;s<t.length;){let o=t.substring(s),a=o.match(dl);a&&(s+=a[1].length,o=t.substring(s));let l={depth:n.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};e.push(l);let u=da[o[0]]||"";if(u){if(l.type=u,l.text=o[0],s++,"OPEN_PAREN"===u)n.push(e.length-1),i.push(e.length-1);else if("CLOSE_PAREN"==u)0===n.length&&r("no matching open bracket"),l.match=n.pop(),e[l.match].match=e.length-1,l.depth--,l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1;else if("COMMA"===u)l.linkBack=i.pop(),e[l.linkBack].linkNext=e.length-1,i.push(e.length-1);else if("OPEN_BRACKET"===u)l.type="BRACKET";else if("CLOSE_BRACKET"===u){let t=e.pop().text;if(e.length>0&&"NUMBER"===e[e.length-1].type){let r=e.pop().text;t=r+t,e[e.length-1].value=hn(r)}if(0===e.length||"BRACKET"!==e[e.length-1].type)throw Error("missing opening bracket");e[e.length-1].text+=t}continue}if(a=o.match(dc)){if(l.text=a[1],s+=l.text.length,ds.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(dd)){l.type="TYPE";continue}l.type="ID";continue}if(a=o.match(du)){l.text=a[1],l.type="NUMBER",s+=l.text.length;continue}throw Error(`unexpected token ${JSON.stringify(o[0])} at position ${s}`)}return new df(e.map(t=>Object.freeze(t)))}function dp(t,e){let r=[];for(let n in e.keys())t.has(n)&&r.push(n);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function dm(t,e){if(e.peekKeyword(dr)){let r=e.pop().text;if(r!==t)throw Error(`expected ${t}, got ${r}`)}return e.popType("ID")}function dw(t,e){let r=new Set;for(;;){let n=t.peekType("KEYWORD");if(null==n||e&&!e.has(n))break;if(t.pop(),r.has(n))throw Error(`duplicate keywords: ${JSON.stringify(n)}`);r.add(n)}return Object.freeze(r)}function dy(t){let e=dw(t,dt);return(dp(e,h5("constant payable nonpayable".split(" "))),dp(e,h5("pure view payable nonpayable".split(" "))),e.has("view"))?"view":e.has("pure")?"pure":e.has("payable")?"payable":e.has("nonpayable")?"nonpayable":e.has("constant")?"view":"nonpayable"}function dA(t,e){return t.popParams().map(t=>dx.from(t,e))}function dE(t){if(t.peekType("AT")){if(t.pop(),t.peekType("NUMBER"))return c9(t.pop().text);throw Error("invalid gas")}return null}function db(t){if(t.length)throw Error(`unexpected tokens at offset ${t.offset}: ${t.toString()}`)}const dC=new RegExp(/^(.*)\[([0-9]*)\]$/);function dI(t){let e=t.match(dd);if(lj(e,"invalid type","type",t),"uint"===t)return"uint256";if("int"===t)return"int256";if(e[2]){let r=parseInt(e[2]);lj(0!==r&&r<=32,"invalid bytes length","type",t)}else if(e[3]){let r=parseInt(e[3]);lj(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",t)}return t}const d_={},dS=Symbol.for("_ethers_internal"),dT="_ParamTypeInternal",dv="_ErrorInternal",dN="_EventInternal",dR="_ConstructorInternal",dO="_FallbackInternal",dD="_FunctionInternal",dM="_StructInternal";class dx{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(t,e,r,n,i,s,o,a){if(lY(t,d_,"ParamType"),Object.defineProperty(this,dS,{value:dT}),s&&(s=Object.freeze(s.slice())),"array"===n){if(null==o||null==a)throw Error("")}else if(null!=o||null!=a)throw Error("");if("tuple"===n){if(null==s)throw Error("")}else if(null!=s)throw Error("");lF(this,{name:e,type:r,baseType:n,indexed:i,components:s,arrayLength:o,arrayChildren:a})}format(t){if(null==t&&(t="sighash"),"json"===t){let e=this.name||"";if(this.isArray()){let t=JSON.parse(this.arrayChildren.format("json"));return t.name=e,t.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(t)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:e};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(e=>JSON.parse(e.format(t)))),JSON.stringify(r)}let e="";return this.isArray()?(e+=this.arrayChildren.format(t),e+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`):this.isTuple()?e+="("+this.components.map(e=>e.format(t)).join("full"===t?", ":",")+")":e+=this.type,"sighash"!==t&&(!0===this.indexed&&(e+=" indexed"),"full"===t&&this.name&&(e+=" "+this.name)),e}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(t,e){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return t.map(t=>r.arrayChildren.walk(t,e))}if(this.isTuple()){if(!Array.isArray(t))throw Error("invalid tuple value");if(t.length!==this.components.length)throw Error("array is wrong length");let r=this;return t.map((t,n)=>r.components[n].walk(t,e))}return e(this.type,t)}#y(t,e,r,n){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let i=this.arrayChildren,s=e.slice();s.forEach((e,n)=>{i.#y(t,e,r,t=>{s[n]=t})}),n(s);return}if(this.isTuple()){let i,s=this.components;if(Array.isArray(e))i=e.slice();else{if(null==e||"object"!=typeof e)throw Error("invalid tuple value");i=s.map(t=>{if(!t.name)throw Error("cannot use object value with unnamed components");if(!(t.name in e))throw Error(`missing value for component ${t.name}`);return e[t.name]})}if(i.length!==this.components.length)throw Error("array is wrong length");i.forEach((e,n)=>{s[n].#y(t,e,r,t=>{i[n]=t})}),n(i);return}let i=r(this.type,e);i.then?t.push(async function(){n(await i)}()):n(i)}async walkAsync(t,e){let r=[],n=[t];return this.#y(r,t,e,t=>{n[0]=t}),r.length&&await Promise.all(r),n[0]}static from(t,e){if(dx.isParamType(t))return t;if("string"==typeof t)try{return dx.from(dg(t),e)}catch(e){lj(!1,"invalid param type","obj",t)}else if(t instanceof df){let r="",n="",i=null;dw(t,h5(["tuple"])).has("tuple")||t.peekType("OPEN_PAREN")?(n="tuple",i=t.popParams().map(t=>dx.from(t)),r=`tuple(${i.map(t=>t.format()).join(",")})`):n=r=dI(t.popType("TYPE"));let s=null,o=null;for(;t.length&&t.peekType("BRACKET");){let e=t.pop();s=new dx(d_,"",r,n,null,i,o,s),o=e.value,r+=e.text,n="array",i=null}let a=null;if(dw(t,di).has("indexed")){if(!e)throw Error("");a=!0}let l=t.peekType("ID")?t.pop().text:"";if(t.length)throw Error("leftover tokens");return new dx(d_,l,r,n,a,i,o,s)}let r=t.name;lj(!r||"string"==typeof r&&r.match(dh),"invalid name","obj.name",r);let n=t.indexed;null!=n&&(lj(e,"parameter cannot be indexed","obj.indexed",t.indexed),n=!!n);let i=t.type,s=i.match(dC);if(s){let e=parseInt(s[2]||"-1"),o=dx.from({type:s[1],components:t.components});return new dx(d_,r||"",i,"array",n,null,e,o)}if("tuple"===i||i.startsWith("tuple(")||i.startsWith("(")){let e=null!=t.components?t.components.map(t=>dx.from(t)):null;return new dx(d_,r||"",i,"tuple",n,e,null,null)}return new dx(d_,r||"",i=dI(t.type),i,n,null,null,null)}static isParamType(t){return t&&t[dS]===dT}}class dB{type;inputs;constructor(t,e,r){lY(t,d_,"Fragment"),lF(this,{type:e,inputs:r=Object.freeze(r.slice())})}static from(t){if("string"==typeof t){try{dB.from(JSON.parse(t))}catch(t){}return dB.from(dg(t))}if(t instanceof df)switch(t.peekKeyword(dr)){case"constructor":return dU.from(t);case"error":return dk.from(t);case"event":return dF.from(t);case"fallback":case"receive":return dH.from(t);case"function":return dV.from(t);case"struct":return dz.from(t)}else if("object"==typeof t){switch(t.type){case"constructor":return dU.from(t);case"error":return dk.from(t);case"event":return dF.from(t);case"fallback":case"receive":return dH.from(t);case"function":return dV.from(t);case"struct":return dz.from(t)}lG(!1,`unsupported type: ${t.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}lj(!1,"unsupported frgament object","obj",t)}static isConstructor(t){return dU.isFragment(t)}static isError(t){return dk.isFragment(t)}static isEvent(t){return dF.isFragment(t)}static isFunction(t){return dV.isFragment(t)}static isStruct(t){return dz.isFragment(t)}}class dP extends dB{name;constructor(t,e,r,n){super(t,e,n),lj("string"==typeof r&&r.match(dh),"invalid identifier","name",r),n=Object.freeze(n.slice()),lF(this,{name:r})}}function dL(t,e){return"("+e.map(e=>e.format(t)).join("full"===t?", ":",")+")"}class dk extends dP{constructor(t,e,r){super(t,"error",e,r),Object.defineProperty(this,dS,{value:dv})}get selector(){return hb(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(e=>JSON.parse(e.format(t)))});let e=[];return"sighash"!==t&&e.push("error"),e.push(this.name+dL(t,this.inputs)),e.join(" ")}static from(t){if(dk.isFragment(t))return t;if("string"==typeof t)return dk.from(dg(t));if(t instanceof df){let e=dm("error",t),r=dA(t);return db(t),new dk(d_,e,r)}return new dk(d_,t.name,t.inputs?t.inputs.map(dx.from):[])}static isFragment(t){return t&&t[dS]===dv}}class dF extends dP{anonymous;constructor(t,e,r,n){super(t,"event",e,r),Object.defineProperty(this,dS,{value:dN}),lF(this,{anonymous:n})}get topicHash(){return hb(this.format("sighash"))}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(e=>JSON.parse(e.format(t)))});let e=[];return"sighash"!==t&&e.push("event"),e.push(this.name+dL(t,this.inputs)),"sighash"!==t&&this.anonymous&&e.push("anonymous"),e.join(" ")}static getTopicHash(t,e){return new dF(d_,t,e=(e||[]).map(t=>dx.from(t)),!1).topicHash}static from(t){if(dF.isFragment(t))return t;if("string"==typeof t)try{return dF.from(dg(t))}catch(e){lj(!1,"invalid event fragment","obj",t)}else if(t instanceof df){let e=dm("event",t),r=dA(t,!0),n=!!dw(t,h5(["anonymous"])).has("anonymous");return db(t),new dF(d_,e,r,n)}return new dF(d_,t.name,t.inputs?t.inputs.map(t=>dx.from(t,!0)):[],!!t.anonymous)}static isFragment(t){return t&&t[dS]===dN}}class dU extends dB{payable;gas;constructor(t,e,r,n,i){super(t,e,r),Object.defineProperty(this,dS,{value:dR}),lF(this,{payable:n,gas:i})}format(t){if(lG(null!=t&&"sighash"!==t,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===t)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(e=>JSON.parse(e.format(t)))});let e=[`constructor${dL(t,this.inputs)}`];return this.payable&&e.push("payable"),null!=this.gas&&e.push(`@${this.gas.toString()}`),e.join(" ")}static from(t){if(dU.isFragment(t))return t;if("string"==typeof t)try{return dU.from(dg(t))}catch(e){lj(!1,"invalid constuctor fragment","obj",t)}else if(t instanceof df){dw(t,h5(["constructor"]));let e=dA(t),r=!!dw(t,h7).has("payable"),n=dE(t);return db(t),new dU(d_,"constructor",e,r,n)}return new dU(d_,"constructor",t.inputs?t.inputs.map(dx.from):[],!!t.payable,null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[dS]===dR}}class dH extends dB{payable;constructor(t,e,r){super(t,"fallback",e),Object.defineProperty(this,dS,{value:dO}),lF(this,{payable:r})}format(t){let e=0===this.inputs.length?"receive":"fallback";return"json"===t?JSON.stringify({type:e,stateMutability:this.payable?"payable":"nonpayable"}):`${e}()${this.payable?" payable":""}`}static from(t){if(dH.isFragment(t))return t;if("string"==typeof t)try{return dH.from(dg(t))}catch(e){lj(!1,"invalid fallback fragment","obj",t)}else if(t instanceof df){let e=t.toString();if(lj(t.peekKeyword(h5(["fallback","receive"])),"type must be fallback or receive","obj",e),"receive"===t.popKeyword(h5(["fallback","receive"]))){let e=dA(t);return lj(0===e.length,"receive cannot have arguments","obj.inputs",e),dw(t,h5(["payable"])),db(t),new dH(d_,[],!0)}let r=dA(t);r.length?lj(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map(t=>t.format("minimal")).join(", ")):r=[dx.from("bytes")];let n=dy(t);if(lj("nonpayable"===n||"payable"===n,"fallback cannot be constants","obj.stateMutability",n),dw(t,h5(["returns"])).has("returns")){let e=dA(t);lj(1===e.length&&"bytes"===e[0].type,"invalid fallback outputs","obj.outputs",e.map(t=>t.format("minimal")).join(", "))}return db(t),new dH(d_,r,"payable"===n)}return"receive"===t.type?new dH(d_,[],!0):"fallback"===t.type?new dH(d_,[dx.from("bytes")],"payable"===t.stateMutability):void lj(!1,"invalid fallback description","obj",t)}static isFragment(t){return t&&t[dS]===dO}}class dV extends dP{constant;outputs;stateMutability;payable;gas;constructor(t,e,r,n,i,s){super(t,"function",e,n),Object.defineProperty(this,dS,{value:dD}),lF(this,{constant:"view"===r||"pure"===r,gas:s,outputs:i=Object.freeze(i.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return hb(this.format("sighash")).substring(0,10)}format(t){if(null==t&&(t="sighash"),"json"===t)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(e=>JSON.parse(e.format(t))),outputs:this.outputs.map(e=>JSON.parse(e.format(t)))});let e=[];return"sighash"!==t&&e.push("function"),e.push(this.name+dL(t,this.inputs)),"sighash"!==t&&("nonpayable"!==this.stateMutability&&e.push(this.stateMutability),this.outputs&&this.outputs.length&&(e.push("returns"),e.push(dL(t,this.outputs))),null!=this.gas&&e.push(`@${this.gas.toString()}`)),e.join(" ")}static getSelector(t,e){return new dV(d_,t,"view",e=(e||[]).map(t=>dx.from(t)),[],null).selector}static from(t){if(dV.isFragment(t))return t;if("string"==typeof t)try{return dV.from(dg(t))}catch(e){lj(!1,"invalid function fragment","obj",t)}else if(t instanceof df){let e=dm("function",t),r=dA(t),n=dy(t),i=[];dw(t,h5(["returns"])).has("returns")&&(i=dA(t));let s=dE(t);return db(t),new dV(d_,e,n,r,i,s)}let e=t.stateMutability;return null==e&&(e="payable","boolean"==typeof t.constant?(e="view",!t.constant&&(e="payable","boolean"!=typeof t.payable||t.payable||(e="nonpayable"))):"boolean"!=typeof t.payable||t.payable||(e="nonpayable")),new dV(d_,t.name,e,t.inputs?t.inputs.map(dx.from):[],t.outputs?t.outputs.map(dx.from):[],null!=t.gas?t.gas:null)}static isFragment(t){return t&&t[dS]===dD}}class dz extends dP{constructor(t,e,r){super(t,"struct",e,r),Object.defineProperty(this,dS,{value:dM})}format(){throw Error("@TODO")}static from(t){if("string"==typeof t)try{return dz.from(dg(t))}catch(e){lj(!1,"invalid struct fragment","obj",t)}else if(t instanceof df){let e=dm("struct",t),r=dA(t);return db(t),new dz(d_,e,r)}return new dz(d_,t.name,t.inputs?t.inputs.map(dx.from):[])}static isFragment(t){return t&&t[dS]===dM}}const dG=new Map;dG.set(0,"GENERIC_PANIC"),dG.set(1,"ASSERT_FALSE"),dG.set(17,"OVERFLOW"),dG.set(18,"DIVIDE_BY_ZERO"),dG.set(33,"ENUM_RANGE_ERROR"),dG.set(34,"BAD_STORAGE_DATA"),dG.set(49,"STACK_UNDERFLOW"),dG.set(50,"ARRAY_RANGE_ERROR"),dG.set(65,"OUT_OF_MEMORY"),dG.set(81,"UNINITIALIZED_FUNCTION_CALL");const dj=new RegExp(/^bytes([0-9]*)$/),dQ=new RegExp(/^(u?int)([0-9]*)$/);let dW=null,dY=1024;class dX{#A(t){if(t.isArray())return new hX(this.#A(t.arrayChildren),t.arrayLength,t.name);if(t.isTuple())return new h6(t.components.map(t=>this.#A(t)),t.name);switch(t.baseType){case"address":return new hj(t.name);case"bool":return new hq(t.name);case"string":return new h8(t.name);case"bytes":return new hZ(t.name);case"":return new h1(t.name)}let e=t.type.match(dQ);if(e){let r=parseInt(e[2]||"256");return lj(0!==r&&r<=256&&r%8==0,"invalid "+e[1]+" bit length","param",t),new h4(r/8,"int"===e[1],t.name)}if(e=t.type.match(dj)){let r=parseInt(e[1]);return lj(0!==r&&r<=32,"invalid bytes length","param",t),new hJ(r,t.name)}lj(!1,"invalid type","type",t.type)}getDefaultValue(t){return new h6(t.map(t=>this.#A(dx.from(t))),"_").defaultValue()}encode(t,e){lQ(e.length,t.length,"types/values length mismatch");let r=new h6(t.map(t=>this.#A(dx.from(t))),"_"),n=new hD;return r.encode(n,e),n.data}decode(t,e,r){return new h6(t.map(t=>this.#A(dx.from(t))),"_").decode(new hM(e,r,dY))}static _setDefaultMaxInflation(t){lj("number"==typeof t&&Number.isInteger(t),"invalid defaultMaxInflation factor","value",t),dY=t}static defaultAbiCoder(){return null==dW&&(dW=new dX),dW}static getBuiltinCallException(t,e,r){return function(t,e,r,n){let i="missing revert data",s=null,o=null;if(r){i="execution reverted";let t=lJ(r);if(r=l3(r),0===t.length)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(t.length%32!=4)i+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===l3(t.slice(0,4)))try{s=n.decode(["string"],t.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[s]},i+=`: ${JSON.stringify(s)}`}catch(t){i+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===l3(t.slice(0,4)))try{let e=Number(n.decode(["uint256"],t.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[e]},s=`Panic due to ${dG.get(e)||"UNKNOWN"}(${e})`,i+=`: ${s}`}catch(t){i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}let a={to:e.to?hF(e.to):null,data:e.data||"0x"};return e.from&&(a.from=hF(e.from)),lz(i,"CALL_EXCEPTION",{action:t,data:r,reason:s,transaction:a,invocation:null,revert:o})}(t,e,r,dX.defaultAbiCoder())}}class dq{fragment;name;signature;topic;args;constructor(t,e,r){let n=t.name,i=t.format();lF(this,{fragment:t,name:n,signature:i,topic:e,args:r})}}class dK{fragment;name;args;signature;selector;value;constructor(t,e,r,n){let i=t.name,s=t.format();lF(this,{fragment:t,name:i,args:r,signature:s,selector:e,value:n})}}class dZ{fragment;name;args;signature;selector;constructor(t,e,r){let n=t.name,i=t.format();lF(this,{fragment:t,name:n,args:r,signature:i,selector:e})}}class dJ{hash;_isIndexed;static isIndexed(t){return!!(t&&t._isIndexed)}constructor(t){lF(this,{hash:t,_isIndexed:!0})}}const d$={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},d1={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:t=>`reverted with reason string ${JSON.stringify(t)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:t=>{let e="unknown panic code";return t>=0&&t<=255&&d$[t.toString()]&&(e=d$[t.toString()]),`reverted with panic code 0x${t.toString(16)} (${e})`}}};class d0{fragments;deploy;fallback;receive;#E;#b;#C;#I;constructor(t){let e=[];e="string"==typeof t?JSON.parse(t):t,this.#C=new Map,this.#E=new Map,this.#b=new Map;let r=[];for(let t of e)try{r.push(dB.from(t))}catch(e){console.log(`[Warning] Invalid Fragment ${JSON.stringify(t)}:`,e.message)}lF(this,{fragments:Object.freeze(r)});let n=null,i=!1;this.#I=this.getAbiCoder(),this.fragments.forEach((t,e)=>{let r;switch(t.type){case"constructor":if(this.deploy)return void console.log("duplicate definition - constructor");lF(this,{deploy:t});return;case"fallback":0===t.inputs.length?i=!0:(lj(!n||t.payable!==n.payable,"conflicting fallback fragments",`fragments[${e}]`,t),i=(n=t).payable);return;case"function":r=this.#C;break;case"event":r=this.#b;break;case"error":r=this.#E;break;default:return}let s=t.format();r.has(s)||r.set(s,t)}),this.deploy||lF(this,{deploy:dU.from("constructor()")}),lF(this,{fallback:n,receive:i})}format(t){let e=t?"minimal":"full";return this.fragments.map(t=>t.format(e))}formatJson(){return JSON.stringify(this.fragments.map(t=>t.format("json")).map(t=>JSON.parse(t)))}getAbiCoder(){return dX.defaultAbiCoder()}#_(t,e,r){if(l1(t)){let e=t.toLowerCase();for(let t of this.#C.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){let n=[];for(let[e,r]of this.#C)e.split("(")[0]===t&&n.push(r);if(e){let t=e.length>0?e[e.length-1]:null,r=e.length,i=!0;hG.isTyped(t)&&"overrides"===t.type&&(i=!1,r--);for(let t=n.length-1;t>=0;t--){let e=n[t].inputs.length;e===r||i&&e===r-1||n.splice(t,1)}for(let t=n.length-1;t>=0;t--){let r=n[t].inputs;for(let i=0;i<e.length;i++)if(hG.isTyped(e[i])){if(i>=r.length){if("overrides"===e[i].type)continue;n.splice(t,1);break}if(e[i].type!==r[i].baseType){n.splice(t,1);break}}}}if(1===n.length&&e&&e.length!==n[0].inputs.length){let t=e[e.length-1];(null==t||Array.isArray(t)||"object"!=typeof t)&&n.splice(0,1)}if(0===n.length)return null;if(n.length>1&&r){let e=n.map(t=>JSON.stringify(t.format())).join(", ");lj(!1,`ambiguous function description (i.e. matches ${e})`,"key",t)}return n[0]}let n=this.#C.get(dV.from(t).format());return n||null}getFunctionName(t){let e=this.#_(t,null,!1);return lj(e,"no matching function","key",t),e.name}hasFunction(t){return!!this.#_(t,null,!1)}getFunction(t,e){return this.#_(t,e||null,!0)}forEachFunction(t){let e=Array.from(this.#C.keys());e.sort((t,e)=>t.localeCompare(e));for(let r=0;r<e.length;r++){let n=e[r];t(this.#C.get(n),r)}}#S(t,e,r){if(l1(t)){let e=t.toLowerCase();for(let t of this.#b.values())if(e===t.topicHash)return t;return null}if(-1===t.indexOf("(")){let n=[];for(let[e,r]of this.#b)e.split("(")[0]===t&&n.push(r);if(e){for(let t=n.length-1;t>=0;t--)n[t].inputs.length<e.length&&n.splice(t,1);for(let t=n.length-1;t>=0;t--){let r=n[t].inputs;for(let i=0;i<e.length;i++)if(hG.isTyped(e[i])&&e[i].type!==r[i].baseType){n.splice(t,1);break}}}if(0===n.length)return null;if(n.length>1&&r){let e=n.map(t=>JSON.stringify(t.format())).join(", ");lj(!1,`ambiguous event description (i.e. matches ${e})`,"key",t)}return n[0]}let n=this.#b.get(dF.from(t).format());return n||null}getEventName(t){let e=this.#S(t,null,!1);return lj(e,"no matching event","key",t),e.name}hasEvent(t){return!!this.#S(t,null,!1)}getEvent(t,e){return this.#S(t,e||null,!0)}forEachEvent(t){let e=Array.from(this.#b.keys());e.sort((t,e)=>t.localeCompare(e));for(let r=0;r<e.length;r++){let n=e[r];t(this.#b.get(n),r)}}getError(t,e){if(l1(t)){let e=t.toLowerCase();if(d1[e])return dk.from(d1[e].signature);for(let t of this.#E.values())if(e===t.selector)return t;return null}if(-1===t.indexOf("(")){let e=[];for(let[r,n]of this.#E)r.split("(")[0]===t&&e.push(n);if(0===e.length)return"Error"===t?dk.from("error Error(string)"):"Panic"===t?dk.from("error Panic(uint256)"):null;if(e.length>1){let r=e.map(t=>JSON.stringify(t.format())).join(", ");lj(!1,`ambiguous error description (i.e. ${r})`,"name",t)}return e[0]}if("Error(string)"===(t=dk.from(t).format()))return dk.from("error Error(string)");if("Panic(uint256)"===t)return dk.from("error Panic(uint256)");let r=this.#E.get(t);return r||null}forEachError(t){let e=Array.from(this.#E.keys());e.sort((t,e)=>t.localeCompare(e));for(let r=0;r<e.length;r++){let n=e[r];t(this.#E.get(n),r)}}_decodeParams(t,e){return this.#I.decode(t,e)}_encodeParams(t,e){return this.#I.encode(t,e)}encodeDeploy(t){return this._encodeParams(this.deploy.inputs,t||[])}decodeErrorResult(t,e){if("string"==typeof t){let e=this.getError(t);lj(e,"unknown error","fragment",t),t=e}return lj(l6(e,0,4)===t.selector,`data signature does not match error ${t.name}.`,"data",e),this._decodeParams(t.inputs,l6(e,4))}encodeErrorResult(t,e){if("string"==typeof t){let e=this.getError(t);lj(e,"unknown error","fragment",t),t=e}return l4([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionData(t,e){if("string"==typeof t){let e=this.getFunction(t);lj(e,"unknown function","fragment",t),t=e}return lj(l6(e,0,4)===t.selector,`data signature does not match function ${t.name}.`,"data",e),this._decodeParams(t.inputs,l6(e,4))}encodeFunctionData(t,e){if("string"==typeof t){let e=this.getFunction(t);lj(e,"unknown function","fragment",t),t=e}return l4([t.selector,this._encodeParams(t.inputs,e||[])])}decodeFunctionResult(t,e){if("string"==typeof t){let e=this.getFunction(t);lj(e,"unknown function","fragment",t),t=e}let r="invalid length for result data",n=l$(e);if(n.length%32==0)try{return this.#I.decode(t.outputs,n)}catch(t){r="could not decode result data"}lG(!1,r,"BAD_DATA",{value:l3(n),info:{method:t.name,signature:t.format()}})}makeError(t,e){let r=lJ(t,"data"),n=dX.getBuiltinCallException("call",e,r);if(n.message.startsWith("execution reverted (unknown custom error)")){let t=l3(r.slice(0,4)),e=this.getError(t);if(e)try{let t=this.#I.decode(e.inputs,r.slice(4));n.revert={name:e.name,signature:e.format(),args:t},n.reason=n.revert.signature,n.message=`execution reverted: ${n.reason}`}catch(t){n.message="execution reverted (coult not decode custom error)"}}let i=this.parseTransaction(e);return i&&(n.invocation={method:i.name,signature:i.signature,args:i.args}),n}encodeFunctionResult(t,e){if("string"==typeof t){let e=this.getFunction(t);lj(e,"unknown function","fragment",t),t=e}return l3(this.#I.encode(t.outputs,e||[]))}encodeFilterTopics(t,e){if("string"==typeof t){let e=this.getEvent(t);lj(e,"unknown event","eventFragment",t),t=e}lG(e.length<=t.inputs.length,`too many arguments for ${t.format()}`,"UNEXPECTED_ARGUMENT",{count:e.length,expectedCount:t.inputs.length});let r=[];t.anonymous||r.push(t.topicHash);let n=(t,e)=>{if("string"===t.type)return hb(e);if("bytes"===t.type)return u_(l3(e));if("bool"===t.type&&"boolean"==typeof e)e=e?"0x01":"0x00";else if(t.type.match(/^u?int/))e=hi(e);else if(t.type.match(/^bytes/))e=l5(e,32,!1);else"address"===t.type&&this.#I.encode(["address"],[e]);return l7(l3(e),32)};for(e.forEach((e,i)=>{let s=t.inputs[i];if(!s.indexed)return void lj(null==e,"cannot filter non-indexed parameters; must be null","contract."+s.name,e);null==e?r.push(null):"array"===s.baseType||"tuple"===s.baseType?lj(!1,"filtering with tuples or arrays not supported","contract."+s.name,e):Array.isArray(e)?r.push(e.map(t=>n(s,t))):r.push(n(s,e))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(t,e){if("string"==typeof t){let e=this.getEvent(t);lj(e,"unknown event","eventFragment",t),t=e}let r=[],n=[],i=[];return t.anonymous||r.push(t.topicHash),lj(e.length===t.inputs.length,"event arguments/values mismatch","values",e),t.inputs.forEach((t,s)=>{let o=e[s];if(t.indexed)if("string"===t.type)r.push(hb(o));else if("bytes"===t.type)r.push(u_(o));else if("tuple"===t.baseType||"array"===t.baseType)throw Error("not implemented");else r.push(this.#I.encode([t.type],[o]));else n.push(t),i.push(o)}),{data:this.#I.encode(n,i),topics:r}}decodeEventLog(t,e,r){if("string"==typeof t){let e=this.getEvent(t);lj(e,"unknown event","eventFragment",t),t=e}if(null!=r&&!t.anonymous){let e=t.topicHash;lj(l1(r[0],32)&&r[0].toLowerCase()===e,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let n=[],i=[],s=[];t.inputs.forEach((t,e)=>{t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(n.push(dx.from({type:"bytes32",name:t.name})),s.push(!0)):(n.push(t),s.push(!1)):(i.push(t),s.push(!1))});let o=null!=r?this.#I.decode(n,l4(r)):null,a=this.#I.decode(i,e,!0),l=[],u=[],c=0,h=0;return t.inputs.forEach((t,e)=>{let r=null;if(t.indexed)if(null==o)r=new dJ(null);else if(s[e])r=new dJ(o[h++]);else try{r=o[h++]}catch(t){r=t}else try{r=a[c++]}catch(t){r=t}l.push(r),u.push(t.name||null)}),hN.fromItems(l,u)}parseTransaction(t){let e=lJ(t.data,"tx.data"),r=c9(null!=t.value?t.value:0,"tx.value"),n=this.getFunction(l3(e.slice(0,4)));if(!n)return null;let i=this.#I.decode(n.inputs,e.slice(4));return new dK(n,n.selector,i,r)}parseCallResult(t){throw Error("@TODO")}parseLog(t){let e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new dq(e,e.topicHash,this.decodeEventLog(e,t.data,t.topics))}parseError(t){let e=l3(t),r=this.getError(l6(e,0,4));if(!r)return null;let n=this.#I.decode(r.inputs,l6(e,4));return new dZ(r,r.selector,n)}static from(t){return t instanceof d0?t:new d0("string"==typeof t?JSON.parse(t):"function"==typeof t.formatJson?t.formatJson():"function"==typeof t.format?t.format("json"):t)}}function d2(t){return t&&"function"==typeof t.getAddress}async function d3(t,e){let r=await e;return(null==r||"0x0000000000000000000000000000000000000000"===r)&&(lG("string"!=typeof t,"unconfigured name","UNCONFIGURED_NAME",{value:t}),lj(!1,"invalid AddressLike value; did not resolve to a value address","target",t)),hF(r)}function d4(t,e){return"string"==typeof t?t.match(/^0x[0-9a-f]{40}$/i)?hF(t):(lG(null!=e,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),d3(t,e.resolveName(t))):d2(t)?d3(t,t.getAddress()):t&&"function"==typeof t.then?d3(t,t):void lj(!1,"unsupported addressable value","target",t)}function d8(t,e){return{address:hF(t),storageKeys:e.map((t,e)=>(lj(l1(t,32),"invalid slot",`storageKeys[${e}]`,t),t.toLowerCase()))}}function d6(t){if(Array.isArray(t))return t.map((e,r)=>Array.isArray(e)?(lj(2===e.length,"invalid slot set",`value[${r}]`,e),d8(e[0],e[1])):(lj(null!=e&&"object"==typeof e,"invalid address-slot set","value",t),d8(e.address,e.storageKeys)));lj(null!=t&&"object"==typeof t,"invalid access list","value",t);let e=Object.keys(t).map(e=>{let r=t[e].reduce((t,e)=>(t[e]=!0,t),{});return d8(e,Object.keys(r).sort())});return e.sort((t,e)=>t.address.localeCompare(e.address)),e}const d5=BigInt(0);function d7(t){return null==t?null:t}function d9(t){return null==t?null:t.toString()}class ft{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(t,e,r){lF(this,{gasPrice:d7(t),maxFeePerGas:d7(e),maxPriorityFeePerGas:d7(r)})}toJSON(){let{gasPrice:t,maxFeePerGas:e,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:d9(t),maxFeePerGas:d9(e),maxPriorityFeePerGas:d9(r)}}}function fe(t){let e={};for(let r of(t.to&&(e.to=t.to),t.from&&(e.from=t.from),t.data&&(e.data=l3(t.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))r in t&&null!=t[r]&&(e[r]=c9(t[r],`request.${r}`));for(let r of"type,nonce".split(/,/))r in t&&null!=t[r]&&(e[r]=hn(t[r],`request.${r}`));return t.accessList&&(e.accessList=d6(t.accessList)),t.authorizationList&&(e.authorizationList=t.authorizationList.slice()),"blockTag"in t&&(e.blockTag=t.blockTag),"enableCcipRead"in t&&(e.enableCcipRead=!!t.enableCcipRead),"customData"in t&&(e.customData=t.customData),"blobVersionedHashes"in t&&t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.slice()),"kzg"in t&&(e.kzg=t.kzg),"blobs"in t&&t.blobs&&(e.blobs=t.blobs.map(t=>l0(t)?l3(t):Object.assign({},t))),e}class fr{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#T;constructor(t,e){this.#T=t.transactions.map(t=>"string"!=typeof t?new fs(t,e):t),lF(this,{provider:e,hash:d7(t.hash),number:t.number,timestamp:t.timestamp,parentHash:t.parentHash,parentBeaconBlockRoot:t.parentBeaconBlockRoot,nonce:t.nonce,difficulty:t.difficulty,gasLimit:t.gasLimit,gasUsed:t.gasUsed,blobGasUsed:t.blobGasUsed,excessBlobGas:t.excessBlobGas,miner:t.miner,prevRandao:d7(t.prevRandao),extraData:t.extraData,baseFeePerGas:d7(t.baseFeePerGas),stateRoot:t.stateRoot,receiptsRoot:t.receiptsRoot})}get transactions(){return this.#T.map(t=>"string"==typeof t?t:t.hash)}get prefetchedTransactions(){let t=this.#T.slice();return 0===t.length?[]:(lG("object"==typeof t[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),t)}toJSON(){let{baseFeePerGas:t,difficulty:e,extraData:r,gasLimit:n,gasUsed:i,hash:s,miner:o,prevRandao:a,nonce:l,number:u,parentHash:c,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,timestamp:g,transactions:p}=this;return{_type:"Block",baseFeePerGas:d9(t),difficulty:d9(e),extraData:r,gasLimit:d9(n),gasUsed:d9(i),blobGasUsed:d9(this.blobGasUsed),excessBlobGas:d9(this.excessBlobGas),hash:s,miner:o,prevRandao:a,nonce:l,number:u,parentHash:c,timestamp:g,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,transactions:p}}[Symbol.iterator](){let t=0,e=this.transactions;return{next:()=>t<this.length?{value:e[t++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#T.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(t){let e;if("number"==typeof t)e=this.#T[t];else{let r=t.toLowerCase();for(let t of this.#T)if("string"==typeof t){if(t!==r)continue;e=t;break}else{if(t.hash!==r)continue;e=t;break}}if(null==e)throw Error("no such tx");return"string"==typeof e?await this.provider.getTransaction(e):e}getPrefetchedTransaction(t){let e=this.prefetchedTransactions;if("number"==typeof t)return e[t];for(let r of(t=t.toLowerCase(),e))if(r.hash===t)return r;lj(!1,"no matching transaction","indexOrHash",t)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){var t;if(!this.isMined())throw Error("");return t=this,{orphan:"drop-block",hash:t.hash,number:t.number}}}class fn{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(t,e){this.provider=e;let r=Object.freeze(t.topics.slice());lF(this,{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,removed:t.removed,address:t.address,data:t.data,topics:r,index:t.index,transactionIndex:t.transactionIndex})}toJSON(){let{address:t,blockHash:e,blockNumber:r,data:n,index:i,removed:s,topics:o,transactionHash:a,transactionIndex:l}=this;return{_type:"log",address:t,blockHash:e,blockNumber:r,data:n,index:i,removed:s,topics:o,transactionHash:a,transactionIndex:l}}async getBlock(){let t=await this.provider.getBlock(this.blockHash);return lG(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransaction(){let t=await this.provider.getTransaction(this.transactionHash);return lG(!!t,"failed to find transaction","UNKNOWN_ERROR",{}),t}async getTransactionReceipt(){let t=await this.provider.getTransactionReceipt(this.transactionHash);return lG(!!t,"failed to find transaction receipt","UNKNOWN_ERROR",{}),t}removedEvent(){var t;return t=this,{orphan:"drop-log",log:{transactionHash:t.transactionHash,blockHash:t.blockHash,blockNumber:t.blockNumber,address:t.address,data:t.data,topics:Object.freeze(t.topics.slice()),index:t.index}}}}class fi{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#v;constructor(t,e){this.#v=Object.freeze(t.logs.map(t=>new fn(t,e)));let r=d5;null!=t.effectiveGasPrice?r=t.effectiveGasPrice:null!=t.gasPrice&&(r=t.gasPrice),lF(this,{provider:e,to:t.to,from:t.from,contractAddress:t.contractAddress,hash:t.hash,index:t.index,blockHash:t.blockHash,blockNumber:t.blockNumber,logsBloom:t.logsBloom,gasUsed:t.gasUsed,cumulativeGasUsed:t.cumulativeGasUsed,blobGasUsed:t.blobGasUsed,gasPrice:r,blobGasPrice:t.blobGasPrice,type:t.type,status:t.status,root:t.root})}get logs(){return this.#v}toJSON(){let{to:t,from:e,contractAddress:r,hash:n,index:i,blockHash:s,blockNumber:o,logsBloom:a,logs:l,status:u,root:c}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:o,contractAddress:r,cumulativeGasUsed:d9(this.cumulativeGasUsed),from:e,gasPrice:d9(this.gasPrice),blobGasUsed:d9(this.blobGasUsed),blobGasPrice:d9(this.blobGasPrice),gasUsed:d9(this.gasUsed),hash:n,index:i,logs:l,logsBloom:a,root:c,status:u,to:t}}get length(){return this.logs.length}[Symbol.iterator](){let t=0;return{next:()=>t<this.length?{value:this.logs[t++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let t=await this.provider.getBlock(this.blockHash);if(null==t)throw Error("TODO");return t}async getTransaction(){let t=await this.provider.getTransaction(this.hash);if(null==t)throw Error("TODO");return t}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return fa(this)}reorderedEvent(t){return lG(!t||t.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),fo(this,t)}}class fs{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#N;constructor(t,e){this.provider=e,this.blockNumber=null!=t.blockNumber?t.blockNumber:null,this.blockHash=null!=t.blockHash?t.blockHash:null,this.hash=t.hash,this.index=t.index,this.type=t.type,this.from=t.from,this.to=t.to||null,this.gasLimit=t.gasLimit,this.nonce=t.nonce,this.data=t.data,this.value=t.value,this.gasPrice=t.gasPrice,this.maxPriorityFeePerGas=null!=t.maxPriorityFeePerGas?t.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=t.maxFeePerGas?t.maxFeePerGas:null,this.maxFeePerBlobGas=null!=t.maxFeePerBlobGas?t.maxFeePerBlobGas:null,this.chainId=t.chainId,this.signature=t.signature,this.accessList=null!=t.accessList?t.accessList:null,this.blobVersionedHashes=null!=t.blobVersionedHashes?t.blobVersionedHashes:null,this.authorizationList=null!=t.authorizationList?t.authorizationList:null,this.#N=-1}toJSON(){let{blockNumber:t,blockHash:e,index:r,hash:n,type:i,to:s,from:o,nonce:a,data:l,signature:u,accessList:c,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:c,blockNumber:t,blockHash:e,blobVersionedHashes:h,chainId:d9(this.chainId),data:l,from:o,gasLimit:d9(this.gasLimit),gasPrice:d9(this.gasPrice),hash:n,maxFeePerGas:d9(this.maxFeePerGas),maxPriorityFeePerGas:d9(this.maxPriorityFeePerGas),maxFeePerBlobGas:d9(this.maxFeePerBlobGas),nonce:a,signature:u,to:s,index:r,type:i,value:d9(this.value)}}async getBlock(){let t=this.blockNumber;if(null==t){let e=await this.getTransaction();e&&(t=e.blockNumber)}if(null==t)return null;let e=this.provider.getBlock(t);if(null==e)throw Error("TODO");return e}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:t,blockNumber:e}=await lk({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==t||null==t.blockNumber?0:e-t.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(t,e){let r=null==t?1:t,n=null==e?0:e,i=this.#N,s=-1,o=-1===i,a=async()=>{if(o)return null;let{blockNumber:t,nonce:e}=await lk({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(e<this.nonce){i=t;return}if(o)return null;let n=await this.getTransaction();if(!n||null==n.blockNumber)for(-1===s&&(s=i-3)<this.#N&&(s=this.#N);s<=t;){if(o)return null;let e=await this.provider.getBlock(s,!0);if(null==e)break;for(let t of e)if(t===this.hash)return;for(let n=0;n<e.length;n++){let s=await e.getTransaction(n);if(s.from===this.from&&s.nonce===this.nonce){if(o)return null;let e=await this.provider.getTransactionReceipt(s.hash);if(null==e||t-e.blockNumber+1<r)return;let n="replaced";s.data===this.data&&s.to===this.to&&s.value===this.value?n="repriced":"0x"===s.data&&s.from===s.to&&s.value===d5&&(n="cancelled"),lG(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===n||"cancelled"===n,reason:n,replacement:s.replaceableTransaction(i),hash:s.hash,receipt:e})}}s++}},l=t=>{if(null==t||0!==t.status)return t;lG(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:t.to,from:t.from,data:""},receipt:t})},u=await this.provider.getTransactionReceipt(this.hash);if(0===r)return l(u);if(u){if(1===r||await u.confirmations()>=r)return l(u)}else if(await a(),0===r)return null;let c=new Promise((t,e)=>{let s=[],u=()=>{s.forEach(t=>t())};if(s.push(()=>{o=!0}),n>0){let t=setTimeout(()=>{u(),e(lz("wait for transaction timeout","TIMEOUT"))},n);s.push(()=>{clearTimeout(t)})}let c=async n=>{if(await n.confirmations()>=r){u();try{t(l(n))}catch(t){e(t)}}};if(s.push(()=>{this.provider.off(this.hash,c)}),this.provider.on(this.hash,c),i>=0){let t=async()=>{try{await a()}catch(t){if(lH(t,"TRANSACTION_REPLACED")){u(),e(t);return}}o||this.provider.once("block",t)};s.push(()=>{this.provider.off("block",t)}),this.provider.once("block",t)}});return await c}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return lG(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fa(this)}reorderedEvent(t){return lG(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),lG(!t||t.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),fo(this,t)}replaceableTransaction(t){lj(Number.isInteger(t)&&t>=0,"invalid startBlock","startBlock",t);let e=new fs(this,this.provider);return e.#N=t,e}}function fo(t,e){return{orphan:"reorder-transaction",tx:t,other:e}}function fa(t){return{orphan:"drop-transaction",tx:t}}class fl{filter;emitter;#R;constructor(t,e,r){this.#R=e,lF(this,{emitter:t,filter:r})}async removeListener(){null!=this.#R&&await this.emitter.off(this.filter,this.#R)}}class fu extends fn{interface;fragment;args;constructor(t,e,r){super(t,t.provider),lF(this,{args:e.decodeEventLog(r,t.data,t.topics),fragment:r,interface:e})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class fc extends fn{error;constructor(t,e){super(t,t.provider),lF(this,{error:e})}}class fh extends fi{#O;constructor(t,e,r){super(r,e),this.#O=t}get logs(){return super.logs.map(t=>{let e=t.topics.length?this.#O.getEvent(t.topics[0]):null;if(e)try{return new fu(t,this.#O,e)}catch(e){return new fc(t,e)}return t})}}class fd extends fs{#O;constructor(t,e,r){super(r,e),this.#O=t}async wait(t,e){let r=await super.wait(t,e);return null==r?null:new fh(this.#O,this.provider,r)}}class ff extends fl{log;constructor(t,e,r,n){super(t,e,r),lF(this,{log:n})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class fg extends ff{constructor(t,e,r,n,i){super(t,e,r,new fu(i,t.interface,n)),lF(this,{args:t.interface.decodeEventLog(n,this.log.data,this.log.topics),fragment:n})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const fp=BigInt(0);function fm(t){return t&&"function"==typeof t.call}function fw(t){return t&&"function"==typeof t.estimateGas}function fy(t){return t&&"function"==typeof t.resolveName}function fA(t){return t&&"function"==typeof t.sendTransaction}function fE(t){if(null!=t){if(fy(t))return t;if(t.provider)return t.provider}}class fb{#D;fragment;constructor(t,e,r){if(lF(this,{fragment:e}),e.inputs.length<r.length)throw Error("too many arguments");let n=fC(t.runner,"resolveName"),i=fy(n)?n:null;this.#D=async function(){let n=await Promise.all(e.inputs.map((t,e)=>null==r[e]?null:t.walkAsync(r[e],(t,e)=>"address"===t?Array.isArray(e)?Promise.all(e.map(t=>d4(t,i))):d4(e,i):e)));return t.interface.encodeFilterTopics(e,n)}()}getTopicFilter(){return this.#D}}function fC(t,e){return null==t?null:"function"==typeof t[e]?t:t.provider&&"function"==typeof t.provider[e]?t.provider:null}function fI(t){return null==t?null:t.provider||null}async function f_(t,e){let r=hG.dereference(t,"overrides");lj("object"==typeof r,"invalid overrides parameter","overrides",t);let n=fe(r);return lj(null==n.to||(e||[]).indexOf("to")>=0,"cannot override to","overrides.to",n.to),lj(null==n.data||(e||[]).indexOf("data")>=0,"cannot override data","overrides.data",n.data),n.from&&(n.from=n.from),n}async function fS(t,e,r){let n=fC(t,"resolveName"),i=fy(n)?n:null;return await Promise.all(e.map((t,e)=>t.walkAsync(r[e],(t,e)=>(e=hG.dereference(e,t),"address"===t)?d4(e,i):e)))}const fT=Symbol.for("_ethersInternal_contract"),fv=new WeakMap;function fN(t){return fv.get(t[fT])}async function fR(t,e){let r,n=null;if(Array.isArray(e)){let n=function(e){if(l1(e,32))return e;let r=t.interface.getEvent(e);return lj(r,"unknown fragment","name",e),r.topicHash};r=e.map(t=>null==t?null:Array.isArray(t)?t.map(n):n(t))}else if("*"===e)r=[null];else if("string"==typeof e)l1(e,32)?r=[e]:(lj(n=t.interface.getEvent(e),"unknown fragment","event",e),r=[n.topicHash]);else e&&"object"==typeof e&&"getTopicFilter"in e&&"function"==typeof e.getTopicFilter&&e.fragment?r=await e.getTopicFilter():"fragment"in e?r=[(n=e.fragment).topicHash]:lj(!1,"unknown event name","event",e);return{fragment:n,tag:(r=r.map(t=>{if(null==t)return null;if(Array.isArray(t)){let e=Array.from(new Set(t.map(t=>t.toLowerCase())).values());return 1===e.length?e[0]:(e.sort(),e)}return t.toLowerCase()})).map(t=>null==t?"null":Array.isArray(t)?t.join("|"):t).join("&"),topics:r}}async function fO(t,e){let{subs:r}=fN(t);return r.get((await fR(t,e)).tag)||null}async function fD(t,e,r){let n=fI(t.runner);lG(n,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:e});let{fragment:i,tag:s,topics:o}=await fR(t,r),{addr:a,subs:l}=fN(t),u=l.get(s);if(!u){let e={address:a||t,topics:o},c=e=>{let n=i;if(null==n)try{n=t.interface.getEvent(e.topics[0])}catch(t){}if(n){let s=n,o=i?t.interface.decodeEventLog(i,e.data,e.topics):[];fB(t,r,o,n=>new fg(t,n,r,s,e))}else fB(t,r,[],n=>new ff(t,n,r,e))},h=[];u={tag:s,listeners:[],start:()=>{h.length||h.push(n.on(e,c))},stop:async()=>{if(0==h.length)return;let t=h;h=[],await Promise.all(t),n.off(e,c)}},l.set(s,u)}return u}let fM=Promise.resolve();async function fx(t,e,r,n){await fM;let i=await fO(t,e);if(!i)return!1;let s=i.listeners.length;return i.listeners=i.listeners.filter(({listener:e,once:i})=>{let s=Array.from(r);n&&s.push(n(i?null:e));try{e.call(t,...s)}catch(t){}return!i}),0===i.listeners.length&&(i.stop(),fN(t).subs.delete(i.tag)),s>0}async function fB(t,e,r,n){try{await fM}catch(t){}let i=fx(t,e,r,n);return fM=i,await i}const fP=["then"];class fL{target;interface;runner;filters;[fT];fallback;constructor(t,e,r,n){var i;let s;lj("string"==typeof t||d2(t),"invalid value for Contract target","target",t),null==r&&(r=null);let o=d0.from(e);lF(this,{target:t,runner:r,interface:o}),Object.defineProperty(this,fT,{value:{}});let a=null,l=null;if(n){let t=fI(r);l=new fd(this.interface,t,n)}let u=new Map;if("string"==typeof t)if(l1(t))a=t,s=Promise.resolve(t);else{let e=fC(r,"resolveName");if(!fy(e))throw lz("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=e.resolveName(t).then(e=>{if(null==e)throw lz("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:t});return fN(this).addr=e,e})}else s=t.getAddress().then(t=>{if(null==t)throw Error("TODO");return fN(this).addr=t,t});return i={addrPromise:s,addr:a,deployTx:l,subs:u},fv.set(this[fT],i),lF(this,{filters:new Proxy({},{get:(t,e,r)=>{if("symbol"==typeof e||fP.indexOf(e)>=0)return Reflect.get(t,e,r);try{return this.getEvent(e)}catch(t){if(!lH(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>fP.indexOf(e)>=0?Reflect.has(t,e):Reflect.has(t,e)||this.interface.hasEvent(String(e))})}),lF(this,{fallback:o.receive||o.fallback?function(t){let e=async function(e){let r=await f_(e,["data"]);r.to=await t.getAddress(),r.from&&(r.from=await d4(r.from,fE(t.runner)));let n=t.interface,i=c9(r.value||fp,"overrides.value")===fp,s="0x"===(r.data||"0x");return!n.fallback||n.fallback.payable||!n.receive||s||i||lj(!1,"cannot send data to receive or send value to non-payable fallback","overrides",e),lj(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),lj(n.receive||n.fallback&&n.fallback.payable||i,"cannot send value to non-payable fallback","overrides.value",r.value),lj(n.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let n=fC(t.runner,"call");lG(fm(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let i=await e(r);try{return await n.call(i)}catch(e){if(lV(e)&&e.data)throw t.interface.makeError(e.data,i);throw e}},n=async function(r){let n=t.runner;lG(fA(n),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await n.sendTransaction(await e(r)),s=fI(t.runner);return new fd(t.interface,s,i)},i=async function(r){let n=fC(t.runner,"estimateGas");return lG(fw(n),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await n.estimateGas(await e(r))},s=async t=>await n(t);return lF(s,{_contract:t,estimateGas:i,populateTransaction:e,send:n,staticCall:r}),s}(this):null}),new Proxy(this,{get:(t,e,r)=>{if("symbol"==typeof e||e in t||fP.indexOf(e)>=0)return Reflect.get(t,e,r);try{return t.getFunction(e)}catch(t){if(!lH(t,"INVALID_ARGUMENT")||"key"!==t.argument)throw t}},has:(t,e)=>"symbol"==typeof e||e in t||fP.indexOf(e)>=0?Reflect.has(t,e):t.interface.hasFunction(e)})}connect(t){return new fL(this.target,this.interface,t)}attach(t){return new fL(t,this.interface,this.runner)}async getAddress(){return await fN(this).addrPromise}async getDeployedCode(){let t=fI(this.runner);lG(t,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let e=await t.getCode(await this.getAddress());return"0x"===e?null:e}async waitForDeployment(){let t=this.deploymentTransaction();if(t)return await t.wait(),this;if(null!=await this.getDeployedCode())return this;let e=fI(this.runner);return lG(null!=e,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((t,r)=>{let n=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return t(this);e.once("block",n)}catch(t){r(t)}};n()})}deploymentTransaction(){return fN(this).deployTx}getFunction(t){return"string"!=typeof t&&(t=t.format()),function(t,e){let r=function(...r){let n=t.interface.getFunction(e,r);return lG(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e,args:r}}),n},n=async function(...e){let n=r(...e),i={};if(n.inputs.length+1===e.length&&(i=await f_(e.pop())).from&&(i.from=await d4(i.from,fE(t.runner))),n.inputs.length!==e.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let s=await fS(t.runner,n.inputs,e);return Object.assign({},i,await lk({to:t.getAddress(),data:t.interface.encodeFunctionData(n,s)}))},i=async function(...t){let e=await a(...t);return 1===e.length?e[0]:e},s=async function(...e){let r=t.runner;lG(fA(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let i=await r.sendTransaction(await n(...e)),s=fI(t.runner);return new fd(t.interface,s,i)},o=async function(...e){let r=fC(t.runner,"estimateGas");return lG(fw(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await n(...e))},a=async function(...e){let i=fC(t.runner,"call");lG(fm(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await n(...e),o="0x";try{o=await i.call(s)}catch(e){if(lV(e)&&e.data)throw t.interface.makeError(e.data,s);throw e}let a=r(...e);return t.interface.decodeFunctionResult(a,o)},l=async(...t)=>r(...t).constant?await i(...t):await s(...t);return lF(l,{name:t.interface.getFunctionName(e),_contract:t,_key:e,getFragment:r,estimateGas:o,populateTransaction:n,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=t.interface.getFunction(e);return lG(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:e}}),r}}),l}(this,t)}getEvent(t){"string"!=typeof t&&(t=t.format());var e=this,r=t;let n=function(...t){let n=e.interface.getEvent(r,t);return lG(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:r,args:t}}),n},i=function(...t){return new fb(e,n(...t),t)};return lF(i,{name:e.interface.getEventName(r),_contract:e,_key:r,getFragment:n}),Object.defineProperty(i,"fragment",{configurable:!1,enumerable:!0,get:()=>{let t=e.interface.getEvent(r);return lG(t,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:r}}),t}}),i}async queryTransaction(t){throw Error("@TODO")}async queryFilter(t,e,r){null==e&&(e=0),null==r&&(r="latest");let{addr:n,addrPromise:i}=fN(this),s=n||await i,{fragment:o,topics:a}=await fR(this,t),l={address:s,topics:a,fromBlock:e,toBlock:r},u=fI(this.runner);return lG(u,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await u.getLogs(l)).map(t=>{let e=o;if(null==e)try{e=this.interface.getEvent(t.topics[0])}catch(t){}if(e)try{return new fu(t,this.interface,e)}catch(e){return new fc(t,e)}return new fn(t,u)})}async on(t,e){let r=await fD(this,"on",t);return r.listeners.push({listener:e,once:!1}),r.start(),this}async once(t,e){let r=await fD(this,"once",t);return r.listeners.push({listener:e,once:!0}),r.start(),this}async emit(t,...e){return await fB(this,t,e,null)}async listenerCount(t){if(t){let e=await fO(this,t);return e?e.listeners.length:0}let{subs:e}=fN(this),r=0;for(let{listeners:t}of e.values())r+=t.length;return r}async listeners(t){if(t){let e=await fO(this,t);return e?e.listeners.map(({listener:t})=>t):[]}let{subs:e}=fN(this),r=[];for(let{listeners:t}of e.values())r=r.concat(t.map(({listener:t})=>t));return r}async off(t,e){let r=await fO(this,t);if(!r)return this;if(e){let t=r.listeners.map(({listener:t})=>t).indexOf(e);t>=0&&r.listeners.splice(t,1)}return(null==e||0===r.listeners.length)&&(r.stop(),fN(this).subs.delete(r.tag)),this}async removeAllListeners(t){if(t){let e=await fO(this,t);if(!e)return this;e.stop(),fN(this).subs.delete(e.tag)}else{let{subs:t}=fN(this);for(let{tag:e,stop:r}of t.values())r(),t.delete(e)}return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return await this.off(t,e)}static buildClass(t){return class extends fL{constructor(e,r=null){super(e,t,r)}}}static from(t,e,r){return null==r&&(r=null),new this(t,e,r)}}function fk(){return fL}class fF extends fk(){}const fU=new Uint8Array(32);fU.fill(0);const fH=BigInt(-1),fV=BigInt(0),fz=BigInt(1),fG=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),fj=hi(fz,32),fQ=hi(fV,32),fW={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},fY=["name","version","chainId","verifyingContract","salt"];function fX(t){return function(e){return lj("string"==typeof e,`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const fq={name:fX("name"),version:fX("version"),chainId:function(t){let e=c9(t,"domain.chainId");return(lj(e>=0,"invalid chain ID","domain.chainId",t),Number.isSafeInteger(e))?Number(e):ho(e)},verifyingContract:function(t){try{return hF(t).toLowerCase()}catch(t){}lj(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){let e=lJ(t,"domain.salt");return lj(32===e.length,'invalid domain value "salt"',"domain.salt",t),l3(e)}};function fK(t){{let e=t.match(/^(u?)int(\d+)$/);if(e){let r=""===e[1],n=parseInt(e[2]);lj(n%8==0&&0!==n&&n<=256&&e[2]===String(n),"invalid numeric width","type",t);let i=c7(fG,r?n-1:n),s=r?(i+fz)*fH:fV;return function(e){let n=c9(e,"value");return lj(n>=s&&n<=i,`value out-of-bounds for ${t}`,"value",n),hi(r?c5(n,256):n,32)}}}{let e=t.match(/^bytes(\d+)$/);if(e){let r=parseInt(e[1]);return lj(0!==r&&r<=32&&e[1]===String(r),"invalid bytes width","type",t),function(e){lj(lJ(e).length===r,`invalid length for ${t}`,"value",e);let n=lJ(e),i=n.length%32;return i?l4([n,fU.slice(i)]):l3(n)}}}switch(t){case"address":return function(t){return l7(hF(t),32)};case"bool":return function(t){return t?fj:fQ};case"bytes":return function(t){return u_(t)};case"string":return function(t){return hb(t)}}return null}function fZ(t,e){return`${t}(${e.map(({name:t,type:e})=>e+" "+t).join(",")})`}function fJ(t){let e=t.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return e?{base:e[1],index:e[2]+e[4],array:{base:e[1],prefix:e[1]+e[2],count:e[5]?parseInt(e[5]):-1}}:{base:t}}class f${primaryType;#M;get types(){return JSON.parse(this.#M)}#x;#B;constructor(t){this.#x=new Map,this.#B=new Map;let e=new Map,r=new Map,n=new Map,i={};for(let s in Object.keys(t).forEach(s=>{i[s]=t[s].map(({name:e,type:r})=>{let{base:n,index:i}=fJ(r);return"int"!==n||t.int||(n="int256"),"uint"!==n||t.uint||(n="uint256"),{name:e,type:n+(i||"")}}),e.set(s,new Set),r.set(s,[]),n.set(s,new Set)}),this.#M=JSON.stringify(i),i){let n=new Set;for(let o of i[s]){lj(!n.has(o.name),`duplicate variable name ${JSON.stringify(o.name)} in ${JSON.stringify(s)}`,"types",t),n.add(o.name);let i=fJ(o.type).base;lj(i!==s,`circular type reference to ${JSON.stringify(i)}`,"types",t),fK(i)||(lj(r.has(i),`unknown type ${JSON.stringify(i)}`,"types",t),r.get(i).push(s),e.get(s).add(i))}}let s=Array.from(r.keys()).filter(t=>0===r.get(t).length);for(let[o,a]of(lj(0!==s.length,"missing primary type","types",t),lj(1===s.length,`ambiguous primary types or unused types: ${s.map(t=>JSON.stringify(t)).join(", ")}`,"types",t),lF(this,{primaryType:s[0]}),!function i(s,o){for(let a of(lj(!o.has(s),`circular type reference to ${JSON.stringify(s)}`,"types",t),o.add(s),e.get(s)))if(r.has(a))for(let t of(i(a,o),o))n.get(t).add(a);o.delete(s)}(this.primaryType,new Set),n)){let t=Array.from(a);t.sort(),this.#x.set(o,fZ(o,i[o])+t.map(t=>fZ(t,i[t])).join(""))}}getEncoder(t){let e=this.#B.get(t);return e||(e=this.#P(t),this.#B.set(t,e)),e}#P(t){{let e=fK(t);if(e)return e}let e=fJ(t).array;if(e){let t=e.prefix,r=this.getEncoder(t);return n=>{lj(-1===e.count||e.count===n.length,`array length mismatch; expected length ${e.count}`,"value",n);let i=n.map(r);return this.#x.has(t)&&(i=i.map(u_)),u_(l4(i))}}let r=this.types[t];if(r){let e=hb(this.#x.get(t));return t=>{let n=r.map(({name:e,type:r})=>{let n=this.getEncoder(r)(t[e]);return this.#x.has(r)?u_(n):n});return n.unshift(e),l4(n)}}lj(!1,`unknown type: ${t}`,"type",t)}encodeType(t){let e=this.#x.get(t);return lj(e,`unknown type: ${JSON.stringify(t)}`,"name",t),e}encodeData(t,e){return this.getEncoder(t)(e)}hashStruct(t,e){return u_(this.encodeData(t,e))}encode(t){return this.encodeData(this.primaryType,t)}hash(t){return this.hashStruct(this.primaryType,t)}_visit(t,e,r){if(fK(t))return r(t,e);let n=fJ(t).array;if(n)return lj(-1===n.count||n.count===e.length,`array length mismatch; expected length ${n.count}`,"value",e),e.map(t=>this._visit(n.prefix,t,r));let i=this.types[t];if(i)return i.reduce((t,{name:n,type:i})=>(t[n]=this._visit(i,e[n],r),t),{});lj(!1,`unknown type: ${t}`,"type",t)}visit(t,e){return this._visit(this.primaryType,t,e)}static from(t){return new f$(t)}static getPrimaryType(t){return f$.from(t).primaryType}static hashStruct(t,e,r){return f$.from(e).hashStruct(t,r)}static hashDomain(t){let e=[];for(let r in t){if(null==t[r])continue;let n=fW[r];lj(n,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",t),e.push({name:r,type:n})}return e.sort((t,e)=>fY.indexOf(t.name)-fY.indexOf(e.name)),f$.hashStruct("EIP712Domain",{EIP712Domain:e},t)}static encode(t,e,r){return l4(["0x1901",f$.hashDomain(t),f$.from(e).hash(r)])}static hash(t,e,r){return u_(f$.encode(t,e,r))}static async resolveNames(t,e,r,n){for(let e in t=Object.assign({},t))null==t[e]&&delete t[e];let i={};t.verifyingContract&&!l1(t.verifyingContract,20)&&(i[t.verifyingContract]="0x");let s=f$.from(e);for(let t in s.visit(r,(t,e)=>("address"!==t||l1(e,20)||(i[e]="0x"),e)),i)i[t]=await n(t);return t.verifyingContract&&i[t.verifyingContract]&&(t.verifyingContract=i[t.verifyingContract]),r=s.visit(r,(t,e)=>"address"===t&&i[e]?i[e]:e),{domain:t,value:r}}static getPayload(t,e,r){f$.hashDomain(t);let n={},i=[];fY.forEach(e=>{let r=t[e];null!=r&&(n[e]=fq[e](r),i.push({name:e,type:fW[e]}))});let s=f$.from(e),o=Object.assign({},e=s.types);return lj(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",e),o.EIP712Domain=i,s.encode(r),{types:o,domain:n,primaryType:s.primaryType,message:s.visit(r,(t,e)=>{if(t.match(/^bytes(\d*)/))return l3(lJ(e));if(t.match(/^u?int/))return c9(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return lj("string"==typeof e,"invalid string","value",e),e}lj(!1,"unsupported type","type",t)})}}}function f1(t){return{address:hF(t.address),nonce:c9(null!=t.nonce?t.nonce:0),chainId:c9(null!=t.chainId?t.chainId:0),signature:hp.from(t.signature)}}function f0(t){return async function(e,r){let n;lG(null==r||!r.cancelled,"request cancelled before sending","CANCELLED");let i=e.url.split(":")[0].toLowerCase();lG("http"===i||"https"===i,`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),lG("https"===i||!e.credentials||e.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null,o=new AbortController,a=setTimeout(()=>{s=lz("request timeout","TIMEOUT"),o.abort()},e.timeout);r&&r.addListener(()=>{s=lz("request cancelled","CANCELLED"),o.abort()});let l=Object.assign({},t,{method:e.method,headers:new Headers(Array.from(e)),body:e.body||void 0,signal:o.signal});try{n=await fetch(e.url,l)}catch(t){if(clearTimeout(a),s)throw s;throw t}clearTimeout(a);let u={};n.headers.forEach((t,e)=>{u[e.toLowerCase()]=t});let c=await n.arrayBuffer(),h=null==c?null:new Uint8Array(c);return{statusCode:n.status,statusMessage:n.statusText,headers:u,body:h}}}f0({});let f2=f0();const f3=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),f4=RegExp("^ipfs://(ipfs/)?(.*)$","i");let f8=!1;async function f6(t,e){try{var r;let e=t.match(f3);if(!e)throw Error("invalid data");return new gn(200,"OK",{"content-type":e[1]||"text/plain"},e[2]?function(t){let e=new Uint8Array((t=atob(t)).length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return lJ(e)}(e[3]):(r=e[3],hA(r.replace(/%([0-9a-f][0-9a-f])/gi,(t,e)=>String.fromCharCode(parseInt(e,16))))))}catch(e){return new gn(599,"BAD REQUEST (invalid data: URI)",{},null,new gr(t))}}function f5(t){return async function(e,r){try{let r=e.match(f4);if(!r)throw Error("invalid link");return new gr(`${t}${r[2]}`)}catch(t){return new gn(599,"BAD REQUEST (invalid IPFS URI)",{},null,new gr(e))}}}const f7={data:f6,ipfs:f5("https://gateway.ipfs.io/ipfs/")},f9=new WeakMap;class gt{#L;#k;constructor(t){this.#L=[],this.#k=!1,f9.set(t,()=>{if(!this.#k){for(let t of(this.#k=!0,this.#L))setTimeout(()=>{t()},0);this.#L=[]}})}addListener(t){lG(!this.#k,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#L.push(t)}get cancelled(){return this.#k}checkSignal(){lG(!this.cancelled,"cancelled","CANCELLED",{})}}function ge(t){if(null==t)throw Error("missing signal; should not happen");return t.checkSignal(),t}class gr{#F;#U;#H;#V;#z;#G;#j;#Q;#W;#Y;#X;#q;#K;#Z;#J;get url(){return this.#G}set url(t){this.#G=String(t)}get body(){return null==this.#j?null:new Uint8Array(this.#j)}set body(t){if(null==t)this.#j=void 0,this.#Q=void 0;else if("string"==typeof t)this.#j=hA(t),this.#Q="text/plain";else if(t instanceof Uint8Array)this.#j=t,this.#Q="application/octet-stream";else if("object"==typeof t)this.#j=hA(JSON.stringify(t)),this.#Q="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#j}get method(){return this.#V?this.#V:this.hasBody()?"POST":"GET"}set method(t){null==t&&(t=""),this.#V=String(t).toUpperCase()}get headers(){let t=Object.assign({},this.#H);return this.#W&&(t.authorization=`Basic ${function(t){let e=lJ(t),r="";for(let t=0;t<e.length;t++)r+=String.fromCharCode(e[t]);return btoa(r)}(hA(this.#W))}`),this.allowGzip&&(t["accept-encoding"]="gzip"),null==t["content-type"]&&this.#Q&&(t["content-type"]=this.#Q),this.body&&(t["content-length"]=String(this.body.length)),t}getHeader(t){return this.headers[t.toLowerCase()]}setHeader(t,e){this.#H[String(t).toLowerCase()]=String(e)}clearHeaders(){this.#H={}}[Symbol.iterator](){let t=this.headers,e=Object.keys(t),r=0;return{next:()=>{if(r<e.length){let n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#W||null}setCredentials(t,e){lj(!t.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#W=`${t}:${e}`}get allowGzip(){return this.#U}set allowGzip(t){this.#U=!!t}get allowInsecureAuthentication(){return!!this.#F}set allowInsecureAuthentication(t){this.#F=!!t}get timeout(){return this.#z}set timeout(t){lj(t>=0,"timeout must be non-zero","timeout",t),this.#z=t}get preflightFunc(){return this.#Y||null}set preflightFunc(t){this.#Y=t}get processFunc(){return this.#X||null}set processFunc(t){this.#X=t}get retryFunc(){return this.#q||null}set retryFunc(t){this.#q=t}get getUrlFunc(){return this.#J||f2}set getUrlFunc(t){this.#J=t}constructor(t){this.#G=String(t),this.#F=!1,this.#U=!0,this.#H={},this.#V="",this.#z=3e5,this.#Z={slotInterval:250,maxAttempts:12},this.#J=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#j?l3(this.#j):"null"}>`}setThrottleParams(t){null!=t.slotInterval&&(this.#Z.slotInterval=t.slotInterval),null!=t.maxAttempts&&(this.#Z.maxAttempts=t.maxAttempts)}async #$(t,e,r,n,i){var s;if(t>=this.#Z.maxAttempts)return i.makeServerError("exceeded maximum retry limit");lG(gi()<=e,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:n}),r>0&&await (s=r,new Promise(t=>setTimeout(t,s)));let o=this.clone(),a=(o.url.split(":")[0]||"").toLowerCase();if(a in f7){let t=await f7[a](o.url,ge(n.#K));if(t instanceof gn){let e=t;if(this.processFunc){ge(n.#K);try{e=await this.processFunc(o,e)}catch(t){(null==t.throttle||"number"!=typeof t.stall)&&e.makeServerError("error in post-processing function",t).assertOk()}}return e}o=t}this.preflightFunc&&(o=await this.preflightFunc(o));let l=await this.getUrlFunc(o,ge(n.#K)),u=new gn(l.statusCode,l.statusMessage,l.headers,l.body,n);if(301===u.statusCode||302===u.statusCode){try{let r=u.headers.location||"";return o.redirect(r).#$(t+1,e,0,n,u)}catch(t){}return u}if(429===u.statusCode&&(null==this.retryFunc||await this.retryFunc(o,u,t))){let r=u.headers["retry-after"],i=this.#Z.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(i=parseInt(r)),o.clone().#$(t+1,e,i,n,u)}if(this.processFunc){ge(n.#K);try{u=await this.processFunc(o,u)}catch(i){(null==i.throttle||"number"!=typeof i.stall)&&u.makeServerError("error in post-processing function",i).assertOk();let r=this.#Z.slotInterval*Math.trunc(Math.random()*Math.pow(2,t));return i.stall>=0&&(r=i.stall),o.clone().#$(t+1,e,r,n,u)}}return u}send(){return lG(null==this.#K,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#K=new gt(this),this.#$(0,gi()+this.timeout,0,this,new gn(0,"",{},null,this))}cancel(){lG(null!=this.#K,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let t=f9.get(this);if(!t)throw Error("missing signal; should not happen");t()}redirect(t){let e=this.url.split(":")[0].toLowerCase(),r=t.split(":")[0].toLowerCase();lG("GET"===this.method&&("https"!==e||"http"!==r)&&t.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(t)})`});let n=new gr(t);return n.method="GET",n.allowGzip=this.allowGzip,n.timeout=this.timeout,n.#H=Object.assign({},this.#H),this.#j&&(n.#j=new Uint8Array(this.#j)),n.#Q=this.#Q,n}clone(){let t=new gr(this.url);return t.#V=this.#V,this.#j&&(t.#j=this.#j),t.#Q=this.#Q,t.#H=Object.assign({},this.#H),t.#W=this.#W,this.allowGzip&&(t.allowGzip=!0),t.timeout=this.timeout,this.allowInsecureAuthentication&&(t.allowInsecureAuthentication=!0),t.#Y=this.#Y,t.#X=this.#X,t.#q=this.#q,t.#Z=Object.assign({},this.#Z),t.#J=this.#J,t}static lockConfig(){f8=!0}static getGateway(t){return f7[t.toLowerCase()]||null}static registerGateway(t,e){if("http"===(t=t.toLowerCase())||"https"===t)throw Error(`cannot intercept ${t}; use registerGetUrl`);if(f8)throw Error("gateways locked");f7[t]=e}static registerGetUrl(t){if(f8)throw Error("gateways locked");f2=t}static createGetUrlFunc(t){return f0(t)}static createDataGateway(){return f6}static createIpfsGatewayFunc(t){return f5(t)}}class gn{#tt;#te;#H;#j;#tr;#tn;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#j?l3(this.#j):"null"}>`}get statusCode(){return this.#tt}get statusMessage(){return this.#te}get headers(){return Object.assign({},this.#H)}get body(){return null==this.#j?null:new Uint8Array(this.#j)}get bodyText(){try{return null==this.#j?"":hE(this.#j)}catch(t){lG(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(t){lG(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let t=this.headers,e=Object.keys(t),r=0;return{next:()=>{if(r<e.length){let n=e[r++];return{value:[n,t[n]],done:!1}}return{value:void 0,done:!0}}}}constructor(t,e,r,n,i){this.#tt=t,this.#te=e,this.#H=Object.keys(r).reduce((t,e)=>(t[e.toLowerCase()]=String(r[e]),t),{}),this.#j=null==n?null:new Uint8Array(n),this.#tr=i||null,this.#tn={message:""}}makeServerError(t,e){let r;t?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${t})`:(t=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${t})`);let n=new gn(599,r,this.headers,this.body,this.#tr||void 0);return n.#tn={message:t,error:e},n}throwThrottleError(t,e){null==e?e=-1:lj(Number.isInteger(e)&&e>=0,"invalid stall timeout","stall",e);let r=Error(t||"throttling requests");throw lF(r,{stall:e,throttle:!0}),r}getHeader(t){return this.headers[t.toLowerCase()]}hasBody(){return null!=this.#j}get request(){return this.#tr}ok(){return""===this.#tn.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:t,error:e}=this.#tn;""===t&&(t=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let n=null;try{this.#j&&(n=hE(this.#j))}catch(t){}lG(!1,t,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:e,info:{requestUrl:r,responseBody:n,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function gi(){return new Date().getTime()}const gs="0x0000000000000000000000000000000000000000",go=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function ga(t){var e;let r;return e=function(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let t=1;t<n;t++)s.push(i+=r());let o=r(),a=e;e+=o;let l=0,u=0;function c(){return 0==l&&(u=u<<8|t[e++],l=8),u>>--l&1}let h=0x80000000-1,d=0;for(let t=0;t<31;t++)d=d<<1|c();let f=[],g=0,p=0x80000000;for(;;){let t=Math.floor(((d-g+1)*i-1)/p),e=0,r=n;for(;r-e>1;){let n=e+r>>>1;t<s[n]?r=n:e=n}if(0==e)break;f.push(e);let o=g+Math.floor(p*s[e]/i),a=g+Math.floor(p*s[e+1]/i)-1;for(;((o^a)&0x40000000)==0;)d=d<<1&h|c(),o=o<<1&h,a=a<<1&h|1;for(;o&~a&0x20000000;)d=0x40000000&d|d<<1&h>>>1|c(),o=o<<1^0x40000000,a=(0x40000000^a)<<1|0x40000001;g=o,p=1+a-o}let m=n-4;return f.map(e=>{switch(e-m){case 3:return m+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return m+256+(t[a++]<<8|t[a++]);case 1:return m+t[a++];default:return e-1}})}(function(t){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((t,r)=>e[t.charCodeAt(0)]=r);let r=t.length,n=new Uint8Array(6*r>>3);for(let i=0,s=0,o=0,a=0;i<r;i++)a=a<<6|e[t.charCodeAt(i)],(o+=6)>=8&&(n[s++]=a>>(o-=8));return n}(t)),r=0,()=>e[r++]}function gl(t,e=0){let r=[];for(;;){let n=t(),i=t();if(!i)break;e+=n;for(let t=0;t<i;t++)r.push(e+t);e+=i+1}return r}function gu(t){return gh(()=>{let e=gl(t);if(e.length)return e})}function gc(t){let e=[];for(;;){let r=t();if(0==r)break;e.push(function(t,e){let r=1+e(),n=e(),i=gh(e);return gd(i.length,1+t,e).flatMap((t,e)=>{let[s,...o]=t;return Array(i[e]).fill().map((t,e)=>{let i=e*n;return[s+e*r,o.map(t=>t+i)]})})}(r,t))}for(;;){var r,n;let i=t()-1;if(i<0)break;e.push((r=i,gd(1+(n=t)(),1+r,n).map(t=>[t[0],t.slice(1)])))}return e.flat()}function gh(t){let e=[];for(;;){let r=t(e.length);if(!r)break;e.push(r)}return e}function gd(t,e,r){let n=Array(t).fill().map(()=>[]);for(let i=0;i<e;i++)(function(t,e){let r=Array(t);for(let i=0,s=0;i<t;i++){var n;r[i]=s+=1&(n=e())?~n>>1:n>>1}return r})(t,r).forEach((t,e)=>n[e].push(t));return n}function gf(t){return`{${t.toString(16).toUpperCase().padStart(2,"0")}}`}function gg(t){let e=t.length;if(e<4096)return String.fromCodePoint(...t);let r=[];for(let n=0;n<e;)r.push(String.fromCodePoint(...t.slice(n,n+=4096)));return r.join("")}function gp(t,e){let r=t.length,n=r-e.length;for(let i=0;0==n&&i<r;i++)n=t[i]-e[i];return n}const gm=55204;function gw(t){return t>>24&255}function gy(t){return 0xffffff&t}function gA(t){return t>=44032&&t<gm}function gE(t){e||function(){let t=ga("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");for(let[s,o]of(e=new Map(gu(t).flatMap((t,e)=>t.map(t=>[t,e+1<<24]))),r=new Set(gl(t)),n=new Map,i=new Map,gc(t))){if(!r.has(s)&&2==o.length){let[t,e]=o,r=i.get(t);r||(r=new Map,i.set(t,r)),r.set(e,s)}n.set(s,o.reverse())}}();let s=[],o=[],a=!1;function l(t){let r=e.get(t);r&&(a=!0,t|=r),s.push(t)}for(let e of t)for(;;){if(e<128)s.push(e);else if(gA(e)){let t=e-44032,r=t/588|0,n=t%588/28|0,i=t%28;l(4352+r),l(4449+n),i>0&&l(4519+i)}else{let t=n.get(e);t?o.push(...t):l(e)}if(!o.length)break;e=o.pop()}if(a&&s.length>1){let t=gw(s[0]);for(let e=1;e<s.length;e++){let r=gw(s[e]);if(0==r||t<=r){t=r;continue}let n=e-1;for(;;){let e=s[n+1];if(s[n+1]=s[n],s[n]=e,!n||(t=gw(s[--n]))<=r)break}t=gw(s[e])}}return s}function gb(t){return function(t){let e=[],r=[],n=-1,s=0;for(let o of t){let t=gw(o),a=gy(o);if(-1==n)0==t?n=a:e.push(a);else if(s>0&&s>=t)0==t?(e.push(n,...r),r.length=0,n=a):r.push(a),s=t;else{let o=function(t,e){if(t>=4352&&t<4371&&e>=4449&&e<4470)return 44032+(t-4352)*588+(e-4449)*28;{if(gA(t)&&e>4519&&e<4547&&(t-44032)%28==0)return t+(e-4519);let r=i.get(t);return r&&(r=r.get(e))?r:-1}}(n,a);o>=0?n=o:0==s&&0==t?(e.push(n),n=a):(r.push(a),s=t)}}return n>=0&&e.push(n,...r),e}(gE(t))}const gC=t=>Array.from(t);function gI(t,e){return t.P.has(e)||t.Q.has(e)}class g_ extends Array{get is_emoji(){return!0}}function gS(){let t,e;if(s)return;let r=ga("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI"),n=()=>gl(r),i=()=>new Set(n()),m=(t,e)=>e.forEach(e=>t.add(e));s=new Map(gc(r)),o=i(),a=n(),l=new Set(n().map(t=>a[t])),a=new Set(a),u=i(),i();let w=gu(r),y=r(),A=()=>{let t=new Set;return n().forEach(e=>m(t,w[e])),m(t,n()),t};c=gh(t=>{let e=gh(r).map(t=>t+96);if(e.length){let n=t>=y;return e[0]-=32,e=gg(e),n&&(e=`Restricted[${e}]`),{N:e,P:A(),Q:A(),M:!r(),R:n}}}),h=i(),d=new Map;let E=n().concat(gC(h)).sort((t,e)=>t-e);for(let{V:t,M:e}of(E.forEach((t,e)=>{let n=r(),i=E[e]=n?E[e-n]:{V:[],M:new Map};i.V.push(t),h.has(t)||d.set(t,i)}),new Set(d.values()))){let r=[];for(let e of t){let t=c.filter(t=>gI(t,e)),n=r.find(({G:e})=>t.some(t=>e.has(t)));n||(n={G:new Set,V:[]},r.push(n)),n.V.push(e),m(n.G,t)}let n=r.flatMap(t=>gC(t.G));for(let{G:t,V:i}of r){let r=new Set(n.filter(e=>!t.has(e)));for(let t of i)e.set(t,r)}}f=new Set;let b=new Set,C=t=>f.has(t)?b.add(t):f.add(t);for(let t of c){for(let e of t.P)C(e);for(let e of t.Q)C(e)}for(let t of f)d.has(t)||b.has(t)||d.set(t,1);for(let n of(m(f,gE(f).map(gy)),g=(t=[],e=gl(r),function e({S:r,B:n},i,s){if(!(4&r)||s!==i[i.length-1])for(let o of(2&r&&(s=i[i.length-1]),1&r&&t.push(i),n))for(let t of o.Q)e(o,[...i,t],s)}(function t(n){return{S:r(),B:gh(()=>{let n=gl(r).map(t=>e[t]);if(n.length)return t(n)}),Q:n}}([]),[]),t).map(t=>g_.from(t)).sort(gp),p=new Map,g)){let t=[p];for(let e of n){let r=t.map(t=>{let r=t.get(e);return r||(r=new Map,t.set(e,r)),r});65039===e?t.push(...r):t=r}for(let e of t)e.V=n}}function gT(t){return(gR(t)?"":`${gv(gN([t]))} `)+gf(t)}function gv(t){return`"${t}"\u200E`}function gN(t,e=1/0,r=gf){var n;let i=[];n=t[0],gS(),a.has(n)&&i.push("◌"),t.length>e&&(e>>=1,t=[...t.slice(0,e),8230,...t.slice(-e)]);let s=0,o=t.length;for(let e=0;e<o;e++){let n=t[e];gR(n)&&(i.push(gg(t.slice(s,e))),i.push(r(n)),s=e+1)}return i.push(gg(t.slice(s,o))),i.join("")}function gR(t){return gS(),u.has(t)}function gO(t){return Error(`disallowed character: ${gT(t)}`)}function gD(t,e){let r=gT(e),n=c.find(t=>t.P.has(e));return n&&(r=`${n.N} ${r}`),Error(`illegal mixture: ${t.N} + ${r}`)}function gM(t){return Error(`illegal placement: ${t}`)}function gx(t){return t.filter(t=>65039!=t)}const gB=new Uint8Array(32);function gP(t){return lj(0!==t.length,"invalid ENS name; empty component","comp",t),t}function gL(t){let e=hA(function(t){try{var e;if(0===t.length)throw Error("empty label");return(e=function(t,e,r){if(!t)return[];gS();let n=0;return t.split(".").map(t=>{let i=function(t){let e=[];for(let r=0,n=t.length;r<n;){let n=t.codePointAt(r);r+=n<65536?1:2,e.push(n)}return e}(t),u={input:i,offset:n};n+=i.length+1;try{let t,n=u.tokens=function(t,e,r){let n=[],i=[];for(t=t.slice().reverse();t.length;){let a=function(t,e){let r,n=p,i=t.length;for(;i&&(n=n.get(t[--i]));){let{V:e}=n;e&&(r=e,t.length=i)}return r}(t);if(a)i.length&&(n.push(e(i)),i=[]),n.push(r(a));else{let e=t.pop();if(f.has(e))i.push(e);else{let t=s.get(e);if(t)i.push(...t);else if(!o.has(e))throw gO(e)}}}return i.length&&n.push(e(i)),n}(i,e,r),h=n.length;if(!h)throw Error("empty label");let g=u.output=n.flat();for(let t=g.lastIndexOf(95);t>0;)if(95!==g[--t])throw Error("underscore allowed only at start");if(!(u.emoji=h>1||n[0].is_emoji)&&g.every(t=>t<128)){if(g.length>=4&&45==g[2]&&45==g[3])throw Error(`invalid label extension: "${gg(g.slice(0,4))}"`);t="ASCII"}else{let e=n.flatMap(t=>t.is_emoji?[]:t);if(e.length){if(a.has(g[0]))throw gM("leading combining mark");for(let t=1;t<h;t++){let e=n[t];if(!e.is_emoji&&a.has(e[0]))throw gM(`emoji + combining mark: "${gg(n[t-1])} + ${gN([e[0]])}"`)}!function(t){let e=t[0],r=go.get(e);if(r)throw gM(`leading ${r}`);let n=t.length,i=-1;for(let s=1;s<n;s++){e=t[s];let n=go.get(e);if(n){if(i==s)throw gM(`${r} + ${n}`);i=s+1,r=n}}if(i==n)throw gM(`trailing ${r}`)}(g);let r=gC(new Set(e)),[i]=function(t){let e=c;for(let r of t){let t=e.filter(t=>gI(t,r));if(!t.length)if(c.some(t=>gI(t,r)))throw gD(e[0],r);else throw gO(r);if(e=t,1==t.length)break}return e}(r);(function(t,e){for(let r of e)if(!gI(t,r))throw gD(t,r);if(t.M){let t=gE(e).map(gy);for(let e=1,r=t.length;e<r;e++)if(l.has(t[e])){let n=e+1;for(let i;n<r&&l.has(i=t[n]);n++)for(let r=e;r<n;r++)if(t[r]==i)throw Error(`duplicate non-spacing marks: ${gT(i)}`);if(n-e>4)throw Error(`excessive non-spacing marks: ${gv(gN(t.slice(e-1,n)))} (${n-e}/4)`);e=n}}})(i,e),function(t,e){let r,n=[];for(let t of e){let e=d.get(t);if(1===e)return;if(e){let n=e.M.get(t);if(!(r=r?r.filter(t=>n.has(t)):gC(n)).length)return}else n.push(t)}if(r){for(let e of r)if(n.every(t=>gI(e,t)))throw Error(`whole-script confusable: ${t.N}/${e.N}`)}}(i,r),t=i.N}else t="Emoji"}u.type=t}catch(t){u.error=t}return u})}(t,gb,gx)).map(({input:t,error:r,output:n})=>{if(r){let n=r.message;throw Error(1==e.length?n:`Invalid label ${gv(gN(t,63))}: ${n}`)}return gg(n)}).join(".")}catch(e){lj(!1,`invalid ENS name (${e.message})`,"name",t)}}(t)),r=[];if(0===t.length)return r;let n=0;for(let t=0;t<e.length;t++)46===e[t]&&(r.push(gP(e.slice(n,t))),n=t+1);return lj(n<e.length,"invalid ENS name; empty component","name",t),r.push(gP(e.slice(n))),r}function gk(t){lj("string"==typeof t,"invalid ENS name; not a string","name",t),lj(t.length,"invalid ENS name (empty label)","name",t);let e=gB,r=gL(t);for(;r.length;)e=u_(l4([e,u_(r.pop())]));return l3(e)}function gF(t,e,r){let n=0;for(let i=0;i<r;i++)n=256*n+t[e+i];return n}function gU(t,e,r,n){let i=[];for(;r<e+1+n;){let s=gH(t,r);i.push(s.result),lG((r+=s.consumed)<=e+1+n,"child data too short","BUFFER_OVERRUN",{buffer:t,length:n,offset:e})}return{consumed:1+n,result:i}}function gH(t,e){lG(0!==t.length,"data too short","BUFFER_OVERRUN",{buffer:t,length:0,offset:1});let r=e=>{lG(e<=t.length,"data short segment too short","BUFFER_OVERRUN",{buffer:t,length:t.length,offset:e})};if(t[e]>=248){let n=t[e]-247;r(e+1+n);let i=gF(t,e+1,n);return r(e+1+n+i),gU(t,e,e+1+n,n+i)}if(t[e]>=192){let n=t[e]-192;return r(e+1+n),gU(t,e,e+1,n)}if(t[e]>=184){let n=t[e]-183;r(e+1+n);let i=gF(t,e+1,n);r(e+1+n+i);let s=l3(t.slice(e+1+n,e+1+n+i));return{consumed:1+n+i,result:s}}if(t[e]>=128){let n=t[e]-128;r(e+1+n);let i=l3(t.slice(e+1,e+1+n));return{consumed:1+n,result:i}}return{consumed:1,result:function(t){let e=t.toString(16);for(;e.length<2;)e="0"+e;return"0x"+e}(t[e])}}function gV(t){let e=lJ(t,"data"),r=gH(e,0);return lj(r.consumed===e.length,"unexpected junk after rlp payload","data",t),r.result}function gz(t){let e=[];for(;t;)e.unshift(255&t),t>>=8;return e}gB.fill(0);const gG="0123456789abcdef";function gj(t){let e="0x";for(let r of function t(e){if(Array.isArray(e)){let r=[];if(e.forEach(function(e){r=r.concat(t(e))}),r.length<=55)return r.unshift(192+r.length),r;let n=gz(r.length);return n.unshift(247+n.length),n.concat(r)}let r=Array.prototype.slice.call(lJ(e,"object"));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;let n=gz(r.length);return n.unshift(183+n.length),n.concat(r)}(t))e+=gG[r>>4],e+=gG[15&r];return e}const gQ=BigInt(0),gW=BigInt(2),gY=BigInt(27),gX=BigInt(28),gq=BigInt(35),gK=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function gZ(t,e){let r=t.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=cl(e).substring(4))}function gJ(t){return"0x"===t?null:hF(t)}function g$(t,e){try{return d6(t)}catch(r){lj(!1,r.message,e,t)}}function g1(t,e){return"0x"===t?0:hn(t,e)}function g0(t,e){if("0x"===t)return gQ;let r=c9(t,e);return lj(r<=gK,"value exceeds uint size",e,r),r}function g2(t,e){let r=c9(t,"value"),n=hs(r);return lj(n.length<=32,"value too large",`tx.${e}`,r),n}function g3(t){return d6(t).map(t=>[t.address,t.storageKeys])}function g4(t,e){let r;try{if(r=g1(e[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch(t){lj(!1,"invalid yParity","yParity",e[0])}let n=l7(e[1],32),i=l7(e[2],32);t.signature=hp.from({r:n,s:i,yParity:r})}class g8{#ti;#ts;#o;#to;#ta;#tl;#tu;#tc;#th;#td;#tf;#tg;#tp;#tm;#tw;#ty;#tA;get type(){return this.#ti}set type(t){switch(t){case null:this.#ti=null;break;case 0:case"legacy":this.#ti=0;break;case 1:case"berlin":case"eip-2930":this.#ti=1;break;case 2:case"london":case"eip-1559":this.#ti=2;break;case 3:case"cancun":case"eip-4844":this.#ti=3;break;case 4:case"pectra":case"eip-7702":this.#ti=4;break;default:lj(!1,"unsupported transaction type","type",t)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let t=this.#ts;return null==t&&3===this.type?gs:t}set to(t){this.#ts=null==t?null:hF(t)}get nonce(){return this.#to}set nonce(t){this.#to=hn(t,"value")}get gasLimit(){return this.#ta}set gasLimit(t){this.#ta=c9(t)}get gasPrice(){let t=this.#tl;return null==t&&(0===this.type||1===this.type)?gQ:t}set gasPrice(t){this.#tl=null==t?null:c9(t,"gasPrice")}get maxPriorityFeePerGas(){let t=this.#tu;return null==t?2===this.type||3===this.type?gQ:null:t}set maxPriorityFeePerGas(t){this.#tu=null==t?null:c9(t,"maxPriorityFeePerGas")}get maxFeePerGas(){let t=this.#tc;return null==t?2===this.type||3===this.type?gQ:null:t}set maxFeePerGas(t){this.#tc=null==t?null:c9(t,"maxFeePerGas")}get data(){return this.#o}set data(t){this.#o=l3(t)}get value(){return this.#th}set value(t){this.#th=c9(t,"value")}get chainId(){return this.#td}set chainId(t){this.#td=c9(t)}get signature(){return this.#tf||null}set signature(t){this.#tf=null==t?null:hp.from(t)}get accessList(){let t=this.#tg||null;return null==t?1===this.type||2===this.type||3===this.type?[]:null:t}set accessList(t){this.#tg=null==t?null:d6(t)}get authorizationList(){let t=this.#tA||null;return null==t&&4===this.type?[]:t}set authorizationList(t){this.#tA=null==t?null:t.map(t=>f1(t))}get maxFeePerBlobGas(){let t=this.#tp;return null==t&&3===this.type?gQ:t}set maxFeePerBlobGas(t){this.#tp=null==t?null:c9(t,"maxFeePerBlobGas")}get blobVersionedHashes(){let t=this.#tm;return null==t&&3===this.type?[]:t}set blobVersionedHashes(t){if(null!=t){lj(Array.isArray(t),"blobVersionedHashes must be an Array","value",t),t=t.slice();for(let e=0;e<t.length;e++)lj(l1(t[e],32),"invalid blobVersionedHash",`value[${e}]`,t[e])}this.#tm=t}get blobs(){return null==this.#ty?null:this.#ty.map(t=>Object.assign({},t))}set blobs(t){if(null==t){this.#ty=null;return}let e=[],r=[];for(let n=0;n<t.length;n++){let i=t[n];if(l0(i)){lG(this.#tw,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let t=lJ(i);if(lj(t.length<=131072,"blob is too large",`blobs[${n}]`,i),131072!==t.length){let e=new Uint8Array(131072);e.set(t),t=e}let s=this.#tw.blobToKzgCommitment(t),o=l3(this.#tw.computeBlobKzgProof(t,s));e.push({data:l3(t),commitment:l3(s),proof:o}),r.push(gZ(1,s))}else{let t=l3(i.commitment);e.push({data:l3(i.data),commitment:t,proof:l3(i.proof)}),r.push(gZ(1,t))}}this.#ty=e,this.#tm=r}get kzg(){return this.#tw}set kzg(t){if(null==t)this.#tw=null;else this.#tw={blobToKzgCommitment:e=>{if("computeBlobProof"in t){if("blobToKzgCommitment"in t&&"function"==typeof t.blobToKzgCommitment)return lJ(t.blobToKzgCommitment(l3(e)))}else if("blobToKzgCommitment"in t&&"function"==typeof t.blobToKzgCommitment)return lJ(t.blobToKzgCommitment(e));if("blobToKZGCommitment"in t&&"function"==typeof t.blobToKZGCommitment)return lJ(t.blobToKZGCommitment(l3(e)));lj(!1,"unsupported KZG library","kzg",t)},computeBlobKzgProof:(e,r)=>"computeBlobProof"in t&&"function"==typeof t.computeBlobProof?lJ(t.computeBlobProof(l3(e),l3(r))):"computeBlobKzgProof"in t&&"function"==typeof t.computeBlobKzgProof?t.computeBlobKzgProof(e,r):"computeBlobKZGProof"in t&&"function"==typeof t.computeBlobKZGProof?lJ(t.computeBlobKZGProof(l3(e),l3(r))):void lj(!1,"unsupported KZG library","kzg",t)}}constructor(){this.#ti=null,this.#ts=null,this.#to=0,this.#ta=gQ,this.#tl=null,this.#tu=null,this.#tc=null,this.#o="0x",this.#th=gQ,this.#td=gQ,this.#tf=null,this.#tg=null,this.#tp=null,this.#tm=null,this.#tw=null,this.#ty=null,this.#tA=null}get hash(){return null==this.signature?null:u_(this.#tE(!0,!1))}get unsignedHash(){return u_(this.unsignedSerialized)}get from(){var t,e,r;let n;return null==this.signature?null:(t=this.unsignedHash,e=this.signature,hF(u_("0x"+("string"==typeof(r=hm.recoverPublicKey(t,e))?hm.computePublicKey(r,!1):r.publicKey).substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:hm.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#tE(t,e){lG(!t||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=t?this.signature:null;switch(this.inferType()){case 0:return function(t,e){let r=[g2(t.nonce,"nonce"),g2(t.gasPrice||0,"gasPrice"),g2(t.gasLimit,"gasLimit"),t.to||"0x",g2(t.value,"value"),t.data],n=gQ;if(t.chainId!=gQ)n=c9(t.chainId,"tx.chainId"),lj(!e||null==e.networkV||e.legacyChainId===n,"tx.chainId/sig.v mismatch","sig",e);else if(t.signature){let e=t.signature.legacyChainId;null!=e&&(n=e)}if(!e)return n!==gQ&&(r.push(hs(n)),r.push("0x"),r.push("0x")),gj(r);let i=BigInt(27+e.yParity);return n!==gQ?i=hp.getChainIdV(n,e.v):BigInt(e.v)!==i&&lj(!1,"tx.chainId/sig.v mismatch","sig",e),r.push(hs(i)),r.push(hs(e.r)),r.push(hs(e.s)),gj(r)}(this,r);case 1:let n=[g2(this.chainId,"chainId"),g2(this.nonce,"nonce"),g2(this.gasPrice||0,"gasPrice"),g2(this.gasLimit,"gasLimit"),this.to||"0x",g2(this.value,"value"),this.data,g3(this.accessList||[])];return r&&(n.push(g2(r.yParity,"recoveryParam")),n.push(hs(r.r)),n.push(hs(r.s))),l4(["0x01",gj(n)]);case 2:let i=[g2(this.chainId,"chainId"),g2(this.nonce,"nonce"),g2(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),g2(this.maxFeePerGas||0,"maxFeePerGas"),g2(this.gasLimit,"gasLimit"),this.to||"0x",g2(this.value,"value"),this.data,g3(this.accessList||[])];return r&&(i.push(g2(r.yParity,"yParity")),i.push(hs(r.r)),i.push(hs(r.s))),l4(["0x02",gj(i)]);case 3:return function(t,e,r){let n=[g2(t.chainId,"chainId"),g2(t.nonce,"nonce"),g2(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),g2(t.maxFeePerGas||0,"maxFeePerGas"),g2(t.gasLimit,"gasLimit"),t.to||gs,g2(t.value,"value"),t.data,g3(t.accessList||[]),g2(t.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(t,e){lj(Array.isArray(t),`invalid ${e}`,"value",t);for(let e=0;e<t.length;e++)lj(l1(t[e],32),"invalid ${ param } hash",`value[${e}]`,t[e]);return t}(t.blobVersionedHashes||[],"blobVersionedHashes")];return e&&(n.push(g2(e.yParity,"yParity")),n.push(hs(e.r)),n.push(hs(e.s)),r)?l4(["0x03",gj([n,r.map(t=>t.data),r.map(t=>t.commitment),r.map(t=>t.proof)])]):l4(["0x03",gj(n)])}(this,r,e?this.blobs:null);case 4:let s=[g2(this.chainId,"chainId"),g2(this.nonce,"nonce"),g2(this.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),g2(this.maxFeePerGas||0,"maxFeePerGas"),g2(this.gasLimit,"gasLimit"),this.to||"0x",g2(this.value,"value"),this.data,g3(this.accessList||[]),(this.authorizationList||[]).map(t=>[g2(t.chainId,"chainId"),t.address,g2(t.nonce,"nonce"),g2(t.signature.yParity,"yParity"),t.signature.r,t.signature.s])];return r&&(s.push(g2(r.yParity,"yParity")),s.push(hs(r.r)),s.push(hs(r.s))),l4(["0x04",gj(s)])}lG(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#tE(!0,!0)}get unsignedSerialized(){return this.#tE(!1,!1)}inferType(){let t=this.inferTypes();return t.indexOf(2)>=0?2:t.pop()}inferTypes(){let t=null!=this.gasPrice,e=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,n=null!=this.#tp||this.#tm;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&lG(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),lG(!e||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),lG(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let i=[];return null!=this.type?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):e?i.push(2):t?(i.push(1),r||i.push(0)):r?(i.push(1),i.push(2)):(n&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return g8.from(this)}toJSON(){let t=t=>null==t?null:t.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:t(this.gasLimit),gasPrice:t(this.gasPrice),maxPriorityFeePerGas:t(this.maxPriorityFeePerGas),maxFeePerGas:t(this.maxFeePerGas),value:t(this.value),chainId:t(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(t){if(null==t)return new g8;if("string"==typeof t){let e=lJ(t);if(e[0]>=127)return g8.from(function(t){let e=gV(t);lj(Array.isArray(e)&&(9===e.length||6===e.length),"invalid field count for legacy transaction","data",t);let r={type:0,nonce:g1(e[0],"nonce"),gasPrice:g0(e[1],"gasPrice"),gasLimit:g0(e[2],"gasLimit"),to:gJ(e[3]),value:g0(e[4],"value"),data:l3(e[5]),chainId:gQ};if(6===e.length)return r;let n=g0(e[6],"v"),i=g0(e[7],"r"),s=g0(e[8],"s");if(i===gQ&&s===gQ)r.chainId=n;else{let t=(n-gq)/gW;t<gQ&&(t=gQ),r.chainId=t,lj(t!==gQ||n===gY||n===gX,"non-canonical legacy v","v",e[6]),r.signature=hp.from({r:l7(e[7],32),s:l7(e[8],32),v:n})}return r}(e));switch(e[0]){case 1:return g8.from(function(t){let e=gV(lJ(t).slice(1));lj(Array.isArray(e)&&(8===e.length||11===e.length),"invalid field count for transaction type: 1","data",l3(t));let r={type:1,chainId:g0(e[0],"chainId"),nonce:g1(e[1],"nonce"),gasPrice:g0(e[2],"gasPrice"),gasLimit:g0(e[3],"gasLimit"),to:gJ(e[4]),value:g0(e[5],"value"),data:l3(e[6]),accessList:g$(e[7],"accessList")};return 8===e.length||g4(r,e.slice(8)),r}(e));case 2:return g8.from(function(t){let e=gV(lJ(t).slice(1));lj(Array.isArray(e)&&(9===e.length||12===e.length),"invalid field count for transaction type: 2","data",l3(t));let r={type:2,chainId:g0(e[0],"chainId"),nonce:g1(e[1],"nonce"),maxPriorityFeePerGas:g0(e[2],"maxPriorityFeePerGas"),maxFeePerGas:g0(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:g0(e[4],"gasLimit"),to:gJ(e[5]),value:g0(e[6],"value"),data:l3(e[7]),accessList:g$(e[8],"accessList")};return 9===e.length||g4(r,e.slice(9)),r}(e));case 3:return g8.from(function(t){let e=gV(lJ(t).slice(1)),r="3",n=null;if(4===e.length&&Array.isArray(e[0])){r="3 (network format)";let t=e[1],i=e[2],s=e[3];lj(Array.isArray(t),"invalid network format: blobs not an array","fields[1]",t),lj(Array.isArray(i),"invalid network format: commitments not an array","fields[2]",i),lj(Array.isArray(s),"invalid network format: proofs not an array","fields[3]",s),lj(t.length===i.length,"invalid network format: blobs/commitments length mismatch","fields",e),lj(t.length===s.length,"invalid network format: blobs/proofs length mismatch","fields",e),n=[];for(let r=0;r<e[1].length;r++)n.push({data:t[r],commitment:i[r],proof:s[r]});e=e[0]}lj(Array.isArray(e)&&(11===e.length||14===e.length),`invalid field count for transaction type: ${r}`,"data",l3(t));let i={type:3,chainId:g0(e[0],"chainId"),nonce:g1(e[1],"nonce"),maxPriorityFeePerGas:g0(e[2],"maxPriorityFeePerGas"),maxFeePerGas:g0(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:g0(e[4],"gasLimit"),to:gJ(e[5]),value:g0(e[6],"value"),data:l3(e[7]),accessList:g$(e[8],"accessList"),maxFeePerBlobGas:g0(e[9],"maxFeePerBlobGas"),blobVersionedHashes:e[10]};n&&(i.blobs=n),lj(null!=i.to,`invalid address for transaction type: ${r}`,"data",t),lj(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",t);for(let e=0;e<i.blobVersionedHashes.length;e++)lj(l1(i.blobVersionedHashes[e],32),`invalid blobVersionedHash at index ${e}: must be length 32`,"data",t);return 11===e.length||g4(i,e.slice(11)),i}(e));case 4:return g8.from(function(t){let e=gV(lJ(t).slice(1));lj(Array.isArray(e)&&(10===e.length||13===e.length),"invalid field count for transaction type: 4","data",l3(t));let r={type:4,chainId:g0(e[0],"chainId"),nonce:g1(e[1],"nonce"),maxPriorityFeePerGas:g0(e[2],"maxPriorityFeePerGas"),maxFeePerGas:g0(e[3],"maxFeePerGas"),gasPrice:null,gasLimit:g0(e[4],"gasLimit"),to:gJ(e[5]),value:g0(e[6],"value"),data:l3(e[7]),accessList:g$(e[8],"accessList"),authorizationList:function(t,e){try{if(!Array.isArray(t))throw Error("authorizationList: invalid array");let e=[];for(let r=0;r<t.length;r++){let n=t[r];if(!Array.isArray(n))throw Error(`authorization[${r}]: invalid array`);if(6!==n.length)throw Error(`authorization[${r}]: wrong length`);if(!n[1])throw Error(`authorization[${r}]: null address`);e.push({address:gJ(n[1]),nonce:g0(n[2],"nonce"),chainId:g0(n[0],"chainId"),signature:hp.from({yParity:g1(n[3],"yParity"),r:l7(n[4],32),s:l7(n[5],32)})})}return e}catch(r){lj(!1,r.message,e,t)}}(e[9],"authorizationList")};return 10===e.length||g4(r,e.slice(10)),r}(e))}lG(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let e=new g8;return null!=t.type&&(e.type=t.type),null!=t.to&&(e.to=t.to),null!=t.nonce&&(e.nonce=t.nonce),null!=t.gasLimit&&(e.gasLimit=t.gasLimit),null!=t.gasPrice&&(e.gasPrice=t.gasPrice),null!=t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=t.maxPriorityFeePerGas),null!=t.maxFeePerGas&&(e.maxFeePerGas=t.maxFeePerGas),null!=t.maxFeePerBlobGas&&(e.maxFeePerBlobGas=t.maxFeePerBlobGas),null!=t.data&&(e.data=t.data),null!=t.value&&(e.value=t.value),null!=t.chainId&&(e.chainId=t.chainId),null!=t.signature&&(e.signature=hp.from(t.signature)),null!=t.accessList&&(e.accessList=t.accessList),null!=t.authorizationList&&(e.authorizationList=t.authorizationList),null!=t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes),null!=t.kzg&&(e.kzg=t.kzg),null!=t.blobs&&(e.blobs=t.blobs),null!=t.hash&&(lj(e.isSigned(),"unsigned transaction cannot define '.hash'","tx",t),lj(e.hash===t.hash,"hash mismatch","tx",t)),null!=t.from&&(lj(e.isSigned(),"unsigned transaction cannot define '.from'","tx",t),lj(e.from.toLowerCase()===(t.from||"").toLowerCase(),"from mismatch","tx",t)),e}}const g6="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const g5=BigInt(58);function g7(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):lj(!1,"unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}class g9{name;constructor(t){lF(this,{name:t})}connect(t){return this}supportsCoinType(t){return!1}async encodeAddress(t,e){throw Error("unsupported coin")}async decodeAddress(t,e){throw Error("unsupported coin")}}const pt=RegExp("^(ipfs)://(.*)$","i"),pe=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),pt,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class pr{provider;address;name;#tb;#tC;constructor(t,e,r){lF(this,{provider:t,address:e,name:r}),this.#tb=null,this.#tC=new fF(e,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],t)}async supportsWildcard(){return null==this.#tb&&(this.#tb=(async()=>{try{return await this.#tC.supportsInterface("0x9061b923")}catch(t){if(lH(t,"CALL_EXCEPTION"))return!1;throw this.#tb=null,t}})()),await this.#tb}async #tI(t,e){var r,n;e=(e||[]).slice();let i=this.#tC.interface;e.unshift(gk(this.name));let s=null;await this.supportsWildcard()&&(lG(s=i.getFunction(t),"missing fragment","UNKNOWN_ERROR",{info:{funcName:t}}),e=[(r=this.name,lj(true,"DNS encoded label cannot exceed 255","length",n=255),l3(l4(gL(r).map(t=>{lj(t.length<=n,`label ${JSON.stringify(r)} exceeds ${n} bytes`,"name",r);let e=new Uint8Array(t.length+1);return e.set(t,1),e[0]=e.length-1,e})))+"00"),i.encodeFunctionData(s,e)],t="resolve(bytes,bytes)"),e.push({enableCcipRead:!0});try{let r=await this.#tC[t](...e);if(s)return i.decodeFunctionResult(s,r)[0];return r}catch(t){if(!lH(t,"CALL_EXCEPTION"))throw t}return null}async getAddress(t){if(null==t&&(t=60),60===t)try{let t=await this.#tI("addr(bytes32)");if(null==t||t===gs)return null;return t}catch(t){if(lH(t,"CALL_EXCEPTION"))return null;throw t}if(t>=0&&t<0x80000000){let e=t+0x80000000,r=await this.#tI("addr(bytes32,uint)",[e]);if(l1(r,20))return hF(r)}let e=null;for(let r of this.provider.plugins)if(r instanceof g9&&r.supportsCoinType(t)){e=r;break}if(null==e)return null;let r=await this.#tI("addr(bytes32,uint)",[t]);if(null==r||"0x"===r)return null;let n=await e.decodeAddress(t,r);if(null!=n)return n;lG(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${t})`,info:{coinType:t,data:r}})}async getText(t){let e=await this.#tI("text(bytes32,string)",[t]);return null==e||"0x"===e?null:e}async getContentHash(){let t=await this.#tI("contenthash(bytes32)");if(null==t||"0x"===t)return null;let e=t.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(e){let t="e3010170"===e[1]?"ipfs":"ipns",r=parseInt(e[4],16);if(e[5].length===2*r)return`${t}://${function(t){let e=lJ(t),r=hr(e),n="";for(;r;)n=g6[Number(r%g5)]+n,r/=g5;for(let t=0;t<e.length&&!e[t];t++)n=g6[0]+n;return n}("0x"+e[2])}`}let r=t.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;lG(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:t}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let t=[{type:"name",value:this.name}];try{let e=await this.getText("avatar");if(null==e)return t.push({type:"!avatar",value:""}),{url:null,linkage:t};t.push({type:"avatar",value:e});for(let r=0;r<pe.length;r++){let n=e.match(pe[r]);if(null==n)continue;let i=n[1].toLowerCase();switch(i){case"https":case"data":return t.push({type:"url",value:e}),{linkage:t,url:e};case"ipfs":{let r=g7(e);return t.push({type:"ipfs",value:e}),t.push({type:"url",value:r}),{linkage:t,url:r}}case"erc721":case"erc1155":{let r="erc721"===i?"tokenURI(uint256)":"uri(uint256)";t.push({type:i,value:e});let s=await this.getAddress();if(null==s)return t.push({type:"!owner",value:""}),{url:null,linkage:t};let o=(n[2]||"").split("/");if(2!==o.length)return t.push({type:`!${i}caip`,value:n[2]||""}),{url:null,linkage:t};let a=o[1],l=new fF(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===i){let e=await l.ownerOf(a);if(s!==e)return t.push({type:"!owner",value:e}),{url:null,linkage:t};t.push({type:"owner",value:e})}else if("erc1155"===i){let e=await l.balanceOf(s,a);if(!e)return t.push({type:"!balance",value:"0"}),{url:null,linkage:t};t.push({type:"balance",value:e.toString()})}let u=await l[r](a);if(null==u||"0x"===u)return t.push({type:"!metadata-url",value:""}),{url:null,linkage:t};t.push({type:"metadata-url-base",value:u}),"erc1155"===i&&(u=u.replace("{id}",hi(a,32).substring(2)),t.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=g7(u)),t.push({type:"metadata-url",value:u});let c={},h=await new gr(u).send();h.assertOk();try{c=h.bodyJson}catch(e){try{t.push({type:"!metadata",value:h.bodyText})}catch(r){let e=h.body;e&&t.push({type:"!metadata",value:l3(e)})}return{url:null,linkage:t}}if(!c)return t.push({type:"!metadata",value:""}),{url:null,linkage:t};t.push({type:"metadata",value:JSON.stringify(c)});let d=c.image;if("string"!=typeof d)return t.push({type:"!imageUrl",value:""}),{url:null,linkage:t};if(d.match(/^(https:\/\/|data:)/i));else{let e=d.match(pt);if(null==e)return t.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:t};t.push({type:"imageUrl-ipfs",value:d}),d=g7(d)}return t.push({type:"url",value:d}),{linkage:t,url:d}}}}}catch(t){}return{linkage:t,url:null}}static async getEnsAddress(t){let e=await t.getNetwork(),r=e.getPlugin("org.ethers.plugins.network.Ens");return lG(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:e}}),r.address}static async #t_(t,e){let r=await pr.getEnsAddress(t);try{let n=new fF(r,["function resolver(bytes32) view returns (address)"],t),i=await n.resolver(gk(e),{enableCcipRead:!0});if(i===gs)return null;return i}catch(t){throw t}}static async fromName(t,e){let r=e;for(;;){if(""===r||"."===r||"eth"!==e&&"eth"===r)return null;let n=await pr.#t_(t,r);if(null!=n){let i=new pr(t,n,e);if(r!==e&&!await i.supportsWildcard())return null;return i}r=r.split(".").slice(1).join(".")}}}const pn=BigInt(0);function pi(t,e){return function(r){return null==r?e:t(r)}}function ps(t,e){return r=>{if(e&&null==r)return null;if(!Array.isArray(r))throw Error("not an array");return r.map(e=>t(e))}}function po(t,e){return r=>{let n={};for(let i in t){let s=i;if(e&&i in e&&!(s in r)){for(let t of e[i])if(t in r){s=t;break}}try{let e=t[i](r[s]);void 0!==e&&(n[i]=e)}catch(e){let t=e instanceof Error?e.message:"not-an-error";lG(!1,`invalid value for value.${i} (${t})`,"BAD_DATA",{value:r})}}return n}}function pa(t){return lj(l1(t,!0),"invalid data","value",t),t}function pl(t){return lj(l1(t,32),"invalid hash","value",t),t}const pu=po({address:hF,blockHash:pl,blockNumber:hn,data:pa,index:hn,removed:pi(function(t){switch(t){case!0:case"true":return!0;case!1:case"false":return!1}lj(!1,`invalid boolean; ${JSON.stringify(t)}`,"value",t)},!1),topics:ps(pl),transactionHash:pl,transactionIndex:hn},{index:["logIndex"]}),pc=po({hash:pi(pl),parentHash:pl,parentBeaconBlockRoot:pi(pl,null),number:hn,timestamp:hn,nonce:pi(pa),difficulty:c9,gasLimit:c9,gasUsed:c9,stateRoot:pi(pl,null),receiptsRoot:pi(pl,null),blobGasUsed:pi(c9,null),excessBlobGas:pi(c9,null),miner:pi(hF),prevRandao:pi(pl,null),extraData:pa,baseFeePerGas:pi(c9)},{prevRandao:["mixHash"]}),ph=po({transactionIndex:hn,blockNumber:hn,transactionHash:pl,address:hF,topics:ps(pl),data:pa,index:hn,blockHash:pl},{index:["logIndex"]}),pd=po({to:pi(hF,null),from:pi(hF,null),contractAddress:pi(hF,null),index:hn,root:pi(l3),gasUsed:c9,blobGasUsed:pi(c9,null),logsBloom:pi(pa),blockHash:pl,hash:pl,logs:ps(function(t){return ph(t)}),blockNumber:hn,cumulativeGasUsed:c9,effectiveGasPrice:pi(c9),blobGasPrice:pi(c9,null),status:pi(hn),type:pi(hn,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function pf(t){t.to&&c9(t.to)===pn&&(t.to="0x0000000000000000000000000000000000000000");let e=po({hash:pl,index:pi(hn,void 0),type:t=>"0x"===t||null==t?0:hn(t),accessList:pi(d6,null),blobVersionedHashes:pi(ps(pl,!0),null),authorizationList:pi(ps(t=>{let e;if(t.signature)e=t.signature;else{let r=t.yParity;"0x1b"===r?r=0:"0x1c"===r&&(r=1),e=Object.assign({},t,{yParity:r})}return{address:hF(t.address),chainId:c9(t.chainId),nonce:c9(t.nonce),signature:hp.from(e)}},!1),null),blockHash:pi(pl,null),blockNumber:pi(hn,null),transactionIndex:pi(hn,null),from:hF,gasPrice:pi(c9),maxPriorityFeePerGas:pi(c9),maxFeePerGas:pi(c9),maxFeePerBlobGas:pi(c9,null),gasLimit:c9,to:pi(hF,null),value:c9,nonce:hn,data:pa,creates:pi(hF,null),chainId:pi(c9,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(t);if(null==e.to&&null==e.creates&&(e.creates=function(t){let e=hF(t.from),r=c9(t.nonce,"tx.nonce").toString(16);return hF(l6(u_(gj([e,r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r])),12))}(e)),(1===t.type||2===t.type)&&null==t.accessList&&(e.accessList=[]),t.signature?e.signature=hp.from(t.signature):e.signature=hp.from(t),null==e.chainId){let t=e.signature.legacyChainId;null!=t&&(e.chainId=t)}return e.blockHash&&c9(e.blockHash)===pn&&(e.blockHash=null),e}class pg{name;constructor(t){lF(this,{name:t})}clone(){return new pg(this.name)}}class pp extends pg{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(t,e){null==t&&(t=0),super(`org.ethers.network.plugins.GasCost#${t||0}`);let r={effectiveBlock:t};function n(t,n){let i=(e||{})[t];null==i&&(i=n),lj("number"==typeof i,`invalud value for ${t}`,"costs",e),r[t]=i}n("txBase",21e3),n("txCreate",32e3),n("txDataZero",4),n("txDataNonzero",16),n("txAccessListStorageKey",1900),n("txAccessListAddress",2400),lF(this,r)}clone(){return new pp(this.effectiveBlock,this)}}class pm extends pg{address;targetNetwork;constructor(t,e){super("org.ethers.plugins.network.Ens"),lF(this,{address:t||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==e?1:e})}clone(){return new pm(this.address,this.targetNetwork)}}class pw extends pg{#G;#tS;get url(){return this.#G}get processFunc(){return this.#tS}constructor(t,e){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#G=t,this.#tS=e}clone(){return this}}const py=new Map;class pA{#tT;#td;#tv;constructor(t,e){this.#tT=t,this.#td=c9(e),this.#tv=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#tT}set name(t){this.#tT=t}get chainId(){return this.#td}set chainId(t){this.#td=c9(t,"chainId")}matches(t){if(null==t)return!1;if("string"==typeof t){try{return this.chainId===c9(t)}catch(t){}return this.name===t}if("number"==typeof t||"bigint"==typeof t){try{return this.chainId===c9(t)}catch(t){}return!1}if("object"==typeof t){if(null!=t.chainId){try{return this.chainId===c9(t.chainId)}catch(t){}return!1}if(null!=t.name)return this.name===t.name}return!1}get plugins(){return Array.from(this.#tv.values())}attachPlugin(t){if(this.#tv.get(t.name))throw Error(`cannot replace existing plugin: ${t.name} `);return this.#tv.set(t.name,t.clone()),this}getPlugin(t){return this.#tv.get(t)||null}getPlugins(t){return this.plugins.filter(e=>e.name.split("#")[0]===t)}clone(){let t=new pA(this.name,this.chainId);return this.plugins.forEach(e=>{t.attachPlugin(e.clone())}),t}computeIntrinsicGas(t){let e=this.getPlugin("org.ethers.plugins.network.GasCost")||new pp,r=e.txBase;if(null==t.to&&(r+=e.txCreate),t.data)for(let n=2;n<t.data.length;n+=2)"00"===t.data.substring(n,n+2)?r+=e.txDataZero:r+=e.txDataNonzero;if(t.accessList){let n=d6(t.accessList);for(let t in n)r+=e.txAccessListAddress+e.txAccessListStorageKey*n[t].storageKeys.length}return r}static from(t){if(function(){pC||(pC=!0,t("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),t("ropsten",3,{ensNetwork:3}),t("rinkeby",4,{ensNetwork:4}),t("goerli",5,{ensNetwork:5}),t("kovan",42,{ensNetwork:42}),t("sepolia",0xaa36a7,{ensNetwork:0xaa36a7}),t("holesky",17e3,{ensNetwork:17e3}),t("classic",61,{}),t("classicKotti",6,{}),t("arbitrum",42161,{ensNetwork:1}),t("arbitrum-goerli",421613,{}),t("arbitrum-sepolia",421614,{}),t("base",8453,{ensNetwork:1}),t("base-goerli",84531,{}),t("base-sepolia",84532,{}),t("bnb",56,{ensNetwork:1}),t("bnbt",97,{}),t("linea",59144,{ensNetwork:1}),t("linea-goerli",59140,{}),t("linea-sepolia",59141,{}),t("matic",137,{ensNetwork:1,plugins:[pb("https://gasstation.polygon.technology/v2")]}),t("matic-amoy",80002,{}),t("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[pb("https://gasstation-testnet.polygon.technology/v2")]}),t("optimism",10,{ensNetwork:1,plugins:[]}),t("optimism-goerli",420,{}),t("optimism-sepolia",0xaa37dc,{}),t("xdai",100,{ensNetwork:1}));function t(t,e,r){let n=function(){let n=new pA(t,e);return null!=r.ensNetwork&&n.attachPlugin(new pm(null,r.ensNetwork)),n.attachPlugin(new pp),(r.plugins||[]).forEach(t=>{n.attachPlugin(t)}),n};pA.register(t,n),pA.register(e,n),r.altNames&&r.altNames.forEach(t=>{pA.register(t,n)})}}(),null==t)return pA.from("mainnet");if("number"==typeof t&&(t=BigInt(t)),"string"==typeof t||"bigint"==typeof t){let e=py.get(t);if(e)return e();if("bigint"==typeof t)return new pA("unknown",t);lj(!1,"unknown network","network",t)}if("function"==typeof t.clone)return t.clone();if("object"==typeof t){lj("string"==typeof t.name&&"number"==typeof t.chainId,"invalid network object name or chainId","network",t);let e=new pA(t.name,t.chainId);return(t.ensAddress||null!=t.ensNetwork)&&e.attachPlugin(new pm(t.ensAddress,t.ensNetwork)),e}lj(!1,"invalid network","network",t)}static register(t,e){"number"==typeof t&&(t=BigInt(t));let r=py.get(t);r&&lj(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",t),py.set(t,e)}}function pE(t,e){let r=String(t);if(!r.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${t}`);let n=r.split(".");if(1===n.length&&n.push(""),2!==n.length)throw Error(`invalid gwei value: ${t}`);for(;n[1].length<e;)n[1]+="0";if(n[1].length>9){let t=BigInt(n[1].substring(0,9));!n[1].substring(9).match(/^0+$/)&&t++,n[1]=t.toString()}return BigInt(n[0]+n[1])}function pb(t){return new pw(t,async(t,e,r)=>{let n;r.setHeader("User-Agent","ethers");try{let[e,i]=await Promise.all([r.send(),t()]),s=(n=e).bodyJson.standard;return{gasPrice:i.gasPrice,maxFeePerGas:pE(s.maxFee,9),maxPriorityFeePerGas:pE(s.maxPriorityFee,9)}}catch(t){lG(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:n,error:t})}})}let pC=!1;function pI(t){return JSON.parse(JSON.stringify(t))}class p_{#tN;#tR;#tO;#tD;constructor(t){this.#tN=t,this.#tR=null,this.#tO=4e3,this.#tD=-2}get pollingInterval(){return this.#tO}set pollingInterval(t){this.#tO=t}async #tM(){try{let t=await this.#tN.getBlockNumber();if(-2===this.#tD){this.#tD=t;return}if(t!==this.#tD){for(let e=this.#tD+1;e<=t;e++){if(null==this.#tR)return;await this.#tN.emit("block",e)}this.#tD=t}}catch(t){}null!=this.#tR&&(this.#tR=this.#tN._setTimeout(this.#tM.bind(this),this.#tO))}start(){this.#tR||(this.#tR=this.#tN._setTimeout(this.#tM.bind(this),this.#tO),this.#tM())}stop(){this.#tR&&(this.#tN._clearTimeout(this.#tR),this.#tR=null)}pause(t){this.stop(),t&&(this.#tD=-2)}resume(){this.start()}}class pS{#tN;#tM;#tx;constructor(t){this.#tN=t,this.#tx=!1,this.#tM=t=>{this._poll(t,this.#tN)}}async _poll(t,e){throw Error("sub-classes must override this")}start(){this.#tx||(this.#tx=!0,this.#tM(-2),this.#tN.on("block",this.#tM))}stop(){this.#tx&&(this.#tx=!1,this.#tN.off("block",this.#tM))}pause(t){this.stop()}resume(){this.start()}}class pT extends pS{#tB;#tP;constructor(t,e){super(t),this.#tB=e,this.#tP=-2}pause(t){t&&(this.#tP=-2),super.pause(t)}async _poll(t,e){let r=await e.getBlock(this.#tB);null!=r&&(-2===this.#tP?this.#tP=r.number:r.number>this.#tP&&(e.emit(this.#tB,r.number),this.#tP=r.number))}}class pv extends pS{#D;constructor(t,e){super(t),this.#D=pI(e)}async _poll(t,e){throw Error("@TODO")}}class pN extends pS{#tL;constructor(t,e){super(t),this.#tL=e}async _poll(t,e){let r=await e.getTransactionReceipt(this.#tL);r&&e.emit(this.#tL,r)}}class pR{#tN;#D;#tR;#tx;#tD;constructor(t,e){this.#tN=t,this.#D=pI(e),this.#tR=this.#tM.bind(this),this.#tx=!1,this.#tD=-2}async #tM(t){if(-2===this.#tD)return;let e=pI(this.#D);e.fromBlock=this.#tD+1,e.toBlock=t;let r=await this.#tN.getLogs(e);if(0===r.length){this.#tD<t-60&&(this.#tD=t-60);return}for(let t of r)this.#tN.emit(this.#D,t),this.#tD=t.blockNumber}start(){this.#tx||(this.#tx=!0,-2===this.#tD&&this.#tN.getBlockNumber().then(t=>{this.#tD=t}),this.#tN.on("block",this.#tR))}stop(){this.#tx&&(this.#tx=!1,this.#tN.off("block",this.#tR))}pause(t){this.stop(),t&&(this.#tD=-2)}resume(){this.start()}}const pO=BigInt(2);function pD(t){return t&&"function"==typeof t.then}function pM(t,e){return t+":"+JSON.stringify(e,(t,e)=>{if(null==e)return"null";if("bigint"==typeof e)return`bigint:${e.toString()}`;if("string"==typeof e)return e.toLowerCase();if("object"==typeof e&&!Array.isArray(e)){let t=Object.keys(e);return t.sort(),t.reduce((t,r)=>(t[r]=e[r],t),{})}return e})}class px{name;constructor(t){lF(this,{name:t})}start(){}stop(){}pause(t){}resume(){}}function pB(t){return(t=Array.from(new Set(t).values())).sort(),t}async function pP(t,e){if(null==t)throw Error("invalid event");if(Array.isArray(t)&&(t={topics:t}),"string"==typeof t)switch(t){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:t,tag:t}}if(l1(t,32)){let e=t.toLowerCase();return{type:"transaction",tag:pM("tx",{hash:e}),hash:e}}if(t.orphan){let e=t;return{type:"orphan",tag:pM("orphan",e),filter:JSON.parse(JSON.stringify(e))}}if(t.address||t.topics){let r=t,n={topics:(r.topics||[]).map(t=>null==t?null:Array.isArray(t)?pB(t.map(t=>t.toLowerCase())):t.toLowerCase())};if(r.address){let t=[],i=[],s=r=>{l1(r)?t.push(r):i.push((async()=>{t.push(await d4(r,e))})())};Array.isArray(r.address)?r.address.forEach(s):s(r.address),i.length&&await Promise.all(i),n.address=pB(t.map(t=>t.toLowerCase()))}return{filter:n,tag:pM("event",n),type:"event"}}lj(!1,"unknown ProviderEvent","event",t)}function pL(){return new Date().getTime()}const pk={cacheTimeout:250,pollingInterval:4e3};class pF{#tk;#tv;#tF;#tU;#tH;#tV;#tz;#tG;#tj;#tQ;#tW;#p;constructor(t,e){if(this.#p=Object.assign({},pk,e||{}),"any"===t)this.#tV=!0,this.#tH=null;else if(t){let e=pA.from(t);this.#tV=!1,this.#tH=Promise.resolve(e),setTimeout(()=>{this.emit("network",e,null)},0)}else this.#tV=!1,this.#tH=null;this.#tG=-1,this.#tz=new Map,this.#tk=new Map,this.#tv=new Map,this.#tF=null,this.#tU=!1,this.#tj=1,this.#tQ=new Map,this.#tW=!1}get pollingInterval(){return this.#p.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#tv.values())}attachPlugin(t){if(this.#tv.get(t.name))throw Error(`cannot replace existing plugin: ${t.name} `);return this.#tv.set(t.name,t.connect(this)),this}getPlugin(t){return this.#tv.get(t)||null}get disableCcipRead(){return this.#tW}set disableCcipRead(t){this.#tW=!!t}async #tY(t){let e=this.#p.cacheTimeout;if(e<0)return await this._perform(t);let r=pM(t.method,t),n=this.#tz.get(r);return n||(n=this._perform(t),this.#tz.set(r,n),setTimeout(()=>{this.#tz.get(r)===n&&this.#tz.delete(r)},e)),await n}async ccipReadFetch(t,e,r){if(this.disableCcipRead||0===r.length||null==t.to)return null;let n=t.to.toLowerCase(),i=e.toLowerCase(),s=[];for(let e=0;e<r.length;e++){let o,a=r[e],l=new gr(a.replace("{sender}",n).replace("{data}",i));-1===a.indexOf("{data}")&&(l.body={data:i,sender:n}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:e,urls:r});let u="unknown error";try{o=await l.send()}catch(t){s.push(t.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:t}});continue}try{let t=o.bodyJson;if(t.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:t}),t.data;t.message&&(u=t.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:t})}catch(t){}lG(o.statusCode<400||o.statusCode>=500,`response not found during CCIP fetch: ${u}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:t,info:{url:a,errorMessage:u}}),s.push(u)}lG(!1,`error encountered during CCIP fetch: ${s.map(t=>JSON.stringify(t)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:t,info:{urls:r,errorMessages:s}})}_wrapBlock(t,e){return new fr(function(t){let e=pc(t);return e.transactions=t.transactions.map(t=>"string"==typeof t?t:pf(t)),e}(t),this)}_wrapLog(t,e){return new fn(pu(t),this)}_wrapTransactionReceipt(t,e){return new fi(pd(t),this)}_wrapTransactionResponse(t,e){return new fs(pf(t),this)}_detectNetwork(){lG(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(t){lG(!1,`unsupported method: ${t.method}`,"UNSUPPORTED_OPERATION",{operation:t.method,info:t})}async getBlockNumber(){let t=hn(await this.#tY({method:"getBlockNumber"}),"%response");return this.#tG>=0&&(this.#tG=t),t}_getAddress(t){return d4(t,this)}_getBlockTag(t){if(null==t)return"latest";switch(t){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return t}return l1(t)?l1(t,32)?t:ho(t):("bigint"==typeof t&&(t=hn(t,"blockTag")),"number"==typeof t)?t>=0?ho(t):this.#tG>=0?ho(this.#tG+t):this.getBlockNumber().then(e=>ho(e+t)):void lj(!1,"invalid blockTag","blockTag",t)}_getFilter(t){let e,r,n=(t.topics||[]).map(t=>null==t?null:Array.isArray(t)?pB(t.map(t=>t.toLowerCase())):t.toLowerCase()),i="blockHash"in t?t.blockHash:void 0,s=(t,e,r)=>{let s;switch(t.length){case 0:break;case 1:s=t[0];break;default:t.sort(),s=t}if(i&&(null!=e||null!=r))throw Error("invalid filter");let o={};return s&&(o.address=s),n.length&&(o.topics=n),e&&(o.fromBlock=e),r&&(o.toBlock=r),i&&(o.blockHash=i),o},o=[];if(t.address)if(Array.isArray(t.address))for(let e of t.address)o.push(this._getAddress(e));else o.push(this._getAddress(t.address));return"fromBlock"in t&&(e=this._getBlockTag(t.fromBlock)),("toBlock"in t&&(r=this._getBlockTag(t.toBlock)),o.filter(t=>"string"!=typeof t).length||null!=e&&"string"!=typeof e||null!=r&&"string"!=typeof r)?Promise.all([Promise.all(o),e,r]).then(t=>s(t[0],t[1],t[2])):s(o,e,r)}_getTransactionRequest(t){let e=fe(t),r=[];if(["to","from"].forEach(t=>{if(null==e[t])return;let n=d4(e[t],this);pD(n)?r.push(async function(){e[t]=await n}()):e[t]=n}),null!=e.blockTag){let t=this._getBlockTag(e.blockTag);pD(t)?r.push(async function(){e.blockTag=await t}()):e.blockTag=t}return r.length?async function(){return await Promise.all(r),e}():e}async getNetwork(){if(null==this.#tH){let t=(async()=>{try{let t=await this._detectNetwork();return this.emit("network",t,null),t}catch(e){throw this.#tH===t&&(this.#tH=null),e}})();return this.#tH=t,(await t).clone()}let t=this.#tH,[e,r]=await Promise.all([t,this._detectNetwork()]);return e.chainId!==r.chainId&&(this.#tV?(this.emit("network",r,e),this.#tH===t&&(this.#tH=Promise.resolve(r))):lG(!1,`network changed: ${e.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),e.clone()}async getFeeData(){let t=await this.getNetwork(),e=async()=>{let{_block:e,gasPrice:r,priorityFee:n}=await lk({_block:this.#tX("latest",!1),gasPrice:(async()=>{try{let t=await this.#tY({method:"getGasPrice"});return c9(t,"%response")}catch(t){}return null})(),priorityFee:(async()=>{try{let t=await this.#tY({method:"getPriorityFee"});return c9(t,"%response")}catch(t){}return null})()}),i=null,s=null,o=this._wrapBlock(e,t);return o&&o.baseFeePerGas&&(s=null!=n?n:BigInt("1000000000"),i=o.baseFeePerGas*pO+s),new ft(r,i,s)},r=t.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let t=new gr(r.url),n=await r.processFunc(e,this,t);return new ft(n.gasPrice,n.maxFeePerGas,n.maxPriorityFeePerGas)}return await e()}async estimateGas(t){let e=this._getTransactionRequest(t);return pD(e)&&(e=await e),c9(await this.#tY({method:"estimateGas",transaction:e}),"%response")}async #tq(t,e,r){lG(r<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},t,{blockTag:e,enableCcipRead:!0})});let n=fe(t);try{return l3(await this._perform({method:"call",transaction:n,blockTag:e}))}catch(t){if(!this.disableCcipRead&&lV(t)&&t.data&&r>=0&&"latest"===e&&null!=n.to&&"0x556f1830"===l6(t.data,0,4)){let i,s=t.data,o=await d4(n.to,this);try{i=function(t){let e={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};lG(l8(t)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let r=l6(t,0,32);lG(l6(r,0,12)===l6(pz,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),e.sender=l6(r,12);try{let r=[],n=hn(l6(t,32,64)),i=hn(l6(t,n,n+32)),s=l6(t,n+32);for(let t=0;t<i;t++){let e=function(t,e){try{let r=pU(t,e);if(r)return hE(r)}catch(t){}return null}(s,32*t);if(null==e)throw Error("abort");r.push(e)}e.urls=r}catch(t){lG(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=pU(t,64);if(null==r)throw Error("abort");e.calldata=r}catch(t){lG(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}lG(l6(t,100,128)===l6(pz,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),e.selector=l6(t,96,100);try{let r=pU(t,128);if(null==r)throw Error("abort");e.extraData=r}catch(t){lG(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return e.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(t=>e[t]),e}(l6(t.data,4))}catch(t){lG(!1,t.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:n,info:{data:s}})}lG(i.sender.toLowerCase()===o.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:n,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:i.errorArgs}});let a=await this.ccipReadFetch(n,i.calldata,i.urls);lG(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:n,info:{data:t.data,errorArgs:i.errorArgs}});let l={to:o,data:l4([i.selector,function(t){let e=[],r=0;for(let n=0;n<t.length;n++)e.push(pV),r+=32;for(let n=0;n<t.length;n++){let i=lJ(t[n]);e[n]=pH(r),e.push(pH(i.length)),e.push(function(t){if(t.length%32==0)return t;let e=new Uint8Array(32*Math.ceil(t.length/32));return e.set(t),e}(i)),r+=32+32*Math.ceil(i.length/32)}return l4(e)}([a,i.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{let t=await this.#tq(l,e,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:t}),t}catch(t){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:t}),t}}throw t}}async #tK(t){let{value:e}=await lk({network:this.getNetwork(),value:t});return e}async call(t){let{tx:e,blockTag:r}=await lk({tx:this._getTransactionRequest(t),blockTag:this._getBlockTag(t.blockTag)});return await this.#tK(this.#tq(e,r,t.enableCcipRead?0:-1))}async #tZ(t,e,r){let n=this._getAddress(e),i=this._getBlockTag(r);return("string"!=typeof n||"string"!=typeof i)&&([n,i]=await Promise.all([n,i])),await this.#tK(this.#tY(Object.assign(t,{address:n,blockTag:i})))}async getBalance(t,e){return c9(await this.#tZ({method:"getBalance"},t,e),"%response")}async getTransactionCount(t,e){return hn(await this.#tZ({method:"getTransactionCount"},t,e),"%response")}async getCode(t,e){return l3(await this.#tZ({method:"getCode"},t,e))}async getStorage(t,e,r){let n=c9(e,"position");return l3(await this.#tZ({method:"getStorage",position:n},t,r))}async broadcastTransaction(t){let{blockNumber:e,hash:r,network:n}=await lk({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:t}),network:this.getNetwork()}),i=g8.from(t);if(i.hash!==r)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,n).replaceableTransaction(e)}async #tX(t,e){if(l1(t,32))return await this.#tY({method:"getBlock",blockHash:t,includeTransactions:e});let r=this._getBlockTag(t);return"string"!=typeof r&&(r=await r),await this.#tY({method:"getBlock",blockTag:r,includeTransactions:e})}async getBlock(t,e){let{network:r,params:n}=await lk({network:this.getNetwork(),params:this.#tX(t,!!e)});return null==n?null:this._wrapBlock(n,r)}async getTransaction(t){let{network:e,params:r}=await lk({network:this.getNetwork(),params:this.#tY({method:"getTransaction",hash:t})});return null==r?null:this._wrapTransactionResponse(r,e)}async getTransactionReceipt(t){let{network:e,params:r}=await lk({network:this.getNetwork(),params:this.#tY({method:"getTransactionReceipt",hash:t})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){let e=await this.#tY({method:"getTransaction",hash:t});if(null==e)throw Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=e.gasPrice}return this._wrapTransactionReceipt(r,e)}async getTransactionResult(t){let{result:e}=await lk({network:this.getNetwork(),result:this.#tY({method:"getTransactionResult",hash:t})});return null==e?null:l3(e)}async getLogs(t){let e=this._getFilter(t);pD(e)&&(e=await e);let{network:r,params:n}=await lk({network:this.getNetwork(),params:this.#tY({method:"getLogs",filter:e})});return n.map(t=>this._wrapLog(t,r))}_getProvider(t){lG(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(t){return await pr.fromName(this,t)}async getAvatar(t){let e=await this.getResolver(t);return e?await e.getAvatar():null}async resolveName(t){let e=await this.getResolver(t);return e?await e.getAddress():null}async lookupAddress(t){let e=gk((t=hF(t)).substring(2).toLowerCase()+".addr.reverse");try{let r=await pr.getEnsAddress(this),n=new fF(r,["function resolver(bytes32) view returns (address)"],this),i=await n.resolver(e);if(null==i||i===gs)return null;let s=new fF(i,["function name(bytes32) view returns (string)"],this),o=await s.name(e);if(await this.resolveName(o)!==t)return null;return o}catch(t){if(lH(t,"BAD_DATA")&&"0x"===t.value||lH(t,"CALL_EXCEPTION"))return null;throw t}}async waitForTransaction(t,e,r){let n=null!=e?e:1;return 0===n?this.getTransactionReceipt(t):new Promise(async(e,i)=>{let s=null,o=async r=>{try{let i=await this.getTransactionReceipt(t);if(null!=i&&r-i.blockNumber+1>=n){e(i),s&&(clearTimeout(s),s=null);return}}catch(t){console.log("EEE",t)}this.once("block",o)};null!=r&&(s=setTimeout(()=>{null!=s&&(s=null,this.off("block",o),i(lz("timeout","TIMEOUT",{reason:"timeout"})))},r)),o(await this.getBlockNumber())})}async waitForBlock(t){lG(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(t){let e=this.#tQ.get(t);e&&(e.timer&&clearTimeout(e.timer),this.#tQ.delete(t))}_setTimeout(t,e){null==e&&(e=0);let r=this.#tj++,n=()=>{this.#tQ.delete(r),t()};if(this.paused)this.#tQ.set(r,{timer:null,func:n,time:e});else{let t=setTimeout(n,e);this.#tQ.set(r,{timer:t,func:n,time:pL()})}return r}_forEachSubscriber(t){for(let e of this.#tk.values())t(e.subscriber)}_getSubscriber(t){switch(t.type){case"debug":case"error":case"network":return new px(t.type);case"block":{let t=new p_(this);return t.pollingInterval=this.pollingInterval,t}case"safe":case"finalized":return new pT(this,t.type);case"event":return new pR(this,t.filter);case"transaction":return new pN(this,t.hash);case"orphan":return new pv(this,t.filter)}throw Error(`unsupported event: ${t.type}`)}_recoverSubscriber(t,e){for(let r of this.#tk.values())if(r.subscriber===t){r.started&&r.subscriber.stop(),r.subscriber=e,r.started&&e.start(),null!=this.#tF&&e.pause(this.#tF);break}}async #tJ(t,e){let r=await pP(t,this);return"event"===r.type&&e&&e.length>0&&!0===e[0].removed&&(r=await pP({orphan:"drop-log",log:e[0]},this)),this.#tk.get(r.tag)||null}async #t$(t){let e=await pP(t,this),r=e.tag,n=this.#tk.get(r);if(!n){let t=this._getSubscriber(e);n={subscriber:t,tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#tk.set(r,n)}return n}async on(t,e){let r=await this.#t$(t);return r.listeners.push({listener:e,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#tF&&r.subscriber.pause(this.#tF)),this}async once(t,e){let r=await this.#t$(t);return r.listeners.push({listener:e,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#tF&&r.subscriber.pause(this.#tF)),this}async emit(t,...e){let r=await this.#tJ(t,e);if(!r||0===r.listeners.length)return!1;let n=r.listeners.length;return r.listeners=r.listeners.filter(({listener:r,once:n})=>{let i=new fl(this,n?null:r,t);try{r.call(this,...e,i)}catch(t){}return!n}),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#tk.delete(r.tag)),n>0}async listenerCount(t){if(t){let e=await this.#tJ(t);return e?e.listeners.length:0}let e=0;for(let{listeners:t}of this.#tk.values())e+=t.length;return e}async listeners(t){if(t){let e=await this.#tJ(t);return e?e.listeners.map(({listener:t})=>t):[]}let e=[];for(let{listeners:t}of this.#tk.values())e=e.concat(t.map(({listener:t})=>t));return e}async off(t,e){let r=await this.#tJ(t);if(!r)return this;if(e){let t=r.listeners.map(({listener:t})=>t).indexOf(e);t>=0&&r.listeners.splice(t,1)}return e&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#tk.delete(r.tag)),this}async removeAllListeners(t){if(t){let{tag:e,started:r,subscriber:n}=await this.#t$(t);r&&n.stop(),this.#tk.delete(e)}else for(let[t,{started:e,subscriber:r}]of this.#tk)e&&r.stop(),this.#tk.delete(t);return this}async addListener(t,e){return await this.on(t,e)}async removeListener(t,e){return this.off(t,e)}get destroyed(){return this.#tU}destroy(){for(let t of(this.removeAllListeners(),this.#tQ.keys()))this._clearTimeout(t);this.#tU=!0}get paused(){return null!=this.#tF}set paused(t){!!t!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(t){if(this.#tG=-1,null!=this.#tF){if(!!t==this.#tF)return;lG(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let e of(this._forEachSubscriber(e=>e.pause(t)),this.#tF=!!t,this.#tQ.values()))e.timer&&clearTimeout(e.timer),e.time=pL()-e.time}resume(){if(null!=this.#tF)for(let t of(this._forEachSubscriber(t=>t.resume()),this.#tF=null,this.#tQ.values())){let e=t.time;e<0&&(e=0),t.time=pL(),setTimeout(t.func,e)}}}function pU(t,e){if("0x"===t)return null;try{let r=hn(l6(t,e,e+32)),n=hn(l6(t,r,r+32));return l6(t,r+32,r+32+n)}catch(t){}return null}function pH(t){let e=hs(t);if(e.length>32)throw Error("internal; should not happen");let r=new Uint8Array(32);return r.set(e,32-e.length),r}const pV=new Uint8Array([]),pz="0x0000000000000000000000000000000000000000000000000000000000000000";function pG(t,e){if(t.provider)return t.provider;lG(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:e})}async function pj(t,e){let r=fe(e);if(null!=r.to&&(r.to=d4(r.to,t)),null!=r.from){let e=r.from;r.from=Promise.all([t.getAddress(),d4(e,t)]).then(([t,e])=>(lj(t.toLowerCase()===e.toLowerCase(),"transaction from mismatch","tx.from",e),t))}else r.from=t.getAddress();return await lk(r)}class pQ{provider;constructor(t){lF(this,{provider:t||null})}async getNonce(t){return pG(this,"getTransactionCount").getTransactionCount(await this.getAddress(),t)}async populateCall(t){return await pj(this,t)}async populateTransaction(t){let e=pG(this,"populateTransaction"),r=await pj(this,t);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));let n=await this.provider.getNetwork();null!=r.chainId?lj(c9(r.chainId)===n.chainId,"transaction chainId mismatch","tx.chainId",t.chainId):r.chainId=n.chainId;let i=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||i)?lj(!1,"eip-1559 transaction do not support gasPrice","tx",t):(0===r.type||1===r.type)&&i&&lj(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",t),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type){let t=await e.getFeeData();lG(null!=t.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice)}else{let t=await e.getFeeData();if(null==r.type)if(null!=t.maxFeePerGas&&null!=t.maxPriorityFeePerGas)if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,null!=r.gasPrice){let t=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=t,r.maxPriorityFeePerGas=t}else null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas);else null!=t.gasPrice?(lG(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=t.gasPrice),r.type=0):lG(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else(2===r.type||3===r.type||4===r.type)&&(null==r.maxFeePerGas&&(r.maxFeePerGas=t.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=t.maxPriorityFeePerGas))}return await lk(r)}async populateAuthorization(t){let e=Object.assign({},t);return null==e.chainId&&(e.chainId=(await pG(this,"getNetwork").getNetwork()).chainId),null==e.nonce&&(e.nonce=await this.getNonce()),e}async estimateGas(t){return pG(this,"estimateGas").estimateGas(await this.populateCall(t))}async call(t){return pG(this,"call").call(await this.populateCall(t))}async resolveName(t){let e=pG(this,"resolveName");return await e.resolveName(t)}async sendTransaction(t){let e=pG(this,"sendTransaction"),r=await this.populateTransaction(t);delete r.from;let n=g8.from(r);return await e.broadcastTransaction(await this.signTransaction(n))}authorize(t){lG(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}class pW{#tN;#t1;#tR;#tx;#t0;#t2;constructor(t){this.#tN=t,this.#t1=null,this.#tR=this.#tM.bind(this),this.#tx=!1,this.#t0=null,this.#t2=!1}_subscribe(t){throw Error("subclasses must override this")}_emitResults(t,e){throw Error("subclasses must override this")}_recover(t){throw Error("subclasses must override this")}async #tM(t){try{null==this.#t1&&(this.#t1=this._subscribe(this.#tN));let t=null;try{t=await this.#t1}catch(t){if(!lH(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==t){this.#t1=null,this.#tN._recoverSubscriber(this,this._recover(this.#tN));return}let e=await this.#tN.getNetwork();if(this.#t0||(this.#t0=e),this.#t0.chainId!==e.chainId)throw Error("chaid changed");if(this.#t2)return;let r=await this.#tN.send("eth_getFilterChanges",[t]);await this._emitResults(this.#tN,r)}catch(t){console.log("@TODO",t)}this.#tN.once("block",this.#tR)}#t3(){let t=this.#t1;t&&(this.#t1=null,t.then(t=>{this.#tN.destroyed||this.#tN.send("eth_uninstallFilter",[t])}))}start(){this.#tx||(this.#tx=!0,this.#tM(-2))}stop(){this.#tx&&(this.#tx=!1,this.#t2=!0,this.#t3(),this.#tN.off("block",this.#tR))}pause(t){t&&this.#t3(),this.#tN.off("block",this.#tR)}resume(){this.start()}}class pY extends pW{#t4;constructor(t,e){super(t),this.#t4=JSON.parse(JSON.stringify(e))}_recover(t){return new pR(t,this.#t4)}async _subscribe(t){return await t.send("eth_newFilter",[this.#t4])}async _emitResults(t,e){for(let r of e)t.emit(this.#t4,t._wrapLog(r,t._network))}}class pX extends pW{async _subscribe(t){return await t.send("eth_newPendingTransactionFilter",[])}async _emitResults(t,e){for(let r of e)t.emit("pending",r)}}const pq="bigint,boolean,function,number,string,symbol".split(/,/g);function pK(t){if(null==t||pq.indexOf(typeof t)>=0||"function"==typeof t.getAddress)return t;if(Array.isArray(t))return t.map(pK);if("object"==typeof t)return Object.keys(t).reduce((e,r)=>(e[r]=t[r],e),{});throw Error(`should not happen: ${t} (${typeof t})`)}function pZ(t){return t?t.toLowerCase():t}function pJ(t){return t&&"number"==typeof t.pollingInterval}const p$={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class p1 extends pQ{address;constructor(t,e){super(t),lF(this,{address:e=hF(e)})}connect(t){lG(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(t){return await this.populateCall(t)}async sendUncheckedTransaction(t){let e=pK(t),r=[];if(e.from){let n=e.from;r.push((async()=>{let r=await d4(n,this.provider);lj(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r})())}else e.from=this.address;if(null==e.gasLimit&&r.push((async()=>{e.gasLimit=await this.provider.estimateGas({...e,from:this.address})})()),null!=e.to){let t=e.to;r.push((async()=>{e.to=await d4(t,this.provider)})())}r.length&&await Promise.all(r);let n=this.provider.getRpcTransaction(e);return this.provider.send("eth_sendTransaction",[n])}async sendTransaction(t){let e=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(t);return await new Promise((t,n)=>{let i=[1e3,100],s=0,o=async()=>{try{let n=await this.provider.getTransaction(r);if(null!=n)return void t(n.replaceableTransaction(e))}catch(t){if(lH(t,"CANCELLED")||lH(t,"BAD_DATA")||lH(t,"NETWORK_ERROR")||lH(t,"UNSUPPORTED_OPERATION")){null==t.info&&(t.info={}),t.info.sendTransactionHash=r,n(t);return}if(lH(t,"INVALID_ARGUMENT")&&(s++,null==t.info&&(t.info={}),t.info.sendTransactionHash=r,s>10))return void n(t);this.provider.emit("error",lz("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:t}))}this.provider._setTimeout(()=>{o()},i.pop()||4e3)};o()})}async signTransaction(t){let e=pK(t);if(e.from){let r=await d4(e.from,this.provider);lj(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",t),e.from=r}else e.from=this.address;let r=this.provider.getRpcTransaction(e);return await this.provider.send("eth_signTransaction",[r])}async signMessage(t){let e="string"==typeof t?hA(t):t;return await this.provider.send("personal_sign",[l3(e),this.address.toLowerCase()])}async signTypedData(t,e,r){let n=pK(r),i=await f$.resolveNames(t,e,n,async t=>{let e=await d4(t);return lj(null!=e,"TypedData does not support null address","value",t),e});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(f$.getPayload(i.domain,e,i.value))])}async unlock(t){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),t,null])}async _legacySignMessage(t){let e="string"==typeof t?hA(t):t;return await this.provider.send("eth_sign",[this.address.toLowerCase(),l3(e)])}}class p0 extends pF{#p;#t8;#t6;#t5;#t7;#t0;#t9;#et(){if(this.#t5)return;let t=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#t5=setTimeout(()=>{this.#t5=null;let t=this.#t6;for(this.#t6=[];t.length;){let e=[t.shift()];for(;t.length&&e.length!==this.#p.batchMaxCount;)if(e.push(t.shift()),JSON.stringify(e.map(t=>t.payload)).length>this.#p.batchMaxSize){t.unshift(e.pop());break}(async()=>{let t=1===e.length?e[0].payload:e.map(t=>t.payload);this.emit("debug",{action:"sendRpcPayload",payload:t});try{let r=await this._send(t);for(let{resolve:t,reject:n,payload:i}of(this.emit("debug",{action:"receiveRpcResult",result:r}),e)){if(this.destroyed){n(lz("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}let e=r.filter(t=>t.id===i.id)[0];if(null==e){let t=lz("missing response for request","BAD_DATA",{value:r,info:{payload:i}});this.emit("error",t),n(t);continue}if("error"in e){n(this.getRpcError(i,e));continue}t(e.result)}}catch(t){for(let{reject:r}of(this.emit("debug",{action:"receiveRpcError",error:t}),e))r(t)}})()}},t)}constructor(t,e){super(t,e),this.#t8=1,this.#p=Object.assign({},p$,e||{}),this.#t6=[],this.#t5=null,this.#t0=null,this.#t9=null;{let t=null,e=new Promise(e=>{t=e});this.#t7={promise:e,resolve:t}}let r=this._getOption("staticNetwork");"boolean"==typeof r?(lj(!r||"any"!==t,"staticNetwork cannot be used on special network 'any'","options",e),r&&null!=t&&(this.#t0=pA.from(t))):r&&(lj(null==t||r.matches(t),"staticNetwork MUST match network object","options",e),this.#t0=r)}_getOption(t){return this.#p[t]}get _network(){return lG(this.#t0,"network is not available yet","NETWORK_ERROR"),this.#t0}async _perform(t){if("call"===t.method||"estimateGas"===t.method){let e=t.transaction;if(e&&null!=e.type&&c9(e.type)&&null==e.maxFeePerGas&&null==e.maxPriorityFeePerGas){let r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(t=Object.assign({},t,{transaction:Object.assign({},e,{type:void 0})}))}}let e=this.getRpcRequest(t);return null!=e?await this.send(e.method,e.args):super._perform(t)}async _detectNetwork(){let t=this._getOption("staticNetwork");if(t){if(!0!==t)return t;else if(this.#t0)return this.#t0}return this.#t9||(this.ready?this.#t9=(async()=>{try{let t=pA.from(c9(await this.send("eth_chainId",[])));return this.#t9=null,t}catch(t){throw this.#t9=null,t}})():this.#t9=(async()=>{let t,e={id:this.#t8++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:e});try{t=(await this._send(e))[0],this.#t9=null}catch(t){throw this.#t9=null,this.emit("debug",{action:"receiveRpcError",error:t}),t}if(this.emit("debug",{action:"receiveRpcResult",result:t}),"result"in t)return pA.from(c9(t.result));throw this.getRpcError(e,t)})()),await this.#t9}_start(){null!=this.#t7&&null!=this.#t7.resolve&&(this.#t7.resolve(),this.#t7=null,(async()=>{for(;null==this.#t0&&!this.destroyed;)try{this.#t0=await this._detectNetwork()}catch(t){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",lz("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:t}})),await new Promise(t=>{setTimeout(t,1e3)})}this.#et()})())}async _waitUntilReady(){if(null!=this.#t7)return await this.#t7.promise}_getSubscriber(t){return"pending"===t.type?new pX(this):"event"===t.type?this._getOption("polling")?new pR(this,t.filter):new pY(this,t.filter):"orphan"===t.type&&"drop-log"===t.filter.orphan?new px("orphan"):super._getSubscriber(t)}get ready(){return null==this.#t7}getRpcTransaction(t){let e={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==t[r])return;let n=r;"gasLimit"===r&&(n="gas"),e[n]=ho(c9(t[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{null!=t[r]&&(e[r]=l3(t[r]))}),t.accessList&&(e.accessList=d6(t.accessList)),t.blobVersionedHashes&&(e.blobVersionedHashes=t.blobVersionedHashes.map(t=>t.toLowerCase())),t.authorizationList&&(e.authorizationList=t.authorizationList.map(t=>{let e=f1(t);return{address:e.address,nonce:ho(e.nonce),chainId:ho(e.chainId),yParity:ho(e.signature.yParity),r:ho(e.signature.r),s:ho(e.signature.s)}})),e}getRpcRequest(t){switch(t.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[pZ(t.address),t.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[pZ(t.address),t.blockTag]};case"getCode":return{method:"eth_getCode",args:[pZ(t.address),t.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[pZ(t.address),"0x"+t.position.toString(16),t.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[t.signedTransaction]};case"getBlock":if("blockTag"in t)return{method:"eth_getBlockByNumber",args:[t.blockTag,!!t.includeTransactions]};if("blockHash"in t)return{method:"eth_getBlockByHash",args:[t.blockHash,!!t.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[t.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[t.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(t.transaction),t.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(t.transaction)]};case"getLogs":return t.filter&&null!=t.filter.address&&(Array.isArray(t.filter.address)?t.filter.address=t.filter.address.map(pZ):t.filter.address=pZ(t.filter.address)),{method:"eth_getLogs",args:[t.filter]}}return null}getRpcError(t,e){let{method:r}=t,{error:n}=e;if("eth_estimateGas"===r&&n.message){let e=n.message;if(!e.match(/revert/i)&&e.match(/insufficient funds/i))return lz("insufficient funds","INSUFFICIENT_FUNDS",{transaction:t.params[0],info:{payload:t,error:n}});if(e.match(/nonce/i)&&e.match(/too low/i))return lz("nonce has already been used","NONCE_EXPIRED",{transaction:t.params[0],info:{payload:t,error:n}})}if("eth_call"===r||"eth_estimateGas"===r){let e=function t(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&l1(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(let r in e){let n=t(e[r]);if(n)return n}return null}if("string"==typeof e)try{return t(JSON.parse(e))}catch(t){}return null}(n),i=dX.getBuiltinCallException("eth_call"===r?"call":"estimateGas",t.params[0],e?e.data:null);return i.info={error:n,payload:t},i}let i=JSON.stringify(function(t){let e=[];return!function t(e,r){if(null!=e){if("string"==typeof e.message&&r.push(e.message),"object"==typeof e)for(let n in e)t(e[n],r);if("string"==typeof e)try{return t(JSON.parse(e),r)}catch(t){}}}(t,e),e}(n));if("string"==typeof n.message&&n.message.match(/user denied|ethers-user-denied/i))return lz("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:t,error:n}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){let e=t.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return lz("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:e,info:{error:n}});if(i.match(/nonce/i)&&i.match(/too low/i))return lz("nonce has already been used","NONCE_EXPIRED",{transaction:e,info:{error:n}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return lz("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:e,info:{error:n}});if(i.match(/only replay-protected/i))return lz("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:e,info:{error:n}}})}let s=!!i.match(/the method .* does not exist/i);return(!s&&n&&n.details&&n.details.startsWith("Unauthorized method:")&&(s=!0),s)?lz("unsupported operation","UNSUPPORTED_OPERATION",{operation:t.method,info:{error:n,payload:t}}):lz("could not coalesce error","UNKNOWN_ERROR",{error:n,payload:t})}send(t,e){if(this.destroyed)return Promise.reject(lz("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t}));let r=this.#t8++,n=new Promise((n,i)=>{this.#t6.push({resolve:n,reject:i,payload:{method:t,params:e,id:r,jsonrpc:"2.0"}})});return this.#et(),n}async getSigner(t){null==t&&(t=0);let e=this.send("eth_accounts",[]);if("number"==typeof t){let r=await e;if(t>=r.length)throw Error("no such account");return new p1(this,r[t])}let{accounts:r}=await lk({network:this.getNetwork(),accounts:e});for(let e of(t=hF(t),r))if(hF(e)===t)return new p1(this,t);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(t=>new p1(this,t))}destroy(){for(let{payload:t,reject:e}of(this.#t5&&(clearTimeout(this.#t5),this.#t5=null),this.#t6))e(lz("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:t.method}));this.#t6=[],super.destroy()}}class p2 extends p0{#ee;constructor(t,e){super(t,e);let r=this._getOption("pollingInterval");null==r&&(r=p$.pollingInterval),this.#ee=r}_getSubscriber(t){let e=super._getSubscriber(t);return pJ(e)&&(e.pollingInterval=this.#ee),e}get pollingInterval(){return this.#ee}set pollingInterval(t){if(!Number.isInteger(t)||t<0)throw Error("invalid interval");this.#ee=t,this._forEachSubscriber(t=>{pJ(t)&&(t.pollingInterval=this.#ee)})}}class p3 extends p2{#er;constructor(t,e,r){null==t&&(t="http://localhost:8545"),super(e,r),"string"==typeof t?this.#er=new gr(t):this.#er=t.clone()}_getConnection(){return this.#er.clone()}async send(t,e){return await this._start(),await super.send(t,e)}async _send(t){let e=this._getConnection();e.body=JSON.stringify(t),e.setHeader("content-type","application/json");let r=await e.send();r.assertOk();let n=r.bodyJson;return Array.isArray(n)||(n=[n]),n}}const p4="0xF988A1b6d4C00832ed3570a4e50DdA4357a22F7D",p8={EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]},p6={Transfer:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"amount",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]};new class{constructor(){this.SITE_HOST=window.location.host,window.addEventListener("hashchange",this.handleHashChange.bind(this)),window.addEventListener("load",this.onLoad.bind(this))}async getProvider(){return this.provider||(this.provider=await m(s0)(),this.provider)?this.provider:null}showPage(t){document.querySelectorAll(".page").forEach(t=>{t.classList.add("d-none")});let e=document.getElementById(`page-${t}`);e&&e.classList.remove("d-none")}handleHashChange(){let[t]=window.location.hash.slice(1).split("?");switch(t){case"process":this.showPage("process");break;case"request":this.showPage("request");break;case"sign":this.showPage("sign");let e=new URLSearchParams(window.location.hash.split("?")[1]),r=e.get("address"),n=e.get("amount"),i=document.getElementById("sign-to-address"),s=document.getElementById("sign-amount");i&&r&&(i.value=r),s&&n&&(s.value=n);break;default:this.showPage("main")}}async onLoad(){this.handleHashChange(),this.addEventHandlers();let t=await this.getProvider();if(t&&t.request)try{let e=await t.request({method:"eth_requestAccounts"}),r=document.getElementById("request-eth-address");r&&e[0]&&(r.value=e[0]);let n=document.getElementById("sign-from-address");n&&e[0]&&(n.value=e[0])}catch(t){console.error("Failed to get Ethereum address:",t instanceof Error?t.message:String(t))}}addEventHandlers(){let t=document.getElementById("add-chiado-btn");t&&(t.onclick=this.handleAddChiado.bind(this));let e=document.getElementById("add-cqm-btn");e&&(e.onclick=this.handleAddCqm.bind(this));let r=document.getElementById("contract-address");r&&(r.onclick=this.handleCopyContractAddress.bind(this));let n=document.getElementById("generate-qr");n&&(n.onclick=this.handleGenerateQr.bind(this));let i=document.getElementById("sign-transfer-btn");i&&(i.onclick=this.handleSignTransfer.bind(this));let s=document.getElementById("start-qr-reader-btn");s&&(s.onclick=this.handleStartQrReader.bind(this))}async handleAddChiado(){let t=await this.getProvider();if(t&&t.request)try{await t.request({method:"wallet_addEthereumChain",params:[{chainId:"0x27d8",chainName:"Gnosis Chiado Testnet",nativeCurrency:{name:"XDAI",symbol:"XDAI",decimals:18},rpcUrls:["https://rpc.chiadochain.net"],blockExplorerUrls:["https://blockscout.chiadochain.net"]}]})}catch(t){alert("Failed to add Chiado Testnet: "+(t instanceof Error?t.message:String(t)))}else alert("MetaMask is not detected.")}async handleAddCqm(){let t=await this.getProvider();if(t&&t.request)try{await t.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:p4,symbol:"CQM",decimals:18,image:""}}})}catch(t){alert("Failed to add CQM token: "+(t instanceof Error?t.message:String(t)))}else alert("MetaMask is not detected.")}handleCopyContractAddress(){try{m(o$)(p4),alert("Contract address copied to clipboard!")}catch(t){alert("Failed to copy contract address to clipboard")}}handleGenerateQr(){let t=document.getElementById("request-eth-address"),e=document.getElementById("request-amount"),r=document.getElementById("request-qr-code-modal"),n=document.getElementById("qr-code-container");if(t&&e&&r&&n){let i=t.value,s=e.value;if(!i)return void alert("Ethereum address is required.");if(!s)return void alert("Request amount is required.");let o=`https://metamask.app.link/dapp/${this.SITE_HOST}#sign?address=${i}&amount=${s}`;try{n.innerHTML="",m(o2).toCanvas(o,{width:256},(t,e)=>{t||(n.appendChild(e),new iD(r).show())})}catch(t){alert("Failed to generate QR code: "+(t instanceof Error?t.message:String(t)))}}else alert("Required elements are missing.")}async handleSignTransfer(){let t=await this.getProvider();if(t&&t.request){let e=document.getElementById("sign-from-address"),r=document.getElementById("sign-to-address"),n=document.getElementById("sign-amount");if(!e||!r||!n)return void alert("Required fields are missing.");let i=e.value,s=r.value,o=n.value;if(!i||!s||!o)return void alert("All fields are required.");if(t&&t.request){let e=new p3("https://rpc.chiadochain.net"),r=new fF(p4,["function nonces(address owner) view returns (uint256)"],e),n=await r.nonces(i),a=await e.getBlock("latest");if(!a)throw Error("Failed to fetch the latest block.");let l=a.timestamp+86400,u=await t.request({method:"eth_requestAccounts"}),c={name:"MyETHMeta",version:"1",chainId:parseInt(await t.request({method:"eth_chainId"}),16),verifyingContract:p4},h={from:i,to:s,amount:o,nonce:n.toString(),deadline:l.toString()},d={types:{...p8,...p6},primaryType:"Transfer",domain:c,message:h};try{let e=await t.request({method:"eth_signTypedData_v4",params:[u[0],JSON.stringify(d)]}),r=document.getElementById("sign-qr-code-modal"),a=document.getElementById("sign-qr-code-container");if(r&&a){let t=`${i}:${s}:${o}:${n.toString()}:${l.toString()}:${e}`;try{a.innerHTML="",m(o2).toCanvas(t,{width:256},(t,e)=>{t||(a.appendChild(e),new iD(r).show())})}catch(e){let t=e instanceof Error?e.message:String(e);alert("Failed to generate QR code: "+t)}}}catch(t){alert("Signature request failed: "+(t instanceof Error?t.message:JSON.stringify(t)))}}else alert("MetaMask is not detected.")}}async handleStartQrReader(){let t=document.getElementById("qr-reader"),e=document.getElementById("qr-result");if(t&&e){t.innerHTML="";let r=new oO("qr-reader");r.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},t=>{e.value=t,r.stop();let n=t.split(":");if(6===n.length){let[t,e,r,i,s,o]=n;console.log("Parsed QR Code Data:",new Map([["fromAddress",t],["toAddress",e],["amount",r],["nonce",i],["deadline",s],["signature",o]]))}else console.error("Invalid QR Code format.")},t=>{console.warn(`QR Code scanning error: ${t}`)}).catch(t=>{console.error(`Failed to start QR Code scanning: ${t}`),alert("Failed to start QR Code scanning.")})}else alert("Required elements for QR Code scanning are missing.")}};
//# sourceMappingURL=CQM_ERC20_token.7ec61927.js.map
